(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[905],{12364:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return z}});var a=o(74220),s=o(97700),r=o(46732),l=o(57695),i=o(13986),n=o(88828),c=o.n(n);const u={class:"misc-list-page"},d={class:"q-mb-md"},p=["href"],b={class:"text-subtitle2"},m={class:"row justify-center q-mt-md"},f={class:"q-ml-sm text-caption"};var g=(0,a.pM)({__name:"list",setup(e){const t=(0,r.KR)(),o=(0,r.KR)(!1),n=(0,r.KR)([]),g=(0,r.KR)({page:1,size:10,total:0}),k=async()=>{o.value=!0;const e=await i.A.get(`/misc/getpagedata?page=${g.value.page}&size=${g.value.size}`);e?.Data?(n.value=e.Data,g.value.total=e.TotalCount||0):l.oR.error("获取数据失败",{autoClose:2e3,position:"top-center"}),o.value=!1},v=async e=>{const t=await i.A.get(`/misc/delete/${e.Id}`);t?.Success?(l.oR.success(t.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await k()):l.oR.error(t?.Message||"删除失败",{autoClose:2e3,position:"top-center"})};return(0,a.sV)(()=>{k()}),(e,l)=>{const i=(0,a.g2)("q-btn"),R=(0,a.g2)("vxe-column"),C=(0,a.g2)("q-tooltip"),_=(0,a.g2)("q-icon"),F=(0,a.g2)("q-card-section"),w=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),A=(0,a.g2)("q-popup-proxy"),h=(0,a.g2)("q-btn-group"),q=(0,a.g2)("vxe-table"),x=(0,a.g2)("q-pagination"),M=(0,a.g2)("q-select"),D=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",d,[(0,a.bF)(i,{color:"info",icon:"refresh",label:"刷新",onClick:k,loading:o.value},null,8,["loading"]),(0,a.bF)(i,{color:"primary",icon:"add",label:"新建杂项",class:"q-ml-sm",to:"/misc/write"})]),(0,a.bF)(q,{ref_key:"tableRef",ref:t,data:n.value,loading:o.value,stripe:"",border:""},{default:(0,a.k6)(()=>[(0,a.bF)(R,{field:"Title",title:"标题"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("a",{href:`/misc/${e.Id}`,target:"_blank",class:"text-primary"},(0,s.v_)(e.Title),9,p)]),_:1}),(0,a.bF)(R,{field:"PostDate",title:"发表时间",sortable:""},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,s.v_)((0,r.R1)(c())(e.PostDate).format("YYYY-MM-DD")),1)]),_:1}),(0,a.bF)(R,{field:"ModifyDate",title:"修改时间",sortable:""},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,s.v_)((0,r.R1)(c())(e.ModifyDate).format("YYYY-MM-DD")),1)]),_:1}),(0,a.bF)(R,{title:"操作",width:"150",align:"center",fixed:"right"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(h,{push:""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{dense:"",size:"md",color:"primary",icon:"edit",disable:o.value,to:`/misc/write?id=${e.Id}`},{default:(0,a.k6)(()=>[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[...l[2]||(l[2]=[(0,a.eW)("编辑",-1)])]),_:1})]),_:1},8,["disable","to"]),(0,a.bF)(i,{dense:"",size:"md",color:"negative",icon:"delete",disable:o.value},{default:(0,a.k6)(()=>[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[...l[3]||(l[3]=[(0,a.eW)("删除",-1)])]),_:1}),(0,a.bF)(A,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(()=>[(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"row items-center"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),(0,a.Lk)("div",null,[l[6]||(l[6]=(0,a.Lk)("div",{class:"text-h6"},"确认删除",-1)),(0,a.Lk)("div",b,[l[4]||(l[4]=(0,a.eW)("确认删除这条杂项吗？",-1)),l[5]||(l[5]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)((0,s.v_)(e.Title),1)])])]),_:2},1024),(0,a.bF)(w,{align:"right"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(i,{flat:"",label:"确认",color:"negative",onClick:t=>v(e)},null,8,["onClick"]),[[D]]),(0,a.bo)((0,a.bF)(i,{flat:"",label:"取消",color:"primary"},null,512),[[D]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["disable"])]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,a.Lk)("div",m,[(0,a.bF)(x,{modelValue:g.value.page,"onUpdate:modelValue":[l[0]||(l[0]=e=>g.value.page=e),k],max:Math.ceil(g.value.total/g.value.size),"max-pages":6,"direction-links":"","boundary-numbers":""},null,8,["modelValue","max"]),(0,a.bF)(M,{class:"q-ml-md",modelValue:g.value.size,"onUpdate:modelValue":[l[1]||(l[1]=e=>g.value.size=e),k],options:[10,20,50,100],dense:"",outlined:"",label:"每页显示",style:{width:"80px"}},null,8,["modelValue"]),(0,a.Lk)("span",f,"共 "+(0,s.v_)(g.value.total)+" 条",1)])]),_:1})]),_:1})])}}}),k=o(1317),v=o(63663),R=o(17180),C=o(20407),_=o(10258),F=o(76997),w=o(34854),y=o(64503),A=o(71248),h=o(74183),q=o(40975),x=o(60515),M=o(22110),D=o.n(M);const L=(0,k.A)(g,[["__scopeId","data-v-5bd49a0d"]]);var z=L;D()(g,"components",{QCard:v.A,QCardSection:R.A,QBtn:C.A,QBtnGroup:_.A,QTooltip:F.A,QPopupProxy:w.A,QIcon:y.A,QCardActions:A.A,QPagination:h.A,QSelect:q.A}),D()(g,"directives",{ClosePopup:x.A})},13986:function(e,t,o){"use strict";var a=o(74413),s=o(27454),r=o.n(s),l=o(76661),i=o(57695);const n=a.A.create({baseURL:l.c.baseURL,timeout:l.c.timeOut});n.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=r().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=n},42634:function(){}}]);