(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[443],{13986:function(e,o,t){"use strict";var r=t(13719),a=t.n(r),s=t(27454),n=t.n(s),l=t(76661),i=t(57695);const c=a().create({baseURL:l.c.baseURL,timeout:l.c.timeOut});c.interceptors.request.use(e=>{const o=sessionStorage.getItem("access_token");if(o&&(e.headers.Authorization="Bearer "+o),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=n().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),o.A=c},42634:function(){},49326:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return h}});var r=t(74061),a=t(57695),s=t(23508),n=t.n(s),l=t(13986);const i={class:"loginrecord-list-container"},c={class:"q-mt-md"},u={class:"q-mt-md flex justify-center items-center"};var d=(0,r.defineComponent)({__name:"loginrecord",setup(e){const o=(0,r.ref)(!1),t=(0,r.ref)([]),s=(0,r.ref)([]),d=(0,r.ref)({page:1,rowsPerPage:15,total:0}),p=()=>localStorage.getItem("userId")||"1",m=async()=>{o.value=!0;try{const e=p();if(!e)return void a.oR.error("无法获取用户信息",{autoClose:2e3,position:"top-center"});const o=await l.A.get(`/login/getrecent/${e}`);if(o){const e=o.Data||[],r=(d.value.page-1)*d.value.rowsPerPage,a=r+d.value.rowsPerPage;t.value=e.slice(r,a),d.value.total=e.length,s.value=e}}catch(e){console.error("加载登录记录失败:",e),a.oR.error("加载数据失败",{autoClose:2e3,position:"top-center"})}finally{o.value=!1}},g=()=>{d.value.page=1,f()},f=()=>{if(s.value.length>0){const e=(d.value.page-1)*d.value.rowsPerPage,o=e+d.value.rowsPerPage;t.value=s.value.slice(e,o)}};return(0,r.onMounted)(()=>{m()}),(e,a)=>{const s=(0,r.resolveComponent)("q-btn"),l=(0,r.resolveComponent)("q-btn-group"),p=(0,r.resolveComponent)("vxe-column"),f=(0,r.resolveComponent)("vxe-table"),v=(0,r.resolveComponent)("q-pagination"),C=(0,r.resolveComponent)("q-select");return(0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createVNode)(l,{push:""},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(s,{color:"info",icon:"refresh",onClick:m,loading:o.value},{default:(0,r.withCtx)(()=>[...a[2]||(a[2]=[(0,r.createTextVNode)(" 刷新 ",-1)])]),_:1},8,["loading"])]),_:1}),(0,r.createElementVNode)("div",c,[(0,r.createVNode)(f,{data:t.value,loading:o.value,stripe:"",border:""},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(p,{field:"LoginTime",title:"登录时间",width:"200"},{default:(0,r.withCtx)(({row:e})=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(n())(e.LoginTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),(0,r.createVNode)(p,{field:"IP",title:"IP地址",width:"250"}),(0,r.createVNode)(p,{field:"PhysicAddress",title:"地理位置"})]),_:1},8,["data","loading"]),(0,r.createElementVNode)("div",u,[(0,r.createVNode)(v,{"max-pages":"6",modelValue:d.value.page,"onUpdate:modelValue":[a[0]||(a[0]=e=>d.value.page=e),m],max:Math.ceil(d.value.total/d.value.rowsPerPage),"direction-links":""},null,8,["modelValue","max"]),(0,r.createVNode)(C,{modelValue:d.value.rowsPerPage,"onUpdate:modelValue":[a[1]||(a[1]=e=>d.value.rowsPerPage=e),g],options:[10,15,20,30,50],dense:"",outlined:"",style:{width:"80px"},class:"q-ml-md"},null,8,["modelValue"])])])])}}}),p=t(1317),m=t(10258),g=t(20407),f=t(74183),v=t(40975),C=t(97491),b=t(76997),k=t(22110),w=t.n(k);const P=(0,p.A)(d,[["__scopeId","data-v-2fab7904"]]);var h=P;w()(d,"components",{QBtnGroup:m.A,QBtn:g.A,QPagination:f.A,QSelect:v.A,QChip:C.A,QTooltip:b.A})}}]);