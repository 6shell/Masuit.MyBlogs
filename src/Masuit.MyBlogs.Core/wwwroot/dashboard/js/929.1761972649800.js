(self["webpackChunk"]=self["webpackChunk"]||[]).push([[929],{253:function(){},348:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Dt}});var l=a(4061),o=a(7695),r=a(3986),i=a(3508),s=a.n(i),c=a(6661),n=a(3751);const d={class:"advertisement-page"},u={class:"row q-mb-md"},m={class:"col-6"},p={class:"col-6 text-right"},v={class:"row items-center justify-end q-gutter-md"},V={class:"col-auto"},x={class:"col-auto"},N={class:"col-auto"},g={class:"text-h6 q-mb-md"},h={key:0,class:"text-center q-pa-xl text-grey-6"},C={key:1},f=["href"],w={class:"text-subtitle2"},y={class:"row justify-between items-center q-mt-md"},b={class:"col-auto"},k={class:"text-body2 text-grey-7"},E={class:"col-auto"},_={class:"col-auto"},q={class:"text-h6 q-mb-md flex items-center"},T={class:"row items-center q-gutter-sm"},U={key:0,class:"text-center q-pa-xl"},D={class:"text-h6"},I={class:"row q-col-gutter-lg"},B={class:"col-12 col-md-7"},A={class:"text-subtitle1 text-primary"},R={class:"row q-gutter-md"},S={class:"text-subtitle1 text-primary"},M={class:"text-subtitle1 text-primary"},P={class:"row"},z={class:"row"},Q={class:"col"},L={class:"row items-center justify-end"},Y={class:"col-12 col-md-5"},j={class:"text-subtitle1 text-primary"},F={key:0,class:"q-mt-md text-center"},O={key:0,class:"q-mt-md text-center"},$={class:"row q-col-gutter-lg"},W={class:"col-12 col-md-7"},H={class:"text-subtitle1 text-primary"},G={class:"row items-center"},J={class:"row"},Z={class:"text-body2 text-grey-7 q-mb-xs"},K={class:"row"},X={class:"text-body2 text-grey-7 q-mb-xs"},ee={class:"row items-start"},te={class:"text-body2 text-grey-7 q-mb-xs"},ae=["href"],le={class:"row"},oe={class:"row items-start"},re={class:"text-body2 text-grey-7"},ie={class:"text-weight-bold text-green-7"},se={class:"text-subtitle1 text-primary"},ce=["innerHTML"],ne={class:"text-subtitle1 text-primary"},de={key:0},ue={class:"row q-gutter-md"},me={class:"col"},pe={class:"text-weight-bold"},ve={class:"col text-center"},Ve={class:"text-weight-bold"},xe={class:"col text-right"},Ne={class:"text-h5 text-weight-bold text-orange-7"},ge={class:"col-12 col-md-5"},he={class:"text-subtitle1 text-primary"},Ce={class:"text-body2 text-grey-7 q-mb-sm"},fe={key:0,class:"image-preview-container"},we={class:"absolute-full flex flex-center bg-negative text-white"},ye={class:"text-center"},be={class:"absolute-full flex flex-center"},ke={class:"absolute-top-right q-pa-sm"},Ee={key:1,class:"no-image-placeholder"},_e={class:"text-center q-pa-xl text-grey-4"},qe={class:"text-body2 text-grey-7 q-mb-sm"},Te={key:0,class:"text-center"},Ue={class:"absolute-full flex flex-center bg-negative text-white"},De={class:"text-center"},Ie={class:"absolute-top-right q-pa-xs"},Be={key:1,class:"no-image-placeholder",style:{height:"120px"}},Ae={class:"text-center q-pa-lg text-grey-4"},Re={class:"text-body2 text-grey-7 q-mb-sm"},Se={class:"q-gutter-sm"},Me={class:"row items-center"},Pe={class:"text-body2"},ze={class:"row items-center"},Qe={class:"text-body2"},Le={class:"row items-center"},Ye={class:"text-body2"},je={class:"text-subtitle2"},Fe={class:"q-gutter-md"},Oe={class:"text-body1"},$e={class:"row items-center justify-end"},We=["src"],He={class:"text-center"},Ge={class:"absolute-full flex flex-center bg-grey-3 text-grey-7"},Je={class:"text-center"},Ze={class:"absolute-full flex flex-center"};var Ke=(0,l.defineComponent)({__name:"index",setup(e){const t=(0,l.ref)([]),a=(0,l.ref)(!1),i=(0,l.ref)(!1),Ke=(0,l.ref)(""),Xe=(0,l.ref)(1);let et;const tt=(0,l.ref)([]),at=[{label:"当前竞价",value:"Price"},{label:"当月曝光量",value:"DisplayCount"},{label:"当月点击",value:"ViewCount"},{label:"日均点击",value:"AverageViewCount"},{label:"点击率",value:"ClickRate"},{label:"分类",value:"CategoryIds"},{label:"创建时间",value:"CreateTime"},{label:"修改时间",value:"UpdateTime"}],lt=(0,l.ref)({page:1,itemsPerPage:10,total:0}),ot=(0,l.ref)(!1),rt=(0,l.ref)(!1),it=(0,l.ref)(!1),st=(0,l.ref)(!1),ct=(0,l.ref)(!1),nt=(0,l.ref)(!1),dt=(0,l.ref)(!1),ut=(0,l.ref)(""),mt=(0,l.ref)({Title:"",Url:"",Description:"",ImageUrl:"",ThumbImgUrl:"",Price:0,Weight:1,Types:"",CategoryIds:"",RegionMode:0,Regions:"",ExpireTime:"2049-12-31",Status:1,DisplayCount:0,ViewCount:0,AverageViewCount:0,ClickRate:0,CreateTime:"",UpdateTime:"",Merchant:""}),pt=(0,l.ref)(null),vt=(0,l.ref)(""),Vt=(0,l.ref)([]),xt=(0,l.ref)([]),Nt=(0,l.ref)([]),gt=(0,l.ref)([]),ht=(0,l.ref)([]),Ct=(0,l.ref)(null);let ft="";const wt=[{label:"默认",value:0},{label:"竞价",value:1},{label:"曝光量",value:2},{label:"点击量",value:3},{label:"日均点击",value:4},{label:"点击率",value:5}],yt=[10,15,20,30,50,100,200],bt=[{label:"轮播图",value:"1"},{label:"列表项",value:"2"},{label:"边栏",value:"3"},{label:"内页",value:"4"}],kt=[{label:"不限",value:0},{label:"以内",value:1},{label:"以外",value:2}],Et={toolbars:["bold","italic","strikethrough","quote","ul","ol","link","h","code","save"]},_t=(0,l.ref)(null),qt=(0,l.ref)(null),Tt=(0,l.ref)(30);let Ut=null;const Dt=[{label:"一周",value:7},{label:"15天",value:15},{label:"一个月",value:30},{label:"两个月",value:60},{label:"三个月",value:90},{label:"半年",value:180},{label:"一年",value:365}],It=e=>s()(e).format("YYYY-MM-DD"),Bt=e=>{if(!e)return[];const t=e.split(",").map(e=>parseInt(e.trim()));return t.map(e=>{const t=gt.value.find(t=>t.value===e);return t?t.label:`未知分类(${e})`}).filter(e=>void 0!==e)},At=e=>e?e.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e)):[],Rt=()=>{et&&clearTimeout(et),et=setTimeout(()=>{lt.value.page=1,Qt()},500)},St=()=>{lt.value.page=1,Qt()},Mt=()=>{Qt()},Pt=()=>{lt.value.page=1,Qt()},zt=()=>{localStorage.setItem("advertisement-showColumns",tt.value.join(","))},Qt=async()=>{a.value=!0;try{const e={page:lt.value.page,size:lt.value.itemsPerPage,kw:Ke.value||"",orderby:Xe.value||0},a=await r.A.get("/partner/getpagedata",{params:e});void 0!==a?.TotalCount?(t.value=a.Data||[],lt.value.total=a.TotalCount):(t.value=[],lt.value.total=0)}catch(e){o.oR.error("加载广告列表失败",{autoClose:2e3,position:"top-center"}),console.error("Error loading advertisements:",e),t.value=[],lt.value.total=0}finally{a.value=!1}},Lt=async()=>{try{const e=await r.A.get("/category/getcategories");e?.Data&&(Nt.value=e.Data,gt.value=Yt(e.Data),ht.value=[...gt.value])}catch(e){console.error("Error loading categories:",e)}},Yt=(e,t="")=>{const a=[];return e.forEach(e=>{const l=t?`${t} > ${e.Name}`:e.Name;a.push({label:l,value:e.Id}),e.Children&&e.Children.length>0&&a.push(...Yt(e.Children,l))}),a},jt=(e,t)=>{t(()=>{if(""===e)ht.value=gt.value;else{const t=e.toLowerCase();ht.value=gt.value.filter(e=>e.label.toLowerCase().includes(t))}})},Ft=()=>{mt.value={Title:"",Url:"",Description:"",ImageUrl:"",ThumbImgUrl:"",Price:0,Weight:1,Types:"",CategoryIds:"",RegionMode:0,Regions:"",ExpireTime:"2049-12-31",Status:1,DisplayCount:0,ViewCount:0,AverageViewCount:0,ClickRate:0,CreateTime:"",UpdateTime:"",Merchant:""},Vt.value=[],xt.value=[],dt.value=!1,ot.value=!0},Ot=e=>{mt.value={...e},Vt.value=e.Types?e.Types.split(","):[],xt.value=e.CategoryIds?e.CategoryIds.split(",").map(e=>parseInt(e)):[],dt.value=!0,ot.value=!0},$t=e=>{mt.value={...e},delete mt.value.Id,Vt.value=e.Types?e.Types.split(","):[],xt.value=e.CategoryIds?e.CategoryIds.split(",").map(e=>parseInt(e)):[],dt.value=!1,ot.value=!0},Wt=()=>{ot.value=!1},Ht=async()=>{if(mt.value.Title&&mt.value.Url){mt.value.Types=Vt.value.join(","),mt.value.CategoryIds=xt.value.join(","),i.value=!0;try{const e=await r.A.post("/partner/save",mt.value);!1!==e?.Success?(o.oR.success(e?.Message||"保存成功",{autoClose:2e3,position:"top-center"}),Wt(),Qt()):o.oR.error(e?.Message||"保存失败",{autoClose:2e3,position:"top-center"})}catch(e){o.oR.error("保存失败",{autoClose:2e3,position:"top-center"}),console.error("Error saving advertisement:",e)}finally{i.value=!1}}else o.oR.warning("请填写完整的广告信息",{autoClose:2e3,position:"top-center"})},Gt=async e=>{try{const t=await r.A.post("/partner/Delete/"+e.Id);!1!==t?.Success?(o.oR.success(t?.Message||"删除成功",{autoClose:2e3,position:"top-center"}),Qt(),rt.value=!1):o.oR.error(t?.Message||"删除失败",{autoClose:2e3,position:"top-center"})}catch(t){o.oR.error("删除失败",{autoClose:2e3,position:"top-center"}),console.error("Error removing advertisement:",t)}},Jt=async e=>{try{const t=await r.A.post(`/partner/ChangeState/${e.Id}`);!1!==t?.Success?(o.oR.success(t?.Message||"状态更新成功",{autoClose:2e3,position:"top-center"}),e.Status=1===e.Status?0:1):o.oR.error(t?.Message||"状态更新失败",{autoClose:2e3,position:"top-center"})}catch(t){o.oR.error("状态更新失败",{autoClose:2e3,position:"top-center"}),console.error("Error changing status:",t)}},Zt=()=>{qt.value&&!Ut&&(Ut=n.init(qt.value),Kt())},Kt=async()=>{if(Ut)try{const e=await r.A.get(`/partner/records-chart?compare=${Tt.value>0}&period=${Tt.value}`),t=[],a=[];for(const r of e){const e=[],l=[];for(const t of r)e.push(new Date(Date.parse(t.Date)).toLocaleDateString()),l.push(t.Count);t.push(e),a.push(l)}const l=["#0091ee","#ccc"],o={color:l,tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{},grid:{top:70,bottom:50},title:{left:"center",text:"最近访问趋势"},xAxis:t.map(function(e,t){return{type:"category",axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:l[t]}},axisPointer:{label:{formatter:function(e){return e.value+(e.seriesData.length?"："+e.seriesData[0].data:"")}}},data:e}}),yAxis:[{type:"value"}],series:a.map(function(e,t){return{type:"line",symbol:"none",xAxisIndex:t,areaStyle:{},data:e,lineStyle:{type:1===t?"dashed":""},markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}})};Ut.setOption(o)}catch(e){console.error("Error updating chart:",e),o.oR.error("加载图表数据失败",{autoClose:2e3,position:"top-center"})}},Xt=async(e,t)=>{const a=Array.isArray(t)?t.join(","):"";e.CategoryIds=a;const l=await r.A.post("/partner/save",e);!1===l?.Success&&o.oR.error(l?.Message||"保存失败",{autoClose:2e3,position:"top-center"})},ea=e=>{pt.value={...e},rt.value=!0},ta=()=>{rt.value=!1,pt.value&&Ot(pt.value)},aa=e=>{mt.value={...e},mt.value.ExpireTime=s()(e.ExpireTime).format("YYYY-MM-DD"),it.value=!0},la=async()=>{if(mt.value){i.value=!0;try{const e=await r.A.post("/partner/save",mt.value);!1!==e?.Success?(o.oR.success(e?.Message||"延期成功",{autoClose:2e3,position:"top-center"}),it.value=!1,Qt()):o.oR.error(e?.Message||"延期失败",{autoClose:2e3,position:"top-center"})}catch(e){o.oR.error("延期失败",{autoClose:2e3,position:"top-center"}),console.error("Error delaying advertisement:",e)}finally{i.value=!1}}},oa=e=>{ft=e,st.value=!0},ra=async e=>{if(!e)return;const t=new FormData;t.append("file",e);try{const e=await r.A.post("/Upload",t,{headers:{"Content-Type":"multipart/form-data"}});e?.Data?(mt.value[ft]=e.Data,o.oR.success("图片上传成功",{autoClose:2e3,position:"top-center"}),st.value=!1):o.oR.error("图片上传失败",{autoClose:2e3,position:"top-center"})}catch(a){o.oR.error("图片上传失败",{autoClose:2e3,position:"top-center"}),console.error("Error uploading image:",a)}},ia=e=>{mt.value[e]=""},sa=e=>{e&&(ut.value=e,nt.value=!0)},ca=()=>{ut.value&&window.open(c.A.baseURL+ut.value,"_blank")},na=e=>{vt.value=c.A.baseURL+`/partner/${e.Id}/insight`,ct.value=!0};return(0,l.onMounted)(async()=>{document.querySelector("#title").scrollIntoView({behavior:"smooth",block:"center"});const e=localStorage.getItem("advertisement-showColumns");tt.value=e?e.split(",").filter(e=>e):at.map(e=>e.value),await Lt(),await Qt(),setTimeout(()=>{Zt()},100)}),(0,l.onBeforeUnmount)(()=>{Ut&&(Ut.dispose(),Ut=null)}),(e,o)=>{const r=(0,l.resolveComponent)("q-select"),n=(0,l.resolveComponent)("q-icon"),et=(0,l.resolveComponent)("q-input"),Nt=(0,l.resolveComponent)("q-btn"),ft=(0,l.resolveComponent)("q-btn-group"),Ut=(0,l.resolveComponent)("q-chip"),Lt=(0,l.resolveComponent)("vxe-column"),Yt=(0,l.resolveComponent)("q-item-label"),Zt=(0,l.resolveComponent)("q-item-section"),da=(0,l.resolveComponent)("q-toggle"),ua=(0,l.resolveComponent)("q-item"),ma=(0,l.resolveComponent)("q-tooltip"),pa=(0,l.resolveComponent)("q-card-section"),va=(0,l.resolveComponent)("q-card-actions"),Va=(0,l.resolveComponent)("q-card"),xa=(0,l.resolveComponent)("q-popup-proxy"),Na=(0,l.resolveComponent)("vxe-table"),ga=(0,l.resolveComponent)("q-pagination"),ha=(0,l.resolveComponent)("q-space"),Ca=(0,l.resolveComponent)("q-spinner"),fa=(0,l.resolveComponent)("v-md-editor"),wa=(0,l.resolveComponent)("q-option-group"),ya=(0,l.resolveComponent)("q-date"),ba=(0,l.resolveComponent)("q-img"),ka=(0,l.resolveComponent)("q-separator"),Ea=(0,l.resolveComponent)("q-dialog"),_a=(0,l.resolveComponent)("q-linear-progress"),qa=(0,l.resolveComponent)("q-circular-progress"),Ta=(0,l.resolveComponent)("q-file"),Ua=(0,l.resolveDirective)("close-popup");return(0,l.openBlock)(),(0,l.createElementBlock)("div",d,[o[96]||(o[96]=(0,l.createElementVNode)("div",{class:"text-h6",id:"title"}," 广告推广管理 ",-1)),(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("div",m,[(0,l.createVNode)(r,{multiple:"",modelValue:tt.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>tt.value=e),zt],options:at,outlined:"",dense:"","map-options":"","emit-value":"","use-chips":""},{prepend:(0,l.withCtx)(()=>[...o[45]||(o[45]=[(0,l.createElementVNode)("span",{style:{"font-size":"14px"}},"显示列:",-1)])]),_:1},8,["modelValue"])]),(0,l.createElementVNode)("div",p,[(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",V,[(0,l.createVNode)(et,{modelValue:Ke.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>Ke.value=e),Rt],placeholder:"全局搜索",dense:"",outlined:"",clearable:"",debounce:"500"},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"search"})]),_:1},8,["modelValue"])]),(0,l.createElementVNode)("div",x,[(0,l.createVNode)(r,{modelValue:Xe.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>Xe.value=e),St],options:wt,label:"排序方式",dense:"",outlined:"","emit-value":"","map-options":"",style:{width:"140px"}},null,8,["modelValue"])]),(0,l.createElementVNode)("div",N,[(0,l.createVNode)(ft,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{color:"primary",icon:"refresh",label:"刷新",onClick:Qt,loading:a.value},null,8,["loading"]),(0,l.createVNode)(Nt,{color:"positive",icon:"add",label:"添加广告",onClick:Ft})]),_:1})])])])]),(0,l.createVNode)(Va,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",g,[(0,l.createVNode)(n,{name:"campaign",class:"q-mr-sm"}),o[46]||(o[46]=(0,l.createTextVNode)(" 广告列表 ",-1)),lt.value.total>0?((0,l.openBlock)(),(0,l.createBlock)(Ut,{key:0,color:"primary","text-color":"white",label:`共 ${lt.value.total} 条广告`,class:"q-ml-sm"},null,8,["label"])):(0,l.createCommentVNode)("",!0)]),0!==t.value.length||a.value?((0,l.openBlock)(),(0,l.createElementBlock)("div",C,[(0,l.createVNode)(Na,{ref_key:"tableRef",ref:_t,data:t.value,loading:a.value,border:"",stripe:"","scroll-y":{enabled:!0},"sort-config":{remote:!0}},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Lt,{field:"Id",title:"ID",width:"80"}),(0,l.createVNode)(Lt,{field:"Title",title:"标题","min-width":"300"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createVNode)(Nt,{flat:"",dense:"",color:"primary",label:e.Title,onClick:t=>ea(e)},null,8,["label","onClick"])]),_:1}),(0,l.createVNode)(Lt,{field:"Url",title:"推广地址","min-width":"200"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createElementVNode)("a",{href:e.Url,target:"_blank",class:"text-primary"},(0,l.toDisplayString)(e.Url),9,f)]),_:1}),tt.value.includes("Price")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:0,field:"Price",title:"当前竞价",width:"80"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createTextVNode)(" ¥"+(0,l.toDisplayString)(e.Price||0),1)]),_:1})):(0,l.createCommentVNode)("",!0),tt.value.includes("CategoryIds")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:1,field:"CategoryIds",title:"分类",width:"260"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createVNode)(r,{"use-chips":"",outlined:"","model-value":At(e.CategoryIds),"onUpdate:modelValue":t=>Xt(e,t),options:gt.value,"option-value":"value","option-label":"label",multiple:"",dense:"","map-options":"","emit-value":"",label:0===At(e.CategoryIds).length?"未选择分类":void 0,"label-slot":!1},{"selected-item":(0,l.withCtx)(e=>[(0,l.createVNode)(Ut,{style:(0,l.normalizeStyle)({backgroundColor:["#FFB300","#39B54A","#00A1E9","#F75000","#8C6E63","#E67E22"][e.index%6],color:"white",fontSize:"11px"}),removable:"",onRemove:t=>e.removeAtIndex(e.index)},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.opt.label),1)]),_:2},1032,["style","onRemove"])]),option:(0,l.withCtx)(({itemProps:e,opt:t,selected:a,toggleOption:o})=>[(0,l.createVNode)(ua,(0,l.normalizeProps)((0,l.guardReactiveProps)(e)),{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Zt,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Yt,null,{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)((0,l.toDisplayString)(t.label),1)]),_:2},1024)]),_:2},1024),(0,l.createVNode)(Zt,{side:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(da,{"model-value":a,"onUpdate:modelValue":e=>o(t)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","onUpdate:modelValue","options","label"])]),_:1})):(0,l.createCommentVNode)("",!0),tt.value.includes("DisplayCount")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:2,field:"DisplayCount",title:"当月曝光量",width:"100"})):(0,l.createCommentVNode)("",!0),tt.value.includes("ViewCount")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:3,field:"ViewCount",title:"当月点击",width:"80"})):(0,l.createCommentVNode)("",!0),tt.value.includes("AverageViewCount")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:4,field:"AverageViewCount",title:"日均点击",width:"80"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.AverageViewCount?.toFixed(2)),1)]),_:1})):(0,l.createCommentVNode)("",!0),tt.value.includes("ClickRate")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:5,field:"ClickRate",title:"点击率",width:"70"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createTextVNode)((0,l.toDisplayString)(e.ClickRate?.toFixed(2))+"% ",1)]),_:1})):(0,l.createCommentVNode)("",!0),tt.value.includes("CreateTime")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:6,field:"CreateTime",title:"创建时间",width:"100"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createTextVNode)((0,l.toDisplayString)(It(e.CreateTime)),1)]),_:1})):(0,l.createCommentVNode)("",!0),tt.value.includes("UpdateTime")?((0,l.openBlock)(),(0,l.createBlock)(Lt,{key:7,field:"UpdateTime",title:"修改时间",width:"100"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createTextVNode)((0,l.toDisplayString)(It(e.UpdateTime)),1)]),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(Lt,{field:"Status",title:"状态",width:"50",fixed:"right"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createVNode)(da,{dense:"","model-value":1===e.Status,"onUpdate:modelValue":t=>Jt(e),color:"positive"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-green"},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)((0,l.toDisplayString)(1===e.Status?"已上架":"已下架"),1)]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:1}),(0,l.createVNode)(Lt,{title:"操作",width:"160",fixed:"right"},{default:(0,l.withCtx)(({row:e})=>[(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"info",icon:"visibility",onClick:t=>ea(e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-info"},{default:(0,l.withCtx)(()=>[...o[49]||(o[49]=[(0,l.createTextVNode)("查看详情",-1)])]),_:1})]),_:1},8,["onClick"]),(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"primary",icon:"edit",onClick:t=>Ot(e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-primary"},{default:(0,l.withCtx)(()=>[...o[50]||(o[50]=[(0,l.createTextVNode)("编辑广告",-1)])]),_:1})]),_:1},8,["onClick"]),(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"secondary",icon:"content_copy",onClick:t=>$t(e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-secondary"},{default:(0,l.withCtx)(()=>[...o[51]||(o[51]=[(0,l.createTextVNode)("复制广告",-1)])]),_:1})]),_:1},8,["onClick"]),(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"warning",icon:"schedule",onClick:t=>aa(e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-warning"},{default:(0,l.withCtx)(()=>[...o[52]||(o[52]=[(0,l.createTextVNode)("延长广告投放时间",-1)])]),_:1})]),_:1},8,["onClick"]),(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"accent",icon:"insights",onClick:t=>na(e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-accent"},{default:(0,l.withCtx)(()=>[...o[53]||(o[53]=[(0,l.createTextVNode)("查看广告统计数据",-1)])]),_:1})]),_:1},8,["onClick"]),(0,l.createVNode)(Nt,{dense:"",flat:"",size:"sm",color:"negative",icon:"delete"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ma,{class:"bg-negative"},{default:(0,l.withCtx)(()=>[...o[54]||(o[54]=[(0,l.createTextVNode)("删除广告",-1)])]),_:1}),(0,l.createVNode)(xa,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),(0,l.createElementVNode)("div",null,[o[55]||(o[55]=(0,l.createElementVNode)("div",{class:"text-h6"},"确认删除",-1)),(0,l.createElementVNode)("div",w,"确认删除广告【"+(0,l.toDisplayString)(e.Title)+"】吗？",1)])]),_:2},1024),(0,l.createVNode)(va,{align:"right"},{default:(0,l.withCtx)(()=>[(0,l.withDirectives)((0,l.createVNode)(Nt,{flat:"",label:"确认",color:"negative",onClick:t=>Gt(e)},null,8,["onClick"]),[[Ua]]),(0,l.withDirectives)((0,l.createVNode)(Nt,{flat:"",label:"取消",color:"primary"},null,512),[[Ua]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,l.createElementVNode)("div",y,[(0,l.createElementVNode)("div",b,[(0,l.createElementVNode)("span",k," 共 "+(0,l.toDisplayString)(lt.value.total)+" 条记录，当前显示第 "+(0,l.toDisplayString)((lt.value.page-1)*lt.value.itemsPerPage+1)+" - "+(0,l.toDisplayString)(Math.min(lt.value.page*lt.value.itemsPerPage,lt.value.total))+" 条 ",1)]),(0,l.createElementVNode)("div",E,[(0,l.createVNode)(ga,{modelValue:lt.value.page,"onUpdate:modelValue":[o[3]||(o[3]=e=>lt.value.page=e),Mt],max:Math.ceil(lt.value.total/lt.value.itemsPerPage),"max-pages":6,"direction-links":"","boundary-links":"",color:"primary"},null,8,["modelValue","max"])]),(0,l.createElementVNode)("div",_,[(0,l.createVNode)(r,{modelValue:lt.value.itemsPerPage,"onUpdate:modelValue":[o[4]||(o[4]=e=>lt.value.itemsPerPage=e),Pt],options:yt,dense:"",outlined:"",label:"每页显示",style:{"min-width":"100px"}},null,8,["modelValue"])])])])):((0,l.openBlock)(),(0,l.createElementBlock)("div",h,[(0,l.createVNode)(n,{name:"campaign",size:"64px",class:"q-mb-md"}),o[47]||(o[47]=(0,l.createElementVNode)("div",{class:"text-h6"},"暂无广告记录",-1)),o[48]||(o[48]=(0,l.createElementVNode)("div",{class:"text-body2 q-mt-sm"},'点击上方"添加广告"按钮创建第一个广告',-1))]))]),_:1})]),_:1}),(0,l.createVNode)(Va,{flat:"",bordered:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",q,[(0,l.createVNode)(n,{name:"trending_up",class:"q-mr-sm"}),o[57]||(o[57]=(0,l.createTextVNode)(" 广告访问趋势 ",-1)),(0,l.createVNode)(ha),(0,l.createElementVNode)("div",T,[(0,l.createVNode)(r,{modelValue:Tt.value,"onUpdate:modelValue":[o[5]||(o[5]=e=>Tt.value=e),Kt],options:Dt,dense:"","emit-value":"","map-options":"",outlined:"",style:{"min-width":"120px"}},{prepend:(0,l.withCtx)(()=>[...o[56]||(o[56]=[(0,l.createElementVNode)("span",{class:"text-body2"},"对比最近：",-1)])]),_:1},8,["modelValue"])])]),(0,l.withDirectives)((0,l.createElementVNode)("div",{ref_key:"chartContainer",ref:qt,style:{height:"400px",width:"100%"}},null,512),[[l.vShow,qt.value]]),qt.value?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createElementBlock)("div",U,[(0,l.createVNode)(Ca,{color:"primary",size:"3em"}),o[58]||(o[58]=(0,l.createElementVNode)("div",{class:"q-mt-md text-grey-6"},"正在加载图表...",-1))]))]),_:1})]),_:1}),(0,l.createVNode)(Ea,{modelValue:ot.value,"onUpdate:modelValue":o[24]||(o[24]=e=>ot.value=e),persistent:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,{style:{"min-width":"85vw","max-height":"90vh"},class:"advertisement-edit-dialog"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none bg-primary text-white"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"campaign",class:"q-mr-sm"}),(0,l.createElementVNode)("div",D,(0,l.toDisplayString)(dt.value?"编辑广告":"添加新广告"),1),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"","text-color":"white",onClick:Wt})]),_:1}),(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",I,[(0,l.createElementVNode)("div",B,[(0,l.createVNode)(Va,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",A,[(0,l.createVNode)(n,{name:"info",class:"q-mr-xs"}),o[59]||(o[59]=(0,l.createTextVNode)(" 基本信息 ",-1))])]),_:1}),(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(et,{autogrow:"",dense:"",modelValue:mt.value.Merchant,"onUpdate:modelValue":o[6]||(o[6]=e=>mt.value.Merchant=e),label:"广告商",outlined:"",required:"",rules:[e=>!!e||"请输入广告商"]},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"business"})]),_:1},8,["modelValue","rules"]),(0,l.createVNode)(et,{autogrow:"",dense:"",modelValue:mt.value.Title,"onUpdate:modelValue":o[7]||(o[7]=e=>mt.value.Title=e),label:"广告标题",outlined:"",required:"",rules:[e=>!!e||"请输入广告标题"]},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"title"})]),_:1},8,["modelValue","rules"]),(0,l.createElementVNode)("div",R,[(0,l.createVNode)(et,{autogrow:"",class:"col",dense:"",modelValue:mt.value.Url,"onUpdate:modelValue":o[8]||(o[8]=e=>mt.value.Url=e),label:"推广地址",outlined:"",required:"",rules:[e=>!!e||"请输入推广地址"]},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"link"})]),_:1},8,["modelValue","rules"]),(0,l.createVNode)(et,{class:"col",dense:"",modelValue:mt.value.Price,"onUpdate:modelValue":o[9]||(o[9]=e=>mt.value.Price=e),modelModifiers:{number:!0},label:"竞价金额",type:"number",outlined:"",min:0,step:"10",suffix:"元"},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"paid"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),(0,l.createVNode)(Va,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",S,[(0,l.createVNode)(n,{name:"description",class:"q-mr-xs"}),o[60]||(o[60]=(0,l.createTextVNode)(" 广告内容 ",-1))])]),_:1}),(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(fa,{modelValue:mt.value.Description,"onUpdate:modelValue":o[10]||(o[10]=e=>mt.value.Description=e),height:"250px",toolbar:Et,placeholder:"请输入广告描述内容..."},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.createVNode)(Va,{flat:"",bordered:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",M,[(0,l.createVNode)(n,{name:"category",class:"q-mr-xs"}),o[61]||(o[61]=(0,l.createTextVNode)(" 分类与投放设置 ",-1))])]),_:1}),(0,l.createVNode)(pa,{class:"q-gutter-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(r,{dense:"",modelValue:xt.value,"onUpdate:modelValue":o[11]||(o[11]=e=>xt.value=e),options:ht.value,label:"广告分类",multiple:"",chips:"","use-chips":"","use-input":"",onFilter:jt,outlined:"","emit-value":"","map-options":"","option-value":"value","option-label":"label"},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"category"})]),_:1},8,["modelValue","options"]),(0,l.createElementVNode)("div",P,[o[62]||(o[62]=(0,l.createElementVNode)("div",{class:"col-auto",style:{"line-height":"40px"}},"推广区域类型：",-1)),(0,l.createVNode)(wa,{class:"col-auto",modelValue:Vt.value,"onUpdate:modelValue":o[12]||(o[12]=e=>Vt.value=e),options:bt,type:"checkbox",inline:"",color:"primary"},null,8,["modelValue"])]),(0,l.createElementVNode)("div",z,[(0,l.createElementVNode)("div",Q,[(0,l.createVNode)(et,{dense:"",modelValue:mt.value.Regions,"onUpdate:modelValue":o[14]||(o[14]=e=>mt.value.Regions=e),label:"地域限制",outlined:"",hint:"多个地区用逗号分隔"},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"public"})]),append:(0,l.withCtx)(()=>[(0,l.createVNode)(r,{dense:"",modelValue:mt.value.RegionMode,"onUpdate:modelValue":o[13]||(o[13]=e=>mt.value.RegionMode=e),options:kt,label:"地域模式","emit-value":"","map-options":"",style:{width:"80px"}},null,8,["modelValue"])]),_:1},8,["modelValue"])])]),(0,l.createVNode)(et,{"model-value":(0,l.unref)(s())(mt.value.ExpireTime).format("YYYY-MM-DD"),label:"有效期至",outlined:"",readonly:""},{append:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"event",class:"cursor-pointer"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(xa,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ya,{modelValue:mt.value.ExpireTime,"onUpdate:modelValue":o[15]||(o[15]=e=>mt.value.ExpireTime=e),mask:"YYYY-MM-DD"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",L,[(0,l.withDirectives)((0,l.createVNode)(Nt,{label:"确定",color:"primary",flat:""},null,512),[[Ua]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])]),_:1})]),_:1})]),(0,l.createElementVNode)("div",Y,[(0,l.createVNode)(Va,{flat:"",bordered:"",class:"full-height"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",j,[(0,l.createVNode)(n,{name:"image",class:"q-mr-xs"}),o[63]||(o[63]=(0,l.createTextVNode)(" 广告素材 ",-1))])]),_:1}),(0,l.createVNode)(pa,{class:"q-gutter-lg"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",null,[o[64]||(o[64]=(0,l.createElementVNode)("div",{class:"text-body2 text-grey-7 q-mb-sm"},"Banner图片",-1)),(0,l.createVNode)(et,{modelValue:mt.value.ImageUrl,"onUpdate:modelValue":o[18]||(o[18]=e=>mt.value.ImageUrl=e),label:"图片地址",outlined:"",readonly:""},{append:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{icon:"upload",dense:"",flat:"",color:"primary",onClick:o[16]||(o[16]=e=>oa("ImageUrl"))}),mt.value.ImageUrl?((0,l.openBlock)(),(0,l.createBlock)(Nt,{key:0,icon:"clear",dense:"",flat:"",color:"negative",onClick:o[17]||(o[17]=e=>ia("ImageUrl"))})):(0,l.createCommentVNode)("",!0)]),_:1},8,["modelValue"]),mt.value.ImageUrl?((0,l.openBlock)(),(0,l.createElementBlock)("div",F,[(0,l.createVNode)(ba,{src:mt.value.ImageUrl?.startsWith("http")?mt.value.ImageUrl:(0,l.unref)(c.A).baseURL+mt.value.ImageUrl,ratio:16/9,style:{cursor:"pointer"},class:"shadow-3",onClick:o[19]||(o[19]=e=>sa(mt.value.ImageUrl))},null,8,["src"])])):(0,l.createCommentVNode)("",!0)]),(0,l.createVNode)(ka),(0,l.createElementVNode)("div",null,[o[65]||(o[65]=(0,l.createElementVNode)("div",{class:"text-body2 text-grey-7 q-mb-sm"},"卡片图",-1)),(0,l.createVNode)(et,{modelValue:mt.value.ThumbImgUrl,"onUpdate:modelValue":o[22]||(o[22]=e=>mt.value.ThumbImgUrl=e),label:"卡片图地址",outlined:"",readonly:""},{append:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{icon:"upload",dense:"",flat:"",color:"primary",onClick:o[20]||(o[20]=e=>oa("ThumbImgUrl"))}),mt.value.ThumbImgUrl?((0,l.openBlock)(),(0,l.createBlock)(Nt,{key:0,icon:"clear",dense:"",flat:"",color:"negative",onClick:o[21]||(o[21]=e=>ia("ThumbImgUrl"))})):(0,l.createCommentVNode)("",!0)]),_:1},8,["modelValue"]),mt.value.ThumbImgUrl?((0,l.openBlock)(),(0,l.createElementBlock)("div",O,[(0,l.createVNode)(ba,{src:mt.value.ThumbImgUrl?.startsWith("http")?mt.value.ThumbImgUrl:(0,l.unref)(c.A).baseURL+mt.value.ThumbImgUrl,ratio:1,style:{"max-width":"300px",cursor:"pointer"},class:"shadow-3",onClick:o[23]||(o[23]=e=>sa(mt.value.ThumbImgUrl))},null,8,["src"])])):(0,l.createCommentVNode)("",!0)])]),_:1})]),_:1})])])]),_:1}),(0,l.createVNode)(va,{align:"right",class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{flat:"",label:"取消",onClick:Wt}),(0,l.createVNode)(Nt,{color:"primary",label:dt.value?"保存修改":"确认添加",onClick:Ht,loading:i.value,disable:!mt.value.Title||!mt.value.Url,unelevated:""},null,8,["label","loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,l.createVNode)(Ea,{modelValue:rt.value,"onUpdate:modelValue":o[32]||(o[32]=e=>rt.value=e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,{style:{"min-width":"900px","max-width":"95vw","max-height":"90vh"},class:"advertisement-detail-dialog"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none bg-primary text-white"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"visibility",class:"q-mr-sm"}),o[66]||(o[66]=(0,l.createElementVNode)("div",{class:"text-h6"},"广告详情",-1)),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"","text-color":"white",onClick:o[25]||(o[25]=e=>rt.value=!1)})]),_:1}),pt.value?((0,l.openBlock)(),(0,l.createBlock)(pa,{key:0},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",$,[(0,l.createElementVNode)("div",W,[(0,l.createVNode)(Va,{flat:"",bordered:"",class:"q-mb-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",H,[(0,l.createVNode)(n,{name:"info",class:"q-mr-xs"}),o[67]||(o[67]=(0,l.createTextVNode)(" 基本信息 ",-1))])]),_:1}),(0,l.createVNode)(pa,{class:"q-gutter-md"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",G,[(0,l.createVNode)(n,{name:"tag",class:"q-mr-sm text-grey-6"}),o[68]||(o[68]=(0,l.createElementVNode)("span",{class:"text-body2 text-grey-7 q-mr-sm"},"ID:",-1)),(0,l.createVNode)(Ut,{size:"sm",color:"blue-grey-2","text-color":"dark"},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)((0,l.toDisplayString)(pt.value.Id),1)]),_:1})]),(0,l.createElementVNode)("div",J,[(0,l.createElementVNode)("span",Z,[(0,l.createVNode)(n,{name:"business",class:"q-mt-sm text-grey-6"}),(0,l.createTextVNode)(" 广告商："+(0,l.toDisplayString)(pt.value.Merchant),1)])]),(0,l.createElementVNode)("div",K,[(0,l.createElementVNode)("span",X,[(0,l.createVNode)(n,{name:"title",class:"q-mt-sm text-grey-6"}),(0,l.createTextVNode)(" 广告标题："+(0,l.toDisplayString)(pt.value.Title),1)])]),(0,l.createElementVNode)("div",ee,[(0,l.createElementVNode)("span",te,[(0,l.createVNode)(n,{name:"link",class:"q-mt-sm text-grey-6"}),o[69]||(o[69]=(0,l.createTextVNode)(" 推广地址：",-1))]),(0,l.createElementVNode)("a",{href:pt.value.Url,target:"_blank",class:"text-primary text-weight-medium text-decoration-none"},[(0,l.createTextVNode)((0,l.toDisplayString)(pt.value.Url)+" ",1),(0,l.createVNode)(n,{name:"open_in_new",size:"xs",class:"q-ml-xs"})],8,ae)]),(0,l.createElementVNode)("div",le,[(0,l.createElementVNode)("div",oe,[(0,l.createElementVNode)("div",re,[(0,l.createVNode)(n,{name:"paid",class:"text-grey-6"}),o[70]||(o[70]=(0,l.createTextVNode)(" 竞价金额：",-1)),(0,l.createElementVNode)("span",ie," ¥"+(0,l.toDisplayString)(pt.value.Price||0),1)])])])]),_:1})]),_:1}),pt.value.Description?((0,l.openBlock)(),(0,l.createBlock)(Va,{key:0,flat:"",bordered:"",class:"q-mb-md"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",se,[(0,l.createVNode)(n,{name:"description",class:"q-mr-xs"}),o[71]||(o[71]=(0,l.createTextVNode)(" 广告描述 ",-1))])]),_:1}),(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",{innerHTML:pt.value.Description},null,8,ce)]),_:1})]),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(Va,{flat:"",bordered:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",ne,[(0,l.createVNode)(n,{name:"analytics",class:"q-mr-xs"}),o[72]||(o[72]=(0,l.createTextVNode)(" 分类与统计 ",-1))])]),_:1}),(0,l.createVNode)(pa,{class:"q-gutter-md"},{default:(0,l.withCtx)(()=>[pt.value.CategoryIds?((0,l.openBlock)(),(0,l.createElementBlock)("div",de,[(0,l.createVNode)(n,{name:"category",class:"q-mr-xs"}),o[73]||(o[73]=(0,l.createTextVNode)(" 广告分类： ",-1)),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(Bt(pt.value.CategoryIds),e=>((0,l.openBlock)(),(0,l.createBlock)(Ut,{key:e,color:"primary","text-color":"white",class:"q-ma-xs"},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)((0,l.toDisplayString)(e),1)]),_:2},1024))),128))])):((0,l.openBlock)(),(0,l.createBlock)(Ut,{key:1,color:"grey-4","text-color":"dark"},{default:(0,l.withCtx)(()=>[...o[74]||(o[74]=[(0,l.createTextVNode)("未分类",-1)])]),_:1})),(0,l.createElementVNode)("div",ue,[(0,l.createElementVNode)("div",me,[(0,l.createVNode)(_a,{value:pt.value.ClickRate||0,color:"positive",size:"8px",class:"q-mb-xs"},null,8,["value"]),o[75]||(o[75]=(0,l.createElementVNode)("div",{class:"text-caption text-grey-7"},"点击率",-1)),(0,l.createElementVNode)("div",pe,(0,l.toDisplayString)((100*(pt.value.ClickRate||0)).toFixed(2))+"%",1)]),(0,l.createElementVNode)("div",ve,[(0,l.createVNode)(qa,{value:Math.min(pt.value.DisplayCount||0,1e4),max:1e4,size:"50px",thickness:.2,color:"blue","track-color":"grey-3",class:"q-mb-xs"},null,8,["value"]),o[76]||(o[76]=(0,l.createElementVNode)("div",{class:"text-caption text-grey-7"},"展示次数",-1)),(0,l.createElementVNode)("div",Ve,(0,l.toDisplayString)(pt.value.DisplayCount||0),1)]),(0,l.createElementVNode)("div",xe,[(0,l.createElementVNode)("div",Ne,(0,l.toDisplayString)(pt.value.ViewCount||0),1),o[77]||(o[77]=(0,l.createElementVNode)("div",{class:"text-caption text-grey-7"},"点击次数",-1))])])]),_:1})]),_:1})]),(0,l.createElementVNode)("div",ge,[(0,l.createVNode)(Va,{flat:"",bordered:"",class:"full-height"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",he,[(0,l.createVNode)(n,{name:"image",class:"q-mr-xs"}),o[78]||(o[78]=(0,l.createTextVNode)(" 广告素材 ",-1))])]),_:1}),(0,l.createVNode)(pa,{class:"q-gutter-lg"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",null,[(0,l.createElementVNode)("div",Ce,[(0,l.createVNode)(n,{name:"wallpaper",class:"q-mr-xs"}),o[79]||(o[79]=(0,l.createTextVNode)(" Banner图片 ",-1))]),pt.value.ImageUrl?((0,l.openBlock)(),(0,l.createElementBlock)("div",fe,[(0,l.createVNode)(ba,{src:pt.value.ImageUrl?.startsWith("http")?pt.value.ImageUrl:(0,l.unref)(c.A).baseURL+pt.value.ImageUrl,ratio:16/9,class:"preview-image shadow-3",onClick:o[27]||(o[27]=e=>sa(pt.value.ImageUrl))},{error:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",we,[(0,l.createElementVNode)("div",ye,[(0,l.createVNode)(n,{name:"broken_image",size:"32px"}),o[80]||(o[80]=(0,l.createElementVNode)("div",{class:"text-caption q-mt-sm"},"加载失败",-1))])])]),loading:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",be,[(0,l.createVNode)(Ca,{color:"primary",size:"32px"})])]),default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",ke,[(0,l.createVNode)(Nt,{icon:"visibility",size:"sm",dense:"",round:"",color:"white","text-color":"primary",onClick:o[26]||(o[26]=(0,l.withModifiers)(e=>sa(pt.value.ImageUrl),["stop"]))})])]),_:1},8,["src"])])):((0,l.openBlock)(),(0,l.createElementBlock)("div",Ee,[(0,l.createElementVNode)("div",_e,[(0,l.createVNode)(n,{name:"image_not_supported",size:"48px"}),o[81]||(o[81]=(0,l.createElementVNode)("div",{class:"q-mt-md"},"暂无图片",-1))])]))]),(0,l.createVNode)(ka),(0,l.createElementVNode)("div",null,[(0,l.createElementVNode)("div",qe,[(0,l.createVNode)(n,{name:"crop_original",class:"q-mr-xs"}),o[82]||(o[82]=(0,l.createTextVNode)(" 卡片图 ",-1))]),pt.value.ThumbImgUrl?((0,l.openBlock)(),(0,l.createElementBlock)("div",Te,[(0,l.createVNode)(ba,{src:pt.value.ThumbImgUrl?.startsWith("http")?pt.value.ThumbImgUrl:(0,l.unref)(c.A).baseURL+pt.value.ThumbImgUrl,ratio:1,style:{"max-width":"300px",margin:"0 auto"},class:"preview-image shadow-3",onClick:o[29]||(o[29]=e=>sa(pt.value.ThumbImgUrl))},{error:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",Ue,[(0,l.createElementVNode)("div",De,[(0,l.createVNode)(n,{name:"broken_image",size:"24px"}),o[83]||(o[83]=(0,l.createElementVNode)("div",{class:"text-caption"},"加载失败",-1))])])]),default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",Ie,[(0,l.createVNode)(Nt,{icon:"visibility",size:"xs",dense:"",round:"",color:"white","text-color":"primary",onClick:o[28]||(o[28]=(0,l.withModifiers)(e=>sa(pt.value.ThumbImgUrl),["stop"]))})])]),_:1},8,["src"])])):((0,l.openBlock)(),(0,l.createElementBlock)("div",Be,[(0,l.createElementVNode)("div",Ae,[(0,l.createVNode)(n,{name:"crop_original",size:"32px"}),o[84]||(o[84]=(0,l.createElementVNode)("div",{class:"q-mt-sm"},"暂无缩略图",-1))])]))]),(0,l.createVNode)(ka),(0,l.createElementVNode)("div",null,[(0,l.createElementVNode)("div",Re,[(0,l.createVNode)(n,{name:"schedule",class:"q-mr-xs"}),o[85]||(o[85]=(0,l.createTextVNode)(" 时间信息 ",-1))]),(0,l.createElementVNode)("div",Se,[(0,l.createElementVNode)("div",Me,[(0,l.createVNode)(n,{name:"add_circle",size:"sm",class:"q-mr-xs text-green-6"}),o[86]||(o[86]=(0,l.createElementVNode)("span",{class:"text-caption text-grey-7"},"创建时间：",-1)),(0,l.createElementVNode)("span",Pe,(0,l.toDisplayString)(It(pt.value.CreateTime)),1)]),(0,l.createElementVNode)("div",ze,[(0,l.createVNode)(n,{name:"update",size:"sm",class:"q-mr-xs text-blue-6"}),o[87]||(o[87]=(0,l.createElementVNode)("span",{class:"text-caption text-grey-7"},"更新时间：",-1)),(0,l.createElementVNode)("span",Qe,(0,l.toDisplayString)(It(pt.value.UpdateTime)),1)]),(0,l.createElementVNode)("div",Le,[(0,l.createVNode)(n,{name:"event",size:"sm",class:"q-mr-xs text-orange-6"}),o[88]||(o[88]=(0,l.createElementVNode)("span",{class:"text-caption text-grey-7"},"过期时间：",-1)),(0,l.createElementVNode)("span",Ye,(0,l.toDisplayString)(It(pt.value.ExpireTime)),1)])])])]),_:1})]),_:1})])])]),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(va,{align:"right",class:"bg-grey-1"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{flat:"",label:"编辑",color:"primary",icon:"edit",onClick:ta,class:"q-px-lg"}),(0,l.createVNode)(Nt,{flat:"",label:"删除",color:"negative",icon:"delete",class:"q-px-lg"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(xa,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center"},{default:(0,l.withCtx)(()=>[o[89]||(o[89]=(0,l.createElementVNode)("div",{class:"text-h6"},"确认删除",-1)),(0,l.createElementVNode)("div",je,"确认删除广告【"+(0,l.toDisplayString)(pt.value.Title)+"】吗？",1)]),_:1}),(0,l.createVNode)(va,{align:"right"},{default:(0,l.withCtx)(()=>[(0,l.withDirectives)((0,l.createVNode)(Nt,{flat:"",label:"确认",color:"negative",onClick:o[30]||(o[30]=e=>Gt(pt.value))},null,512),[[Ua]]),(0,l.withDirectives)((0,l.createVNode)(Nt,{flat:"",label:"取消",color:"primary"},null,512),[[Ua]])]),_:1})]),_:1})]),_:1})]),_:1}),(0,l.createVNode)(Nt,{flat:"",label:"关闭",color:"grey",onClick:o[31]||(o[31]=e=>rt.value=!1),class:"q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,l.createVNode)(Ea,{modelValue:it.value,"onUpdate:modelValue":o[37]||(o[37]=e=>it.value=e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,{style:{"min-width":"400px"}},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none"},{default:(0,l.withCtx)(()=>[o[90]||(o[90]=(0,l.createElementVNode)("div",{class:"text-h6"},"延期广告",-1)),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"",onClick:o[33]||(o[33]=e=>it.value=!1)})]),_:1}),mt.value?((0,l.openBlock)(),(0,l.createBlock)(pa,{key:0},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",Fe,[(0,l.createElementVNode)("div",Oe,"广告："+(0,l.toDisplayString)(mt.value.Title),1),o[91]||(o[91]=(0,l.createElementVNode)("div",{class:"text-body2"},"当前有效期延期至：",-1)),(0,l.createVNode)(et,{modelValue:mt.value.ExpireTime,"onUpdate:modelValue":o[35]||(o[35]=e=>mt.value.ExpireTime=e),label:"过期时间",dense:"",outlined:"",readonly:""},{append:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"event",class:"cursor-pointer"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(xa,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(ya,{modelValue:mt.value.ExpireTime,"onUpdate:modelValue":o[34]||(o[34]=e=>mt.value.ExpireTime=e),mask:"YYYY-MM-DD"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",$e,[(0,l.withDirectives)((0,l.createVNode)(Nt,{label:"确定",color:"primary",flat:""},null,512),[[Ua]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(va,{align:"right"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{flat:"",label:"取消",onClick:o[36]||(o[36]=e=>it.value=!1)}),(0,l.createVNode)(Nt,{color:"primary",label:"确定延期",onClick:la,loading:i.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,l.createVNode)(Ea,{modelValue:st.value,"onUpdate:modelValue":o[40]||(o[40]=e=>st.value=e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,{style:{"min-width":"400px"}},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none"},{default:(0,l.withCtx)(()=>[o[92]||(o[92]=(0,l.createElementVNode)("div",{class:"text-h6"},"上传图片",-1)),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"",onClick:o[38]||(o[38]=e=>st.value=!1)})]),_:1}),(0,l.createVNode)(pa,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Ta,{modelValue:Ct.value,"onUpdate:modelValue":[o[39]||(o[39]=e=>Ct.value=e),ra],label:"选择图片",outlined:"",accept:"image/*"},{prepend:(0,l.withCtx)(()=>[(0,l.createVNode)(n,{name:"attach_file"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,l.createVNode)(Ea,{modelValue:ct.value,"onUpdate:modelValue":o[42]||(o[42]=e=>ct.value=e),maximized:""},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,null,{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none"},{default:(0,l.withCtx)(()=>[o[93]||(o[93]=(0,l.createElementVNode)("div",{class:"text-h6"},"广告洞察分析",-1)),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"",onClick:o[41]||(o[41]=e=>ct.value=!1)})]),_:1}),(0,l.createVNode)(pa,{class:"q-pa-none",style:{height:"calc(100vh - 100px)"}},{default:(0,l.withCtx)(()=>[vt.value?((0,l.openBlock)(),(0,l.createElementBlock)("iframe",{key:0,src:vt.value,width:"100%",height:"100%",frameborder:"0"},null,8,We)):(0,l.createCommentVNode)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,l.createVNode)(Ea,{modelValue:nt.value,"onUpdate:modelValue":o[44]||(o[44]=e=>nt.value=e)},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Va,{style:{"min-width":"50vw","min-height":"50vh","max-width":"90vw","max-height":"90vh"}},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(pa,{class:"row items-center q-pb-none"},{default:(0,l.withCtx)(()=>[o[94]||(o[94]=(0,l.createElementVNode)("div",{class:"text-h6"},"图片预览",-1)),(0,l.createVNode)(ha),(0,l.createVNode)(Nt,{icon:"close",flat:"",round:"",dense:"",onClick:o[43]||(o[43]=e=>nt.value=!1)})]),_:1}),(0,l.createVNode)(pa,{class:"q-pa-md"},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",He,[(0,l.createVNode)(ba,{src:ut.value?.startsWith("http")?ut.value:(0,l.unref)(c.A).baseURL+ut.value,fit:"contain",style:{"max-width":"100%","max-height":"73vh"}},{error:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",Ge,[(0,l.createElementVNode)("div",Je,[(0,l.createVNode)(n,{name:"broken_image",size:"48px"}),o[95]||(o[95]=(0,l.createElementVNode)("div",{class:"text-h6 q-mt-md"},"图片加载失败",-1))])])]),loading:(0,l.withCtx)(()=>[(0,l.createElementVNode)("div",Ze,[(0,l.createVNode)(Ca,{color:"primary",size:"48px"})])]),_:1},8,["src"])])]),_:1}),(0,l.createVNode)(va,{align:"center"},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(Nt,{flat:"",icon:"open_in_new",label:"在新窗口打开",onClick:ca})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Xe=a(1317),et=a(975),tt=a(8622),at=a(4503),lt=a(7877),ot=a(407),rt=a(3663),it=a(7180),st=a(7491),ct=a(5740),nt=a(1484),dt=a(2473),ut=a(1343),mt=a(6997),pt=a(4854),vt=a(1248),Vt=a(4183),xt=a(5915),Nt=a(5485),gt=a(1375),ht=a(5984),Ct=a(9341),ft=a(5678),wt=a(5861),yt=a(8486),bt=a(9855),kt=a(1929),Et=a(5855),_t=a(515),qt=a(2110),Tt=a.n(qt);const Ut=(0,Xe.A)(Ke,[["__scopeId","data-v-61859168"]]);var Dt=Ut;Tt()(Ke,"components",{QSelect:et.A,QInput:tt.A,QIcon:at.A,QBtnGroup:lt.A,QBtn:ot.A,QCard:rt.A,QCardSection:it.A,QChip:st.A,QItem:ct.A,QItemSection:nt.A,QItemLabel:dt.A,QToggle:ut.A,QTooltip:mt.A,QPopupProxy:pt.A,QCardActions:vt.A,QPagination:Vt.A,QSpace:xt.A,QSpinner:Nt.A,QDialog:gt.A,QOptionGroup:ht.A,QDate:Ct.A,QImg:ft.A,QSeparator:wt.A,QLinearProgress:yt.A,QCircularProgress:bt.A,QFile:kt.A,QField:Et.A}),Tt()(Ke,"directives",{ClosePopup:_t.A})},3986:function(e,t,a){"use strict";var l=a(3719),o=a.n(l),r=a(7454),i=a.n(r),s=a(6661),c=a(7695);const n=o().create({baseURL:s.c.baseURL,timeout:s.c.timeOut});n.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=i().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&c.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return c.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:c.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:c.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:c.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:c.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:c.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:c.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:c.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:c.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:c.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:c.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=n}}]);