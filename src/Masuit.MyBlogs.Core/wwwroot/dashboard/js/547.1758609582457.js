(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[547],{13986:function(e,t,o){"use strict";var a=o(74413),s=o(27454),l=o.n(s),r=o(76661),n=o(57695);const i=a.A.create({baseURL:r.c.baseURL,timeout:r.c.timeOut});i.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=l().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),i.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&n.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return n.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:n.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:n.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:n.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:n.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:n.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:n.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:n.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:n.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:n.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:n.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=i},42634:function(){},43557:function(e,t,o){"use strict";o.d(t,{W:function(){return a},w:function(){return s}});const a={right:"5px",borderRadius:"5px",backgroundColor:"#616161",width:"5px"},s={borderRadius:"5px",backgroundColor:"rgba(144,147,153,0.9)",padding:"10px",margin:"10px",width:"3px"}},57430:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return E}});var a=o(74220),s=o(97700),l=o(46732),r=o(57695),n=o(88828),i=o.n(n),c=o(13986),u=o(75220),d=o(43557);const p={class:"main-content"};var b={__name:"BaseContent",props:["position"],setup(e,{expose:t}){const o=(0,l.KR)(null);let s="";const r=(0,u.lq)(),n=e=>{o.value.setScrollPosition(e,300)},i=()=>o.value.getScrollPosition();return(0,a.sV)(()=>{s=r.path,Object.freeze(s);const e=window.sessionStorage.getItem(r.path);if(e){const t=JSON.parse(e);n(t.listScrollTop)}}),(0,a.Y4)(()=>{window.sessionStorage.setItem(s,JSON.stringify({listScrollTop:i()}))}),(0,a.n)(()=>{const e=window.sessionStorage.getItem(r.path);if(e){const t=JSON.parse(e);n(t.listScrollTop)}}),(0,a.hi)(()=>{sessionStorage.removeItem(s)}),t({ScrollToPosition:n,getPosition:i}),(e,t)=>{const s=(0,a.g2)("q-scroll-area");return(0,a.uX)(),(0,a.CE)("div",p,[(0,a.bF)(s,{ref_key:"scrollArea",ref:o,"thumb-style":(0,l.R1)(d.W),visible:!1,style:{height:"100%"}},{default:(0,a.k6)(()=>[(0,a.RG)(e.$slots,"default")]),_:3},8,["thumb-style"])])}}},k=o(30196),m=o(22110),f=o.n(m);const g=b;var v=g;f()(b,"components",{QScrollArea:k.A});const h={class:"list-container"},w={class:"q-mb-md"},_=["href"],F=["href"],C={class:"column q-gutter-xs"},y={class:"column q-gutter-xs"},R={class:"q-mt-md flex justify-center items-center"},x={class:"q-ml-sm text-caption"};var A=(0,a.pM)({__name:"post-pending",setup(e){const t=(0,l.KR)(!1),o=(0,l.KR)([]),n=(0,l.KR)(""),u=(0,l.KR)({page:1,rowsPerPage:10,total:0}),d=(0,l.KR)(null),p=e=>i()(e).format("YYYY-MM-DD HH:mm:ss"),b=()=>{u.value.page=1,k()},k=async()=>{t.value=!0;try{const e={page:u.value.page,size:u.value.rowsPerPage,search:n.value||""},t=await c.A.post("/post/GetPending",e);t&&(o.value=t.Data||[],u.value.total=t.TotalCount||0)}catch(e){r.oR.error("加载数据失败",{autoClose:2e3,position:"top-center"}),console.error("Error loading data:",e)}finally{t.value=!1}},m=async e=>{const t=await c.A.post(`/post/truncate/${e.Id}`);r.oR.success(t?.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await k()},f=async e=>{const t=await c.A.post("/post/pass/"+e.Id);r.oR.success(t?.Message||"审核通过",{autoClose:2e3,position:"top-center"}),await k()},g=async e=>{const t=await c.A.post("/post/block/"+e.Id);r.oR.success(t?.Message||"已标记为恶意提交",{autoClose:2e3,position:"top-center"})},A=async e=>{const t=await c.A.post("/system/AddToBlackList",{ip:e});r.oR.success(t?.Message||"已加入黑名单",{autoClose:2e3,position:"top-center"})};return(0,a.sV)(()=>{k()}),(e,l)=>{const r=(0,a.g2)("q-btn"),i=(0,a.g2)("q-input"),c=(0,a.g2)("vxe-column"),P=(0,a.g2)("q-icon"),q=(0,a.g2)("q-card-section"),L=(0,a.g2)("q-card-actions"),S=(0,a.g2)("q-card"),I=(0,a.g2)("q-popup-proxy"),T=(0,a.g2)("q-tooltip"),Q=(0,a.g2)("q-btn-group"),z=(0,a.g2)("vxe-table"),M=(0,a.g2)("q-pagination"),O=(0,a.g2)("q-select"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{class:"q-mt-md"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",h,[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",w,[(0,a.bF)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),outlined:"",dense:"",placeholder:"全局搜索"},{append:(0,a.k6)(()=>[(0,a.bF)(r,{color:"info",icon:"search",onClick:k,loading:t.value,label:"搜索"},null,8,["loading"])]),_:1},8,["modelValue"])]),(0,a.bF)(z,{ref_key:"tableRef",ref:d,data:o.value,loading:t.value,stripe:"",border:""},{default:(0,a.k6)(()=>[(0,a.bF)(c,{field:"Title",title:"标题","min-width":"200",fixed:"left"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("a",{href:`/${e.Id}`,target:"_blank",class:"text-primary"},(0,s.v_)(e.Title),9,_)]),_:1}),(0,a.bF)(c,{field:"Author",title:"作者",width:"120"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("a",{href:`/author/${e.Author}`,target:"_blank",class:"text-primary"},(0,s.v_)(e.Author),9,F)]),_:1}),(0,a.bF)(c,{field:"PostDate",title:"发表"},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,s.v_)(p(e.PostDate)),1)]),_:1}),(0,a.bF)(c,{field:"Email",title:"作者邮箱",width:"180"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("div",C,[(0,a.Lk)("span",null,(0,s.v_)(e.Email),1),(0,a.bF)(r,{size:"sm",color:"secondary",label:"标记为恶意提交",dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(()=>[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"row items-center"},{default:(0,a.k6)(()=>[(0,a.bF)(P,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),l[3]||(l[3]=(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"text-h6"},"确认操作"),(0,a.Lk)("div",{class:"text-subtitle2"},"此操作将标记该用户为恶意提交，是否继续？")],-1))]),_:1}),(0,a.bF)(L,{align:"right"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"确认",color:"negative",onClick:t=>{g(e)}},null,8,["onClick"]),[[V]]),(0,a.bo)((0,a.bF)(r,{flat:"",label:"取消",color:"primary"},null,512),[[V]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:1}),(0,a.bF)(c,{field:"IP",title:"提交IP",width:"150"},{default:(0,a.k6)(({row:e})=>[(0,a.Lk)("div",y,[(0,a.Lk)("span",null,(0,s.v_)(e.IP),1),(0,a.bF)(r,{color:"negative",icon:"block",dense:"",flat:"",size:"sm",class:"q-ml-sm"},{default:(0,a.k6)(()=>[(0,a.bF)(T,null,{default:(0,a.k6)(()=>[...l[4]||(l[4]=[(0,a.eW)("添加到黑名单",-1)])]),_:1}),(0,a.bF)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(()=>[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"row items-center"},{default:(0,a.k6)(()=>[(0,a.bF)(P,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),l[5]||(l[5]=(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"text-h6"},"确认操作"),(0,a.Lk)("div",{class:"text-subtitle2"},"此操作将标记该用户IP为黑名单，是否继续？")],-1))]),_:1}),(0,a.bF)(L,{align:"right"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"确认",color:"negative",onClick:t=>A(e.IP)},null,8,["onClick"]),[[V]]),(0,a.bo)((0,a.bF)(r,{flat:"",label:"取消",color:"primary"},null,512),[[V]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:1}),(0,a.bF)(c,{title:"操作",width:"110",fixed:"right"},{default:(0,a.k6)(({row:e})=>[(0,a.bF)(Q,{push:""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{size:"md",color:"negative",icon:"delete",dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(()=>[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"row items-center"},{default:(0,a.k6)(()=>[(0,a.bF)(P,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),l[6]||(l[6]=(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"text-h6"},"确认操作"),(0,a.Lk)("div",{class:"text-subtitle2"},"此操作将彻底删除该文章，是否继续？")],-1))]),_:1}),(0,a.bF)(L,{align:"right"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"确认",color:"negative",onClick:t=>m(e)},null,8,["onClick"]),[[V]]),(0,a.bo)((0,a.bF)(r,{flat:"",label:"取消",color:"primary"},null,512),[[V]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),"审核中"===e.Status?((0,a.uX)(),(0,a.Wv)(r,{key:0,size:"md",color:"positive",icon:"check",dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)(()=>[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(q,{class:"row items-center"},{default:(0,a.k6)(()=>[(0,a.bF)(P,{name:"warning",color:"green",size:"2rem",class:"q-mr-sm"}),l[7]||(l[7]=(0,a.Lk)("div",null,[(0,a.Lk)("div",{class:"text-h6"},"确认操作"),(0,a.Lk)("div",{class:"text-subtitle2"},"此操作将通过该文章的审核，是否继续？")],-1))]),_:1}),(0,a.bF)(L,{align:"right"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"确认",color:"positive",onClick:t=>f(e)},null,8,["onClick"]),[[V]]),(0,a.bo)((0,a.bF)(r,{flat:"",label:"取消",color:"primary"},null,512),[[V]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(0,a.Q3)("",!0),(0,a.bF)(r,{size:"md",color:"primary",icon:"edit",dense:"",to:`/posts/write?id=${e.Id}`},null,8,["to"])]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,a.Lk)("div",R,[(0,a.bF)(M,{modelValue:u.value.page,"onUpdate:modelValue":[l[1]||(l[1]=e=>u.value.page=e),k],max:Math.ceil(u.value.total/u.value.rowsPerPage),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"]),(0,a.bF)(O,{modelValue:u.value.rowsPerPage,"onUpdate:modelValue":[l[2]||(l[2]=e=>u.value.rowsPerPage=e),b],options:[10,15,20,30,50,100,200],dense:"",outlined:"",class:"q-ml-md",style:{width:"80px"}},null,8,["modelValue"]),(0,a.Lk)("span",x," 共 "+(0,s.v_)(u.value.total)+" 条 ",1)])]),_:1})]),_:1})])]),_:1})}}}),P=o(1317),q=o(63663),L=o(17180),S=o(38622),I=o(20407),T=o(34854),Q=o(64503),z=o(71248),M=o(76997),O=o(10258),V=o(74183),N=o(40975),j=o(60515);const D=(0,P.A)(A,[["__scopeId","data-v-354a3590"]]);var E=D;f()(A,"components",{QCard:q.A,QCardSection:L.A,QInput:S.A,QBtn:I.A,QPopupProxy:T.A,QIcon:Q.A,QCardActions:z.A,QTooltip:M.A,QBtnGroup:O.A,QPagination:V.A,QSelect:N.A}),f()(A,"directives",{ClosePopup:j.A})}}]);