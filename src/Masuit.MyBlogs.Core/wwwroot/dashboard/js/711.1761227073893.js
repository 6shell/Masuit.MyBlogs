(self["webpackChunk"]=self["webpackChunk"]||[]).push([[711],{253:function(){},3986:function(e,t,o){"use strict";var a=o(3719),r=o.n(a),l=o(7454),n=o.n(l),s=o(6661),i=o(7695);const c=r().create({baseURL:s.c.baseURL,timeout:s.c.timeOut});c.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=n().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=c},7794:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return A}});var a=o(4061),r=o(7695),l=o(3986);const n={class:"q-mb-md"},s=["href"],i={class:"text-subtitle2"},c={class:"text-h6"};var u=(0,a.defineComponent)({__name:"share",setup(e){const t=(0,a.ref)(!1),o=(0,a.ref)(!1),u=(0,a.ref)([]),d=(0,a.ref)(!1),p=(0,a.ref)(!1),m=(0,a.ref)({Title:"",Link:"",Sort:0}),v=(0,a.ref)(null),C=(0,a.ref)(null),f=e=>{try{const t=new URL(e);return!!t}catch{return!1}},h=async()=>{t.value=!0;const e=await l.A.get("/share");e&&(u.value=e.Data||[],u.value.sort((e,t)=>(e.Sort||0)-(t.Sort||0))),t.value=!1},V=async e=>{const t=await l.A.delete(`/share/${e.Id}`);t?.Success?(r.oR.success(t.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await h()):r.oR.error(t?.Message||"删除失败",{autoClose:2e3,position:"top-center"})},w=e=>{m.value={...e},p.value=!0,d.value=!0,(0,a.nextTick)(()=>{C.value?.focus()})},g=async()=>{if(!m.value.Title.trim())return void r.oR.error("标题不能为空",{autoClose:2e3,position:"top-center"});o.value=!0;const e=await l.A.post(p.value?"/share/update":"/share/add",m.value);e?.Success?(r.oR.success(e.Message||"保存成功",{autoClose:2e3,position:"top-center"}),N(),await h()):r.oR.error(e?.Message||"保存失败",{autoClose:2e3,position:"top-center"}),o.value=!1},N=()=>{d.value=!1,p.value=!1,m.value={Title:"",Link:"",Sort:0}};return(0,a.onMounted)(()=>{h()}),(e,r)=>{const l=(0,a.resolveComponent)("q-btn"),b=(0,a.resolveComponent)("q-btn-group"),k=(0,a.resolveComponent)("vxe-column"),x=(0,a.resolveComponent)("q-tooltip"),R=(0,a.resolveComponent)("q-icon"),_=(0,a.resolveComponent)("q-card-section"),y=(0,a.resolveComponent)("q-card-actions"),A=(0,a.resolveComponent)("q-card"),S=(0,a.resolveComponent)("q-popup-proxy"),q=(0,a.resolveComponent)("vxe-table"),T=(0,a.resolveComponent)("q-input"),L=(0,a.resolveComponent)("q-dialog"),Q=(0,a.resolveComponent)("q-spinner"),D=(0,a.resolveComponent)("q-inner-loading"),U=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(A,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",n,[(0,a.createVNode)(b,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(l,{color:"negative",icon:"add",label:"添加分享",onClick:r[0]||(r[0]=e=>d.value=!0),loading:t.value},null,8,["loading"]),(0,a.createVNode)(l,{color:"info",icon:"refresh",label:"刷新",onClick:h,loading:t.value},null,8,["loading"])]),_:1})]),(0,a.createVNode)(q,{ref_key:"tableRef",ref:v,data:u.value,loading:t.value,stripe:"",border:"",class:"limited-row-height"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(k,{field:"Title",title:"标题"}),(0,a.createVNode)(k,{field:"Link",title:"链接"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("a",{href:e.Link,target:"_blank",class:"text-primary"},(0,a.toDisplayString)(e.Link),9,s)]),_:1}),(0,a.createVNode)(k,{field:"Sort",title:"排序",width:"70",sortable:""},{default:(0,a.withCtx)(({row:e})=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.Sort),1)]),_:1}),(0,a.createVNode)(k,{title:"操作",width:"80"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createVNode)(l,{flat:"",size:"md",color:"primary",icon:"edit",dense:"",onClick:t=>w(e)},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(x,{class:"bg-primary"},{default:(0,a.withCtx)(()=>[...r[5]||(r[5]=[(0,a.createTextVNode)("编辑",-1)])]),_:1})]),_:1},8,["onClick"]),(0,a.createVNode)(l,{flat:"",size:"md",color:"negative",icon:"delete",dense:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(x,{class:"bg-negative"},{default:(0,a.withCtx)(()=>[...r[6]||(r[6]=[(0,a.createTextVNode)("删除",-1)])]),_:1}),(0,a.createVNode)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(_,{class:"row items-center"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(R,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),(0,a.createElementVNode)("div",null,[r[7]||(r[7]=(0,a.createElementVNode)("div",{class:"text-h6"},"确认删除",-1)),(0,a.createElementVNode)("div",i,"确认删除分享【"+(0,a.toDisplayString)(e.Title)+"】吗？",1)])]),_:2},1024),(0,a.createVNode)(y,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(l,{label:"确认",color:"negative",onClick:t=>V(e)},null,8,["onClick"]),[[U]]),(0,a.withDirectives)((0,a.createVNode)(l,{label:"取消",color:"primary"},null,512),[[U]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading"])]),_:1})]),_:1}),(0,a.createVNode)(L,{modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=e=>d.value=e),persistent:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,{style:{"min-width":"600px"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",c,(0,a.toDisplayString)(p.value?"编辑分享":"添加分享"),1)]),_:1}),(0,a.createVNode)(_,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(T,{dense:"",autogrow:"",modelValue:m.value.Title,"onUpdate:modelValue":r[1]||(r[1]=e=>m.value.Title=e),outlined:"",label:"标题",rules:[e=>!!e||"标题不能为空"],ref_key:"titleInputRef",ref:C},null,8,["modelValue","rules"]),(0,a.createVNode)(T,{dense:"",autogrow:"",modelValue:m.value.Link,"onUpdate:modelValue":r[2]||(r[2]=e=>m.value.Link=e),outlined:"",label:"URL",rules:[e=>!!e||"URL不能为空",e=>f(e)||"请输入有效的URL"]},null,8,["modelValue","rules"]),(0,a.createVNode)(T,{modelValue:m.value.Sort,"onUpdate:modelValue":r[3]||(r[3]=e=>m.value.Sort=e),modelModifiers:{number:!0},outlined:"",type:"number",label:"排序号",hint:"数字越小排序越靠前",rules:[e=>e>=0||"排序号不能为负数"]},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(y,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(l,{label:"确定",color:"primary",onClick:g,loading:o.value},null,8,["loading"]),(0,a.createVNode)(l,{label:"取消",color:"negative",onClick:N})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.createVNode)(D,{showing:t.value},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(Q,{color:"primary",size:"56px"})]),_:1},8,["showing"])])}}}),d=o(1317),p=o(3663),m=o(7180),v=o(7877),C=o(407),f=o(6997),h=o(4854),V=o(4503),w=o(1248),g=o(1375),N=o(8622),b=o(9010),k=o(5485),x=o(515),R=o(2110),_=o.n(R);const y=(0,d.A)(u,[["__scopeId","data-v-57600fc1"]]);var A=y;_()(u,"components",{QCard:p.A,QCardSection:m.A,QBtnGroup:v.A,QBtn:C.A,QTooltip:f.A,QPopupProxy:h.A,QIcon:V.A,QCardActions:w.A,QDialog:g.A,QInput:N.A,QInnerLoading:b.A,QSpinner:k.A}),_()(u,"directives",{ClosePopup:x.A})}}]);