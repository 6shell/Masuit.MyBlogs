(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[54],{13986:function(e,t,a){"use strict";var o=a(74413),l=a(27454),r=a.n(l),s=a(76661),i=a(57695);const n=o.A.create({baseURL:s.c.baseURL,timeout:s.c.timeOut});n.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=r().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=n},41333:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var o=a(74220),l=a(97700),r=a(46732),s=a(57695),i=a(13986);const n={class:"seminar-page"},u={class:"q-mb-md"},c=["href"],d=["innerHTML"],p={class:"text-subtitle2"},b={class:"q-mt-md flex justify-center items-center"},g={class:"q-ml-sm text-caption"},m={class:"text-h6"};var v=(0,o.pM)({__name:"seminar",setup(e){const t=(0,r.KR)(!1),a=(0,r.KR)(!1),v=(0,r.KR)([]),f=(0,r.KR)(!1),k=(0,r.KR)(!1),w=(0,r.KR)({Title:"",SubTitle:"",Description:""}),R=(0,r.KR)({page:1,rowsPerPage:10,total:0}),C=(0,r.KR)(null),F=(0,r.KR)(null),_={toolbars:["bold","italic","strikethrough","|","title","quote","unorderedList","orderedList","task","|","codeRow","code","link","image","table","|","hr","br","|","preview","fullscreen"]},h=async()=>{t.value=!0;const e=await i.A.get(`/seminar/getpagedata?page=${R.value.page}&size=${R.value.rowsPerPage}`);e&&(v.value=e.Data||[],R.value.total=e.TotalCount||0),t.value=!1},A=async e=>{const t=await i.A.post(`/seminar/delete/${e.Id}`);t?.Success?(s.oR.success(t.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await h()):s.oR.error(t?.Message||"删除失败",{autoClose:2e3,position:"top-center"})},y=e=>{w.value={...e},k.value=!0,f.value=!0,(0,o.dY)(()=>{F.value?.focus()})},T=async()=>{if(!w.value.Title.trim())return void s.oR.error("专题名称不能为空",{autoClose:2e3,position:"top-center"});a.value=!0;const e=await i.A.post("/Seminar/save",w.value);e?.Success?(s.oR.success(e.Message||"保存成功",{autoClose:2e3,position:"top-center"}),q(),await h()):s.oR.error(e?.Message||"保存失败",{autoClose:2e3,position:"top-center"}),a.value=!1},q=()=>{f.value=!1,k.value=!1,w.value={Title:"",SubTitle:"",Description:""}};return(0,o.sV)(()=>{h()}),(e,r)=>{const s=(0,o.g2)("q-btn"),i=(0,o.g2)("q-btn-group"),x=(0,o.g2)("vxe-column"),V=(0,o.g2)("q-tooltip"),P=(0,o.g2)("q-icon"),L=(0,o.g2)("q-card-section"),S=(0,o.g2)("q-card-actions"),M=(0,o.g2)("q-card"),Q=(0,o.g2)("q-popup-proxy"),D=(0,o.g2)("vxe-table"),K=(0,o.g2)("q-pagination"),U=(0,o.g2)("q-select"),O=(0,o.g2)("q-input"),I=(0,o.g2)("v-md-editor"),j=(0,o.g2)("q-dialog"),z=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(M,null,{default:(0,o.k6)(()=>[(0,o.bF)(L,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",u,[(0,o.bF)(i,null,{default:(0,o.k6)(()=>[(0,o.bF)(s,{color:"negative",icon:"add",label:"添加专题",onClick:r[0]||(r[0]=e=>f.value=!0),loading:t.value},null,8,["loading"]),(0,o.bF)(s,{color:"info",icon:"refresh",label:"刷新",onClick:h,loading:t.value},null,8,["loading"])]),_:1})]),(0,o.bF)(D,{ref_key:"tableRef",ref:C,data:v.value,loading:t.value,stripe:"",border:"",class:"limited-row-height"},{default:(0,o.k6)(()=>[(0,o.bF)(x,{field:"Title",title:"标题","min-width":"200",fixed:"left"},{default:(0,o.k6)(({row:e})=>[(0,o.Lk)("a",{href:`/special/${e.Id}`,target:"_blank",class:"text-primary"},(0,l.v_)(e.Title),9,c)]),_:1}),(0,o.bF)(x,{field:"SubTitle",title:"子标题","min-width":"180"},{default:(0,o.k6)(({row:e})=>[(0,o.eW)((0,l.v_)(e.SubTitle),1)]),_:1}),(0,o.bF)(x,{field:"Description",title:"描述","min-width":"250"},{default:(0,o.k6)(({row:e})=>[(0,o.Lk)("div",{innerHTML:e.Description},null,8,d)]),_:1}),(0,o.bF)(x,{title:"操作",width:"80",fixed:"right"},{default:(0,o.k6)(({row:e})=>[(0,o.bF)(s,{flat:"",size:"md",color:"primary",icon:"edit",dense:"",onClick:t=>y(e)},{default:(0,o.k6)(()=>[(0,o.bF)(V,{class:"bg-primary"},{default:(0,o.k6)(()=>[...r[7]||(r[7]=[(0,o.eW)("编辑",-1)])]),_:1})]),_:1},8,["onClick"]),(0,o.bF)(s,{flat:"",size:"md",color:"negative",icon:"delete",dense:""},{default:(0,o.k6)(()=>[(0,o.bF)(V,{class:"bg-negative"},{default:(0,o.k6)(()=>[...r[8]||(r[8]=[(0,o.eW)("删除",-1)])]),_:1}),(0,o.bF)(Q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.k6)(()=>[(0,o.bF)(M,null,{default:(0,o.k6)(()=>[(0,o.bF)(L,{class:"row items-center"},{default:(0,o.k6)(()=>[(0,o.bF)(P,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),(0,o.Lk)("div",null,[r[9]||(r[9]=(0,o.Lk)("div",{class:"text-h6"},"确认删除",-1)),(0,o.Lk)("div",p,"确认删除专题【"+(0,l.v_)(e.Title)+"】吗？",1)])]),_:2},1024),(0,o.bF)(S,{align:"right"},{default:(0,o.k6)(()=>[(0,o.bo)((0,o.bF)(s,{flat:"",label:"确认",color:"negative",onClick:t=>A(e)},null,8,["onClick"]),[[z]]),(0,o.bo)((0,o.bF)(s,{flat:"",label:"取消",color:"primary"},null,512),[[z]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,o.Lk)("div",b,[(0,o.bF)(K,{modelValue:R.value.page,"onUpdate:modelValue":[r[1]||(r[1]=e=>R.value.page=e),h],max:Math.ceil(R.value.total/R.value.rowsPerPage),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"]),(0,o.bF)(U,{modelValue:R.value.rowsPerPage,"onUpdate:modelValue":[r[2]||(r[2]=e=>R.value.rowsPerPage=e),h],options:[10,15,20,30,50,100,200],dense:"",outlined:"",class:"q-ml-md",style:{width:"80px"}},null,8,["modelValue"]),(0,o.Lk)("span",g,"共 "+(0,l.v_)(R.value.total)+" 条",1)])]),_:1})]),_:1}),(0,o.bF)(j,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),persistent:""},{default:(0,o.k6)(()=>[(0,o.bF)(M,{style:{"min-width":"80vw"}},{default:(0,o.k6)(()=>[(0,o.bF)(L,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",m,(0,l.v_)(k.value?"编辑专题":"添加专题"),1)]),_:1}),(0,o.bF)(L,{class:"column q-gutter-md"},{default:(0,o.k6)(()=>[(0,o.bF)(O,{dense:"",modelValue:w.value.Title,"onUpdate:modelValue":r[3]||(r[3]=e=>w.value.Title=e),outlined:"",label:"专题名称",rules:[e=>!!e||"专题名称不能为空"],ref_key:"titleInputRef",ref:F},null,8,["modelValue","rules"]),(0,o.bF)(O,{dense:"",modelValue:w.value.SubTitle,"onUpdate:modelValue":r[4]||(r[4]=e=>w.value.SubTitle=e),outlined:"",label:"子标题"},null,8,["modelValue"]),(0,o.bF)(I,{modelValue:w.value.Description,"onUpdate:modelValue":r[5]||(r[5]=e=>w.value.Description=e),height:"300px",placeholder:"请输入专题描述（支持 Markdown 语法）","toolbar-config":_},null,8,["modelValue"])]),_:1}),(0,o.bF)(S,{align:"right"},{default:(0,o.k6)(()=>[(0,o.bF)(s,{flat:"",label:"取消",color:"primary",onClick:q}),(0,o.bF)(s,{label:"确定",color:"positive",onClick:T,loading:a.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),f=a(1317),k=a(63663),w=a(17180),R=a(10258),C=a(20407),F=a(76997),_=a(34854),h=a(64503),A=a(71248),y=a(74183),T=a(40975),q=a(51375),x=a(38622),V=a(60515),P=a(22110),L=a.n(P);const S=(0,f.A)(v,[["__scopeId","data-v-151e7d7c"]]);var M=S;L()(v,"components",{QCard:k.A,QCardSection:w.A,QBtnGroup:R.A,QBtn:C.A,QTooltip:F.A,QPopupProxy:_.A,QIcon:h.A,QCardActions:A.A,QPagination:y.A,QSelect:T.A,QDialog:q.A,QInput:x.A}),L()(v,"directives",{ClosePopup:V.A})},42634:function(){}}]);