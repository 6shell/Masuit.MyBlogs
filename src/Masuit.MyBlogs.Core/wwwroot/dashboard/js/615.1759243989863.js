(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[615],{13986:function(e,t,o){"use strict";var r=o(74413),n=o(27454),a=o.n(n),s=o(76661),i=o(57695);const l=r.A.create({baseURL:s.c.baseURL,timeout:s.c.timeOut});l.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=a().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=l},42634:function(){},59386:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return R}});var r=o(74220),n=o(46732),a=o(57695),s=o(75220),i=o(13986);const l={class:"merge-edit-container"},u={class:"q-mt-md"};var c=(0,r.pM)({__name:"edit",setup(e){const t=(0,n.KR)(null),o=(0,s.rd)(),c=(0,s.lq)(),p=(0,n.KR)(!1),d=(0,n.KR)({Id:"",Title:"",Content:""}),m=async()=>{p.value=!0;const e=c.query.id;if(!e)return void a.oR.error("缺少合并ID参数",{autoClose:2e3,position:"top-center"});const t=await i.A.get(`/merge/${e}`);t?.Data&&(d.value=t.Data),p.value=!1},b=async()=>{if(!d.value.Title.trim())return void a.oR.error("请输入文章标题",{autoClose:2e3,position:"top-center"});if(!d.value.Content.trim())return void a.oR.error("请输入文章内容",{autoClose:2e3,position:"top-center"});p.value=!0;const e=await i.A.post("/merge",d.value);a.oR.success(e?.Message||"合并成功",{autoClose:2e3,position:"top-center"}),o.push("/posts/merge")};(0,r.sV)(async()=>{await m(),document.querySelector(".q-page-container").addEventListener("scroll",f)}),(0,r.xo)(()=>{g&&clearTimeout(g),document.querySelector(".q-page-container").removeEventListener("scroll",f)});let g=null,v=!1;const f=()=>{g&&clearTimeout(g),g=setTimeout(()=>{k()},100)},k=()=>{if(null==t.value?.$el)return;const e=t.value.$el.querySelector(".edui-editor-toolbarbox");if(e){const o=t.value.$el.getBoundingClientRect(),r=o.top<84&&o.bottom>300;if(r&&!v){const o=t.value.$el.offsetWidth;e.style.cssText=`\n          position: fixed !important;\n          top: 84px !important;\n          z-index: 1000 !important;\n          width: ${o}px !important;\n          transition: all 0.5s ease !important;\n        `,v=!0}else!r&&v&&(e.style.cssText="\n          position: static !important;\n          top: auto !important;\n          z-index: auto !important;\n          width: auto !important;\n          transition: all 0.5s ease !important;\n        ",v=!1)}};return(e,o)=>{const n=(0,r.g2)("q-input"),a=(0,r.g2)("vue-ueditor-wrap"),s=(0,r.g2)("q-btn"),i=(0,r.g2)("q-spinner"),c=(0,r.g2)("q-inner-loading");return(0,r.uX)(),(0,r.CE)("div",l,[o[3]||(o[3]=(0,r.Lk)("div",{class:"text-h5"},"编辑并合并文章",-1)),(0,r.bF)(n,{modelValue:d.value.Title,"onUpdate:modelValue":o[0]||(o[0]=e=>d.value.Title=e),label:"文章标题",outlined:"",dense:"",rules:[e=>!!e||"请输入文章标题"],"lazy-rules":""},null,8,["modelValue","rules"]),(0,r.Lk)("div",null,[o[2]||(o[2]=(0,r.Lk)("label",{class:"text-subtitle2 q-mb-sm block"},"文章内容：",-1)),(0,r.bF)(a,{ref_key:"editor",ref:t,modelValue:d.value.Content,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value.Content=e)},null,8,["modelValue"])]),(0,r.Lk)("div",u,[(0,r.bF)(s,{type:"submit",color:"primary",label:"确认合并",loading:p.value,size:"lg",onClick:b},null,8,["loading"])]),(0,r.bF)(c,{showing:p.value},{default:(0,r.k6)(()=>[(0,r.bF)(i,{color:"primary",size:"100px"})]),_:1},8,["showing"])])}}}),p=o(1317),d=o(38622),m=o(20407),b=o(49010),g=o(25485),v=o(66284),f=o(22110),k=o.n(f);const C=(0,p.A)(c,[["__scopeId","data-v-b2248412"]]);var R=C;k()(c,"components",{QInput:d.A,QBtn:m.A,QInnerLoading:b.A,QSpinner:g.A,QPageContainer:v.A})}}]);