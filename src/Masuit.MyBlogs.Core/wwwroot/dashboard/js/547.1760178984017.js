(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[547],{253:function(){},3557:function(e,t,o){"use strict";o.d(t,{W:function(){return a},w:function(){return r}});const a={right:"5px",borderRadius:"5px",backgroundColor:"#616161",width:"5px"},r={borderRadius:"5px",backgroundColor:"rgba(144,147,153,0.9)",padding:"10px",margin:"10px",width:"3px"}},3986:function(e,t,o){"use strict";var a=o(3719),r=o.n(a),l=o(7454),s=o.n(l),n=o(6661),i=o(7695);const c=r().create({baseURL:n.c.baseURL,timeout:n.c.timeOut});c.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=s().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=c},7430:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Q}});var a=o(4061),r=o(7695),l=o(3508),s=o.n(l),n=o(3986),i=o(3992),c=o(3557);const d={class:"main-content"};var u={__name:"BaseContent",props:["position"],setup(e,{expose:t}){const o=(0,a.ref)(null);let r="";const l=(0,i.useRoute)(),s=e=>{o.value.setScrollPosition(e,300)},n=()=>o.value.getScrollPosition();return(0,a.onMounted)(()=>{r=l.path,Object.freeze(r);const e=window.sessionStorage.getItem(l.path);if(e){const t=JSON.parse(e);s(t.listScrollTop)}}),(0,a.onDeactivated)(()=>{window.sessionStorage.setItem(r,JSON.stringify({listScrollTop:n()}))}),(0,a.onActivated)(()=>{const e=window.sessionStorage.getItem(l.path);if(e){const t=JSON.parse(e);s(t.listScrollTop)}}),(0,a.onUnmounted)(()=>{sessionStorage.removeItem(r)}),t({ScrollToPosition:s,getPosition:n}),(e,t)=>{const r=(0,a.resolveComponent)("q-scroll-area");return(0,a.openBlock)(),(0,a.createElementBlock)("div",d,[(0,a.createVNode)(r,{ref_key:"scrollArea",ref:o,"thumb-style":(0,a.unref)(c.W),visible:!1,style:{height:"100%"}},{default:(0,a.withCtx)(()=>[(0,a.renderSlot)(e.$slots,"default")]),_:3},8,["thumb-style"])])}}},p=o(196),m=o(2110),f=o.n(m);const h=u;var w=h;f()(u,"components",{QScrollArea:p.A});const C={class:"list-container"},v={class:"q-mb-md"},V=["href"],g=["href"],N={class:"column q-gutter-xs"},x={class:"column q-gutter-xs"},b={class:"q-mt-md flex justify-center items-center"},k={class:"q-ml-sm text-caption"};var _=(0,a.defineComponent)({__name:"post-pending",setup(e){const t=(0,a.ref)(!1),o=(0,a.ref)([]),l=(0,a.ref)(""),i=(0,a.ref)({page:1,rowsPerPage:10,total:0}),c=(0,a.ref)(null),d=e=>s()(e).format("YYYY-MM-DD HH:mm:ss"),u=()=>{i.value.page=1,p()},p=async()=>{t.value=!0;try{const e={page:i.value.page,size:i.value.rowsPerPage,search:l.value||""},t=await n.A.post("/post/GetPending",e);t&&(o.value=t.Data||[],i.value.total=t.TotalCount||0)}catch(e){r.oR.error("加载数据失败",{autoClose:2e3,position:"top-center"}),console.error("Error loading data:",e)}finally{t.value=!1}},m=async e=>{const t=await n.A.post(`/post/truncate/${e.Id}`);r.oR.success(t?.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await p()},f=async e=>{const t=await n.A.post("/post/pass/"+e.Id);r.oR.success(t?.Message||"审核通过",{autoClose:2e3,position:"top-center"}),await p()},h=async e=>{const t=await n.A.post("/post/block/"+e.Id);r.oR.success(t?.Message||"已标记为恶意提交",{autoClose:2e3,position:"top-center"})},_=async e=>{const t=await n.A.post("/system/AddToBlackList",{ip:e});r.oR.success(t?.Message||"已加入黑名单",{autoClose:2e3,position:"top-center"})};return(0,a.onMounted)(()=>{p()}),(e,r)=>{const s=(0,a.resolveComponent)("q-btn"),n=(0,a.resolveComponent)("q-input"),y=(0,a.resolveComponent)("vxe-column"),A=(0,a.resolveComponent)("q-icon"),P=(0,a.resolveComponent)("q-card-section"),E=(0,a.resolveComponent)("q-card-actions"),R=(0,a.resolveComponent)("q-card"),S=(0,a.resolveComponent)("q-popup-proxy"),q=(0,a.resolveComponent)("q-tooltip"),D=(0,a.resolveComponent)("q-btn-group"),I=(0,a.resolveComponent)("vxe-table"),T=(0,a.resolveComponent)("q-pagination"),M=(0,a.resolveComponent)("q-select"),z=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)(w,{class:"q-mt-md"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",C,[(0,a.createVNode)(R,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(P,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",v,[(0,a.createVNode)(n,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),outlined:"",dense:"",placeholder:"全局搜索"},{append:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{color:"info",icon:"search",onClick:p,loading:t.value,label:"搜索"},null,8,["loading"])]),_:1},8,["modelValue"])]),(0,a.createVNode)(I,{ref_key:"tableRef",ref:c,data:o.value,loading:t.value,stripe:"",border:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{field:"Title",title:"标题","min-width":"200",fixed:"left"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("a",{href:`/${e.Id}`,target:"_blank",class:"text-primary"},(0,a.toDisplayString)(e.Title),9,V)]),_:1}),(0,a.createVNode)(y,{field:"Author",title:"作者",width:"120"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("a",{href:`/author/${e.Author}`,target:"_blank",class:"text-primary"},(0,a.toDisplayString)(e.Author),9,g)]),_:1}),(0,a.createVNode)(y,{field:"PostDate",title:"发表"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createTextVNode)((0,a.toDisplayString)(d(e.PostDate)),1)]),_:1}),(0,a.createVNode)(y,{field:"Email",title:"作者邮箱",width:"180"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.Email),1),(0,a.createVNode)(s,{size:"sm",color:"secondary",label:"标记为恶意提交",dense:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(R,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(P,{class:"row items-center"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),r[3]||(r[3]=(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("div",{class:"text-h6"},"确认操作"),(0,a.createElementVNode)("div",{class:"text-subtitle2"},"此操作将标记该用户为恶意提交，是否继续？")],-1))]),_:1}),(0,a.createVNode)(E,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"确认",color:"negative",onClick:t=>{h(e)}},null,8,["onClick"]),[[z]]),(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"取消",color:"primary"},null,512),[[z]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:1}),(0,a.createVNode)(y,{field:"IP",title:"提交IP",width:"150"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createElementVNode)("div",x,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.IP),1),(0,a.createVNode)(s,{color:"negative",icon:"block",dense:"",flat:"",size:"sm",class:"q-ml-sm"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(q,null,{default:(0,a.withCtx)(()=>[...r[4]||(r[4]=[(0,a.createTextVNode)("添加到黑名单",-1)])]),_:1}),(0,a.createVNode)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(R,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(P,{class:"row items-center"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),r[5]||(r[5]=(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("div",{class:"text-h6"},"确认操作"),(0,a.createElementVNode)("div",{class:"text-subtitle2"},"此操作将标记该用户IP为黑名单，是否继续？")],-1))]),_:1}),(0,a.createVNode)(E,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"确认",color:"negative",onClick:t=>_(e.IP)},null,8,["onClick"]),[[z]]),(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"取消",color:"primary"},null,512),[[z]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:1}),(0,a.createVNode)(y,{title:"操作",width:"110",fixed:"right"},{default:(0,a.withCtx)(({row:e})=>[(0,a.createVNode)(D,{push:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{size:"md",color:"negative",icon:"delete",dense:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(R,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(P,{class:"row items-center"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),r[6]||(r[6]=(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("div",{class:"text-h6"},"确认操作"),(0,a.createElementVNode)("div",{class:"text-subtitle2"},"此操作将彻底删除该文章，是否继续？")],-1))]),_:1}),(0,a.createVNode)(E,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"确认",color:"negative",onClick:t=>m(e)},null,8,["onClick"]),[[z]]),(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"取消",color:"primary"},null,512),[[z]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),"审核中"===e.Status?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,size:"md",color:"positive",icon:"check",dense:""},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(S,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(R,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(P,{class:"row items-center"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(A,{name:"warning",color:"green",size:"2rem",class:"q-mr-sm"}),r[7]||(r[7]=(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("div",{class:"text-h6"},"确认操作"),(0,a.createElementVNode)("div",{class:"text-subtitle2"},"此操作将通过该文章的审核，是否继续？")],-1))]),_:1}),(0,a.createVNode)(E,{align:"right"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"确认",color:"positive",onClick:t=>f(e)},null,8,["onClick"]),[[z]]),(0,a.withDirectives)((0,a.createVNode)(s,{flat:"",label:"取消",color:"primary"},null,512),[[z]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s,{size:"md",color:"primary",icon:"edit",dense:"",to:`/posts/write?id=${e.Id}`},null,8,["to"])]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,a.createElementVNode)("div",b,[(0,a.createVNode)(T,{modelValue:i.value.page,"onUpdate:modelValue":[r[1]||(r[1]=e=>i.value.page=e),p],max:Math.ceil(i.value.total/i.value.rowsPerPage),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"]),(0,a.createVNode)(M,{modelValue:i.value.rowsPerPage,"onUpdate:modelValue":[r[2]||(r[2]=e=>i.value.rowsPerPage=e),u],options:[10,15,20,30,50,100,200],dense:"",outlined:"",class:"q-ml-md",style:{width:"80px"}},null,8,["modelValue"]),(0,a.createElementVNode)("span",k," 共 "+(0,a.toDisplayString)(i.value.total)+" 条 ",1)])]),_:1})]),_:1})])]),_:1})}}}),y=o(1317),A=o(3663),P=o(7180),E=o(8622),R=o(407),S=o(4854),q=o(4503),D=o(1248),I=o(6997),T=o(7877),M=o(4183),z=o(975),B=o(515);const O=(0,y.A)(_,[["__scopeId","data-v-354a3590"]]);var Q=O;f()(_,"components",{QCard:A.A,QCardSection:P.A,QInput:E.A,QBtn:R.A,QPopupProxy:S.A,QIcon:q.A,QCardActions:D.A,QTooltip:I.A,QBtnGroup:T.A,QPagination:M.A,QSelect:z.A}),f()(_,"directives",{ClosePopup:B.A})}}]);