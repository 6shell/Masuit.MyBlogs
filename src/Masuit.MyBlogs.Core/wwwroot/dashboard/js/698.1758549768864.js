(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[698],{13986:function(e,t,a){"use strict";var l=a(74413),o=a(27454),s=a.n(o),r=a(76661),i=a(57695);const d=l.A.create({baseURL:r.c.baseURL,timeout:r.c.timeOut});d.interceptors.request.use(e=>{const t=sessionStorage.getItem("access_token");if(t&&(e.headers.Authorization="Bearer "+t),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=s().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),d.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&i.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return i.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:i.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:i.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:i.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:i.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:i.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:i.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:i.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:i.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:i.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:i.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),t.A=d},42634:function(){},60393:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return te}});var l=a(74220),o=a(97700),s=a(46732),r=a(57695),i=a(88828),d=a.n(i),n=a(13986);const c={class:"search-analysis-container"},u={class:"row"},k={class:"col-12"},b={class:"row"},f={class:"col"},p={class:"text-right"},w={class:"q-mt-md"},h=["href"],v={class:"ip-info"},g=["href"],_={class:"region-info"},m={class:"q-mt-md flex justify-center items-center"},y={class:"q-mt-lg"},F={class:"row q-gutter-md"},C={key:0,class:"col-md"},L=["href"],x={key:1,class:"col-md"},R=["href"],q={key:2,class:"col-md"},K=["href"],A={class:"row q-gutter-md q-mt-md"},P={key:0,class:"col-md"},Q=["href"],M={key:1,class:"col-md"},E=["href"],T={key:2,class:"col-md"},I=["href"];var S=(0,l.pM)({__name:"index",setup(e){const t=(0,s.KR)(!1),a=(0,s.KR)(!1),i=(0,s.KR)([]),S=(0,s.KR)(""),$=(0,s.KR)({page:1,rowsPerPage:10,total:0}),V=(0,s.KR)({month:[],week:[],today:[],wish_month:[],wish_week:[],wish_today:[]}),D=(0,s.KR)(null),O=e=>e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"",X=(e,t=0)=>null===e||void 0===e?"0":Number(e).toFixed(t),j=async()=>{try{const e=await n.A.get("/search/HotKey");e?.Success&&e.Data?V.value=e.Data:r.oR.error(e?.Message||"获取热词数据失败",{autoClose:2e3,position:"top-center"})}catch(e){r.oR.error("获取热词数据失败",{autoClose:2e3,position:"top-center"})}},N=async()=>{t.value=!0;try{const e={page:$.value.page,size:$.value.rowsPerPage,search:S.value||""},t=await n.A.post("/search/SearchList",null,{params:e});t&&t.TotalCount>0?(i.value=t.Data||[],$.value.total=t.TotalCount||0):(i.value=[],$.value.total=0,t?.Message&&r.oR.warning(t.Message,{autoClose:2e3,position:"top-center"}))}catch(e){r.oR.error("加载数据失败",{autoClose:2e3,position:"top-center"}),i.value=[],$.value.total=0}finally{t.value=!1}},U=()=>{$.value.page=1,N()},z=async e=>{const t=await n.A.post(`/system/AddToBlackList/${e}`);r.oR.success(t?.Message||"已加入黑名单",{autoClose:2e3,position:"top-center"})},W=async e=>{a.value=!0;try{const t=await n.A.post(`/search/delete/${e}`);t?.Success?(r.oR.success(t.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await N()):r.oR.error(t?.Message||"删除失败",{autoClose:2e3,position:"top-center"})}catch(t){r.oR.error("删除失败",{autoClose:2e3,position:"top-center"})}finally{a.value=!1}};return(0,l.sV)(async()=>{await j(),await N()}),(e,a)=>{const s=(0,l.g2)("q-btn"),r=(0,l.g2)("q-icon"),d=(0,l.g2)("q-input"),n=(0,l.g2)("vxe-column"),j=(0,l.g2)("q-tooltip"),B=(0,l.g2)("q-card-section"),H=(0,l.g2)("q-card-actions"),Y=(0,l.g2)("q-card"),J=(0,l.g2)("q-popup-proxy"),G=(0,l.g2)("vxe-table"),Z=(0,l.g2)("q-pagination"),ee=(0,l.g2)("q-select"),te=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",u,[(0,l.Lk)("div",k,[(0,l.Lk)("div",b,[(0,l.Lk)("div",f,[(0,l.bF)(s,{color:"info",icon:"refresh",onClick:N,loading:t.value,class:"q-mr-md"},{default:(0,l.k6)(()=>[...a[3]||(a[3]=[(0,l.eW)(" 刷新 ",-1)])]),_:1},8,["loading"])]),(0,l.Lk)("div",p,[(0,l.bF)(d,{modelValue:S.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>S.value=e),N],placeholder:"全局搜索",outlined:"",dense:"",clearable:"",class:"search-input",debounce:"500"},{prepend:(0,l.k6)(()=>[(0,l.bF)(r,{name:"search"})]),_:1},8,["modelValue"])])])])]),(0,l.Lk)("div",w,[(0,l.bF)(G,{ref_key:"tableRef",ref:D,data:i.value,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,h)]),_:1}),(0,l.bF)(n,{field:"SearchTime",title:"搜索时间",width:"180"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,o.v_)(O(e.SearchTime)),1)]),_:1}),(0,l.bF)(n,{field:"ResultCount",title:"结果集数量",width:"120"}),(0,l.bF)(n,{field:"Elapsed",title:"搜索耗时",width:"120"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,o.v_)(X(e.Elapsed,2))+" ms ",1)]),_:1}),(0,l.bF)(n,{field:"IP",title:"客户端IP","min-width":"200"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("div",v,[(0,l.Lk)("a",{href:`/tools/ip?ip=${e.IP}`,target:"_blank",class:"ip-link"},(0,o.v_)(e.IP),9,g),(0,l.Lk)("span",_,"("+(0,o.v_)(e.Region)+")",1),(0,l.bF)(s,{color:"negative",icon:"block",dense:"",flat:"",size:"sm",class:"q-ml-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(j,{class:"bg-red"},{default:(0,l.k6)(()=>[...a[4]||(a[4]=[(0,l.eW)("添加到黑名单",-1)])]),_:1}),(0,l.bF)(J,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(()=>[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"row items-center"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),a[5]||(a[5]=(0,l.Lk)("div",null,[(0,l.Lk)("div",{class:"text-h6"},"确认操作"),(0,l.Lk)("div",{class:"text-subtitle2"},"此操作将标记该用户IP为黑名单，是否继续？")],-1))]),_:1}),(0,l.bF)(H,{align:"right"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(s,{flat:"",label:"确认",color:"negative",onClick:t=>z(e.IP)},null,8,["onClick"]),[[te]]),(0,l.bo)((0,l.bF)(s,{flat:"",label:"取消",color:"primary"},null,512),[[te]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:1}),(0,l.bF)(n,{title:"操作",width:"70",fixed:"right"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(s,{dense:"",flat:"",color:"negative",icon:"delete"},{default:(0,l.k6)(()=>[(0,l.bF)(j,null,{default:(0,l.k6)(()=>[...a[6]||(a[6]=[(0,l.eW)("删除",-1)])]),_:1}),(0,l.bF)(J,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)(()=>[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"row items-center"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),a[7]||(a[7]=(0,l.Lk)("div",null,[(0,l.Lk)("div",{class:"text-h6"},"确认删除"),(0,l.Lk)("div",{class:"text-subtitle2"},"确认删除这条记录吗？")],-1))]),_:1}),(0,l.bF)(H,{align:"right"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(s,{flat:"",label:"确认",color:"negative",onClick:t=>W(e.Id)},null,8,["onClick"]),[[te]]),(0,l.bo)((0,l.bF)(s,{flat:"",label:"取消",color:"primary"},null,512),[[te]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading"]),(0,l.Lk)("div",m,[(0,l.bF)(Z,{"max-pages":"6",modelValue:$.value.page,"onUpdate:modelValue":[a[1]||(a[1]=e=>$.value.page=e),N],max:Math.ceil($.value.total/$.value.rowsPerPage),"direction-links":""},null,8,["modelValue","max"]),(0,l.bF)(ee,{modelValue:$.value.rowsPerPage,"onUpdate:modelValue":[a[2]||(a[2]=e=>$.value.rowsPerPage=e),U],options:[10,15,20,30,50,100,200],dense:"",outlined:"",style:{width:"80px"},class:"q-ml-md"},null,8,["modelValue"])])])]),_:1})]),_:1}),(0,l.Lk)("div",y,[(0,l.Lk)("div",F,[V.value.month&&V.value.month.length>0?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[8]||(a[8]=[(0,l.Lk)("div",{class:"text-h6"},"月度搜索排行",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.month,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,L)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0),V.value.week&&V.value.week.length>0?((0,l.uX)(),(0,l.CE)("div",x,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.Lk)("div",{class:"text-h6"},"本周搜索排行",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.week,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,R)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0),V.value.today&&V.value.today.length>0?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[10]||(a[10]=[(0,l.Lk)("div",{class:"text-h6"},"今日搜索排行",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.today,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,K)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",A,[V.value.wish_month&&V.value.wish_month.length>0?((0,l.uX)(),(0,l.CE)("div",P,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[11]||(a[11]=[(0,l.Lk)("div",{class:"text-h6"},"月度搜索排行",-1),(0,l.Lk)("div",{class:"text-caption text-grey-6"},"(搜索结果为0的热词)",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.wish_month,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,Q)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0),V.value.wish_week&&V.value.wish_week.length>0?((0,l.uX)(),(0,l.CE)("div",M,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.Lk)("div",{class:"text-h6"},"本周搜索排行",-1),(0,l.Lk)("div",{class:"text-caption text-grey-6"},"(搜索结果为0的热词)",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.wish_week,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,E)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0),V.value.wish_today&&V.value.wish_today.length>0?((0,l.uX)(),(0,l.CE)("div",T,[(0,l.bF)(Y,null,{default:(0,l.k6)(()=>[(0,l.bF)(B,{class:"text-center"},{default:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.Lk)("div",{class:"text-h6"},"今日搜索排行",-1),(0,l.Lk)("div",{class:"text-caption text-grey-6"},"(搜索结果为0的热词)",-1)])]),_:1}),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(G,{data:V.value.wish_today,loading:t.value,stripe:"",border:""},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"seq",title:"序号",width:"60"}),(0,l.bF)(n,{field:"Keywords",title:"关键词"},{default:(0,l.k6)(({row:e})=>[(0,l.Lk)("a",{href:`/search/${e.Keywords}`,target:"_blank",class:"keyword-link"},(0,o.v_)(e.Keywords),9,I)]),_:1}),(0,l.bF)(n,{field:"Count",title:"搜索次数",width:"120"})]),_:1},8,["data","loading"])]),_:1})]),_:1})])):(0,l.Q3)("",!0)])])])}}}),$=a(1317),V=a(63663),D=a(17180),O=a(20407),X=a(38622),j=a(64503),N=a(76997),U=a(34854),z=a(71248),W=a(74183),B=a(40975),H=a(29754),Y=a(51375),J=a(60515),G=a(22110),Z=a.n(G);const ee=(0,$.A)(S,[["__scopeId","data-v-4998f110"]]);var te=ee;Z()(S,"components",{QCard:V.A,QCardSection:D.A,QBtn:O.A,QInput:X.A,QIcon:j.A,QTooltip:N.A,QPopupProxy:U.A,QCardActions:z.A,QPagination:W.A,QSelect:B.A,QTable:H.A,QDialog:Y.A}),Z()(S,"directives",{ClosePopup:J.A})}}]);