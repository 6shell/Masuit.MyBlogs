(self["webpackChunkcimo"]=self["webpackChunkcimo"]||[]).push([[585],{13986:function(e,o,t){"use strict";var s=t(74413),a=t(27454),r=t.n(a),l=t(76661),n=t(57695);const c=s.A.create({baseURL:l.c.baseURL,timeout:l.c.timeOut});c.interceptors.request.use(e=>{const o=sessionStorage.getItem("access_token");if(o&&(e.headers.Authorization="Bearer "+o),e.type)switch(e.type){case"FORM-DATA":e.transformRequest=[e=>"args="+JSON.stringify(e)];break;case"FORM":e.headers["Content-Type"]="application/x-www-form-urlencoded",e.data=r().stringify(e.data);break;default:break}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>("object"==typeof e.data&&Object.keys(e.data).includes("Success")&&!0!==e.data.Success&&n.oR.error(e.data.Message||`请求失败:${e.request.responseURL}`,{autoClose:3e3,position:"top-center"}),e.data),e=>{if("ECONNABORTED"===e.code||e.message&&-1!==e.message.indexOf("timeout")||"Network Error"===e.message)return n.oR.error("网络异常",{autoClose:3e3,position:"top-center"}),Promise.reject(e);if(e.response)switch(e.response.status){case 400:n.oR.error("请求错误:"+e.response.data.Message||0,{autoClose:3e3,position:"top-center"});break;case 403:n.oR.error("拒绝访问(403)",{autoClose:3e3,position:"top-center"});break;case 404:n.oR.error("资源不存在(404)",{autoClose:3e3,position:"top-center"});break;case 408:n.oR.error("请求超时(408)",{autoClose:3e3,position:"top-center"});break;case 500:n.oR.error("服务器错误(500)",{autoClose:3e3,position:"top-center"});break;case 501:n.oR.error("服务未实现(501)",{autoClose:3e3,position:"top-center"});break;case 502:n.oR.error("网络错误(502)",{autoClose:3e3,position:"top-center"});break;case 503:n.oR.error("服务不可用(503)",{autoClose:3e3,position:"top-center"});break;case 504:n.oR.error("网络超时(504)",{autoClose:3e3,position:"top-center"});break;case 505:n.oR.error("HTTP版本不受支持(505)",{autoClose:3e3,position:"top-center"});break;default:break}return Promise.reject(e)}),o.A=c},33708:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return E}});var s=t(74220),a=t(97700),r=t(39798),l=t(46732),n=t(57695),c=t(42608),i=t(13986);const u={class:"system-logs-page"},d={key:0,class:"text-center q-pa-xl"},p={key:1,class:"row q-gutter-md"},b=["title"],k={class:"text-h6"},m={class:"log-content"};var g=(0,s.pM)({__name:"logs",setup(e){(0,c.A)();const o=(0,l.KR)([]),t=(0,l.KR)(null),g=(0,l.KR)(!1),v=(0,l.KR)(""),f=(0,l.KR)(""),C=(0,l.KR)(!1),R=async()=>{C.value=!0;try{const e=await i.A.get("/dashboard/GetLogfiles");e?.Success&&e.Data?o.value=e.Data:n.oR.error("获取日志文件列表失败",{autoClose:2e3,position:"top-center"})}catch(e){n.oR.error("获取日志文件列表失败",{autoClose:2e3,position:"top-center"}),console.error("Error getting log files:",e)}finally{C.value=!1}},h=async e=>{try{const o=await i.A.post("/dashboard/catlog",{filename:e});o?.Success&&o.Data?(v.value=e,f.value=o.Data,g.value=!0):n.oR.error("读取日志文件失败",{autoClose:2e3,position:"top-center"})}catch(o){n.oR.error("读取日志文件失败",{autoClose:2e3,position:"top-center"}),console.error("Error viewing log:",o)}},y=async e=>{const o=await i.A.post("/dashboard/deleteFile",{filename:e});o?.Success?(n.oR.success(o.Message||"删除成功",{autoClose:2e3,position:"top-center"}),await R()):n.oR.error(o?.Message||"删除失败",{autoClose:2e3,position:"top-center"})},F=()=>{g.value=!1,v.value="",f.value=""};return(0,s.sV)(()=>{R()}),(e,l)=>{const n=(0,s.g2)("q-icon"),c=(0,s.g2)("q-card-section"),i=(0,s.g2)("q-btn"),C=(0,s.g2)("q-card-actions"),R=(0,s.g2)("q-card"),A=(0,s.g2)("q-popup-proxy"),_=(0,s.g2)("q-space"),q=(0,s.g2)("q-scroll-area"),w=(0,s.g2)("q-dialog"),x=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)("div",u,[l[5]||(l[5]=(0,s.Lk)("div",{class:"text-h4 q-mb-md"},"系统日志管理",-1)),(0,s.bF)(R,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[0===o.value.length?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(n,{name:"description",size:"4rem",color:"grey-5"}),l[3]||(l[3]=(0,s.Lk)("div",{class:"text-h6 text-grey-7 q-mt-md"},"暂无日志文件",-1))])):((0,s.uX)(),(0,s.CE)("div",p,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.value,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"col-lg-2 col-md-3 col-sm-4 col-xs-6"},[(0,s.bF)(R,{class:(0,a.C4)(["file-card cursor-pointer",{"file-card-hover":t.value===e}]),onDblclick:o=>h(e),onMouseenter:o=>t.value=e,onMouseleave:l[1]||(l[1]=e=>t.value=null)},{default:(0,s.k6)(()=>[(0,s.bF)(c,{class:"text-center q-pa-md relative-position"},{default:(0,s.k6)(()=>[(0,s.bo)((0,s.bF)(i,{round:"",dense:"",size:"sm",color:"negative",icon:"delete",class:"delete-btn",onClick:l[0]||(l[0]=(0,r.D$)(()=>{},["stop"]))},{default:(0,s.k6)(()=>[(0,s.bF)(A,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.k6)(()=>[(0,s.bF)(R,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,{class:"row items-center"},{default:(0,s.k6)(()=>[(0,s.bF)(n,{name:"warning",color:"red",size:"2rem",class:"q-mr-sm"}),l[4]||(l[4]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-h6"},"确认操作"),(0,s.Lk)("div",{class:"text-subtitle2"},"此操作将彻底删除该日志文件，是否继续？")],-1))]),_:1}),(0,s.bF)(C,{align:"right"},{default:(0,s.k6)(()=>[(0,s.bo)((0,s.bF)(i,{flat:"",label:"确认",color:"negative",onClick:(0,r.D$)(o=>y(e),["stop"])},null,8,["onClick"]),[[x]]),(0,s.bo)((0,s.bF)(i,{flat:"",label:"取消",color:"primary"},null,512),[[x]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1536),[[r.aG,t.value===e]]),(0,s.bF)(n,{name:"description",size:"3rem",color:"primary",class:"q-mb-sm"}),(0,s.Lk)("div",{class:"text-body2 text-weight-medium file-name",title:e},(0,a.v_)(e),9,b)]),_:2},1024)]),_:2},1032,["onDblclick","class","onMouseenter"])]))),128))]))]),_:1})]),_:1}),(0,s.bF)(w,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,s.k6)(()=>[(0,s.bF)(R,null,{default:(0,s.k6)(()=>[(0,s.bF)(c,{class:"row items-center q-pb-none"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",k,(0,a.v_)(v.value),1),(0,s.bF)(_),(0,s.bF)(i,{icon:"close",flat:"",round:"",dense:"",onClick:F})]),_:1}),(0,s.bF)(c,{class:"q-pt-none"},{default:(0,s.k6)(()=>[(0,s.bF)(q,{style:{height:"70vh"}},{default:(0,s.k6)(()=>[(0,s.Lk)("pre",m,(0,a.v_)(f.value),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),v=t(1317),f=t(63663),C=t(17180),R=t(64503),h=t(20407),y=t(34854),F=t(71248),A=t(51375),_=t(25915),q=t(30196),w=t(60515),x=t(22110),L=t.n(x);const D=(0,v.A)(g,[["__scopeId","data-v-df78d564"]]);var E=D;L()(g,"components",{QCard:f.A,QCardSection:C.A,QIcon:R.A,QBtn:h.A,QPopupProxy:y.A,QCardActions:F.A,QDialog:A.A,QSpace:_.A,QScrollArea:q.A}),L()(g,"directives",{ClosePopup:w.A})},42634:function(){}}]);