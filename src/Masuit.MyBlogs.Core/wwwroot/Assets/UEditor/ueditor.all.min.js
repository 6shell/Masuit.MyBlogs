/*!
 * UEditorPlus
 * version: 2.0.0
*/
(function(){function a(n,t,i){var r;return t=t.toLowerCase(),(r=n.__allListeners||i&&(n.__allListeners={}))&&(r[t]||i&&(r[t]=[]))}function c(n,t,i,r,u,f){var e=r&&n[t],o;for(e||(e=n[i]);!e&&(o=(o||n).parentNode);){if(o.tagName=="BODY"||f&&!f(o))return null;e=o[i]}return e&&u&&!u(e)?c(e,t,i,!1,u):e}var h,u,w,b,k,l,o,r;UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};r=window.baidu||{};window.baidu=r;window.UE=r.editor={plugins:{},commands:{},instants:{},I18N:{},_customizeUI:{},version:"3.8.0",constants:{STATEFUL:{DISABLED:-1,OFF:0,ON:1}}};var f=UE.dom={},i=UE.browser=function(){var i=navigator.userAgent.toLowerCase(),e=window.opera,n={ie:/(msie\s|trident.*rv:)([\w.]+)/i.test(i),opera:!!e&&e.version,webkit:i.indexOf(" applewebkit/")>-1,mac:i.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"},t,r,u,f;return n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera&&!n.ie,t=0,n.ie&&(r=i.match(/(?:msie\s([\w.]+))/),u=i.match(/(?:trident.*rv:([\w.]+))/),t=r&&u&&r[1]&&u[1]?Math.max(r[1]*1,u[1]*1):r&&r[1]?r[1]*1:u&&u[1]?u[1]*1:0,n.ie11Compat=document.documentMode==11,n.ie9Compat=document.documentMode==9,n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=t==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=t<7||n.quirks,n.ie9above=t>8,n.ie9below=t<9,n.ie11above=t>10,n.ie11below=t<11),n.gecko&&(f=i.match(/rv:([\d\.]+)/),f&&(f=f[1].split("."),t=f[0]*1e4+(f[1]||0)*100+(f[2]||0)*1)),/chrome\/(\d+\.\d)/i.test(i)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(i)&&!/chrome/i.test(i)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(t=parseFloat(e.version())),n.webkit&&(t=parseFloat(i.match(/ applewebkit\/(\d+)/)[1])),n.version=t,n.isCompatible=!n.mobile&&(n.ie&&t>=6||n.gecko&&t>=10801||n.opera&&t>=9.5||n.air&&t>=1||n.webkit&&t>=522||!1),n}(),e=i.ie,d=i.webkit,g=i.gecko,y=i.opera,t=UE.utils={each:function(n,t,i){var r,f,u;if(n!=null)if(n.length===+n.length){for(r=0,f=n.length;r<f;r++)if(t.call(i,n[r],r,n)===!1)return!1}else for(u in n)if(n.hasOwnProperty(u)&&t.call(i,n[u],u,n)===!1)return!1},makeInstance:function(n){var t=new Function;return t.prototype=n,n=new t,t.prototype=null,n},isObject:function(n){return n&&typeof n=="object"&&!Array.isArray(n)},merge:function(n,t){var i=Object.assign({},n);return this.isObject(n)&&this.isObject(t)&&Object.keys(t).forEach(r=>{this.isObject(t[r])?r in n?i[r]=this.merge(n[r],t[r]):Object.assign(i,{[r]:t[r]}):Object.assign(i,{[r]:t[r]})}),i},extend:function(n,t,i){if(t)for(var r in t)i&&n.hasOwnProperty(r)||(n[r]=t[r]);return n},extend2:function(n){for(var r,t,u=arguments,i=1;i<u.length;i++){r=u[i];for(t in r)n.hasOwnProperty(t)||(n[t]=r[t])}return n},inherits:function(n,i){var u=n.prototype,r=t.makeInstance(i.prototype);return t.extend(r,u,!0),n.prototype=r,r.constructor=n},bind:function(n,t){return function(){return n.apply(t,arguments)}},defer:function(n,t,i){var r;return function(){i&&clearTimeout(r);r=setTimeout(n,t)}},indexOf:function(n,t,i){var r=-1;return i=this.isNumber(i)?i:0,this.each(n,function(n,u){if(u>=i&&n===t)return r=u,!1}),r},removeItem:function(n,t){for(var i=0,r=n.length;i<r;i++)n[i]===t&&(n.splice(i,1),i--)},trim:function(n){return n.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(n){if(!n)return{};n=t.isArray(n)?n:n.split(",");for(var u=0,i,r={};i=n[u++];)r[i.toUpperCase()]=r[i]=1;return r},unhtml:function(n,t){return n?n.replace(t||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(n,t){return t?n:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[n]}):""},html:function(n){return n?n.replace(/&((g|l|quo|ldquo|rdquo)t|amp|#39|nbsp);/g,function(n){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&ldquo;":"“","&rdquo;":"”","&gt;":">","&#39;":"'","&nbsp;":" "}[n]}):""},cssStyleToDomStyle:function(){var n=document.createElement("div").style,t={float:n.cssFloat!==undefined?"cssFloat":n.styleFloat!==undefined?"styleFloat":"float"};return function(n){return t[n]||(t[n]=n.toLowerCase().replace(/-./g,function(n){return n.charAt(1).toUpperCase()}))}}(),loadFile:function(){function t(t,i){try{for(var u=0,r;r=n[u++];)if(r.doc===t&&r.url==(i.src||i.href))return r}catch(f){return null}}var n=[];return function(i,r,u){var e=t(i,r),s,f,o;if(e){e.ready?u&&u():e.funs.push(u);return}if(n.push({doc:i,url:r.src||r.href,funs:[u]}),!i.body){s=[];for(o in r)o!="tag"&&s.push(o+'="'+r[o]+'"');i.write("<"+r.tag+" "+s.join(" ")+" ><\/"+r.tag+">");return}if(!r.id||!i.getElementById(r.id)){f=i.createElement(r.tag);delete r.tag;for(o in r)f.setAttribute(o,r[o]);f.onload=f.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(e=t(i,r),e.funs.length>0){e.ready=1;for(var n;n=e.funs.pop();)n()}f.onload=f.onreadystatechange=null}};f.onerror=function(){throw Error("The load "+(r.href||r.src)+" fails,check the url settings of file ueditor.config.js ");};i.getElementsByTagName("head")[0].appendChild(f)}}}(),isEmptyObject:function(n){if(n==null)return!0;if(this.isArray(n)||this.isString(n))return n.length===0;for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},fixColor:function(n,t){var r,u,i;if(/color/i.test(n)&&/rgba?/.test(t)){if(r=t.split(","),r.length>3)return"";for(t="#",u=0;i=r[u++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(n){function r(n,t){var o;if(!n)return"";var r=n.top,u=n.bottom,i=n.left,f=n.right,e="";if(r&&i&&u&&f)e+=";"+t+":"+(r==u&&u==i&&i==f?r:r==u&&i==f?r+" "+i:i==f?r+" "+i+" "+u:r+" "+f+" "+u+" "+i)+";";else for(o in n)e+=";"+t+"-"+o+":"+n[o]+";";return e}var t,i;return n=n.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(n,r,u,f){if(f.split(" ").length==1)switch(r){case"padding":return t||(t={}),t[u]=f,"";case"margin":return i||(i={}),i[u]=f,"";case"border":return f=="initial"?"":n}return n}),n+=r(t,"padding")+r(i,"margin"),n.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(n,t){return t?t+";;":";"})},clone:function(n,i){var u,r;i=i||{};for(r in n)n.hasOwnProperty(r)&&(u=n[r],typeof u=="object"?(i[r]=t.isArray(u)?[]:{},t.clone(n[r],i[r])):i[r]=u);return i},transUnitToPx:function(n){if(!/(pt|cm)/.test(n))return n;var t;n.replace(/([\d.]+)(\w+)/,function(i,r,u){n=r;t=u});switch(t){case"cm":n=parseFloat(n)*25;break;case"pt":n=Math.round(parseFloat(n)*96/72)}return n+(n?"px":"")},domReady:function(){function n(n){n.isReady=!0;for(var i;i=t.pop();i());}var t=[];return function(r,u){u=u||window;var f=u.document;r&&t.push(r);f.readyState==="complete"?n(f):(f.isReady&&n(f),i.ie&&i.version!=11?(function(){if(!f.isReady){try{f.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,0);return}n(f)}}(),u.attachEvent("onload",function(){n(f)})):(f.addEventListener("DOMContentLoaded",function(){f.removeEventListener("DOMContentLoaded",arguments.callee,!1);n(f)},!1),u.addEventListener("load",function(){n(f)},!1)))}}(),cssRule:i.ie&&i.version!=11?function(n,t,i){var u,r;if(t===undefined||t&&t.nodeType&&t.nodeType==9)return(i=t&&t.nodeType&&t.nodeType==9?t:i||document,u=i.indexList||(i.indexList={}),r=u[n],r!==undefined)?i.styleSheets[r].cssText:undefined;if(i=i||document,u=i.indexList||(i.indexList={}),r=u[n],t==="")return r!==undefined?(i.styleSheets[r].cssText="",delete u[n],!0):!1;r!==undefined?sheetStyle=i.styleSheets[r]:(sheetStyle=i.createStyleSheet("",r=i.styleSheets.length),u[n]=r);sheetStyle.cssText=t}:function(n,t,i){var r;if(t===undefined||t&&t.nodeType&&t.nodeType==9)return i=t&&t.nodeType&&t.nodeType==9?t:i||document,r=i.getElementById(n),r?r.innerHTML:undefined;if(i=i||document,r=i.getElementById(n),t==="")return r?(r.parentNode.removeChild(r),!0):!1;r?r.innerHTML=t:(r=i.createElement("style"),r.id=n,r.innerHTML=t,i.getElementsByTagName("head")[0].appendChild(r))},sort:function(n,t){var i,u,r,f,e;for(t=t||function(n,t){return n.localeCompare(t)},i=0,u=n.length;i<u;i++)for(r=i,f=n.length;r<f;r++)t(n[i],n[r])>0&&(e=n[i],n[i]=n[r],n[r]=e);return n},serializeParam:function(n){var u=[],i,r;for(i in n)if(i!="method"&&i!="timeout"&&i!="async")if((typeof n[i]).toLowerCase()=="function"||(typeof n[i]).toLowerCase()=="object"){if(t.isArray(n[i]))for(r=0;r<n[i].length;r++)u.push(encodeURIComponent(i)+"[]="+encodeURIComponent(n[i][r]))}else u.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return u.join("&")},formatUrl:function(n){var t=n.replace(/&&/g,"&");return t=t.replace(/\?&/g,"?"),t=t.replace(/&$/g,""),t=t.replace(/&#/g,"#"),t.replace(/&+/g,"&")},addStyleContent:function(n){var t=document.createElement("style");t.innerHTML=n;document.head.appendChild(t)},isCrossDomainUrl:function(n){var t=document.createElement("a");return t.href=n,i.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||t.port=="80"&&location.port==""||t.port==""&&location.port=="80"))},clearEmptyAttrs:function(n){for(var t in n)n[t]===""&&delete n[t];return n},str2json:function(n){return t.isString(n)?window.JSON?JSON.parse(n):new Function("return "+t.trim(n||""))():null},json2str:function(){if(window.JSON)return JSON.stringify;else{var n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function r(t){return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/["\\\x00-\x1f]/g,function(t){var i=n[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),'"'+t+'"'}function u(n){for(var i=["["],e=n.length,f,u,r=0;r<e;r++){u=n[r];switch(typeof u){case"undefined":case"function":case"unknown":break;default:f&&i.push(",");i.push(t.json2str(u));f=1}}return i.push("]"),i.join("")}function i(n){return n<10?"0"+n:n}function f(n){return'"'+n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+"T"+i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())+'"'}return function(n){var i,o,h,s,e;switch(typeof n){case"undefined":return"undefined";case"number":return isFinite(n)?String(n):"null";case"string":return r(n);case"boolean":return String(n);default:if(n===null)return"null";if(t.isArray(n))return u(n);if(t.isDate(n))return f(n);i=["{"];o=t.json2str;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){s=n[e];switch(typeof s){case"undefined":case"unknown":case"function":break;default:h&&i.push(",");h=1;i.push(o(e)+":"+o(s))}}return i.push("}"),i.join("")}}}}()};t.each(["String","Function","Array","Number","RegExp","Object","Date"],function(n){UE.utils["is"+n]=function(t){return Object.prototype.toString.apply(t)=="[object "+n+"]"}});h=UE.EventBase=function(){};h.prototype={addListener:function(n,i){n=t.trim(n).split(/\s+/);for(var u=0,r;r=n[u++];)a(this,r,!0).push(i)},on:function(n,t){return this.addListener(n,t)},off:function(n,t){return this.removeListener(n,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(n,i){n=t.trim(n).split(/\s+/);for(var u=0,r;r=n[u++];)t.removeItem(a(this,r)||[],i)},fireEvent:function(){for(var u=arguments[0],f,i,e,n,r,u=t.trim(u).split(" "),o=0;f=u[o++];){if(i=a(this,f),i)for(r=i.length;r--;)if(i[r]){if(n=i[r].apply(this,arguments),n===!0)return n;n!==undefined&&(e=n)}(n=this["on"+f.toLowerCase()])&&(e=n.apply(this,arguments))}return e}};u=f.dtd=function(){function n(n){for(var t in n)n[t.toUpperCase()]=n[t];return n}var r=t.extend2,h=n({isindex:1,fieldset:1}),a=n({input:1,button:1,select:1,textarea:1,label:1}),v=r(n({a:1}),a),c=r({iframe:1},v),e=n({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),y=n({ins:1,del:1,script:1,style:1}),p=r(n({mark:1,b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),y),w=r(n({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),p),o=r(n({p:1}),w),b=r(n({iframe:1}),w,a),k=n({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),i=r(n({a:0}),b),l=n({tr:1}),f=n({"#":1}),d=r(n({param:1}),k),u=r(n({form:1}),h,c,e,o),s=n({li:1,ol:1,ul:1}),it=n({style:1,script:1}),g=n({base:1,link:1,meta:1,title:1}),rt=r(g,it),nt=n({head:1,body:1}),ut=n({html:1}),tt=n({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),ft=n({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return n({$nonBodyContent:r(ut,nt,g),$block:tt,$inline:i,$inlineWithA:r(n({a:1}),i),$body:r(n({script:1,style:1}),tt),$cdata:n({script:1,style:1}),$empty:ft,$nonChild:n({iframe:1,textarea:1}),$listItem:n({dd:1,dt:1,li:1}),$list:n({ul:1,ol:1,dl:1}),$isNotEmpty:n({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,textarea:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:n({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:n({p:1,div:1}),$tableContent:n({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:n({pre:1,script:1,style:1,textarea:1}),html:nt,head:rt,style:f,script:f,body:u,base:{},link:{},meta:{},title:f,col:{},tr:n({td:1,th:1}),img:{},embed:{},colgroup:n({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:u,td:u,br:{},th:u,center:u,kbd:i,button:r(o,e),basefont:{},h5:i,h4:i,samp:i,h6:i,ol:s,h1:i,h3:i,option:f,h2:i,form:r(h,c,e,o),select:n({optgroup:1,option:1}),font:i,ins:i,menu:s,abbr:i,label:i,table:n({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:i,tfoot:l,cite:i,li:u,input:{},iframe:u,strong:i,textarea:f,noframes:u,big:i,small:i,span:n({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:i,dt:i,sub:i,optgroup:n({option:1}),param:{},bdo:i,"var":i,div:u,object:d,sup:i,dd:u,strike:i,area:{},dir:s,map:r(n({area:1,form:1,p:1}),h,y,e),applet:d,dl:n({dt:1,dd:1}),del:i,isindex:{},fieldset:r(n({legend:1}),k),thead:l,ul:s,acronym:i,b:i,a:r(n({a:1}),b),blockquote:r(n({td:1,tr:1,tbody:1,li:1}),u),caption:i,i:i,u:i,tbody:l,s:i,address:r(c,o),tt:i,legend:i,q:i,pre:r(p,v),p:r(n({a:1}),i),em:i,dfn:i,mark:i})}();var v=e&&i.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},p=t.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),n=f.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:e&&i.version==="6"?"﻿":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(n,t){var i,r,u,f;if(n===t)return 0;for(r=[n],u=[t],i=n;i=i.parentNode;){if(i===t)return 10;r.push(i)}for(i=t;i=i.parentNode;){if(i===n)return 20;u.push(i)}if(r.reverse(),u.reverse(),r[0]!==u[0])return 1;for(f=-1;f++,r[f]===u[f];);for(n=r[f],t=u[f];n=n.nextSibling;)if(n===t)return 4;return 2},getNodeIndex:function(n,t){for(var i=n,r=0;i=i.previousSibling;){if(t&&i.nodeType==3){i.nodeType!=i.nextSibling.nodeType&&r++;continue}r++}return r},inDoc:function(t,i){return n.getPosition(t,i)===10},findParent:function(t,i,r){if(t&&!n.isBody(t))for(t=r?t:t.parentNode;t;){if(!i||i(t)||n.isBody(t))return i&&!i(t)&&n.isBody(t)?null:t;t=t.parentNode}return null},findParentByTagName:function(i,r,u,f){return r=t.listToMap(t.isArray(r)?r:[r]),n.findParent(i,function(n){return r[n.tagName]&&!(f&&f(n))},u)},findParents:function(t,i,r,u){for(var f=i&&(r&&r(t)||!r)?[t]:[];t=n.findParent(t,r);)f.push(t);return u?f:f.reverse()},insertAfter:function(n,t){return n.nextSibling?n.parentNode.insertBefore(t,n.nextSibling):n.parentNode.appendChild(t)},remove:function(n,t){var i=n.parentNode,r;if(i){if(t&&n.hasChildNodes())while(r=n.firstChild)i.insertBefore(r,n);i.removeChild(n)}return n},getNextDomNode:function(n,t,i,r){return c(n,"firstChild","nextSibling",t,i,r)},getPreDomNode:function(n,t,i,r){return c(n,"lastChild","previousSibling",t,i,r)},isBookmarkNode:function(n){return n.nodeType==1&&n.id&&/^_baidu_bookmark_/i.test(n.id)},getWindow:function(n){var t=n.ownerDocument||n;return t.defaultView||t.parentWindow},getCommonAncestor:function(n,t){if(n===t)return n;for(var u=[n],f=[t],i=n,r=-1;i=i.parentNode;){if(i===t)return i;u.push(i)}for(i=t;i=i.parentNode;){if(i===n)return i;f.push(i)}for(u.reverse(),f.reverse();r++,u[r]===f[r];);return r==0?null:u[r-1]},clearEmptySibling:function(t,i,r){function u(t,i){for(var r;t&&!n.isBookmarkNode(t)&&(n.isEmptyInlineElement(t)||!new RegExp("[^\t\n\r"+n.fillChar+"]").test(t.nodeValue));)r=t[i],n.remove(t),t=r}i||u(t.nextSibling,"nextSibling");r||u(t.previousSibling,"previousSibling")},split:function(t,r){var e=t.ownerDocument,o,u,f;return i.ie&&r==t.nodeValue.length?(o=e.createTextNode(""),n.insertAfter(t,o)):(u=t.splitText(r),i.ie8&&(f=e.createTextNode(""),n.insertAfter(u,f),n.remove(f)),u)},isWhitespace:function(t){return!new RegExp("[^ \t\n\r"+n.fillChar+"]").test(t.nodeValue)},getXY:function(n){for(var t=0,i=0;n.offsetParent;)i+=n.offsetTop,t+=n.offsetLeft,n=n.offsetParent;return{x:t,y:i}},on:function(n,i,r){var o=t.isArray(i)?i:t.trim(i).split(/\s+/),f=o.length,u,e;if(f)while(f--)i=o[f],n.addEventListener?n.addEventListener(i,r,!1):(r._d||(r._d={els:[]}),u=i+r.toString(),e=t.indexOf(r._d.els,n),r._d[u]&&e!=-1||(e==-1&&r._d.els.push(n),r._d[u]||(r._d[u]=function(n){return r.call(n.srcElement,n||window.event)}),n.attachEvent("on"+i,r._d[u])));n=null},un:function(n,i,r){var o=t.isArray(i)?i:t.trim(i).split(/\s+/),f=o.length,u,e;if(f)while(f--)if(i=o[f],n.removeEventListener)n.removeEventListener(i,r,!1);else{u=i+r.toString();try{n.detachEvent("on"+i,r._d?r._d[u]:r)}catch(s){}r._d&&r._d[u]&&(e=t.indexOf(r._d.els,n),e!=-1&&r._d.els.splice(e,1),r._d.els.length==0&&delete r._d[u])}},isSameElement:function(t,i){var h,f,r,u,o,c,s;if(t.tagName!=i.tagName||(h=t.attributes,f=i.attributes,!e&&h.length!=f.length))return!1;for(o=0,c=0,s=0;r=h[s++];){if(r.nodeName=="style")if(r.specified&&o++,n.isSameStyle(t,i))continue;else return!1;if(e)if(r.specified)o++,u=f.getNamedItem(r.nodeName);else continue;else u=i.attributes[r.nodeName];if(!u.specified||r.nodeValue!=u.nodeValue)return!1}if(e){for(s=0;u=f[s++];)u.specified&&c++;if(o!=c)return!1}return!0},isSameStyle:function(n,r){var u=n.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),f=r.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),e,o,s;if(i.opera){if(u=n.style,f=r.style,u.length!=f.length)return!1;for(e in u)if(!/^(\d+|csstext)$/i.test(e)&&u[e]!=f[e])return!1;return!0}if(!u||!f)return u==f;if(u=u.split(";"),f=f.split(";"),u.length!=f.length)return!1;for(o=0;s=u[o++];)if(t.indexOf(f,s)==-1)return!1;return!0},isBlockElm:function(t){return t.nodeType==1&&(u.$block[t.tagName]||p[n.getComputedStyle(t,"display")])&&!u.$nonChild[t.tagName]},isBody:function(n){return n&&n.nodeType==1&&n.tagName.toLowerCase()=="body"},breakParent:function(t,i){var r,f=t,o=t,u,e;do{for(f=f.parentNode,u?(r=f.cloneNode(!1),r.appendChild(u),u=r,r=f.cloneNode(!1),r.appendChild(e),e=r):(u=f.cloneNode(!1),e=u.cloneNode(!1));r=o.previousSibling;)u.insertBefore(r,u.firstChild);while(r=o.nextSibling)e.appendChild(r);o=f}while(i!==f);return r=i.parentNode,r.insertBefore(u,i),r.insertBefore(e,i),r.insertBefore(t,e),n.remove(i),t},isEmptyInlineElement:function(t){if(t.nodeType!=1||!u.$removeEmpty[t.tagName])return 0;for(t=t.firstChild;t;){if(n.isBookmarkNode(t)||t.nodeType==1&&!n.isEmptyInlineElement(t)||t.nodeType==3&&!n.isWhitespace(t))return 0;t=t.nextSibling}return 1},trimWhiteTextNode:function(t){function i(i){for(var r;(r=t[i])&&r.nodeType==3&&n.isWhitespace(r);)t.removeChild(r)}i("firstChild");i("lastChild")},mergeChild:function(i,r,u){for(var e,s,o,h=n.getElementsByTagName(i,i.tagName.toLowerCase()),c=0,f;f=h[c++];)if(f.parentNode&&!n.isBookmarkNode(f)){if(f.tagName.toLowerCase()=="span"){if(i===f.parentNode&&(n.trimWhiteTextNode(i),i.childNodes.length==1)){i.style.cssText=f.style.cssText+";"+i.style.cssText;n.remove(f,!0);continue}if(f.style.cssText=i.style.cssText+";"+f.style.cssText,u&&(e=u.style,e))for(e=e.split(";"),s=0;o=e[s++];)f.style[t.cssStyleToDomStyle(o.split(":")[0])]=o.split(":")[1];n.isSameStyle(f,i)&&n.remove(f,!0);continue}n.isSameElement(i,f)&&n.remove(f,!0)}},getElementsByTagName:function(i,r,u){var o,f,s,h,c,l,e;for(u&&t.isString(u)&&(o=u,u=function(t){return n.hasClass(t,o)}),r=t.trim(r).replace(/[ ]{2,}/g," ").split(" "),f=[],s=0;h=r[s++];)for(c=i.getElementsByTagName(h),l=0;e=c[l++];)(!u||u(e))&&f.push(e);return f},mergeToParent:function(t){for(var i=t.parentNode;i&&u.$removeEmpty[i.tagName];){if(i.tagName==t.tagName||i.tagName=="A"){if(n.trimWhiteTextNode(i),i.tagName=="SPAN"&&!n.isSameStyle(i,t)||i.tagName=="A"&&t.tagName=="SPAN")if(i.childNodes.length>1||i!==t.parentNode){t.style.cssText=i.style.cssText+";"+t.style.cssText;i=i.parentNode;continue}else i.style.cssText+=";"+t.style.cssText,i.tagName=="A"&&(i.style.textDecoration="underline");if(i.tagName!="A"){i===t.parentNode&&n.remove(t,!0);break}}i=i.parentNode}},mergeSibling:function(t,i,r){function u(t,i,r){var u;if((u=r[t])&&!n.isBookmarkNode(u)&&u.nodeType==1&&n.isSameElement(r,u)){while(u.firstChild)i=="firstChild"?r.insertBefore(u.lastChild,r.firstChild):r.appendChild(u.firstChild);n.remove(u)}}i||u("previousSibling","firstChild",t);r||u("nextSibling","lastChild",t)},unSelectable:e&&i.ie9below||i.opera?function(n){n.onselectstart=function(){return!1};n.onclick=n.onkeyup=n.onkeydown=function(){return!1};n.unselectable="on";n.setAttribute("unselectable","on");for(var i=0,t;t=n.all[i++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on";n.setAttribute("unselectable","on")}}:function(n){n.style.MozUserSelect=n.style.webkitUserSelect=n.style.msUserSelect=n.style.KhtmlUserSelect="none"},removeAttributes:function(n,r){var e,u,f;for(r=t.isArray(r)?r:t.trim(r).replace(/[ ]{2,}/g," ").split(" "),e=0;u=r[e++];){u=v[u]||u;switch(u){case"className":n[u]="";break;case"style":n.style.cssText="";f=n.getAttributeNode("style");!i.ie&&f&&n.removeAttributeNode(f)}n.removeAttribute(u)}},createElement:function(t,i,r){return n.setAttributes(t.createElement(i),r)},setAttributes:function(n,t){var i,u,r;for(i in t){if("_propertyDelete"===i){for(u=0;u<t[i].length;u++)n.hasAttribute(t[i][u])&&n.removeAttribute(t[i][u]);continue}if(t.hasOwnProperty(i)){r=t[i];switch(i){case"class":n.className=r;break;case"style":n.style.cssText=n.style.cssText+";"+r;break;case"innerHTML":n[i]=r;break;case"value":n.value=r;break;default:n.setAttribute(v[i]||i,r)}}}return n},getComputedStyle:function(r,f){var e,o,s;if("width height top left".indexOf(f)>-1)return r["offset"+f.replace(/^\w/,function(n){return n.toUpperCase()})]+"px";if(r.nodeType===3&&(r=r.parentNode),i.ie&&i.version<9&&f==="font-size"&&!r.style.fontSize&&!u.$empty[r.tagName]&&!u.$nonChild[r.tagName])return e=r.ownerDocument.createElement("span"),e.style.cssText="padding:0;border:0;font-family:simsun;",e.innerHTML=".",r.appendChild(e),o=e.offsetHeight,r.removeChild(e),e=null,o+"px";try{s=n.getStyle(r,f)||(window.getComputedStyle?n.getWindow(r).getComputedStyle(r,"").getPropertyValue(f):(r.currentStyle||r.style)[t.cssStyleToDomStyle(f)])}catch(h){return""}return t.transUnitToPx(t.fixColor(f,s))},removeClasses:function(i,r){r=t.isArray(r)?r:t.trim(r).replace(/[ ]{2,}/g," ").split(" ");for(var e=0,f,u=i.className;f=r[e++];)u=u.replace(new RegExp("\\b"+f+"\\b"),"");u=t.trim(u).replace(/[ ]{2,}/g," ");u?i.className=u:n.removeAttributes(i,["class"])},addClass:function(n,i){if(n){i=t.trim(i).replace(/[ ]{2,}/g," ").split(" ");for(var f=0,r,u=n.className;r=i[f++];)new RegExp("\\b"+r+"\\b").test(u)||(u+=" "+r);n.className=t.trim(u)}},hasClass:function(n,i){if(t.isRegExp(i))return i.test(n.className);i=t.trim(i).replace(/[ ]{2,}/g," ").split(" ");for(var r=0,u,f=n.className;u=i[r++];)if(!new RegExp("\\b"+u+"\\b","i").test(f))return!1;return r-1==i.length},preventDefault:function(n){n.preventDefault?n.preventDefault():n.returnValue=!1},removeStyle:function(r,u){i.ie?(u=="color"&&(u="(^|;)"+u),r.style.cssText=r.style.cssText.replace(new RegExp(u+"[^:]*:[^;]+;?","ig"),"")):r.style.removeProperty?r.style.removeProperty(u):r.style.removeAttribute(t.cssStyleToDomStyle(u));r.style.cssText||n.removeAttributes(r,["style"])},getStyle:function(n,i){var r=n.style[t.cssStyleToDomStyle(i)];return t.fixColor(i,r)},setStyle:function(n,i,r){n.style[t.cssStyleToDomStyle(i)]=r;t.trim(n.style.cssText)||this.removeAttributes(n,"style")},setStyles:function(t,i){for(var r in i)i.hasOwnProperty(r)&&n.setStyle(t,r,i[r])},removeDirtyAttr:function(n){for(var i=0,t,r=n.getElementsByTagName("*");t=r[i++];)t.removeAttribute("_moz_dirty");n.removeAttribute("_moz_dirty")},getChildCount:function(n,t){var r=0,i=n.firstChild;for(t=t||function(){return 1};i;)t(i)&&r++,i=i.nextSibling;return r},isEmptyNode:function(t){return!t.firstChild||n.getChildCount(t,function(t){return!n.isBr(t)&&!n.isBookmarkNode(t)&&!n.isWhitespace(t)})==0},clearSelectedArr:function(t){for(var i;i=t.pop();)n.removeAttributes(i,["class"])},scrollToView:function(t,i,r){var o,f;r=r||0;var s=function(){var n=i.document,t=n.compatMode=="CSS1Compat";return{width:(t?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(t?n.documentElement.clientHeight:n.body.clientHeight)||0}},h=function(n){if("pageXOffset"in n)return{x:n.pageXOffset||0,y:n.pageYOffset||0};var t=n.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},e=s().height,u=e*-1+r;u+=t.offsetHeight||0;o=n.getXY(t);u+=o.y;f=h(i).y;(u>f||u<f-e)&&i.scrollTo({top:u+(u<0?-20:20),behavior:"smooth"})},isBr:function(n){return n.nodeType==1&&n.tagName=="BR"},isFillChar:function(t,i){if(t.nodeType!=3)return!1;var r=t.nodeValue;return i?new RegExp("^"+n.fillChar).test(r):!r.replace(new RegExp(n.fillChar,"g"),"").length},isStartInblock:function(t){var r=t.cloneRange(),o=0,i=r.startContainer,f,u,e;if(i.nodeType==1&&i.childNodes[r.startOffset])for(i=i.childNodes[r.startOffset],u=i.previousSibling;u&&n.isFillChar(u);)i=u,u=u.previousSibling;for(this.isFillChar(i,!0)&&r.startOffset==1&&(r.setStartBefore(i),i=r.startContainer);i&&n.isFillChar(i);)f=i,i=i.previousSibling;for(f&&(r.setStartBefore(f),i=r.startContainer),i.nodeType==1&&n.isEmptyNode(i)&&r.startOffset==1&&r.setStart(i,0).collapse(!0);!r.startOffset;){if(i=r.startContainer,n.isBlockElm(i)||n.isBody(i)){o=1;break}if(u=r.startContainer.previousSibling,u){while(u&&n.isFillChar(u))e=u,u=u.previousSibling;e?r.setStartBefore(e):r.setStartBefore(r.startContainer)}else r.setStartBefore(r.startContainer)}return o&&!n.isBody(r.startContainer)?1:0},isEmptyBlock:function(t,r){if(t.nodeType!=1||(r=r||new RegExp("[  \t\r\n"+n.fillChar+"]","g"),t[i.ie?"innerText":"textContent"].replace(r,"").length>0))return 0;for(var f in u.$isNotEmpty)if(t.getElementsByTagName(f).length)return 0;return 1},setViewportOffset:function(n,t){var f=parseInt(n.style.left)|0,e=parseInt(n.style.top)|0,i=n.getBoundingClientRect(),r=t.left-i.left,u=t.top-i.top;r&&(n.style.left=f+r+"px");u&&(n.style.top=e+u+"px")},fillNode:function(t,r){var u=i.ie?t.createTextNode(n.fillChar):t.createElement("br");r.innerHTML="";r.appendChild(u)},moveChild:function(n,t,i){while(n.firstChild)i&&t.firstChild?t.insertBefore(n.lastChild,t.firstChild):t.appendChild(n.firstChild)},hasNoAttributes:function(n){return i.ie?/^<\w+\s*?>/.test(n.outerHTML):n.attributes.length==0},isCustomeNode:function(n){return n.nodeType==1&&n.getAttribute("_ue_custom_node_")},isTagNode:function(n,t){return n.nodeType==1&&new RegExp("\\b"+n.tagName+"\\b","i").test(t)},filterNodeList:function(n,i,r){var u=[],f;return t.isFunction(i)||(f=i,i=function(n){return t.indexOf(t.isArray(f)?f:f.split(" "),n.tagName.toLowerCase())!=-1}),t.each(n,function(n){i(n)&&u.push(n)}),u.length==0?null:u.length==1||!r?u[0]:u},isInNodeEndBoundary:function(n,t){var i=n.startContainer;if(i.nodeType==3&&n.startOffset!=i.nodeValue.length||i.nodeType==1&&n.startOffset!=i.childNodes.length)return 0;while(i!==t){if(i.nextSibling)return 0;i=i.parentNode}return 1},isBoundaryNode:function(t,i){for(var r;!n.isBody(t);)if(r=t,t=t.parentNode,r!==t[i])return!1;return!0},fillHtml:i.ie11below?"&nbsp;":"<br/>",loadScript:function(n,t){var i;i=document.createElement("script");i.src=n;i.onload=function(){t&&t({isNew:!0})};document.getElementsByTagName("head")[0].appendChild(i)}},s=new RegExp(n.fillChar,"g");(function(){function p(n){n.collapsed=n.startContainer&&n.endContainer&&n.startContainer===n.endContainer&&n.startOffset===n.endOffset}function l(n){return!n.collapsed&&n.startContainer.nodeType===1&&n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1}function a(t,i,r,f){return i.nodeType===1&&(u.$empty[i.tagName]||u.$nonChild[i.tagName])&&(r=n.getNodeIndex(i)+(t?0:1),i=i.parentNode),t?(f.startContainer=i,f.startOffset=r,f.endContainer||f.collapse(!0)):(f.endContainer=i,f.endOffset=r,f.startContainer||f.collapse(!1)),p(f),f}function h(t,i){var r=t.startContainer,o=t.endContainer,s=t.startOffset,w=t.endOffset,l=t.document,b=l.createDocumentFragment(),k,d,f,y,h,p;if(r.nodeType==1&&(r=r.childNodes[s]||(k=r.appendChild(l.createTextNode("")))),o.nodeType==1&&(o=o.childNodes[w]||(d=o.appendChild(l.createTextNode("")))),r===o&&r.nodeType==3)return b.appendChild(l.createTextNode(r.substringData(s,w-s))),i&&(r.deleteData(s,w-s),t.collapse(!0)),b;var u,a,e=b,c=n.findParents(r,!0),v=n.findParents(o,!0);for(f=0;c[f]==v[f];)f++;for(h=f;y=c[h];h++){for(u=y.nextSibling,y==r?k||(t.startContainer.nodeType==3?(e.appendChild(l.createTextNode(r.nodeValue.slice(s))),i&&r.deleteData(s,r.nodeValue.length-s)):e.appendChild(i?r:r.cloneNode(!0))):(a=y.cloneNode(!1),e.appendChild(a));u;){if(u===o||u===v[h])break;y=u.nextSibling;e.appendChild(i?u:u.cloneNode(!0));u=y}e=a}for(e=b,c[f]||(e.appendChild(c[f-1].cloneNode(!1)),e=e.firstChild),h=f;p=v[h];h++){if(u=p.previousSibling,p==o?d||t.endContainer.nodeType!=3||(e.appendChild(l.createTextNode(o.substringData(0,w))),i&&o.deleteData(0,w)):(a=p.cloneNode(!1),e.appendChild(a)),h!=f||!c[f])while(u){if(u===r)break;p=u.previousSibling;e.insertBefore(i?u:u.cloneNode(!0),e.firstChild);u=p}e=a}return i&&t.setStartBefore(v[f]?c[f]?v[f]:c[f-1]:v[f-1]).collapse(!0),k&&n.remove(k),d&&n.remove(d),b}function y(t,u){try{if(r&&n.inDoc(r,t))if(r.nodeValue.replace(s,"").length)r.nodeValue=r.nodeValue.replace(s,"");else{var f=r.parentNode;for(n.remove(r);f&&n.isEmptyInlineElement(f)&&(i.safari?!(n.getPosition(f,u)&n.POSITION_CONTAINS):!f.contains(u));)r=f.parentNode,n.remove(f),f=r}}catch(e){}}function e(t,i){var r;for(t=t[i];t&&n.isFillChar(t);)r=t[i],n.remove(t),t=r}var c=0,o=n.fillChar,r,v=f.Range=function(n){var t=this;t.startContainer=t.startOffset=t.endContainer=t.endOffset=null;t.document=n;t.collapsed=!0};v.prototype={cloneContents:function(){return this.collapsed?null:h(this,0)},deleteContents:function(){var t;return this.collapsed||h(this,1),i.webkit&&(t=this.startContainer,t.nodeType!=3||t.nodeValue.length||(this.setStartBefore(t).collapse(!0),n.remove(t))),this},extractContents:function(){return this.collapsed?null:h(this,2)},setStart:function(n,t){return a(!0,n,t,this)},setEnd:function(n,t){return a(!1,n,t,this)},setStartAfter:function(t){return this.setStart(t.parentNode,n.getNodeIndex(t)+1)},setStartBefore:function(t){return this.setStart(t.parentNode,n.getNodeIndex(t))},setEndAfter:function(t){return this.setEnd(t.parentNode,n.getNodeIndex(t)+1)},setEndBefore:function(t){return this.setEnd(t.parentNode,n.getNodeIndex(t))},setStartAtFirst:function(n){return this.setStart(n,0)},setStartAtLast:function(n){return this.setStart(n,n.nodeType==3?n.nodeValue.length:n.childNodes.length)},setEndAtFirst:function(n){return this.setEnd(n,0)},setEndAtLast:function(n){return this.setEnd(n,n.nodeType==3?n.nodeValue.length:n.childNodes.length)},selectNode:function(n){return this.setStartBefore(n).setEndAfter(n)},selectNodeContents:function(n){return this.setStart(n,0).setEndAtLast(n)},cloneRange:function(){var n=this;return new v(n.document).setStart(n.startContainer,n.startOffset).setEnd(n.endContainer,n.endOffset)},collapse:function(n){var t=this;return n?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(t){function f(t){return t.nodeType==1&&!n.isBookmarkNode(t)&&!u.$empty[t.tagName]&&!u.$nonChild[t.tagName]}for(var i=this,r,e=i.collapsed;i.startContainer.nodeType==1&&(r=i.startContainer.childNodes[i.startOffset])&&f(r);)i.setStart(r,0);if(e)return i.collapse(!0);if(!t)while(i.endContainer.nodeType==1&&i.endOffset>0&&(r=i.endContainer.childNodes[i.endOffset-1])&&f(r))i.setEnd(r,r.childNodes.length);return i},getCommonAncestor:function(t,i){var u=this,r=u.startContainer,f=u.endContainer;return r===f?t&&l(this)&&(r=r.childNodes[u.startOffset],r.nodeType==1)?r:i&&r.nodeType==3?r.parentNode:r:n.getCommonAncestor(r,f)},trimBoundary:function(t){var f;this.txtToElmBoundary();var u=this.startContainer,i=this.startOffset,e=this.collapsed,r=this.endContainer;return u.nodeType==3&&(i==0?this.setStartBefore(u):i>=u.nodeValue.length?this.setStartAfter(u):(f=n.split(u,i),u===r?this.setEnd(f,this.endOffset-i):u.parentNode===r&&(this.endOffset+=1),this.setStartBefore(f)),e)?this.collapse(!0):(t||(i=this.endOffset,r=this.endContainer,r.nodeType==3&&(i==0?this.setEndBefore(r):(i<r.nodeValue.length&&n.split(r,i),this.setEndAfter(r)))),this)},txtToElmBoundary:function(n){function t(n,t){var i=n[t+"Container"],r=n[t+"Offset"];i.nodeType==3&&(r?r>=i.nodeValue.length&&n["set"+t.replace(/(\w)/,function(n){return n.toUpperCase()})+"After"](i):n["set"+t.replace(/(\w)/,function(n){return n.toUpperCase()})+"Before"](i))}return(n||!this.collapsed)&&(t(this,"start"),t(this,"end")),this},insertNode:function(n){var t=n,r=1;n.nodeType==11&&(t=n.firstChild,r=n.childNodes.length);this.trimBoundary(!0);var i=this.startContainer,f=this.startOffset,u=i.childNodes[f];return u?i.insertBefore(n,u):i.appendChild(n),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+r),this.setStartBefore(t)},setCursor:function(n,t){return this.collapse(!n).select(t)},createBookmark:function(n,t){var i,r=this.document.createElement("span");return r.style.cssText="display:none;line-height:0px;",r.appendChild(this.document.createTextNode("‍")),r.id="_baidu_bookmark_start_"+(t?"":c++),this.collapsed||(i=r.cloneNode(!0),i.id="_baidu_bookmark_end_"+(t?"":c++)),this.insertNode(r),i&&this.collapse().insertNode(i).setEndBefore(i),this.setStartAfter(r),{start:n?r.id:r,end:i?n?i.id:i:null,id:n}},moveToBookmark:function(t){var r=t.id?this.document.getElementById(t.start):t.start,i=t.end&&t.id?this.document.getElementById(t.end):t.end;return this.setStartBefore(r),n.remove(r),i?(this.setEndBefore(i),n.remove(i)):this.collapse(!0),this},enlarge:function(t,i){var e=n.isBody,u,r,f=this.document.createTextNode("");if(t){for(r=this.startContainer,r.nodeType==1?r.childNodes[this.startOffset]?u=r=r.childNodes[this.startOffset]:(r.appendChild(f),u=r=f):u=r;;){if(n.isBlockElm(r)){for(r=u;(u=r.previousSibling)&&!n.isBlockElm(u);)r=u;this.setStartBefore(r);break}u=r;r=r.parentNode}for(r=this.endContainer,r.nodeType==1?((u=r.childNodes[this.endOffset])?r.insertBefore(f,u):r.appendChild(f),u=r=f):u=r;;){if(n.isBlockElm(r)){for(r=u;(u=r.nextSibling)&&!n.isBlockElm(u);)r=u;this.setEndAfter(r);break}u=r;r=r.parentNode}f.parentNode===this.endContainer&&this.endOffset--;n.remove(f)}if(!this.collapsed){while(this.startOffset==0){if(i&&i(this.startContainer))break;if(e(this.startContainer))break;this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(i&&i(this.endContainer))break;if(e(this.endContainer))break;this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(t){while(!n.isBlockElm(this.startContainer))this.setStartBefore(this.startContainer);if(!t)while(!n.isBlockElm(this.endContainer))this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){while(!n.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setStartAfter(this.startContainer);while(!n.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(i,r,f){var w,e,h,b,k,d,y;if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(t){return t.nodeType==1&&n.isBlockElm(t)}).adjustmentBoundary();for(var l=this.createBookmark(),a=l.end,v=function(t){return t.nodeType==1?t.tagName.toLowerCase()!="br":!n.isWhitespace(t)},s=n.getNextDomNode(l.start,!1,v),o,p,c=this.cloneRange();s&&n.getPosition(s,a)&n.POSITION_PRECEDING;)if(s.nodeType==3||u[i][s.tagName]){for(c.setStartBefore(s),o=s;o&&(o.nodeType==3||u[i][o.tagName])&&o!==a;)p=o,o=n.getNextDomNode(o,o.nodeType==1,null,function(n){return u[i][n.tagName]});if(w=c.setEndAfter(p).extractContents(),f&&f.length>0){for(b=h=f[0].cloneNode(!1),k=1;d=f[k++];)h.appendChild(d.cloneNode(!1)),h=h.firstChild;e=h}else e=c.document.createElement(i);if(r&&n.setAttributes(e,r),e.appendChild(w),e.tagName=="SPAN"&&r&&r.style&&t.each(e.getElementsByTagName("span"),function(n){n.style.cssText=n.style.cssText+";"+r.style}),c.insertNode(f?b:e),i=="span"&&r.style&&/text\-decoration/.test(r.style)&&(y=n.findParentByTagName(e,"a",!0))?(n.setAttributes(y,r),n.remove(e,!0),e=y):(n.mergeSibling(e),n.clearEmptySibling(e)),n.mergeChild(e,r),s=n.getNextDomNode(e,!1,v),n.mergeToParent(e),o===a)break}else s=n.getNextDomNode(s,!0,v);return this.moveToBookmark(l)},removeInlineStyle:function(i){var r,u,f,s,o,e,h;if(this.collapsed)return this;for(i=t.isArray(i)?i:[i],this.shrinkBoundary().adjustmentBoundary(),r=this.startContainer,u=this.endContainer;;){if(r.nodeType==1){if(t.indexOf(i,r.tagName.toLowerCase())>-1)break;if(r.tagName.toLowerCase()=="body"){r=null;break}}r=r.parentNode}for(;;){if(u.nodeType==1){if(t.indexOf(i,u.tagName.toLowerCase())>-1)break;if(u.tagName.toLowerCase()=="body"){u=null;break}}u=u.parentNode}for(f=this.createBookmark(),r&&(o=this.cloneRange().setEndBefore(f.start).setStartBefore(r),s=o.extractContents(),o.insertNode(s),n.clearEmptySibling(r,!0),r.parentNode.insertBefore(f.start,r)),u&&(o=this.cloneRange().setStartAfter(f.end).setEndAfter(u),s=o.extractContents(),o.insertNode(s),n.clearEmptySibling(u,!1,!0),u.parentNode.insertBefore(f.end,u.nextSibling)),e=n.getNextDomNode(f.start,!1,function(n){return n.nodeType==1});e&&e!==f.end;)h=n.getNextDomNode(e,!0,function(n){return n.nodeType==1}),t.indexOf(i,e.tagName.toLowerCase())>-1&&n.remove(e,!0),e=h;return this.moveToBookmark(f)},getClosedNode:function(){var i,t,n;return this.collapsed||(t=this.cloneRange().adjustmentBoundary().shrinkBoundary(),l(t)&&(n=t.startContainer.childNodes[t.startOffset],n&&n.nodeType===1&&(u.$empty[n.tagName]||u.$nonChild[n.tagName])&&(i=n))),i},select:i.ie?function(t,i){var u,l,h,f,v,a,c,s;if(this.collapsed||this.shrinkBoundary(),l=this.getClosedNode(),l&&!i){try{u=this.document.body.createControlRange();u.addElement(l);u.select()}catch(p){}return this}h=this.createBookmark();f=h.start;u=this.document.body.createTextRange();u.moveToElementText(f);u.moveStart("character",1);this.collapsed?t||this.startContainer.nodeType==3||(c=this.document.createTextNode(o),s=this.document.createElement("span"),s.appendChild(this.document.createTextNode(o)),f.parentNode.insertBefore(s,f),f.parentNode.insertBefore(c,f),y(this.document,c),r=c,e(s,"previousSibling"),e(f,"nextSibling"),u.moveStart("character",-1),u.collapse(!0)):(a=this.document.body.createTextRange(),v=h.end,a.moveToElementText(v),u.setEndPoint("EndToEnd",a));this.moveToBookmark(h);s&&n.remove(s);try{u.select()}catch(p){}return this}:function(t){function a(n){function t(t,i,r){t.nodeType==3&&t.nodeValue.length<i&&(n[r+"Offset"]=t.nodeValue.length)}t(n.startContainer,n.startOffset,"start");t(n.endContainer,n.endOffset,"end")}var l=n.getWindow(this.document),c=l.getSelection(),f,s,h,u;if(i.gecko?this.document.body.focus():l.focus(),c){if(c.removeAllRanges(),this.collapsed&&!t&&(s=this.startContainer,u=s,s.nodeType==1&&(u=s.childNodes[this.startOffset]),s.nodeType==3&&this.startOffset||(u?u.previousSibling&&u.previousSibling.nodeType==3:s.lastChild&&s.lastChild.nodeType==3)||(f=this.document.createTextNode(o),this.insertNode(f),y(this.document,f),e(f,"previousSibling"),e(f,"nextSibling"),r=f,this.setStart(f,i.webkit?1:0).collapse(!0))),h=this.document.createRange(),this.collapsed&&i.opera&&this.startContainer.nodeType==1)if(u=this.startContainer.childNodes[this.startOffset],u){while(u&&n.isBlockElm(u))if(u.nodeType==1&&u.childNodes[0])u=u.childNodes[0];else break;u&&this.setStartBefore(u).collapse(!0)}else u=this.startContainer.lastChild,u&&n.isBr(u)&&this.setStartBefore(u).collapse(!0);a(this);h.setStart(this.startContainer,this.startOffset);h.setEnd(this.endContainer,this.endOffset);c.addRange(h)}return this},scrollToView:function(t,i){t=t?window:n.getWindow(this.document);i=i||t.innerHeight-100;var u=this,r=u.document.createElement("span");return r.innerHTML="&nbsp;",u.cloneRange().insertNode(r),n.scrollToView(r,t,i),n.remove(r),u},inFillChar:function(){var t=this.startContainer;return this.collapsed&&t.nodeType==3&&t.nodeValue.replace(new RegExp("^"+n.fillChar),"").length+1==t.nodeValue.length?!0:!1},createAddress:function(t,i){function f(t){for(var e,o,u,f=t?r.startContainer:r.endContainer,l=n.findParents(f,!0,function(t){return!n.isBody(t)}),h=[],a=0,c;c=l[a++];)h.push(n.getNodeIndex(c,i));if(e=0,i)if(f.nodeType==3){for(o=f.previousSibling;o&&o.nodeType==3;)e+=o.nodeValue.replace(s,"").length,o=o.previousSibling;e+=t?r.startOffset:r.endOffset}else if(f=f.childNodes[t?r.startOffset:r.endOffset],f)e=n.getNodeIndex(f,i);else for(f=t?r.startContainer:r.endContainer,u=f.firstChild;u;){if(n.isFillChar(u)){u=u.nextSibling;continue}if(e++,u.nodeType==3)while(u&&u.nodeType==3)u=u.nextSibling;else u=u.nextSibling}else e=t?n.isFillChar(f)?0:r.startOffset:r.endOffset;return e<0&&(e=0),h.push(e),h}var u={},r=this;return u.startAddress=f(!0),t||(u.endAddress=r.collapsed?[].concat(u.startAddress):f()),u},moveToAddress:function(n,t){function r(n,t){for(var r=i.document.body,u,f,e=0,o,s=n.length;e<s;e++)if(o=n[e],u=r,r=r.childNodes[o],!r){f=o;break}t?r?i.setStartBefore(r):i.setStart(u,f):r?i.setEndBefore(r):i.setEnd(u,f)}var i=this;return r(n.startAddress,!0),!t&&n.endAddress&&r(n.endAddress),i},equals:function(n){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==n[t])return!1;return!0},traversal:function(t,i){var e;if(this.collapsed)return this;for(var u=this.createBookmark(),f=u.end,r=n.getNextDomNode(u.start,!1,i);r&&r!==f&&n.getPosition(r,f)&n.POSITION_PRECEDING;)e=n.getNextDomNode(r,!1,i),t(r),r=e;return this.moveToBookmark(u)}}})(),function(){function e(t,i){var l=n.getNodeIndex,e,o,y,p;if(t=t.duplicate(),t.collapse(i),e=t.parentElement(),!e.hasChildNodes())return{container:e,offset:0};for(var s=e.children,r,h=t.duplicate(),a=0,v=s.length-1,c=-1,f;a<=v;)if(c=Math.floor((a+v)/2),r=s[c],h.moveToElementText(r),o=h.compareEndPoints("StartToStart",t),o>0)v=c-1;else if(o<0)a=c+1;else return{container:e,offset:l(r)};if(c==-1){if(h.moveToElementText(e),h.setEndPoint("StartToStart",t),f=h.text.replace(/(\r\n|\r)/g,"\n").length,s=e.childNodes,!f)return r=s[s.length-1],{container:r,offset:r.nodeValue.length};for(y=s.length;f>0;)f-=s[--y].nodeValue.length;return{container:s[y],offset:-f}}if(h.collapse(o>0),h.setEndPoint(o>0?"StartToStart":"EndToStart",t),f=h.text.replace(/(\r\n|\r)/g,"\n").length,!f)return u.$empty[r.tagName]||u.$nonChild[r.tagName]?{container:e,offset:l(r)+(o>0?0:1)}:{container:r,offset:o>0?0:r.childNodes.length};while(f>0)try{p=r;r=r[o>0?"previousSibling":"nextSibling"];f-=r.nodeValue.length}catch(w){return{container:e,offset:l(p)}}return{container:r,offset:o>0?-f:r.nodeValue.length+f}}function o(n,t){if(n.item)t.selectNode(n.item(0));else{var i=e(n,!0);t.setStart(i.container,i.offset);n.compareEndPoints("StartToEnd",n)!=0&&(i=e(n,!1),t.setEnd(i.container,i.offset))}return t}function t(n){var t,i;try{t=n.getNative().createRange()}catch(r){return null}return(i=t.item?t.item(0):t.parentElement(),(i.ownerDocument||i)===n.document)?t:null}var s=f.Selection=function(r){var u=this,f;if(u.document=r,i.ie9below){f=n.getWindow(r).frameElement;n.on(f,"beforedeactivate",function(){u._bakIERange=u.getIERange()});n.on(f,"activate",function(){try{!t(u)&&u._bakIERange&&u._bakIERange.select()}catch(n){}u._bakIERange=null})}f=r=null};s.prototype={rangeInBody:function(t,r){var u=i.ie9below||r?t.item?t.item():t.parentElement():t.startContainer;return u===this.document.body||n.inDoc(u,this.document)},getNative:function(){var t=this.document;try{return t?i.ie9below?t.selection:n.getWindow(t).getSelection():null}catch(r){return null}},getIERange:function(){var n=t(this);return!n&&this._bakIERange?this._bakIERange:n},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var t=this.getStart();return t?n.findParents(t,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(i.ie9below){var n=t(this);return!!(n&&this.rangeInBody(n))}return!!this.getNative().rangeCount}catch(r){return!1}},getRange:function(){function e(n){for(var t=u.document.body.firstChild,i=n.collapsed;t&&t.firstChild;)n.setStart(t,0),t=t.firstChild;n.startContainer||n.setStart(u.document.body,0);i&&n.collapse(!0)}var u=this,t,s,f,h,c;if(u._cachedRange!=null)return this._cachedRange;if(t=new r.editor.dom.Range(u.document),i.ie9below)if(s=u.getIERange(),s)try{o(s,t)}catch(l){e(t)}else e(t);else if(f=u.getNative(),f&&f.rangeCount)h=f.getRangeAt(0),c=f.getRangeAt(f.rangeCount-1),t.setStart(h.startContainer,h.startOffset).setEnd(c.endContainer,c.endOffset),t.collapsed&&n.isBody(t.startContainer)&&!t.startOffset&&e(t);else{if(this._bakRange&&n.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(t)}return this._bakRange=t},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var t=i.ie9below?this.getIERange():this.getRange(),r,n,u,f;if(i.ie9below){if(!t)return this.document.body.firstChild;if(t.item)return t.item(0);for(r=t.duplicate(),r.text.length>0&&r.moveStart("character",1),r.collapse(1),n=r.parentElement(),f=u=t.parentElement();u=u.parentNode;)if(u==n){n=f;break}}else if(t.shrinkBoundary(),n=t.startContainer,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n.nodeType==3)return n.parentNode;return n},getText:function(){var n,t;return this.isFocus()&&(n=this.getNative())?(t=i.ie9below?n.createRange():n.getRangeAt(0),i.ie9below?t.text:t.toString()):""},clearRange:function(){this.getNative()[i.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function r(t,i){if(i.options.textarea){var r;r=i.textarea;r||(r=t.getElementById("ueditor_textarea_"+i.options.textarea));r||(r=t.getElementsByName(i.options.textarea)[0]);r||t.appendChild(r=n.createElement(document,"textarea",{name:i.options.textarea,id:"ueditor_textarea_"+i.options.textarea,style:"display:none"}));r&&!i.textarea&&(i.textarea=r);r.getAttribute("name")||r.setAttribute("name",i.options.textarea);r.value=i.hasContents()?i.options.allHtmlEnabled?i.getAllHtml():i.getContent(null,null,!0):""}}function a(n){for(var t in n)return t}function c(n){n.langIsReady=!0;n.fireEvent("langReady")}var l=0,s,o=UE.Editor=function(n){var i=this;i.uid=l++;h.call(i);i.commands={};i.options=t.extend(t.clone(n||{}),UEDITOR_CONFIG,!0);i.shortcutkeys={};i.inputRules=[];i.outputRules=[];i.setOpt(o.defaultOptions(i));i.loadServerConfig();t.isEmptyObject(UE.I18N)?t.loadFile(document,{src:i.options.langPath+i.options.lang+"/"+i.options.lang+".js?7a537435",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(i);c(i)}):(i.options.lang=a(UE.I18N),UE.plugin.load(i),c(i));UE.instants["ueditorInstant"+i.uid]=i};o.prototype={registerCommand:function(n,t){this.commands[n]=t},ready:function(n){var t=this;n&&(t.isReady?n.apply(t):t.addListener("ready",n))},setOpt:function(n,i){var r={};t.isString(n)?r[n]=i:r=n;t.extend(this.options,r,!0)},getOpt:function(n){return this.options[n]},destroy:function(){var t=this,r,i,f,u;t.fireEvent("destroy");r=t.container.parentNode;i=t.textarea;i?i.style.display="":(i=document.createElement("textarea"),r.parentNode.insertBefore(i,r));i.style.width=t.iframe.offsetWidth+"px";i.style.height=t.iframe.offsetHeight+"px";i.value=t.getContent();i.id=t.key;r.innerHTML="";n.remove(r);f=t.key;for(u in t)t.hasOwnProperty(u)&&delete this[u];UE.delEditor(f)},render:function(r){var o=this,u=o.options,f=function(t){return parseInt(n.getComputedStyle(r,t))},s,h,c;if(t.isString(r)&&(r=document.getElementById(r)),r){u.minFrameWidth=u.initialFrameWidth?u.initialFrameWidth:u.initialFrameWidth=r.offsetWidth;u.initialFrameHeight?u.minFrameHeight=u.initialFrameHeight:u.initialFrameHeight=u.minFrameHeight=r.offsetHeight;r.style.width=/%$/.test(u.initialFrameWidth)?"100%":u.initialFrameWidth-f("padding-left")-f("padding-right")+"px";r.style.height=/%$/.test(u.initialFrameHeight)?"100%":u.initialFrameHeight-f("padding-top")-f("padding-bottom")+"px";r.style.zIndex=u.zIndex;s=[];for(h in u.iframeCssUrlsAddition)s.push("<link rel='stylesheet' type='text/css' href='"+t.unhtml(u.iframeCssUrlsAddition[h])+"'/>");c=(e&&i.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}<\/style>"+(u.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+t.unhtml(u.iframeCssUrl)+"'/>":"")+(u.initialStyle?"<style>"+u.initialStyle+"<\/style>":"")+s.join("")+"<\/head><body class='view' ><\/body><script type='text/javascript' "+(e?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+o.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script>"+(u.iframeJsUrl?"<script type='text/javascript' src='"+t.unhtml(u.iframeJsUrl)+"'><\/script>":"")+"<\/html>";r.appendChild(n.createElement(document,"iframe",{id:"ueditor_"+o.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(u.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+c+'");document.close();}())'}));r.style.overflow="hidden";setTimeout(function(){/%$/.test(u.initialFrameWidth)&&(u.minFrameWidth=u.initialFrameWidth=r.offsetWidth);/%$/.test(u.initialFrameHeight)&&(u.minFrameHeight=u.initialFrameHeight=r.offsetHeight,r.style.height=u.initialFrameHeight+"px")})}},_setup:function(t){var u=this,o=u.options,h,s,c;for(e?(t.body.disabled=!0,t.body.contentEditable=!0,t.body.disabled=!1):t.body.contentEditable=!0,t.body.spellcheck=!1,u.document=t,u.window=t.defaultView||t.parentWindow,u.iframe=u.window.frameElement,u.body=t.body,u.selection=new f.Selection(t),i.gecko&&(h=this.selection.getNative())&&h.removeAllRanges(),this._initEvents(),s=this.iframe.parentNode;!n.isBody(s);s=s.parentNode)if(s.tagName==="FORM"){if(u.form=s,u.options.autoSyncData){n.on(u.window,"blur",function(){r(s,u)});n.on(s,"submit",function(){u.fireEvent("beforesubmit")})}else n.on(s,"submit",function(){r(this,u);u.fireEvent("beforesubmit")});break}o.initialContent&&(o.autoClearinitialContent?(c=u.execCommand,u.execCommand=function(){return u.fireEvent("firstBeforeExecCommand"),c.apply(u,arguments)},this._setDefaultContent(o.initialContent)):this.setContent(o.initialContent,!1,!0));n.isEmptyNode(u.body)&&(u.body.innerHTML="<p>"+(i.ie?"":"<br/>")+"<\/p>");o.focus&&setTimeout(function(){u.focus(u.options.focusInEnd);u.options.autoClearinitialContent||u._selectionChange()},0);u.container||(u.container=this.iframe.parentNode);o.fullscreen&&u.ui&&u.ui.setFullScreen(!0);try{u.document.execCommand("2D-position",!1,!1)}catch(l){}try{u.document.execCommand("enableInlineTableEditing",!1,!1)}catch(l){}try{u.document.execCommand("enableObjectResizing",!1,!1)}catch(l){}if(u._bindshortcutKeys(),u.isReady=1,u.fireEvent("ready"),o.onready&&o.onready.call(u),!i.ie9below)n.on(u.window,["blur","focus"],function(n){if(n.type=="blur"){u._bakRange=u.selection.getRange();try{u._bakNativeRange=u.selection.getNative().getRangeAt(0);u.selection.getNative().removeAllRanges()}catch(n){u._bakNativeRange=null}}else try{u._bakRange&&u._bakRange.select()}catch(n){}});i.gecko&&i.version<=10902&&(u.body.contentEditable=!1,setTimeout(function(){u.body.contentEditable=!0},100),setInterval(function(){u.body.style.height=u.iframe.offsetHeight-20+"px"},100));o.isShow||u.setHide();o.readonly&&u.setDisabled()},sync:function(t){var i=this,u=t?document.getElementById(t):n.findParent(i.iframe.parentNode,function(n){return n.tagName==="FORM"},!0);u&&r(u,i)},syncCommandState:function(){this.fireEvent("selectionchange")},setWidth:function(n){n!==parseInt(this.iframe.parentNode.parentNode.style.width)&&(this.iframe.parentNode.parentNode.style.width=n+"px")},setHeight:function(n,t){n!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=n+"px");t||(this.options.minFrameHeight=this.options.initialFrameHeight=n);this.body.style.height=n+"px";t||this.trigger("setHeight")},addshortcutkey:function(n,i){var r={};i?r[n]=i:r=n;t.extend(this.shortcutkeys,r)},_bindshortcutKeys:function(){var t=this,i=this.shortcutkeys;t.addListener("keydown",function(r,u){var h=u.keyCode||u.which,e,c,l,f,o,s;for(e in i)for(c=i[e].split(","),l=0;f=c[l++];)f=f.split(":"),o=f[0],s=f[1],(/^(ctrl)(\+shift)?\+(\d+)$/.test(o.toLowerCase())||/^(\d+)$/.test(o))&&((RegExp.$1=="ctrl"?u.ctrlKey||u.metaKey:0)&&(RegExp.$2!=""?u[RegExp.$2.slice(1)+"Key"]:1)&&h==RegExp.$3||h==RegExp.$1)&&(t.queryCommandState(e,s)!=-1&&t.execCommand(e,s),n.preventDefault(u))})},getContent:function(n,i,r,u,f){var e=this,o;return(n&&t.isFunction(n)&&(i=n,n=""),i?!i():!this.hasContents())?"":(e.fireEvent("beforegetcontent"),o=UE.htmlparser(e.body.innerHTML,u),e.filterOutputRule(o),e.fireEvent("aftergetcontent",n,o),o.toHtml(f))},getAllHtml:function(){var n=this,u=[],r;return n.fireEvent("getAllHtml",u),i.ie&&i.version>8&&(r="",t.each(n.document.styleSheets,function(n){r+=n.href?'<link rel="stylesheet" type="text/css" href="'+n.href+'" />':"<style>"+n.cssText+"<\/style>"}),t.each(n.document.getElementsByTagName("script"),function(n){r+=n.outerHTML})),"<html><head>"+(n.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+n.options.charset+'"/>':"")+(r||n.document.getElementsByTagName("head")[0].innerHTML)+u.join("\n")+"<\/head><body "+(e&&i.version<9?'class="view"':"")+">"+n.getContent(null,null,!0)+"<\/body><\/html>"},getPlainTxt:function(){var i=new RegExp(n.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(n,t,i){return u.$block[i]?"\n":t?t:""}),t.replace(i,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var t=new RegExp(n.fillChar,"g");return this.body[i.ie?"innerText":"textContent"].replace(t,"").replace(/\u00a0/g," ")},setContent:function(t,f,e){function v(n){return n.tagName=="DIV"&&n.getAttribute("cdata_tag")}var s=this,c,o,l,h,a;if(s.fireEvent("beforesetcontent",t),c=UE.htmlparser(t),s.filterInputRule(c),t=c.toHtml(),s.body.innerHTML=(f?s.body.innerHTML:"")+t,s.options.enterTag=="p")if(o=this.body.firstChild,!o||o.nodeType==1&&(u.$cdata[o.tagName]||v(o)||n.isCustomeNode(o))&&o===this.body.lastChild)this.body.innerHTML="<p>"+(i.ie?"&nbsp;":"<br/>")+"<\/p>"+this.body.innerHTML;else for(h=s.document.createElement("p");o;){while(o&&(o.nodeType==3||o.nodeType==1&&u.p[o.tagName]&&!u.$cdata[o.tagName]))l=o.nextSibling,h.appendChild(o),o=l;if(h.firstChild)if(o)o.parentNode.insertBefore(h,o),h=s.document.createElement("p");else{s.body.appendChild(h);break}o=o.nextSibling}s.fireEvent("aftersetcontent");s.fireEvent("contentchange");e||s._selectionChange();s._bakRange=s._bakIERange=s._bakNativeRange=null;i.gecko&&(a=this.selection.getNative())&&a.removeAllRanges();s.options.autoSyncData&&s.form&&r(s.form,s)},focus:function(t){var f,r,i;try{f=this;r=f.selection.getRange();t?(i=f.body.lastChild,i&&i.nodeType==1&&!u.$empty[i.tagName]&&(n.isEmptyBlock(i)?r.setStartAtFirst(i):r.setStartAtLast(i),r.collapse(!0)),r.setCursor(!0)):(!r.collapsed&&n.isBody(r.startContainer)&&r.startOffset==0&&(i=f.body.firstChild,i&&i.nodeType==1&&!u.$empty[i.tagName]&&r.setStartAtFirst(i).collapse(!0)),r.select(!0));this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var t=this.selection.getNative(),n;t.empty&&i.ie?(n=document.body.createTextRange(),n.moveToElementText(document.body),n.collapse(!0),n.select(),t.empty()):t.removeAllRanges()},_initEvents:function(){var r=this,u=r.document,f=r.window;r._proxyDomEvent=t.bind(r._proxyDomEvent,r);n.on(u,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],r._proxyDomEvent);n.on(f,["focus","blur"],r._proxyDomEvent);n.on(r.body,"drop",function(n){i.gecko&&n.stopPropagation&&n.stopPropagation();r.fireEvent("contentchange")});n.on(r.body,"dblclick",function(n){var t,i,u;try{if(t=r.body.lastChild,!t)return;i=t.getBoundingClientRect();n.clientY>i.top+i.height&&(u=document.createElement("p"),u.innerHTML="<br />",r.body.appendChild(u),setTimeout(function(){r.focus(!0)},100))}catch(n){console.error("auto insert p at end",n)}});n.on(u,["mouseup","keydown"],function(n){n.type==="keydown"&&(n.ctrlKey||n.metaKey||n.shiftKey||n.altKey)||n.button!==2&&r._selectionChange(250,n)})},_proxyDomEvent:function(n){return this.fireEvent("before"+n.type.replace(/^on/,"").toLowerCase())===!1?!1:this.fireEvent(n.type.replace(/^on/,""),n)===!1?!1:this.fireEvent("after"+n.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(n,t){var r=this,u=!1,f,e,o;i.ie&&i.version<9&&t&&t.type=="mouseup"&&(o=this.selection.getRange(),o.collapsed||(u=!0,f=t.clientX,e=t.clientY));clearTimeout(s);s=setTimeout(function(){var n,i;if(r.selection&&r.selection.getNative()){if(u&&r.selection.getNative().type=="None"){n=r.document.body.createTextRange();try{n.moveToPoint(f,e)}catch(o){n=null}}n&&(i=r.selection.getIERange,r.selection.getIERange=function(){return n});r.selection.cache();i&&(r.selection.getIERange=i);r.selection._cachedRange&&r.selection._cachedStartElement&&(r.fireEvent("beforeselectionchange"),r.fireEvent("selectionchange",!!t),r.fireEvent("afterselectionchange"),r.selection.clear())}},n||50)},_callCmdFn:function(n,t){var u=t[0].toLowerCase(),i,r;if(i=this.commands[u]||UE.commands[u],r=i&&i[n],i&&r||n!="queryCommandState"){if(r)return r.apply(this,t)}else return 0},execCommand:function(n){n=n.toLowerCase();var t=this,r,i=t.commands[n]||UE.commands[n];return!i||!i.execCommand?null:(i.notNeedUndo||t.__hasEnterExecCommand?(r=this._callCmdFn("execCommand",arguments),t.__hasEnterExecCommand||i.ignoreContentChange||t._ignoreContentChange||t.fireEvent("contentchange")):(t.__hasEnterExecCommand=!0,t.queryCommandState.apply(t,arguments)!=-1&&(t.fireEvent("saveScene"),t.fireEvent.apply(t,["beforeexeccommand",n].concat(arguments)),r=this._callCmdFn("execCommand",arguments),t.fireEvent.apply(t,["afterexeccommand",n].concat(arguments)),t.fireEvent("saveScene")),t.__hasEnterExecCommand=!1),t.__hasEnterExecCommand||i.ignoreContentChange||t._ignoreContentChange||t._selectionChange(),r)},queryCommandState:function(){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(t){var i,r,u,f,e;if(t)for(i=0;r=t[i++];)if(this.document.getElementsByTagName(r).length>0)return!0;if(!n.isEmptyBlock(this.body))return!0;for(t=["div"],i=0;r=t[i++];)for(u=n.getElementsByTagName(this.document,r),f=0;e=u[f++];)if(n.isCustomeNode(e))return!0;for(t=["video","iframe"],i=0;r=t[i++];)for(u=n.getElementsByTagName(this.document,r),f=0;e=u[f++];)return!0;return!1},reset:function(){this.clear();this.fireEvent("reset")},clear:function(){this.setContent("")},setEnabled:function(){var n=this,t;if(n.body.contentEditable==="false"){n.body.contentEditable=!0;t=n.selection.getRange();try{t.moveToBookmark(n.lastBk);delete n.lastBk}catch(i){t.setStartAtFirst(n.body).collapse(!0)}t.select(!0);n.bkqueryCommandState&&(n.queryCommandState=n.bkqueryCommandState,delete n.bkqueryCommandState);n.bkqueryCommandValue&&(n.queryCommandValue=n.bkqueryCommandValue,delete n.bkqueryCommandValue);n.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(n){var i=this;n=n?t.isArray(n)?n:[n]:[];i.body.contentEditable=="true"&&(i.lastBk||(i.lastBk=i.selection.getRange().createBookmark(!0)),i.body.contentEditable=!1,i.bkqueryCommandState=i.queryCommandState,i.bkqueryCommandValue=i.queryCommandValue,i.queryCommandState=function(r){return t.indexOf(n,r)!=-1?i.bkqueryCommandState.apply(i,arguments):-1},i.queryCommandValue=function(r){return t.indexOf(n,r)!=-1?i.bkqueryCommandValue.apply(i,arguments):null},i.fireEvent("selectionchange"))},disable:function(n){return this.setDisabled(n)},_setDefaultContent:function(){function n(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(e?"":"<br/>")+"<\/p>",t.removeListener("firstBeforeExecCommand focus",n),setTimeout(function(){t.focus();t._selectionChange()},0))}return function(t){var i=this;i.body.innerHTML='<p id="initContent">'+t+"<\/p>";i.addListener("firstBeforeExecCommand focus",n)}}(),setShow:function(){var n=this,t=n.selection.getRange();if(n.container.style.display=="none"){try{t.moveToBookmark(n.lastBk);delete n.lastBk}catch(i){t.setStartAtFirst(n.body).collapse(!0)}setTimeout(function(){t.select(!0)},100);n.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var n=this;n.lastBk||(n.lastBk=n.selection.getRange().createBookmark(!0));n.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(n){var t=UE.I18N[this.options.lang],i,r;if(!t)throw Error("not import language file");for(n=(n||"").split("."),i=0;r=n[i++];)if(t=t[r],!t)break;return t},getContentLength:function(n,t){var i=this.getContent(!1,!1,!0).length,r,u;if(n)for(t=(t||[]).concat(["hr","img","iframe"]),i=this.getContentTxt().replace(/[\t\r\n]+/g,"").length,r=0;u=t[r++];)i+=this.document.getElementsByTagName(u).length;return i},getScrollTop:function(){return Math.max(this.document.documentElement.scrollTop,this.document.body.scrollTop)},getScrollLeft:function(){return Math.max(this.document.documentElement.scrollLeft,this.document.body.scrollLeft)},addInputRule:function(n){this.inputRules.push(n)},filterInputRule:function(n){for(var i=0,t;t=this.inputRules[i++];)t.call(this,n)},addOutputRule:function(n){this.outputRules.push(n)},filterOutputRule:function(n){for(var i=0,t;t=this.outputRules[i++];)t.call(this,n)},getActionUrl:function(n){var i=this.getOpt("serverUrl"),u,r;return n?(u=this.getOpt(n)||n,r=this.getOpt("imageUrl"),!i&&r&&(i=r.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),i?(i=i+(i.indexOf("?")===-1?"?":"&")+"action="+(u||""),t.formatUrl(i)):""):i}};t.inherits(o,h)}();UE.Editor.defaultOptions=function(n){var t=n.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:t+"themes/iframe.css?c20ec247",iframeCssUrlsAddition:[],textarea:"",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function i(n){console&&console.error(n)}var n=this;setTimeout(function(){try{n.options.imageUrl&&n.setOpt("serverUrl",n.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var r=n.getActionUrl("config"),u=t.isCrossDomainUrl(r);n._serverConfigLoaded=!1;r&&UE.ajax.request(r,{method:"GET",dataType:u?"jsonp":"",headers:n.options.serverHeaders||{},onsuccess:function(r){try{var f=u?r:eval("("+r.responseText+")");n.options=t.merge(n.options,f);n.fireEvent("serverConfigLoaded");n._serverConfigLoaded=!0}catch(e){i(n.getLang("loadconfigFormatError"))}},onerror:function(){i(n.getLang("loadconfigHttpError"))}})}catch(f){i(n.getLang("loadconfigError"))}})};UE.Editor.prototype.isServerConfigLoaded=function(){var n=this;return n._serverConfigLoaded||!1};UE.Editor.prototype.afterConfigReady=function(n){if(n&&t.isFunction(n)){var i=this,r=function(){n.apply(i,arguments);i.removeListener("serverConfigLoaded",r)};i.isServerConfigLoaded()?n.call(i,"serverConfigLoaded"):i.addListener("serverConfigLoaded",r)}}}();UE.ajax=function(){function n(n){var u=[],i,r;for(i in n)if(i!="method"&&i!="timeout"&&i!="async"&&i!="dataType"&&i!="callback"&&n[i]!=undefined&&n[i]!=null)if((typeof n[i]).toLowerCase()=="function"||(typeof n[i]).toLowerCase()=="object"){if(t.isArray(n[i]))for(r=0;r<n[i].length;r++)u.push(encodeURIComponent(i)+"[]="+encodeURIComponent(n[i][r]))}else u.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return u.join("&")}function f(i,u){var f=r(),c=!1,l={method:"POST",timeout:5e3,"async":!0,headers:{},data:{},onsuccess:function(){},onerror:function(){}},e,o,h;if(typeof i=="object"&&(u=i,i=u.url),f&&i){e=u?t.extend(l,u):l;o=n(e);t.isEmptyObject(e.data)||(o+=(o?"&":"")+n(e.data));var a=setTimeout(function(){f.readyState!==4&&(c=!0,f.abort(),clearTimeout(a))},e.timeout),s=e.method.toUpperCase(),v=i+(i.indexOf("?")===-1?"?":"&")+(s==="POST"?"":o+"&noCache="+ +new Date);if(f.open(s,v,e.async),f.onreadystatechange=function(){if(f.readyState===4)if(c||f.status!==200)e.onerror(f);else e.onsuccess(f)},e.headers)for(h in e.headers)f.setRequestHeader(h,e.headers[h]);s==="POST"?(f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(o)):f.send(null)}}function u(i,r){function w(n,t,i){n.setAttribute("type","text/javascript");n.setAttribute("defer","defer");i&&n.setAttribute("charset",i);n.setAttribute("src",t);document.getElementsByTagName("head")[0].appendChild(n)}function l(n){return function(){try{if(n)u.onerror&&u.onerror();else try{clearTimeout(v);s.apply(window,arguments)}catch(i){}}catch(t){u.onerror&&u.onerror.call(window,t)}finally{u.oncomplete&&u.oncomplete.apply(window,arguments);e.parentNode&&e.parentNode.removeChild(e);window[f]=null;try{delete window[f]}catch(i){}}}}var s=r.onsuccess||function(){},e=document.createElement("SCRIPT"),u=r||{},p=u.charset,h=u.jsonp||"callback",f,a=u.timeOut||0,v,c=new RegExp("(\\?|&)"+h+"=([^&]*)"),y,o;t.isFunction(s)?(f="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36),window[f]=l(0)):t.isString(s)?f=s:(y=c.exec(i))&&(f=y[2]);i=i.replace(c,"$1"+h+"="+f);i.search(c)<0&&(i+=(i.indexOf("?")<0?"?":"&")+h+"="+f);o=n(r);t.isEmptyObject(r.data)||(o+=(o?"&":"")+n(r.data));o&&(i=i.replace(/\?/,"?"+o+"&"));e.onerror=l(1);a&&(v=setTimeout(l(1),a));w(e,i,p)}var i="XMLHttpRequest()",r;try{new ActiveXObject("Msxml2.XMLHTTP");i="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");i="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}return r=new Function("return new "+i),{request:function(n,t){t&&t.dataType==="jsonp"?u(n,t):f(n,t)},getJSONP:function(n,t,i){var r={data:t,oncomplete:i};u(n,r)}}}();UE.api=function(){var n=null;return!function(t,i){n=i()}(this,function(){"use strict";function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function b(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function fi(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function k(n,t,i){return t&&fi(n.prototype,t),i&&fi(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function ei(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=i){var f,e,r=[],u=!0,o=!1;try{for(i=i.call(n);!(u=(f=i.next()).done)&&(r.push(f.value),!t||r.length!==t);u=!0);}catch(n){o=!0;e=n}finally{try{u||null==i.return||i.return()}finally{if(o)throw e;}}return r}}(n,t)||function(n,t){if(n){if("string"==typeof n)return oi(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return("Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i)?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oi(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}()}function oi(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function si(n,t){return function(){return n.apply(t,arguments)}}function a(n,t){var i,e,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=c.allOwnKeys,l=void 0!==o&&o,u,f,s;if(null!=n)if("object"!==r(n)&&(n=[n]),h(n))for(i=0,e=n.length;i<e;i++)t.call(null,n[i],i,n);else for(f=l?Object.getOwnPropertyNames(n):Object.keys(n),s=f.length,i=0;i<s;i++)u=f[i],t.call(null,n[u],u,n)}function li(n,t){t=t.toLowerCase();for(var i,r=Object.keys(n),u=r.length;u-->0;)if(t===(i=r[u]).toLowerCase())return i;return null}function t(n,t,i,r,u){Error.call(this);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;this.message=n;this.name="AxiosError";t&&(this.code=t);i&&(this.config=i);r&&(this.request=r);u&&(this.response=u)}function yt(t){return n.isPlainObject(t)||n.isArray(t)}function ki(t){return n.endsWith(t,"[]")?t.slice(0,-2):t}function di(n,t,i){return n?n.concat(t).map(function(n,t){return n=ki(n),!i&&t?"["+n+"]":n}).join(i?".":""):t}function it(i,u,f){function o(i){if(null===i)return"";if(n.isDate(i))return i.toISOString();if(!l&&n.isBlob(i))throw new t("Blob is not supported. Use a Buffer instead.");return n.isArrayBuffer(i)||n.isTypedArray(i)?l&&"function"==typeof Blob?new Blob([i]):Buffer.from(i):i}function a(t,i,f){var e=t;if(t&&!f&&"object"===r(t))if(n.endsWith(i,"{}"))i=y?i:i.slice(0,-2),t=JSON.stringify(t);else if(n.isArray(t)&&function(t){return n.isArray(t)&&!t.some(yt)}(t)||(n.isFileList(t)||n.endsWith(i,"[]"))&&(e=n.toArray(t)))return i=ki(i),e.forEach(function(t,r){n.isUndefined(t)||null===t||u.append(!0===c?di([i],r,h):null===c?i:i+"[]",o(t))}),!1;return!!yt(t)||(u.append(di(f,i,h),o(t)),!1)}var e,v;if(!n.isObject(i))throw new TypeError("target must be an object");u=u||new FormData;var y=(f=n.toFlatObject(f,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,i){return!n.isUndefined(i[t])})).metaTokens,s=f.visitor||a,h=f.dots,c=f.indexes,l=(f.Blob||"undefined"!=typeof Blob&&Blob)&&n.isSpecCompliantForm(u);if(!n.isFunction(s))throw new TypeError("visitor must be a function");if(e=[],v=Object.assign(gi,{defaultVisitor:a,convertValue:o,isVisitable:yt}),!n.isObject(i))throw new TypeError("data must be an object");return function r(t,i){if(!n.isUndefined(t)){if(-1!==e.indexOf(t))throw Error("Circular reference detected in "+i.join("."));e.push(t);n.forEach(t,function(t,f){!0===(!(n.isUndefined(t)||null===t)&&s.call(u,t,n.isString(f)?f.trim():f,i,v))&&r(t,i?i.concat(f):[f])});e.pop()}}(i),u}function nr(n){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function pt(n,t){this._pairs=[];n&&it(n,this,t)}function eu(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tr(t,i,r){var e,o,u,f;return i?(o=r&&r.encode||eu,u=r&&r.serialize,(e=u?u(i,r):n.isURLSearchParams(i)?i.toString():new pt(i,r).toString(o))&&(f=t.indexOf("#"),-1!==f&&(t=t.slice(0,f)),t+=(-1===t.indexOf("?")?"?":"&")+e),t):t}function ur(t){function i(t,r,u,f){var e=t[f++],o=Number.isFinite(+e),s=f>=t.length;return e=!e&&n.isArray(u)?u.length:e,s?(u[e]=n.hasOwnProp(u,e)?[u[e],r]:r,!o):(u[e]&&n.isObject(u[e])||(u[e]=[]),i(t,r,u[e],f)&&n.isArray(u[e])&&(u[e]=function(n){for(var i,r={},u=Object.keys(n),f=u.length,t=0;t<f;t++)r[i=u[t]]=n[i];return r}(u[e])),!o)}if(n.isFormData(t)&&n.isFunction(t.entries)){var r={};return n.forEachEntry(t,function(t,u){i(function(t){return n.matchAll(/\w+|\[(\w*)]/g,t).map(function(n){return"[]"===n[0]?"":n[1]||n[0]})}(t),u,r,0)}),r}return null}function y(n){return n&&String(n).trim().toLowerCase()}function rt(t){return!1===t||null==t?t:n.isArray(t)?t.map(rt):String(t)}function dt(t,i,r,u,f){return n.isFunction(u)?u.call(this,i,r):(f&&(i=r),n.isString(i)?n.isString(u)?-1!==i.indexOf(u):n.isRegExp(u)?u.test(i):void 0:void 0)}function gt(t,i){var u=this||kt,f=i||u,e=o.from(f.headers),r=f.data;return n.forEach(t,function(n){r=n.call(u,r,e.normalize(),i?i.status:void 0)}),e.normalize(),r}function or(n){return!(!n||!n.__CANCEL__)}function w(n,i,r){t.call(this,null==n?"canceled":n,t.ERR_CANCELED,i,r);this.name="CanceledError"}function hr(n,t){return n&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}(n,t):t}function lr(n,t){var i=0,r=function(n,t){n=n||10;var u,f=new Array(n),e=new Array(n),i=0,r=0;return t=void 0!==t?t:1e3,function(o){var s=Date.now(),a=e[r],h,c,l;for(u||(u=s),f[i]=o,e[i]=s,h=r,c=0;h!==i;)c+=f[h++],h%=n;if((i=(i+1)%n)===r&&(r=(r+1)%n),!(s-u<t))return l=a&&s-a,l?Math.round(1e3*c/l):void 0}}(50,250);return function(u){var f=u.loaded,e=u.lengthComputable?u.total:void 0,h=f-i,o=r(h),s;i=f;s={loaded:f,total:e,progress:e?f/e:void 0,bytes:h,rate:o||void 0,estimated:o&&e&&f<=e?(e-f)/o:void 0,event:u};s[t?"download":"upload"]=!0;n(s)}}function ni(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new w(null,n);}function vr(n){return ni(n),n.headers=o.from(n.headers),n.data=gt.call(n,n.transformRequest),-1!==["post","put","patch"].indexOf(n.method)&&n.headers.setContentType("application/x-www-form-urlencoded",!1),ar(n.adapter||kt.adapter)(n).then(function(t){return ni(n),t.data=gt.call(n,n.transformResponse,t),t.headers=o.from(t.headers),t},function(t){return or(t)||(ni(n),t&&t.response&&(t.response.data=gt.call(n,n.transformResponse,t.response),t.response.headers=o.from(t.response.headers))),Promise.reject(t)})}function c(t,i){function u(t,i,r){return n.isPlainObject(t)&&n.isPlainObject(i)?n.merge.call({caseless:r},t,i):n.isPlainObject(i)?n.merge({},i):n.isArray(i)?i.slice():i}function o(t,i,r){return n.isUndefined(i)?n.isUndefined(t)?void 0:u(void 0,t,r):u(t,i,r)}function e(t,i){if(!n.isUndefined(i))return u(void 0,i)}function r(t,i){return n.isUndefined(i)?n.isUndefined(t)?void 0:u(void 0,t):u(void 0,i)}function s(n,r,f){return f in i?u(n,r):f in t?u(void 0,n):void 0}var f,h;return i=i||{},f={},h={url:e,method:e,data:e,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:s,headers:function(n,t){return o(ti(n),ti(t),!0)}},n.forEach(Object.keys(Object.assign({},t,i)),function(r){var u=h[r]||o,e=u(t[r],i[r],r);n.isUndefined(e)&&u!==s||(f[r]=e)}),f}var st,wr=Object.prototype.toString,ht=Object.getPrototypeOf,d=(st=Object.create(null),function(n){var t=wr.call(n);return st[t]||(st[t]=t.slice(8,-1).toLowerCase())}),f=function(n){return n=n.toLowerCase(),function(t){return d(t)===n}},g=function(n){return function(t){return r(t)===n}},h=Array.isArray,l=g("undefined"),hi=f("ArrayBuffer"),br=g("string"),u=g("function"),ci=g("number"),nt=function(n){return null!==n&&"object"===r(n)},tt=function(n){if("object"!==d(n))return!1;var t=ht(n);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in n||Symbol.iterator in n)},kr=f("Date"),dr=f("File"),gr=f("Blob"),nu=f("FileList"),tu=f("URLSearchParams"),ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,vi=function(n){return!l(n)&&n!==ai},ct,iu=(ct="undefined"!=typeof Uint8Array&&ht(Uint8Array),function(n){return ct&&n instanceof ct}),ru=f("HTMLFormElement"),yi=function(){var n=Object.prototype.hasOwnProperty;return function(t,i){return n.call(t,i)}}(),uu=f("RegExp"),pi=function(n,t){var r=Object.getOwnPropertyDescriptors(n),i={};a(r,function(r,u){!1!==t(r,u,n)&&(i[u]=r)});Object.defineProperties(n,i)},lt="abcdefghijklmnopqrstuvwxyz",wi="0123456789",bi={DIGIT:wi,ALPHA:lt,ALPHA_DIGIT:lt+lt.toUpperCase()+wi},fu=f("AsyncFunction"),n={isArray:h,isArrayBuffer:hi,isBuffer:function(n){return null!==n&&!l(n)&&null!==n.constructor&&!l(n.constructor)&&u(n.constructor.isBuffer)&&n.constructor.isBuffer(n)},isFormData:function(n){var t;return n&&("function"==typeof FormData&&n instanceof FormData||u(n.append)&&("formdata"===(t=d(n))||"object"===t&&u(n.toString)&&"[object FormData]"===n.toString()))},isArrayBufferView:function(n){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&hi(n.buffer)},isString:br,isNumber:ci,isBoolean:function(n){return!0===n||!1===n},isObject:nt,isPlainObject:tt,isUndefined:l,isDate:kr,isFile:dr,isBlob:gr,isRegExp:uu,isFunction:u,isStream:function(n){return nt(n)&&u(n.pipe)},isURLSearchParams:tu,isTypedArray:iu,isFileList:nu,forEach:a,merge:function r(){for(var i=vi(this)&&this||{},u=i.caseless,n={},f=function(t,i){var f=u&&li(n,i)||i;n[f]=tt(n[f])&&tt(t)?r(n[f],t):tt(t)?r({},t):h(t)?t.slice():t},t=0,e=arguments.length;t<e;t++)arguments[t]&&a(arguments[t],f);return n},extend:function(n,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=r.allOwnKeys;return a(t,function(t,r){n[r]=i&&u(t)?si(t,i):t},{allOwnKeys:f}),n},trim:function(n){return n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(n){return 65279===n.charCodeAt(0)&&(n=n.slice(1)),n},inherits:function(n,t,i,r){n.prototype=Object.create(t.prototype,r);n.prototype.constructor=n;Object.defineProperty(n,"super",{value:t.prototype});i&&Object.assign(n.prototype,i)},toFlatObject:function(n,t,i,r){var e,f,u,o={};if(t=t||{},null==n)return t;do{for(f=(e=Object.getOwnPropertyNames(n)).length;f-->0;)u=e[f],r&&!r(u,n,t)||o[u]||(t[u]=n[u],o[u]=!0);n=!1!==i&&ht(n)}while(n&&(!i||i(n,t))&&n!==Object.prototype);return t},kindOf:d,kindOfTest:f,endsWith:function(n,t,i){n=String(n);(void 0===i||i>n.length)&&(i=n.length);i-=t.length;var r=n.indexOf(t,i);return-1!==r&&r===i},toArray:function(n){var t,i;if(!n)return null;if(h(n))return n;if(t=n.length,!ci(t))return null;for(i=new Array(t);t-->0;)i[t]=n[t];return i},forEachEntry:function(n,t){for(var i,r,u=(n&&n[Symbol.iterator]).call(n);(i=u.next())&&!i.done;)r=i.value,t.call(n,r[0],r[1])},matchAll:function(n,t){for(var i,r=[];null!==(i=n.exec(t));)r.push(i);return r},isHTMLForm:ru,hasOwnProperty:yi,hasOwnProp:yi,reduceDescriptors:pi,freezeMethods:function(n){pi(n,function(t,i){if(u(n)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;var r=n[i];u(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+i+"'");}))})},toObjectSet:function(n,t){var i={},r=function(n){n.forEach(function(n){i[n]=!0})};return h(n)?r(n):r(String(n).split(t)),i},toCamelCase:function(n){return n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,i){return t.toUpperCase()+i})},noop:function(){},toFiniteNumber:function(n,t){return n=+n,Number.isFinite(n)?n:t},findKey:li,global:ai,isContextDefined:vi,ALPHABET:bi,generateString:function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi.ALPHA_DIGIT,t="",r=n.length;i--;)t+=n[Math.random()*r|0];return t},isSpecCompliantForm:function(n){return!!(n&&u(n.append)&&"FormData"===n[Symbol.toStringTag]&&n[Symbol.iterator])},toJSONObject:function(n){var t=new Array(10);return function n(i,r){if(nt(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;var u=h(i)?[]:{};return a(i,function(t,i){var f=n(t,r+1);l(f)||(u[i]=f)}),t[r]=void 0,u}}return i}(n,0)},isAsyncFn:fu,isThenable:function(n){return n&&(nt(n)||u(n))&&u(n.then)&&u(n.catch)}},at,vt,gi,wt,fr,v,p,o,sr,cr,ut,ar,ti,yr,ft,ii,pr,i;n.inherits(t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:n.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});at=t.prototype;vt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(n){vt[n]={value:n}});Object.defineProperties(t,vt);Object.defineProperty(at,"isAxiosError",{value:!0});t.from=function(i,r,u,f,e,o){var s=Object.create(at);return n.toFlatObject(i,s,function(n){return n!==Error.prototype},function(n){return"isAxiosError"!==n}),t.call(s,i.message,r,u,f,e),s.cause=i,s.name=i.name,o&&Object.assign(s,o),s};gi=n.toFlatObject(n,{},null,function(n){return/^is[A-Z]/.test(n)});wt=pt.prototype;wt.append=function(n,t){this._pairs.push([n,t])};wt.toString=function(n){var t=n?function(t){return n.call(this,t,nr)}:nr;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};var bt,ir=function(){function t(){b(this,t);this.handlers=[]}return k(t,[{key:"use",value:function(n,t,i){return this.handlers.push({fulfilled:n,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(n){this.handlers[n]&&(this.handlers[n]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){n.forEach(this.handlers,function(n){null!==n&&t(n)})}}]),t}(),rr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},e={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:pt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(bt=navigator.product)&&"NativeScript"!==bt&&"NS"!==bt)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};fr={"Content-Type":void 0};v={transitional:rr,adapter:["xhr","http"],transformRequest:[function(t,i){var s,r=i.getContentType()||"",u=r.indexOf("application/json")>-1,f=n.isObject(t),o;if(f&&n.isHTMLForm(t)&&(t=new FormData(t)),n.isFormData(t))return u&&u?JSON.stringify(ur(t)):t;if(n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t))return t;if(n.isArrayBufferView(t))return t.buffer;if(n.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(f){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,i){return it(t,new e.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,u){return e.isNode&&n.isBuffer(t)?(this.append(i,t.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},i))}(t,this.formSerializer).toString();if((s=n.isFileList(t))||r.indexOf("multipart/form-data")>-1)return o=this.env&&this.env.FormData,it(s?{"files[]":t}:t,o&&new o,this.formSerializer)}return f||u?(i.setContentType("application/json",!1),function(t,i,r){if(n.isString(t))try{return(i||JSON.parse)(t),n.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t;}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(i){var r=this.transitional||v.transitional,e=r&&r.forcedJSONParsing,u="json"===this.responseType,f;if(i&&n.isString(i)&&(e&&!this.responseType||u)){f=!(r&&r.silentJSONParsing)&&u;try{return JSON.parse(i)}catch(i){if(f){if("SyntaxError"===i.name)throw t.from(i,t.ERR_BAD_RESPONSE,this,null,this.response);throw i;}}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:e.classes.FormData,Blob:e.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],function(n){v.headers[n]={}});n.forEach(["post","put","patch"],function(t){v.headers[t]=n.merge(fr)});var kt=v,ou=n.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),er=Symbol("internals");p=function(){function t(n){b(this,t);n&&this.set(n)}return k(t,[{key:"set",value:function(t,i,r){function h(t,i,r){var f=y(i),u;if(!f)throw new Error("header name must be a non-empty string");u=n.findKey(o,f);u&&void 0!==o[u]&&!0!==r&&(void 0!==r||!1===o[u])||(o[u||i]=rt(t))}var o=this,c,u,e,s,f,l=function(t,i){return n.forEach(t,function(n,t){return h(n,t,i)})};return n.isPlainObject(t)||t instanceof this.constructor?l(t,i):n.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?l((f={},(c=t)&&c.split("\n").forEach(function(n){s=n.indexOf(":");u=n.substring(0,s).trim().toLowerCase();e=n.substring(s+1).trim();!u||f[u]&&ou[u]||("set-cookie"===u?f[u]?f[u].push(e):f[u]=[e]:f[u]=f[u]?f[u]+", "+e:e)}),f),i):null!=t&&h(i,t,r),this}},{key:"get",value:function(t,i){var u,r;if((t=y(t))&&(u=n.findKey(this,t),u)){if(r=this[u],!i)return r;if(!0===i)return function(n){for(var t,i=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(n);)i[t[1]]=t[2];return i}(r);if(n.isFunction(i))return i.call(this,r,u);if(n.isRegExp(i))return i.exec(r);throw new TypeError("parser must be boolean|regexp|function");}}},{key:"has",value:function(t,i){if(t=y(t)){var r=n.findKey(this,t);return!(!r||void 0===this[r]||i&&!dt(0,this[r],r,i))}return!1}},{key:"delete",value:function(t,i){function f(t){if(t=y(t)){var f=n.findKey(r,t);f&&(!i||dt(0,r[f],f,i))&&(delete r[f],u=!0)}}var r=this,u=!1;return n.isArray(t)?t.forEach(f):f(t),u}},{key:"clear",value:function(n){for(var t,i=Object.keys(this),r=i.length,u=!1;r--;)t=i[r],n&&!dt(0,this[t],t,n,!0)||(delete this[t],u=!0);return u}},{key:"normalize",value:function(t){var i=this,r={};return n.forEach(this,function(u,f){var o=n.findKey(r,f),e;if(o)return i[o]=rt(u),void delete i[f];e=t?function(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,function(n,t,i){return t.toUpperCase()+i})}(f):String(f).trim();e!==f&&delete i[f];i[e]=rt(u);r[e]=!0}),this}},{key:"concat",value:function(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=this.constructor).concat.apply(t,[this].concat(r))}},{key:"toJSON",value:function(t){var i=Object.create(null);return n.forEach(this,function(r,u){null!=r&&!1!==r&&(i[u]=t&&n.isArray(r)?r.join(", "):r)}),i}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map(function(n){var t=ei(n,2);return t[0]+": "+t[1]}).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(n){return n instanceof this?n:new this(n)}},{key:"concat",value:function(n){for(var r=new this(n),i=arguments.length,u=new Array(i>1?i-1:0),t=1;t<i;t++)u[t-1]=arguments[t];return u.forEach(function(n){return r.set(n)}),r}},{key:"accessor",value:function(t){function r(t){var r=y(t);i[r]||(!function(t,i){var r=n.toCamelCase(" "+i);["get","set","has"].forEach(function(n){Object.defineProperty(t,n+r,{value:function(t,r,u){return this[n].call(this,i,t,r,u)},configurable:!0})})}(u,t),i[r]=!0)}var i=(this[er]=this[er]={accessors:{}}).accessors,u=this.prototype;return n.isArray(t)?t.forEach(r):r(t),this}}]),t}();p.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);n.freezeMethods(p.prototype);n.freezeMethods(p);o=p;n.inherits(w,t,{__CANCEL__:!0});sr=e.isStandardBrowserEnv?{write:function(t,i,r,u,f,e){var o=[];o.push(t+"="+encodeURIComponent(i));n.isNumber(r)&&o.push("expires="+new Date(r).toGMTString());n.isString(u)&&o.push("path="+u);n.isString(f)&&o.push("domain="+f);!0===e&&o.push("secure");document.cookie=o.join("; ")},read:function(n){var t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};cr=e.isStandardBrowserEnv?function(){function r(n){var i=n;return u&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}var i,u=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");return i=r(window.location.href),function(t){var u=n.isString(t)?r(t):t;return u.protocol===i.protocol&&u.host===i.host}}():function(){return!0};ut={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(i){return new Promise(function(r,u){function p(){i.cancelToken&&i.cancelToken.unsubscribe(s);i.signal&&i.signal.removeEventListener("abort",s)}function d(){if(f){var n=o.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());!function(n,i,r){var u=r.config.validateStatus;r.status&&u&&!u(r.status)?i(new t("Request failed with status code "+r.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):n(r)}(function(n){r(n);p()},function(n){u(n);p()},{data:c&&"text"!==c&&"json"!==c?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:i,request:f});f=null}}var s,v=i.data,h=o.from(i.headers).normalize(),c=i.responseType,f,b,k,l,y,g,a;n.isFormData(v)&&(e.isStandardBrowserEnv||e.isStandardBrowserWebWorkerEnv?h.setContentType(!1):h.setContentType("multipart/form-data;",!1));f=new XMLHttpRequest;i.auth&&(b=i.auth.username||"",k=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"",h.set("Authorization","Basic "+btoa(b+":"+k)));l=hr(i.baseURL,i.url);(f.open(i.method.toUpperCase(),tr(l,i.params,i.paramsSerializer),!0),f.timeout=i.timeout,"onloadend"in f?f.onloadend=d:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(d)},f.onabort=function(){f&&(u(new t("Request aborted",t.ECONNABORTED,i,f)),f=null)},f.onerror=function(){u(new t("Network Error",t.ERR_NETWORK,i,f));f=null},f.ontimeout=function(){var n=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",r=i.transitional||rr;i.timeoutErrorMessage&&(n=i.timeoutErrorMessage);u(new t(n,r.clarifyTimeoutError?t.ETIMEDOUT:t.ECONNABORTED,i,f));f=null},e.isStandardBrowserEnv)&&(y=(i.withCredentials||cr(l))&&i.xsrfCookieName&&sr.read(i.xsrfCookieName),y&&h.set(i.xsrfHeaderName,y));void 0===v&&h.setContentType(null);"setRequestHeader"in f&&n.forEach(h.toJSON(),function(n,t){f.setRequestHeader(t,n)});n.isUndefined(i.withCredentials)||(f.withCredentials=!!i.withCredentials);c&&"json"!==c&&(f.responseType=i.responseType);"function"==typeof i.onDownloadProgress&&f.addEventListener("progress",lr(i.onDownloadProgress,!0));"function"==typeof i.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",lr(i.onUploadProgress));(i.cancelToken||i.signal)&&(s=function(n){f&&(u(!n||n.type?new w(null,i,f):n),f.abort(),f=null)},i.cancelToken&&i.cancelToken.subscribe(s),i.signal&&(i.signal.aborted?s():i.signal.addEventListener("abort",s)));a=(g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l))&&g[1]||"";a&&-1===e.protocols.indexOf(a)?u(new t("Unsupported protocol "+a+":",t.ERR_BAD_REQUEST,i)):f.send(v||null)})}};n.forEach(ut,function(n,t){if(n){try{Object.defineProperty(n,"name",{value:t})}catch(n){}Object.defineProperty(n,"adapterName",{value:t})}});ar=function(i){for(var r,u,e=(i=n.isArray(i)?i:[i]).length,f=0;f<e&&(r=i[f],!(u=n.isString(r)?ut[r.toLowerCase()]:r));f++);if(!u){if(!1===u)throw new t("Adapter ".concat(r," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(n.hasOwnProp(ut,r)?"Adapter '".concat(r,"' is not available in the build"):"Unknown adapter '".concat(r,"'"));}if(!n.isFunction(u))throw new TypeError("adapter is not a function");return u};ti=function(n){return n instanceof o?n.toJSON():n};yr="1.4.0";ft={};["object","boolean","number","function","string","symbol"].forEach(function(n,t){ft[n]=function(i){return r(i)===n||"a"+(t<1?"n ":" ")+n}});ii={};ft.transitional=function(n,i,r){function u(n,t){return"[Axios v1.4.0] Transitional option '"+n+"'"+t+(r?". "+r:"")}return function(r,f,e){if(!1===n)throw new t(u(f," has been removed"+(i?" in "+i:"")),t.ERR_DEPRECATED);return i&&!ii[f]&&(ii[f]=!0,console.warn(u(f," has been deprecated since v"+i+" and will be removed in the near future"))),!n||n(r,f,e)}};var ri={assertOptions:function(n,i,u){var e,o,f,s,h,c;if("object"!==r(n))throw new t("options must be an object",t.ERR_BAD_OPTION_VALUE);for(e=Object.keys(n),o=e.length;o-->0;)if(f=e[o],s=i[f],s){if(h=n[f],c=void 0===h||s(h,f,n),!0!==c)throw new t("option "+f+" must be "+c,t.ERR_BAD_OPTION_VALUE);}else if(!0!==u)throw new t("Unknown option "+f,t.ERR_BAD_OPTION);},validators:ft},s=ri.validators,et=function(){function t(n){b(this,t);this.defaults=n;this.interceptors={request:new ir,response:new ir}}return k(t,[{key:"request",value:function(t,i){var e,y,u,h,l,r,f,p,d,g;"string"==typeof t?(i=i||{}).url=t:i=t||{};var b,w=i=c(this.defaults,i),k=w.transitional,v=w.paramsSerializer,a=w.headers;if(void 0!==k&&ri.assertOptions(k,{silentJSONParsing:s.transitional(s.boolean),forcedJSONParsing:s.transitional(s.boolean),clarifyTimeoutError:s.transitional(s.boolean)},!1),null!=v&&(n.isFunction(v)?i.paramsSerializer={serialize:v}:ri.assertOptions(v,{encode:s.function,serialize:s.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase(),(b=a&&n.merge(a.common,a[i.method]))&&n.forEach(["delete","get","head","post","put","patch","common"],function(n){delete a[n]}),i.headers=o.concat(b,a),e=[],y=!0,this.interceptors.request.forEach(function(n){"function"==typeof n.runWhen&&!1===n.runWhen(i)||(y=y&&n.synchronous,e.unshift(n.fulfilled,n.rejected))}),h=[],this.interceptors.response.forEach(function(n){h.push(n.fulfilled,n.rejected)}),r=0,!y){for(f=[vr.bind(this),void 0],f.unshift.apply(f,e),f.push.apply(f,h),l=f.length,u=Promise.resolve(i);r<l;)u=u.then(f[r++],f[r++]);return u}for(l=e.length,p=i,r=0;r<l;){d=e[r++];g=e[r++];try{p=d(p)}catch(t){g.call(this,t);break}}try{u=vr.call(this,p)}catch(t){return Promise.reject(t)}for(r=0,l=h.length;r<l;)u=u.then(h[r++],h[r++]);return u}},{key:"getUri",value:function(n){return tr(hr((n=c(this.defaults,n)).baseURL,n.url),n.params,n.paramsSerializer)}}]),t}();n.forEach(["delete","get","head","options"],function(n){et.prototype[n]=function(t,i){return this.request(c(i||{},{method:n,url:t,data:(i||{}).data}))}});n.forEach(["post","put","patch"],function(n){function t(t){return function(i,r,u){return this.request(c(u||{},{method:n,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}et.prototype[n]=t();et.prototype[n+"Form"]=t(!0)});var ot=et,su=function(){function n(t){var r,i;if(b(this,n),"function"!=typeof t)throw new TypeError("executor must be a function.");this.promise=new Promise(function(n){r=n});i=this;this.promise.then(function(n){if(i._listeners){for(var t=i._listeners.length;t-->0;)i._listeners[t](n);i._listeners=null}});this.promise.then=function(n){var t,r=new Promise(function(n){i.subscribe(n);t=n}).then(n);return r.cancel=function(){i.unsubscribe(t)},r};t(function(n,t,u){i.reason||(i.reason=new w(n,t,u),r(i.reason))})}return k(n,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason;}},{key:"subscribe",value:function(n){this.reason?n(this.reason):this._listeners?this._listeners.push(n):this._listeners=[n]}},{key:"unsubscribe",value:function(n){if(this._listeners){var t=this._listeners.indexOf(n);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new n(function(n){t=n}),cancel:t}}}]),n}(),ui={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};return Object.entries(ui).forEach(function(n){var t=ei(n,2),i=t[0],r=t[1];ui[r]=i}),pr=ui,i=function r(t){var u=new ot(t),i=si(ot.prototype.request,u);return n.extend(i,ot.prototype,u,{allOwnKeys:!0}),n.extend(i,u,null,{allOwnKeys:!0}),i.create=function(n){return r(c(t,n))},i}(kt),i.Axios=ot,i.CanceledError=w,i.CancelToken=su,i.isCancel=or,i.VERSION=yr,i.toFormData=it,i.AxiosError=t,i.Cancel=i.CanceledError,i.all=function(n){return Promise.all(n)},i.spread=function(n){return function(t){return n.apply(null,t)}},i.isAxiosError=function(t){return n.isObject(t)&&!0===t.isAxiosError},i.mergeConfig=c,i.AxiosHeaders=o,i.formToJSON=function(t){return ur(n.isHTMLForm(t)?new FormData(t):t)},i.HttpStatusCode=pr,i.default=i,i}),{requestAction:function(n,t,i){return i.url=n.getActionUrl(),i.method="post",i.params=i.params||{},i.params=Object.assign(i.params,n.getOpt("serverparam")),i.params.action=t,this.request(n,i)},request:function(t,i){var r,u;if(i.headers=i.headers||{},r=t.getOpt("serverHeaders"),r)for(u in r)i.headers[u]=r[u];return n(i)}}}();UE.image=function(){var n=null;return!function(t,i){n=i()}(this,function(){"use strict";function st(n,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if("default"!==i&&!(i in n)){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(n)}function p(n,t){return new Promise(function(i,r){let u;return ht(n).then(function(n){try{return u=n,i(new Blob([t.slice(0,2),u,t.slice(2)],{type:"image/jpeg"}))}catch(n){return r(n)}},r)})}function v(n,t,i=Date.now()){return new Promise(r=>{const e=n.split(","),h=e[0].match(/:(.*?);/)[1],o=globalThis.atob(e[1]);let u=o.length;const s=new Uint8Array(u);for(;u--;)s[u]=o.charCodeAt(u);const f=new Blob([s],{type:h});f.name=t;f.lastModified=i;r(f)})}function nt(n){return new Promise((t,i)=>{const r=new g;r.onload=()=>t(r.result);r.onerror=n=>i(n);r.readAsDataURL(n)})}function tt(n){return new Promise((t,i)=>{const r=new Image;r.onload=()=>t(r);r.onerror=n=>i(n);r.src=n})}function u(){if(void 0!==u.cachedResult)return u.cachedResult;let n=t.ETC;const{userAgent:i}=navigator;return/Chrom(e|ium)/i.test(i)?n=t.CHROME:/iP(ad|od|hone)/i.test(i)&&/WebKit/i.test(i)?n=t.IOS:/Safari/i.test(i)?n=t.DESKTOP_SAFARI:/Firefox/i.test(i)?n=t.FIREFOX:(/MSIE/i.test(i)||!0==!!document.documentMode)&&(n=t.IE),u.cachedResult=n,u.cachedResult}function it(n,t){const s=u(),f=k[s];let i=n,r=t,e=i*r;const o=i>r?r/i:i/r;for(;e>f*f;){const n=(f+i)/2,t=(f+r)/2;n<t?(r=t,i=t*o):(r=n*o,i=n);e=i*r}return{width:i,height:r}}function s(n,t){let i,r;try{if(i=new OffscreenCanvas(n,t),r=i.getContext("2d"),null===r)throw new Error("getContext of OffscreenCanvas returns null");}catch(n){i=document.createElement("canvas");r=i.getContext("2d")}return i.width=n,i.height=t,[i,r]}function rt(n,t){const{width:u,height:f}=it(n.width,n.height),[i,r]=s(u,f);return t&&/jpe?g/.test(t)&&(r.fillStyle="white",r.fillRect(0,0,i.width,i.height)),r.drawImage(n,0,0,i.width,i.height),i}function h(){return void 0!==h.cachedResult||(h.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),h.cachedResult}function c(n,i={}){return new Promise(function(r,f){let e,s;var c=function(){try{return s=rt(e,i.fileType||n.type),r([e,s])}catch(n){return f(n)}},o=function(){try{0;var t=function(n){try{throw n;}catch(n){return f(n)}};try{let i;return nt(n).then(function(n){try{return i=n,tt(i).then(function(n){try{return e=n,function(){try{return c()}catch(n){return f(n)}}()}catch(n){return t(n)}},t)}catch(n){return t(n)}},t)}catch(n){t(n)}}catch(n){return f(n)}};try{if(h()||[t.DESKTOP_SAFARI,t.MOBILE_SAFARI].includes(u()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(n){try{return e=n,c()}catch(n){return o()}},o)}catch(n){o()}})}function l(n,t,r,u,f=1){return new Promise(function(e,o){function h(){return e(s)}let s;if("image/png"===t){let e,o,c;return e=n.getContext("2d"),{data:o}=e.getImageData(0,0,n.width,n.height),c=i.encode([o.buffer],n.width,n.height,4096*f),s=new Blob([c],{type:t}),s.name=r,s.lastModified=u,h.call(this)}{if("image/bmp"===t)return new Promise(t=>b.toBlob(n,t)).then(function(n){try{return s=n,s.name=r,s.lastModified=u,i.call(this)}catch(n){return o(n)}}.bind(this),o);{if("function"==typeof OffscreenCanvas&&n instanceof OffscreenCanvas)return n.convertToBlob({type:t,quality:f}).then(function(n){try{return s=n,s.name=r,s.lastModified=u,e.call(this)}catch(n){return o(n)}}.bind(this),o);{let i;return i=n.toDataURL(t,f),v(i,r,u).then(function(n){try{return s=n,e.call(this)}catch(n){return o(n)}}.bind(this),o)}function e(){return i.call(this)}}function i(){return h.call(this)}}})}function r(n){n.width=0;n.height=0}function f(){return new Promise(function(n,t){let s,i,u,o,e;return void 0!==f.cachedResult?n(f.cachedResult):(s="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",v("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return i=s,c(i).then(function(s){try{return u=s[1],l(u,i.type,i.name,i.lastModified).then(function(i){try{return o=i,r(u),c(o).then(function(i){try{return e=i[0],f.cachedResult=1===e.width&&2===e.height,n(f.cachedResult)}catch(n){return t(n)}},t)}catch(n){return t(n)}},t)}catch(n){return t(n)}},t)}catch(n){return t(n)}},t))})}function ut(n){return new Promise((t,i)=>{const r=new g;r.onload=n=>{const r=new DataView(n.target.result);if(65496!=r.getUint16(0,!1))return t(-2);const u=r.byteLength;let i=2;for(;i<u;){if(r.getUint16(i+2,!1)<=8)return t(-1);const n=r.getUint16(i,!1);if(i+=2,65505==n){if(1165519206!=r.getUint32(i+=2,!1))return t(-1);const n=18761==r.getUint16(i+=6,!1);i+=r.getUint32(i+4,n);const u=r.getUint16(i,n);i+=2;for(let f=0;f<u;f++)if(274==r.getUint16(i+12*f,n))return t(r.getUint16(i+12*f+8,n))}else{if(65280!=(65280&n))break;i+=r.getUint16(i,!1)}}return t(-1)};r.onerror=n=>i(n);r.readAsArrayBuffer(n)})}function ft(n,t){const{width:f}=n,{height:e}=n,{maxWidthOrHeight:u}=t;let o,i=n;return isFinite(u)&&(f>u||e>u)&&([i,o]=s(f,e),f>e?(i.width=u,i.height=e/f*u):(i.width=f/e*u,i.height=u),o.drawImage(n,0,0,i.width,i.height),r(n)),i}function et(n,t){const{width:i}=n,{height:u}=n,[e,f]=s(i,u);switch(t>4&&t<9?(e.width=u,e.height=i):(e.width=i,e.height=u),t){case 2:f.transform(-1,0,0,1,i,0);break;case 3:f.transform(-1,0,0,-1,i,u);break;case 4:f.transform(1,0,0,-1,0,u);break;case 5:f.transform(0,1,1,0,0,0);break;case 6:f.transform(0,1,-1,0,u,0);break;case 7:f.transform(0,-1,-1,0,u,i);break;case 8:f.transform(0,-1,1,0,0,i)}return f.drawImage(n,0,0,i,u),r(n),e}function ot(n,t,i=0){return new Promise(function(u,e){function a(n=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;h+=n;t.onProgress(Math.min(h,100))}function st(n){if(t.signal&&t.signal.aborted)throw t.signal.reason;h=Math.min(Math.max(n,h),100);t.onProgress(h)}let h,ht,p,tt,w,ct,b,k,d,v,it,lt,at,g,y,rt,nt,vt,o,ot;return h=i,ht=t.maxIteration||10,p=1048576*t.maxSizeMB,a(),c(n,t).then(function(i){try{return[,tt]=i,a(),w=ft(tt,t),a(),new Promise(function(i,r){function f(){return i(u)}var u;return(u=t.exifOrientation)?f.call(this):ut(n).then(function(n){try{return u=n,f.call(this)}catch(n){return r(n)}}.bind(this),r)}).then(function(i){try{return ct=i,a(),f().then(function(i){try{return b=i?w:et(w,ct),a(),k=t.initialQuality||1,d=t.fileType||n.type,l(b,d,n.name,n.lastModified,k).then(function(i){try{{if(v=i,a(),it=v.size>p,lt=v.size>n.size,!it&&!lt)return st(100),u(v);var f;function h(){if(ht--&&(y>p||y>at)){let t,i;return t=ot?.95*o.width:o.width,i=ot?.95*o.height:o.height,[nt,vt]=s(t,i),vt.drawImage(o,0,0,t,i),k*="image/png"===d?.85:.95,l(nt,d,n.name,n.lastModified,k).then(function(n){try{return rt=n,r(o),o=nt,y=rt.size,st(Math.min(99,Math.floor((g-y)/(g-p)*100))),h}catch(n){return e(n)}},e)}return[1]}return at=n.size,g=v.size,y=g,o=b,ot=!t.alwaysKeepResolution&&it,(f=function(n){for(;n;){if(n.then)return void n.then(f,e);try{if(n.pop){if(n.length)return n.pop()?c.call(this):n;n=h}else n=n.call(this)}catch(n){return e(n)}}}.bind(this))(h);function c(){return r(o),r(nt),r(w),r(b),r(tt),st(100),u(rt)}}}catch(h){return e(h)}}.bind(this),e)}catch(n){return e(n)}}.bind(this),e)}catch(n){return e(n)}}.bind(this),e)}catch(n){return e(n)}}.bind(this),e)})}function at(n,t){return new Promise((i,r)=>{y||(y=function(n){const t=[];return"function"==typeof n?t.push(`(${n})()`):t.push(n),URL.createObjectURL(new Blob(t))}(lt));const u=new Worker(y);u.addEventListener("message",function(n){if(t.signal&&t.signal.aborted)u.terminate();else if(void 0===n.data.progress){if(n.data.error)return r(new Error(n.data.error)),void u.terminate();i(n.data.file);u.terminate()}else t.onProgress(n.data.progress)});u.addEventListener("error",r);t.signal&&t.signal.addEventListener("abort",()=>{r(t.signal.reason),u.terminate()});u.postMessage({file:n,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}function n(n,t){return new Promise(function(i,r){function a(){try{f.name=n.name;f.lastModified=n.lastModified}catch(n){}try{u.preserveExif&&"image/jpeg"===n.type&&(!u.fileType||u.fileType&&u.fileType===n.type)&&(f=p(n,f))}catch(n){}return i(f)}let u,f,e,o,h,c;if(u={...t},e=0,{onProgress:o}=u,u.maxSizeMB=u.maxSizeMB||Number.POSITIVE_INFINITY,h="boolean"!=typeof u.useWebWorker||u.useWebWorker,delete u.useWebWorker,u.onProgress=n=>{e=n,"function"==typeof o&&o(e)},!(1||n instanceof Blob||n instanceof ct))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!h||"function"!=typeof Worker||c)return ot(n,u).then(function(n){try{return f=n,a.call(this)}catch(n){return r(n)}}.bind(this),r);var l=function(){try{return a.call(this)}catch(n){return r(n)}}.bind(this),s=function(){try{return ot(n,u).then(function(n){try{return f=n,l()}catch(n){return r(n)}},r)}catch(n){return r(n)}};try{return u.libURL=u.libURL||"https://cdn.bootcdn.net/ajax/libs/browser-image-compression/2.0.2/browser-image-compression.js",at(n,u).then(function(n){try{return f=n,l()}catch(n){return s()}},s)}catch(n){s()}})}var e,w,t,k;const ht=n=>new Promise((t,i)=>{const r=new FileReader;r.addEventListener("load",({target:{result:n}})=>{const r=new DataView(n);let u=0;if(65496!==r.getUint16(u))return i("not a valid JPEG");for(u+=2;;){const f=r.getUint16(u);if(65498===f)break;const e=r.getUint16(u+2);if(65505===f&&1165519206===r.getUint32(u+4)){const o=u+10;let f;switch(r.getUint16(o)){case 18761:f=!0;break;case 19789:f=!1;break;default:return i("TIFF header contains invalid endian")}if(42!==r.getUint16(o+2,f))return i("TIFF header contains invalid version");const s=r.getUint32(o+4,f),h=o+s+2+12*r.getUint16(o+s,f);for(let n=o+s+2;n<h;n+=12)if(274==r.getUint16(n,f)){if(3!==r.getUint16(n+2,f))return i("Orientation data type is invalid");if(1!==r.getUint32(n+4,f))return i("Orientation data count is invalid");r.setUint16(n+8,1,f);break}return t(n.slice(u,u+2+e))}u+=2+e}return t(new Blob)});r.readAsArrayBuffer(n)});e={};!function(n){var i,r,t={};n.exports=t;t.parse=function(n,i){for(var l,s,a,h,v,e=t.bin.readUshort,f=t.bin.readUint,r=0,c={},u=new Uint8Array(n),o=u.length-4;101010256!=f(u,o);)o--;for(r=o,r+=4,l=e(u,r+=4),e(u,r+=2),s=f(u,r+=2),a=f(u,r+=4),r+=4,r=a,h=0;h<l;h++){f(u,r);r+=4;r+=4;r+=4;f(u,r+=4);s=f(u,r+=4);var y=f(u,r+=4),p=e(u,r+=4),w=e(u,r+2),b=e(u,r+4);r+=6;v=f(u,r+=8);r+=4;r+=p+w+b;t._readLocal(u,v,c,s,y,i)}return c};t._readLocal=function(n,i,r,u,f,e){var o=t.bin.readUshort,c=t.bin.readUint,s,l,y,h,a,v;if(c(n,i),o(n,i+=4),o(n,i+=2),s=o(n,i+=2),c(n,i+=2),c(n,i+=4),i+=4,l=o(n,i+=8),y=o(n,i+=2),i+=2,h=t.bin.readUTF8(n,i,l),i+=l,i+=y,e)r[h]={size:f,csize:u};else if(a=new Uint8Array(n.buffer,i),0==s)r[h]=new Uint8Array(a.buffer.slice(i,i+u));else{if(8!=s)throw"unknown compression method: "+s;v=new Uint8Array(f);t.inflateRaw(a,v);r[h]=v}};t.inflateRaw=function(n,i){return t.F.inflate(n,i)};t.inflate=function(n,i){return n[0],n[1],t.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),i)};t.deflate=function(n,i){var r,u,f;return null==i&&(i={level:6}),r=0,u=new Uint8Array(50+Math.floor(1.1*n.length)),u[r]=120,u[r+1]=156,r+=2,r=t.F.deflateRaw(n,u,r,i.level),f=t.adler(n,0,n.length),u[r+0]=f>>>24&255,u[r+1]=f>>>16&255,u[r+2]=f>>>8&255,u[r+3]=f>>>0&255,new Uint8Array(u.buffer,0,r+4)};t.deflateRaw=function(n,i){null==i&&(i={level:6});var r=new Uint8Array(50+Math.floor(1.1*n.length)),u=t.F.deflateRaw(n,r,u,i.level);return new Uint8Array(r.buffer,0,u)};t.encode=function(n,i){var s,h,v,u,w;null==i&&(i=!1);var c=0,l=t.bin.writeUint,y=t.bin.writeUshort,e={};for(u in n){var p=!t._noNeed(u)&&!i,o=n[u],b=t.crc.crc(o,0,o.length);e[u]={cpr:p,usize:o.length,crc:b,file:p?t.deflateRaw(o):o}}for(u in e)c+=e[u].file.length+30+46+2*t.bin.sizeUTF8(u);c+=22;var f=new Uint8Array(c),r=0,a=[];for(u in e)s=e[u],a.push(r),r=t._writeHeader(f,r,u,s,0);h=0;v=r;for(u in e)s=e[u],a.push(r),r=t._writeHeader(f,r,u,s,1,a[h++]);return w=r-v,l(f,r,101010256),r+=4,y(f,r+=4,h),y(f,r+=2,h),l(f,r+=2,w),l(f,r+=4,v),r+=4,r+=2,f.buffer};t._noNeed=function(n){var t=n.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)};t._writeHeader=function(n,i,r,u,f,e){var o=t.bin.writeUint,s=t.bin.writeUshort,h=u.file;return o(n,i,0==f?67324752:33639248),i+=4,1==f&&(i+=2),s(n,i,20),s(n,i+=2,0),s(n,i+=2,u.cpr?8:0),o(n,i+=2,0),o(n,i+=4,u.crc),o(n,i+=4,h.length),o(n,i+=4,u.usize),s(n,i+=4,t.bin.sizeUTF8(r)),s(n,i+=2,0),i+=2,1==f&&(i+=2,i+=2,o(n,i+=6,e),i+=4),i+=t.bin.writeUTF8(n,i,r),0==f&&(n.set(h,i),i+=h.length),i};t.crc={table:function(){for(var n,r,i=new Uint32Array(256),t=0;t<256;t++){for(n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;i[t]=n}return i}(),update:function(n,i,r,u){for(var f=0;f<u;f++)n=t.crc.table[255&(n^i[r+f])]^n>>>8;return n},crc:function(n,i,r){return 4294967295^t.crc.update(4294967295,n,i,r)}};t.adler=function(n,t,i){for(var o,u=1,f=0,r=t,e=t+i;r<e;){for(o=Math.min(r+5552,e);r<o;)f+=u+=n[r++];u%=65521;f%=65521}return f<<16|u};t.bin={readUshort:function(n,t){return n[t]|n[t+1]<<8},writeUshort:function(n,t,i){n[t]=255&i;n[t+1]=i>>8&255},readUint:function(n,t){return 16777216*n[t+3]+(n[t+2]<<16|n[t+1]<<8|n[t])},writeUint:function(n,t,i){n[t]=255&i;n[t+1]=i>>8&255;n[t+2]=i>>16&255;n[t+3]=i>>24&255},readASCII:function(n,t,i){for(var u="",r=0;r<i;r++)u+=String.fromCharCode(n[t+r]);return u},writeASCII:function(n,t,i){for(var r=0;r<i.length;r++)n[t+r]=i.charCodeAt(r)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,i,r){for(var f,e="",u=0;u<r;u++)e+="%"+t.bin.pad(n[i+u].toString(16));try{f=decodeURIComponent(e)}catch(f){return t.bin.readASCII(n,i,r)}return f},writeUTF8:function(n,t,i){for(var u,e=i.length,r=0,f=0;f<e;f++)if(u=i.charCodeAt(f),0==(4294967168&u))n[t+r]=u,r++;else if(0==(4294965248&u))n[t+r]=192|u>>6,n[t+r+1]=128|u>>0&63,r+=2;else if(0==(4294901760&u))n[t+r]=224|u>>12,n[t+r+1]=128|u>>6&63,n[t+r+2]=128|u>>0&63,r+=3;else{if(0!=(4292870144&u))throw"e";n[t+r]=240|u>>18;n[t+r+1]=128|u>>12&63;n[t+r+2]=128|u>>6&63;n[t+r+3]=128|u>>0&63;r+=4}return r},sizeUTF8:function(n){for(var i,u=n.length,t=0,r=0;r<u;r++)if(i=n.charCodeAt(r),0==(4294967168&i))t++;else if(0==(4294965248&i))t+=2;else if(0==(4294901760&i))t+=3;else{if(0!=(4292870144&i))throw"e";t+=4}return t}};t.F={};t.F.deflateRaw=function(n,i,r,u){var it=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],h=t.F.U,rt=t.F._goodIndex,tt,a,v,k,d,g;t.F._hash;var et=t.F._putsE,f=0,o=r<<3,c=0,s=n.length;if(0==u){for(;f<s;)et(i,o,f+(v=Math.min(65535,s-f))==s?1:0),o=t.F._copyExact(n,f,v,i,o+8),f+=v;return o>>>3}var y=h.lits,nt=h.strt,ut=h.prev,e=0,p=0,l=0,w=0,ft=0,b=0;for(s>2&&(nt[b=t.F._hash(n,0)]=0),f=0;f<s;f++)(ft=b,f+1<s-2)&&(b=t.F._hash(n,f+1),tt=f+1&32767,ut[tt]=nt[b],nt[b]=tt),c<=f&&((e>14e3||p>26697)&&s-f>100&&(c<f&&(y[e]=f-c,e+=2,c=f),o=t.F._writeBlock(f==s-1||c==s?1:0,y,e,w,n,l,f-l,i,o),e=p=w=0,l=f),a=0,f<s-2&&(a=t.F._bestMatch(n,f,ut,ft,Math.min(it[2],s-f),it[3])),v=a>>>16,k=65535&a,0!=a?(k=65535&a,d=rt(v=a>>>16,h.of0),h.lhst[257+d]++,g=rt(k,h.df0),h.dhst[g]++,w+=h.exb[d]+h.dxb[g],y[e]=v<<23|f-c,y[e+1]=k<<16|d<<8|g,e+=2,c=f+v):h.lhst[n[f]]++,p++);for(l==f&&0!=n.length||(c<f&&(y[e]=f-c,e+=2,c=f),o=t.F._writeBlock(1,y,e,w,n,l,f-l,i,o),e=0,p=0,e=p=w=0,l=f);0!=(7&o);)o++;return o>>>3};t.F._bestMatch=function(n,i,r,u,f,e){var s=32767&i,h=r[s],o=s-h+32768&32767,l,y,a,v,p;if(h==s||u!=t.F._hash(n,i-o))return 0;for(var c=0,w=0,b=Math.min(32767,i);o<=b&&0!=--e&&h!=s;){if((0==c||n[i+c]==n[i+c-o])&&(l=t.F._howLong(n,i,o),l>c)){if(w=o,(c=l)>=f)break;for(o+2<l&&(l=o+2),y=0,a=0;a<l-2;a++)v=i-o+a+32768&32767,p=v-r[v]+32768&32767,p>y&&(y=p,h=v)}o+=(s=h)-(h=r[s])+32768&32767}return c<<16|w};t.F._howLong=function(n,t,i){if(n[t]!=n[t-i]||n[t+1]!=n[t+1-i]||n[t+2]!=n[t+2-i])return 0;var r=t,u=Math.min(n.length,t+258);for(t+=3;t<u&&n[t]==n[t-i];)t++;return t-r};t.F._hash=function(n,t){return(n[t]<<8|n[t+1])+(n[t+2]<<4)&65535};t.saved=0;t.F._writeBlock=function(n,i,r,u,f,e,o,s,h){var a,g,nt,tt,ht,ct,v,lt,at,c=t.F.U,it=t.F._putsF,y=t.F._putsE,l,p,w,ut,b,k,d;c.lhst[256]++;g=(a=t.F.getTrees())[0];nt=a[1];tt=a[2];ht=a[3];ct=a[4];v=a[5];lt=a[6];at=a[7];var vt=32+(0==(h+3&7)?0:8-(h+3&7))+(o<<3),yt=u+t.F.contSize(c.fltree,c.lhst)+t.F.contSize(c.fdtree,c.dhst),rt=u+t.F.contSize(c.ltree,c.lhst)+t.F.contSize(c.dtree,c.dhst);for(rt+=14+3*v+t.F.contSize(c.itree,c.ihst)+(2*c.ihst[16]+3*c.ihst[17]+7*c.ihst[18]),l=0;l<286;l++)c.lhst[l]=0;for(l=0;l<30;l++)c.dhst[l]=0;for(l=0;l<19;l++)c.ihst[l]=0;if(p=vt<yt&&vt<rt?0:yt<rt?1:2,it(s,h,n),it(s,h+1,p),h+=3,0==p){for(;0!=(7&h);)h++;h=t.F._copyExact(f,e,o,s,h)}else{if(1==p&&(w=c.fltree,ut=c.fdtree),2==p){for(t.F.makeCodes(c.ltree,g),t.F.revCodes(c.ltree,g),t.F.makeCodes(c.dtree,nt),t.F.revCodes(c.dtree,nt),t.F.makeCodes(c.itree,tt),t.F.revCodes(c.itree,tt),w=c.ltree,ut=c.dtree,y(s,h,ht-257),y(s,h+=5,ct-1),y(s,h+=5,v-4),h+=4,b=0;b<v;b++)y(s,h+3*b,c.itree[1+(c.ordr[b]<<1)]);h+=3*v;h=t.F._codeTiny(lt,c.itree,s,h);h=t.F._codeTiny(at,c.itree,s,h)}for(k=e,d=0;d<r;d+=2){for(var pt=i[d],ft=pt>>>23,wt=k+(8388607&pt);k<wt;)h=t.F._writeLit(f[k++],w,s,h);if(0!=ft){var et=i[d+1],bt=et>>16,ot=et>>8&255,st=255&et;y(s,h=t.F._writeLit(257+ot,w,s,h),ft-c.of0[ot]);h+=c.exb[ot];it(s,h=t.F._writeLit(st,ut,s,h),bt-c.df0[st]);h+=c.dxb[st];k+=ft}}h=t.F._writeLit(256,w,s,h)}return h};t.F._copyExact=function(n,t,i,r,u){var f=u>>>3;return r[f]=i,r[f+1]=i>>>8,r[f+2]=255-r[f],r[f+3]=255-r[f+1],f+=4,r.set(new Uint8Array(n.buffer,t,i),f),u+(i+4<<3)};t.F.getTrees=function(){for(var e,r,n=t.F.U,o=t.F._hufTree(n.lhst,n.ltree,15),s=t.F._hufTree(n.dhst,n.dtree,15),u=[],h=t.F._lenCodes(n.ltree,u),f=[],c=t.F._lenCodes(n.dtree,f),i=0;i<u.length;i+=2)n.ihst[u[i]]++;for(i=0;i<f.length;i+=2)n.ihst[f[i]]++;for(e=t.F._hufTree(n.ihst,n.itree,7),r=19;r>4&&0==n.itree[1+(n.ordr[r-1]<<1)];)r--;return[o,s,e,h,c,r,u,f]};t.F.getSecond=function(n){for(var i=[],t=0;t<n.length;t+=2)i.push(n[t+1]);return i};t.F.nonZero=function(n){for(var i="",t=0;t<n.length;t+=2)0!=n[t+1]&&(i+=(t>>1)+",");return i};t.F.contSize=function(n,t){for(var r=0,i=0;i<t.length;i++)r+=t[i]*n[1+(i<<1)];return r};t.F._codeTiny=function(n,i,r,u){for(var e,s,o,f=0;f<n.length;f+=2)e=n[f],s=n[f+1],u=t.F._writeLit(e,i,r,u),o=16==e?2:17==e?3:7,e>15&&(t.F._putsE(r,u,s,o),u+=o);return u};t.F._lenCodes=function(n,t){for(var i,u,e,r=n.length;2!=r&&0==n[r-1];)r-=2;for(i=0;i<r;i+=2){var f=n[i+1],o=i+3<r?n[i+3]:-1,s=i+5<r?n[i+5]:-1,h=0==i?-1:n[i-1];if(0==f&&o==f&&s==f){for(u=i+5;u+2<r&&n[u+2]==f;)u+=2;(e=Math.min(u+1-i>>>1,138))<11?t.push(17,e-3):t.push(18,e-11);i+=2*e-2}else if(f==h&&o==f&&s==f){for(u=i+5;u+2<r&&n[u+2]==f;)u+=2;e=Math.min(u+1-i>>>1,6);t.push(16,e-3);i+=2*e-2}else t.push(f,0)}return r>>>1};t.F._hufTree=function(n,i,r){for(var u=[],p=n.length,w=i.length,f=0,e,o,y,v,f=0;f<w;f+=2)i[f]=0,i[f+1]=0;for(f=0;f<p;f++)0!=n[f]&&u.push({lit:f,f:n[f]});if(e=u.length,o=u.slice(0),0==e)return 0;if(1==e)return y=u[0].lit,o=0==y?1:0,i[1+(y<<1)]=1,i[1+(o<<1)]=1,1;u.sort(function(n,t){return n.f-t.f});var c=u[0],l=u[1],s=0,a=1,h=2;for(u[0]={lit:-1,f:c.f+l.f,l:c,r:l,d:0};a!=e-1;)c=s!=a&&(h==e||u[s].f<u[h].f)?u[s++]:u[h++],l=s!=a&&(h==e||u[s].f<u[h].f)?u[s++]:u[h++],u[a++]={lit:-1,f:c.f+l.f,l:c,r:l};for(v=t.F.setDepth(u[a-1],0),v>r&&(t.F.restrictDepth(o,r,v),v=r),f=0;f<e;f++)i[1+(o[f].lit<<1)]=o[f].d;return v};t.F.setDepth=function(n,i){return-1!=n.lit?(n.d=i,i):Math.max(t.F.setDepth(n.l,i+1),t.F.setDepth(n.r,i+1))};t.F.restrictDepth=function(n,t,i){var r=0,e=1<<i-t,u=0,f;for(n.sort(function(n,t){return t.d==n.d?n.f-t.f:t.d-n.d}),r=0;r<n.length&&n[r].d>t;r++)f=n[r].d,n[r].d=t,u+=e-(1<<i-f);for(u>>>=i-t;u>0;)(f=n[r].d)<t?(n[r].d++,u-=1<<t-f-1):r++;for(;r>=0;r--)n[r].d==t&&u<0&&(n[r].d--,u++);0!=u&&console.log("debt left")};t.F._goodIndex=function(n,t){var i=0;return t[16|i]<=n&&(i|=16),t[8|i]<=n&&(i|=8),t[4|i]<=n&&(i|=4),t[2|i]<=n&&(i|=2),t[1|i]<=n&&(i|=1),i};t.F._writeLit=function(n,i,r,u){return t.F._putsF(r,u,i[n<<1]),u+i[1+(n<<1)]};t.F.inflate=function(n,i){var rt=Uint8Array,e,h,k,d,g,lt,s,nt,tt,at,l,a;if(3==n[0]&&0==n[1])return i||new rt(0);var o=t.F,ut=o._bitsF,c=o._bitsE,wt=o._decodeTiny,ft=o.makeCodes,et=o.codes2map,yt=o._get17,u=o.U,v=null==i;v&&(i=new rt(n.length>>>2<<3));for(var y,p,pt=0,w=0,b=0,ot=0,st=0,ht=0,ct=0,f=0,r=0;0==pt;)if(pt=ut(n,r,1),w=ut(n,r+1,2),r+=3,0!=w){if(v&&(i=t.F._check(i,f+131072)),1==w&&(y=u.flmap,p=u.fdmap,ht=511,ct=31),2==w){for(b=c(n,r,5)+257,ot=c(n,r+5,5)+1,st=c(n,r+10,4)+4,r+=14,e=0;e<38;e+=2)u.itree[e]=0,u.itree[e+1]=0;for(h=1,e=0;e<st;e++)k=c(n,r+3*e,3),u.itree[1+(u.ordr[e]<<1)]=k,k>h&&(h=k);r+=3*st;ft(u.itree,h);et(u.itree,h,u.imap);y=u.lmap;p=u.dmap;r=wt(u.imap,(1<<h)-1,b+ot,n,r,u.ttree);d=o._copyOut(u.ttree,0,b,u.ltree);ht=(1<<d)-1;g=o._copyOut(u.ttree,b,ot,u.dtree);ct=(1<<g)-1;ft(u.ltree,d);et(u.ltree,d,y);ft(u.dtree,g);et(u.dtree,g,p)}for(;;)if(lt=y[yt(n,r)&ht],r+=15&lt,s=lt>>>4,s>>>8==0)i[f++]=s;else{if(256==s)break;nt=f+s-254;s>264&&(tt=u.ldef[s-257],nt=f+(tt>>>3)+c(n,r,7&tt),r+=7&tt);at=p[yt(n,r)&ct];r+=15&at;var bt=at>>>4,vt=u.ddef[bt],it=(vt>>>4)+ut(n,r,15&vt);for(r+=15&vt,v&&(i=t.F._check(i,f+131072));f<nt;)i[f]=i[f++-it],i[f]=i[f++-it],i[f]=i[f++-it],i[f]=i[f++-it];f=nt}}else 0!=(7&r)&&(r+=8-(7&r)),l=4+(r>>>3),a=n[l-4]|n[l-3]<<8,v&&(i=t.F._check(i,f+a)),i.set(new rt(n.buffer,n.byteOffset+l,a),f),r=l+a<<3,f+=a;return i.length==f?i:i.slice(0,f)};t.F._check=function(n,t){var r=n.length,i;return t<=r?n:(i=new Uint8Array(Math.max(r<<1,t)),i.set(n,0),i)};t.F._decodeTiny=function(n,i,r,u,f,e){for(var l,s,a,h,v,c=t.F._bitsE,y=t.F._get17,o=0;o<r;)if(l=n[y(u,f)&i],f+=15&l,s=l>>>4,s<=15)e[o]=s,o++;else for(a=0,h=0,16==s?(h=3+c(u,f,2),f+=2,a=e[o-1]):17==s?(h=3+c(u,f,3),f+=3):18==s&&(h=11+c(u,f,7),f+=7),v=o+h;o<v;)e[o]=a,o++;return f};t.F._copyOut=function(n,t,i,r){for(var f,e=0,u=0,o=r.length>>>1;u<i;)f=n[u+t],r[u<<1]=0,r[1+(u<<1)]=f,f>e&&(e=f),u++;for(;u<o;)r[u<<1]=0,r[1+(u<<1)]=0,u++;return e};t.F.makeCodes=function(n,i){for(var s,e,u,f,h,c=t.F.U,l=n.length,o=c.bl_count,r=0;r<=i;r++)o[r]=0;for(r=1;r<l;r+=2)o[n[r]]++;for(s=c.next_code,e=0,o[0]=0,u=1;u<=i;u++)e=e+o[u-1]<<1,s[u]=e;for(f=0;f<l;f+=2)0!=(h=n[f+1])&&(n[f]=s[h],s[h]++)};t.F.codes2map=function(n,i,r){for(var s=n.length,h=t.F.U.rev15,u=0;u<s;u+=2)if(0!=n[u+1])for(var c=u>>1,e=n[u+1],l=c<<4|e,o=i-e,f=n[u]<<o,a=f+(1<<o);f!=a;)r[h[f]>>>15-i]=l,f++};t.F.revCodes=function(n,i){for(var u,f=t.F.U.rev15,e=15-i,r=0;r<n.length;r+=2)u=n[r]<<i-n[r+1],n[r]=f[u]>>>e};t.F._putsE=function(n,t,i){i<<=7&t;var r=t>>>3;n[r]|=i;n[r+1]|=i>>>8};t.F._putsF=function(n,t,i){i<<=7&t;var r=t>>>3;n[r]|=i;n[r+1]|=i>>>8;n[r+2]|=i>>>16};t.F._bitsE=function(n,t,i){return(n[t>>>3]|n[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1};t.F._bitsF=function(n,t,i){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1};t.F._get17=function(n,t){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16)>>>(7&t)};t.F._get25=function(n,t){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16|n[3+(t>>>3)]<<24)>>>(7&t)};t.F.U=(i=Uint16Array,r=Uint32Array,{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new i(65536),prev:new i(32768)}),function(){function u(n,t,i){for(;0!=t--;)n.push(0,i)}for(var r,n=t.F.U,i=0;i<32768;i++)r=i,r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,n.rev15[i]=(r>>>16|r<<16)>>>17;for(i=0;i<32;i++)n.ldef[i]=n.of0[i]<<3|n.exb[i],n.ddef[i]=n.df0[i]<<4|n.dxb[i];u(n.fltree,144,8);u(n.fltree,112,9);u(n.fltree,24,7);u(n.fltree,8,8);t.F.makeCodes(n.fltree,9);t.F.codes2map(n.fltree,9,n.flmap);t.F.revCodes(n.fltree,9);u(n.fdtree,32,5);t.F.makeCodes(n.fdtree,5);t.F.codes2map(n.fdtree,5,n.fdmap);t.F.revCodes(n.fdtree,5);u(n.itree,19,0);u(n.ltree,286,0);u(n.dtree,30,0);u(n.ttree,320,0)}()}({get exports(){return e},set exports(n){e=n}});w=st({__proto__:null,"default":e},[e]);const i=function(){function o(t,r,u,f){var e,l,d,o,a,g,nt,y,p,c,ut,h,w;const b=r*u,ft=i(f),it=Math.ceil(r*ft/8),s=new Uint8Array(4*b),k=new Uint32Array(s.buffer),{ctype:tt}=f,{depth:v}=f,rt=n.readUshort;if(6==tt){const n=b<<2;if(8==v)for(e=0;e<n;e+=4)s[e]=t[e],s[e+1]=t[e+1],s[e+2]=t[e+2],s[e+3]=t[e+3];if(16==v)for(e=0;e<n;e++)s[e]=t[e<<1]}else if(2==tt){const n=f.tabs.tRNS;if(null==n){if(8==v)for(e=0;e<b;e++)l=3*e,k[e]=-16777216|t[l+2]<<16|t[l+1]<<8|t[l];if(16==v)for(e=0;e<b;e++)l=6*e,k[e]=-16777216|t[l+4]<<16|t[l+2]<<8|t[l]}else{d=n[0];const i=n[1],r=n[2];if(8==v)for(e=0;e<b;e++)o=e<<2,l=3*e,k[e]=-16777216|t[l+2]<<16|t[l+1]<<8|t[l],t[l]==d&&t[l+1]==i&&t[l+2]==r&&(s[o+3]=0);if(16==v)for(e=0;e<b;e++)o=e<<2,l=6*e,k[e]=-16777216|t[l+4]<<16|t[l+2]<<8|t[l],rt(t,l)==d&&rt(t,l+2)==i&&rt(t,l+4)==r&&(s[o+3]=0)}}else if(3==tt){const n=f.tabs.PLTE,i=f.tabs.tRNS,h=i?i.length:0;if(1==v)for(a=0;a<u;a++)for(g=a*it,nt=a*r,e=0;e<r;e++)o=nt+e<<2,y=3*(p=t[g+(e>>3)]>>7-((7&e)<<0)&1),s[o]=n[y],s[o+1]=n[y+1],s[o+2]=n[y+2],s[o+3]=p<h?i[p]:255;if(2==v)for(a=0;a<u;a++)for(g=a*it,nt=a*r,e=0;e<r;e++)o=nt+e<<2,y=3*(p=t[g+(e>>2)]>>6-((3&e)<<1)&3),s[o]=n[y],s[o+1]=n[y+1],s[o+2]=n[y+2],s[o+3]=p<h?i[p]:255;if(4==v)for(a=0;a<u;a++)for(g=a*it,nt=a*r,e=0;e<r;e++)o=nt+e<<2,y=3*(p=t[g+(e>>1)]>>4-((1&e)<<2)&15),s[o]=n[y],s[o+1]=n[y+1],s[o+2]=n[y+2],s[o+3]=p<h?i[p]:255;if(8==v)for(e=0;e<b;e++)o=e<<2,y=3*(p=t[e]),s[o]=n[y],s[o+1]=n[y+1],s[o+2]=n[y+2],s[o+3]=p<h?i[p]:255}else if(4==tt){if(8==v)for(e=0;e<b;e++)o=e<<2,c=t[ut=e<<1],s[o]=c,s[o+1]=c,s[o+2]=c,s[o+3]=t[ut+1];if(16==v)for(e=0;e<b;e++)o=e<<2,c=t[ut=e<<2],s[o]=c,s[o+1]=c,s[o+2]=c,s[o+3]=t[ut+2]}else if(0==tt)for(d=f.tabs.tRNS?f.tabs.tRNS:-1,a=0;a<u;a++){const n=a*it,i=a*r;if(1==v)for(h=0;h<r;h++)w=(c=255*(t[n+(h>>>3)]>>>7-(7&h)&1))==255*d?0:255,k[i+h]=w<<24|c<<16|c<<8|c;else if(2==v)for(h=0;h<r;h++)w=(c=85*(t[n+(h>>>2)]>>>6-((3&h)<<1)&3))==85*d?0:255,k[i+h]=w<<24|c<<16|c<<8|c;else if(4==v)for(h=0;h<r;h++)w=(c=17*(t[n+(h>>>1)]>>>4-((1&h)<<2)&15))==17*d?0:255,k[i+h]=w<<24|c<<16|c<<8|c;else if(8==v)for(h=0;h<r;h++)w=(c=t[n+h])==d?0:255,k[i+h]=w<<24|c<<16|c<<8|c;else if(16==v)for(h=0;h<r;h++)c=t[n+(h<<1)],w=rt(t,n+(h<<1))==d?0:255,k[i+h]=w<<24|c<<16|c<<8|c}return s}function u(n,r,u,e){const h=i(n),c=Math.ceil(u*h/8),o=new Uint8Array((c+1+n.interlace)*e);return r=n.tabs.CgBI?f(r,o):t(r,o),0==n.interlace?r=s(r,n,0,u,e):1==n.interlace&&(r=function(n,t){const h=t.width,c=t.height,u=i(t),a=u>>3,e=Math.ceil(h*u/8),o=new Uint8Array(c*e);let l=0;const v=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],w=[8,8,4,4,2,2,1];let f=0;for(;f<7;){const d=p[f],g=w[f];let b=0,k=0,nt=v[f];for(;nt<c;)nt+=d,k++;let tt=y[f];for(;tt<h;)tt+=g,b++;const it=Math.ceil(b*u/8);s(n,t,l,b,k);let rt=0,i=v[f];for(;i<c;){let t=y[f],s=l+rt*it<<3;for(;t<h;){var r;if(1==u&&(r=(r=n[s>>3])>>7-(7&s)&1,o[i*e+(t>>3)]|=r<<7-((7&t)<<0)),2==u&&(r=(r=n[s>>3])>>6-(7&s)&3,o[i*e+(t>>2)]|=r<<6-((3&t)<<1)),4==u&&(r=(r=n[s>>3])>>4-(7&s)&15,o[i*e+(t>>1)]|=r<<4-((1&t)<<2)),u>=8){const r=i*e+t*a;for(let t=0;t<a;t++)o[r+t]=n[(s>>3)+t]}s+=u;t+=g}rt++;i+=d}b*k!=0&&(l+=k*(1+it));f+=1}return o}(r,n)),r}function t(n,t){return f(new Uint8Array(n.buffer,2,n.length-6),t)}function i(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function s(n,t,r,u,f){let c=i(t);const h=Math.ceil(u*c/8);let s,l;c=Math.ceil(c/8);let a=n[r],o=0;if(a>1&&(n[r]=[0,0,1][a-2]),3==a)for(o=c;o<h;o++)n[o+1]=n[o+1]+(n[o+1-c]>>>1)&255;for(let t=0;t<f;t++)if(s=r+t*h,l=s+t+1,a=n[l-1],o=0,0==a)for(;o<h;o++)n[s+o]=n[l+o];else if(1==a){for(;o<c;o++)n[s+o]=n[l+o];for(;o<h;o++)n[s+o]=n[l+o]+n[s+o-c]}else if(2==a)for(;o<h;o++)n[s+o]=n[l+o]+n[s+o-h];else if(3==a){for(;o<c;o++)n[s+o]=n[l+o]+(n[s+o-h]>>>1);for(;o<h;o++)n[s+o]=n[l+o]+(n[s+o-h]+n[s+o-c]>>>1)}else{for(;o<c;o++)n[s+o]=n[l+o]+e(0,n[s+o-h],0);for(;o<h;o++)n[s+o]=n[l+o]+e(n[s+o-c],n[s+o-h],n[s+o-c-h])}return n}function e(n,t,i){const e=n+t-i,r=e-n,u=e-t,f=e-i;return r*r<=u*u&&r*r<=f*f?n:u*u<=f*f?t:i}function h(t,i,r){r.width=n.readUint(t,i);i+=4;r.height=n.readUint(t,i);i+=4;r.depth=t[i];i++;r.ctype=t[i];i++;r.compress=t[i];i++;r.filter=t[i];i++;r.interlace=t[i];i++}function r(n,t,i,r,u,f,e,o,s){const d=Math.min(t,u),g=Math.min(i,f);let c=0,h=0;for(let i=0;i<g;i++)for(let f=0;f<d;f++)if(e>=0&&o>=0?(c=i*t+f<<2,h=(o+i)*u+e+f<<2):(c=(-o+i)*t-e+f<<2,h=i*u+f<<2),0==s)r[h]=n[c],r[h+1]=n[c+1],r[h+2]=n[c+2],r[h+3]=n[c+3];else if(1==s){var l=n[c+3]*(1/255),v=n[c]*l,y=n[c+1]*l,p=n[c+2]*l,a=r[h+3]*(1/255),w=r[h]*a,b=r[h+1]*a,k=r[h+2]*a;const t=1-l,i=l+a*t,u=0==i?0:1/i;r[h+3]=255*i;r[h+0]=(v+w*t)*u;r[h+1]=(y+b*t)*u;r[h+2]=(p+k*t)*u}else if(2==s)l=n[c+3],v=n[c],y=n[c+1],p=n[c+2],a=r[h+3],w=r[h],b=r[h+1],k=r[h+2],l==a&&v==w&&y==b&&p==k?(r[h]=0,r[h+1]=0,r[h+2]=0,r[h+3]=0):(r[h]=v,r[h+1]=y,r[h+2]=p,r[h+3]=l);else if(3==s){if(l=n[c+3],v=n[c],y=n[c+1],p=n[c+2],a=r[h+3],w=r[h],b=r[h+1],k=r[h+2],l==a&&v==w&&y==b&&p==k)continue;if(l<220&&a>20)return!1}return!0}var n={nextZero(n,t){for(;0!=n[t];)t++;return t},readUshort:(n,t)=>n[t]<<8|n[t+1],writeUshort(n,t,i){n[t]=i>>8&255;n[t+1]=255&i},readUint:(n,t)=>16777216*n[t]+(n[t+1]<<16|n[t+2]<<8|n[t+3]),writeUint(n,t,i){n[t]=i>>24&255;n[t+1]=i>>16&255;n[t+2]=i>>8&255;n[t+3]=255&i},readASCII(n,t,i){let r="";for(let u=0;u<i;u++)r+=String.fromCharCode(n[t+u]);return r},writeASCII(n,t,i){for(let r=0;r<i.length;r++)n[t+r]=i.charCodeAt(r)},readBytes(n,t,i){const r=[];for(let u=0;u<i;u++)r.push(n[t+u]);return r},pad:n=>n.length<2?`0${n}`:n,readUTF8(t,i,r){let u,f="";for(let u=0;u<r;u++)f+=`%${n.pad(t[i+u].toString(16))}`;try{u=decodeURIComponent(f)}catch(u){return n.readASCII(t,i,r)}return u}},f=function(){const n={H:{}};return n.H.N=function(t,i){const v=Uint8Array;let h,c,tt=0,l=0,a=0,y=0,p=0,w=0,b=0,f=0,r=0;if(3==t[0]&&0==t[1])return i||new v(0);const e=n.H,k=e.b,s=e.e,rt=e.R,d=e.n,g=e.A,it=e.Z,u=e.m,nt=null==i;for(nt&&(i=new v(t.length>>>2<<5));0==tt;)if(tt=k(t,r,1),l=k(t,r+1,2),r+=3,0!=l){if(nt&&(i=n.H.W(i,f+131072)),1==l&&(h=u.J,c=u.h,w=511,b=31),2==l){a=s(t,r,5)+257;y=s(t,r+5,5)+1;p=s(t,r+10,4)+4;r+=14;let n=1;for(var o=0;o<38;o+=2)u.Q[o]=0,u.Q[o+1]=0;for(o=0;o<p;o++){const i=s(t,r+3*o,3);u.Q[1+(u.X[o]<<1)]=i;i>n&&(n=i)}r+=3*p;d(u.Q,n);g(u.Q,n,u.u);h=u.w;c=u.d;r=rt(u.u,(1<<n)-1,a+y,t,r,u.v);const i=e.V(u.v,0,a,u.C);w=(1<<i)-1;const f=e.V(u.v,a,y,u.D);b=(1<<f)-1;d(u.C,i);g(u.C,i,h);d(u.D,f);g(u.D,f,c)}for(;;){const e=h[it(t,r)&w];r+=15&e;const n=e>>>4;if(n>>>8==0)i[f++]=n;else{if(256==n)break;{let o=f+n-254;if(n>264){const i=u.q[n-257];o=f+(i>>>3)+s(t,r,7&i);r+=7&i}const l=c[it(t,r)&b];r+=15&l;const a=l>>>4,h=u.c[a],e=(h>>>4)+k(t,r,15&h);for(r+=15&h;f<o;)i[f]=i[f++-e],i[f]=i[f++-e],i[f]=i[f++-e],i[f]=i[f++-e];f=o}}}}else{0!=(7&r)&&(r+=8-(7&r));const u=4+(r>>>3),e=t[u-4]|t[u-3]<<8;nt&&(i=n.H.W(i,f+e));i.set(new v(t.buffer,t.byteOffset+u,e),f);r=u+e<<3;f+=e}return i.length==f?i:i.slice(0,f)},n.H.W=function(n,t){const i=n.length;if(t<=i)return n;const r=new Uint8Array(i<<1);return r.set(n,0),r},n.H.R=function(t,i,r,u,f,e){const s=n.H.e,h=n.H.Z;let o=0;for(;o<r;){const r=t[h(u,f)&i];f+=15&r;const n=r>>>4;if(n<=15)e[o]=n,o++;else{let i=0,t=0;16==n?(t=3+s(u,f,2),f+=2,i=e[o-1]):17==n?(t=3+s(u,f,3),f+=3):18==n&&(t=11+s(u,f,7),f+=7);const r=o+t;for(;o<r;)e[o]=i,o++}}return f},n.H.V=function(n,t,i,r){let f=0,u=0;const e=r.length>>>1;for(;u<i;){const i=n[u+t];r[u<<1]=0;r[1+(u<<1)]=i;i>f&&(f=i);u++}for(;u<e;)r[u<<1]=0,r[1+(u<<1)]=0,u++;return f},n.H.n=function(t,i){const c=n.H.m,l=t.length;let e,u,f,o;const s=c.j;for(var r=0;r<=i;r++)s[r]=0;for(r=1;r<l;r+=2)s[t[r]]++;const h=c.K;for(e=0,s[0]=0,u=1;u<=i;u++)e=e+s[u-1]<<1,h[u]=e;for(f=0;f<l;f+=2)o=t[f+1],0!=o&&(t[f]=h[o],h[o]++)},n.H.A=function(t,i,r){const u=t.length,f=n.H.m.r;for(let n=0;n<u;n+=2)if(0!=t[n+1]){const s=n>>1,e=t[n+1],h=s<<4|e,o=i-e;let u=t[n]<<o;const c=u+(1<<o);for(;u!=c;)r[f[u]>>>15-i]=h,u++}},n.H.l=function(t,i){const r=n.H.m.r,u=15-i;for(let n=0;n<t.length;n+=2){const f=t[n]<<i-t[n+1];t[n]=r[f]>>>u}},n.H.M=function(n,t,i){i<<=7&t;const r=t>>>3;n[r]|=i;n[r+1]|=i>>>8},n.H.I=function(n,t,i){i<<=7&t;const r=t>>>3;n[r]|=i;n[r+1]|=i>>>8;n[r+2]|=i>>>16},n.H.e=function(n,t,i){return(n[t>>>3]|n[1+(t>>>3)]<<8)>>>(7&t)&(1<<i)-1},n.H.b=function(n,t,i){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16)>>>(7&t)&(1<<i)-1},n.H.Z=function(n,t){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16)>>>(7&t)},n.H.i=function(n,t){return(n[t>>>3]|n[1+(t>>>3)]<<8|n[2+(t>>>3)]<<16|n[3+(t>>>3)]<<24)>>>(7&t)},n.H.m=function(){const n=Uint16Array,t=Uint32Array;return{K:new n(16),j:new n(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new n(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new n(512),_:[],h:new n(32),$:[],w:new n(32768),C:[],v:[],d:new n(32768),D:[],u:new n(512),Q:[],r:new n(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new n(65536),g:new n(32768)}}(),function(){function r(n,t,i){for(;0!=t--;)n.push(0,i)}const t=n.H.m;for(var i=0;i<32768;i++){let n=i;n=(2863311530&n)>>>1|(1431655765&n)<<1;n=(3435973836&n)>>>2|(858993459&n)<<2;n=(4042322160&n)>>>4|(252645135&n)<<4;n=(4278255360&n)>>>8|(16711935&n)<<8;t.r[i]=(n>>>16|n<<16)>>>17}for(i=0;i<32;i++)t.q[i]=t.S[i]<<3|t.T[i],t.c[i]=t.p[i]<<4|t.z[i];r(t._,144,8);r(t._,112,9);r(t._,24,7);r(t._,8,8);n.H.n(t._,9);n.H.A(t._,9,t.J);n.H.l(t._,9);r(t.$,32,5);n.H.n(t.$,5);n.H.A(t.$,5,t.h);n.H.l(t.$,5);r(t.Q,19,0);r(t.C,286,0);r(t.D,30,0);r(t.v,320,0)}(),n.H.N}();return{decode:function(i){var l,c,w,b,k;const r=new Uint8Array(i);let e=8;const s=n,v=s.readUshort,p=s.readUint,o={tabs:{},frames:[]},tt=new Uint8Array(r.length);let g,it=0,y=0;const rt=[137,80,78,71,13,10,26,10];for(l=0;l<8;l++)if(r[l]!=rt[l])throw"The input is not a PNG file!";for(;e<r.length;){const i=s.readUint(r,e);e+=4;const n=s.readASCII(r,e,4);if(e+=4,"IHDR"==n)h(r,e,o);else if("iCCP"==n){for(c=e;0!=r[c];)c++;s.readASCII(r,e,c-e);r[c+1];const h=r.slice(c+2,e+i);let u=null;try{u=t(h)}catch(i){u=f(h)}o.tabs[n]=u}else if("CgBI"==n)o.tabs[n]=r.slice(e,e+4);else if("IDAT"==n){for(l=0;l<i;l++)tt[it+l]=r[e+l];it+=i}else if("acTL"==n)o.tabs[n]={num_frames:p(r,e),num_plays:p(r,e+4)},g=new Uint8Array(r.length);else if("fcTL"==n){0!=y&&((k=o.frames[o.frames.length-1]).data=u(o,g.slice(0,y),k.rect.width,k.rect.height),y=0);const t={x:p(r,e+12),y:p(r,e+16),width:p(r,e+4),height:p(r,e+8)};let n=v(r,e+22);n=v(r,e+20)/(0==n?100:n);const i={rect:t,delay:Math.round(1e3*n),dispose:r[e+24],blend:r[e+25]};o.frames.push(i)}else if("fdAT"==n){for(l=0;l<i-4;l++)g[y+l]=r[e+l+4];y+=i-4}else if("pHYs"==n)o.tabs[n]=[s.readUint(r,e),s.readUint(r,e+4),r[e+8]];else if("cHRM"==n)for(o.tabs[n]=[],l=0;l<8;l++)o.tabs[n].push(s.readUint(r,e+4*l));else if("tEXt"==n||"zTXt"==n){null==o.tabs[n]&&(o.tabs[n]={});var a=s.nextZero(r,e),nt=s.readASCII(r,e,a-e),d=e+i-a-1;"tEXt"==n?b=s.readASCII(r,a+1,d):(w=t(r.slice(a+2,a+2+d)),b=s.readUTF8(w,0,w.length));o.tabs[n][nt]=b}else if("iTXt"==n){null==o.tabs[n]&&(o.tabs[n]={});a=0;c=e;a=s.nextZero(r,c);nt=s.readASCII(r,c,a-c);const u=r[c=a+1];r[c+1];c+=2;a=s.nextZero(r,c);s.readASCII(r,c,a-c);c=a+1;a=s.nextZero(r,c);s.readUTF8(r,c,a-c);d=i-((c=a+1)-e);0==u?b=s.readUTF8(r,c,d):(w=t(r.slice(c,c+d)),b=s.readUTF8(w,0,w.length));o.tabs[n][nt]=b}else if("PLTE"==n)o.tabs[n]=s.readBytes(r,e,i);else if("hIST"==n){const t=o.tabs.PLTE.length/3;for(o.tabs[n]=[],l=0;l<t;l++)o.tabs[n].push(v(r,e+2*l))}else if("tRNS"==n)3==o.ctype?o.tabs[n]=s.readBytes(r,e,i):0==o.ctype?o.tabs[n]=v(r,e):2==o.ctype&&(o.tabs[n]=[v(r,e),v(r,e+2),v(r,e+4)]);else if("gAMA"==n)o.tabs[n]=s.readUint(r,e)/1e5;else if("sRGB"==n)o.tabs[n]=r[e];else if("bKGD"==n)0==o.ctype||4==o.ctype?o.tabs[n]=[v(r,e)]:2==o.ctype||6==o.ctype?o.tabs[n]=[v(r,e),v(r,e+2),v(r,e+4)]:3==o.ctype&&(o.tabs[n]=r[e]);else if("IEND"==n)break;e+=i;s.readUint(r,e);e+=4}return 0!=y&&((k=o.frames[o.frames.length-1]).data=u(o,g.slice(0,y),k.rect.width,k.rect.height)),o.data=u(o,tt,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},toRGBA8:function(n){const u=n.width,f=n.height;if(null==n.tabs.acTL)return[o(n.data,u,f,n).buffer];const s=[];null==n.frames[0].data&&(n.frames[0].data=n.data);const e=u*f*4,i=new Uint8Array(e),c=new Uint8Array(e),h=new Uint8Array(e);for(let l=0;l<n.frames.length;l++){const a=n.frames[l],p=a.rect.x,w=a.rect.y,v=a.rect.width,y=a.rect.height,b=o(a.data,v,y,n);if(0!=l)for(var t=0;t<e;t++)h[t]=i[t];if(0==a.blend?r(b,v,y,i,u,f,p,w,0):1==a.blend&&r(b,v,y,i,u,f,p,w,1),s.push(i.buffer.slice(0)),0!=a.dispose)if(1==a.dispose)r(c,v,y,i,u,f,p,w,0);else if(2==a.dispose)for(t=0;t<e;t++)i[t]=h[t]}return s},_paeth:e,_copyTile:r,_bin:n}}();!function(){function u(n,t,i,r){t[i]+=n[0]*r>>4;t[i+1]+=n[1]*r>>4;t[i+2]+=n[2]*r>>4;t[i+3]+=n[3]*r>>4}function n(n){return Math.max(0,Math.min(255,n))}function c(n,t){const i=n[0]-t[0],r=n[1]-t[1],u=n[2]-t[2],f=n[3]-t[3];return i*i+r*r+u*u+f*f}function l(t,i,r,f,e,o,s){var h,y,l,a,p;null==s&&(s=1);const b=f.length,w=[];for(h=0;h<b;h++){const n=f[h];w.push([n>>>0&255,n>>>8&255,n>>>16&255,n>>>24&255])}for(h=0;h<b;h++){let n=4294967295;for(y=0,l=0;l<b;l++)a=c(w[h],w[l]),l!=h&&a<n&&(n=a,y=l)}const d=new Uint32Array(e.buffer),v=new Int16Array(i*r*4),k=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<k.length;h++)k[h]=255*((k[h]+.5)/16-.5);for(let e=0;e<r;e++)for(let g=0;g<i;g++){h=4*(e*i+g);2!=s?p=[n(t[h]+v[h]),n(t[h+1]+v[h+1]),n(t[h+2]+v[h+2]),n(t[h+3]+v[h+3])]:(a=k[4*(3&e)+(3&g)],p=[n(t[h]+a),n(t[h+1]+a),n(t[h+2]+a),n(t[h+3]+a)]);y=0;let it=16777215;for(l=0;l<b;l++){const n=c(p,w[l]);n<it&&(it=n,y=l)}const nt=w[y],tt=[p[0]-nt[0],p[1]-nt[1],p[2]-nt[2],p[3]-nt[3]];1==s&&(g!=i-1&&u(tt,v,h+4,7),e!=r-1&&(0!=g&&u(tt,v,h+4*i-4,3),u(tt,v,h+4*i,5),g!=i-1&&u(tt,v,h+4*i+4,1)));o[h>>2]=y;d[h>>2]=f[y]}}function a(n,t,i,u,f){var l,c,a,w;null==f&&(f={});const{crc:y}=r,h=e.writeUint,g=e.writeUshort,v=e.writeASCII;let o=8;const k=n.frames.length>1;let b,d=!1,p=33+(k?20:0);if(null!=f.sRGB&&(p+=13),null!=f.pHYs&&(p+=21),null!=f.iCCP&&(b=pako.deflate(f.iCCP),p+=21+b.length+4),3==n.ctype){for(l=n.plte.length,c=0;c<l;c++)n.plte[c]>>>24!=255&&(d=!0);p+=8+3*l+4+(d?8+1*l+4:0)}for(a=0;a<n.frames.length;a++)k&&(p+=38),p+=(w=n.frames[a]).cimg.length+12,0!=a&&(p+=4);p+=12;const s=new Uint8Array(p),tt=[137,80,78,71,13,10,26,10];for(c=0;c<8;c++)s[c]=tt[c];if(h(s,o,13),o+=4,v(s,o,"IHDR"),o+=4,h(s,o,t),o+=4,h(s,o,i),o+=4,s[o]=n.depth,o++,s[o]=n.ctype,o++,s[o]=0,o++,s[o]=0,o++,s[o]=0,o++,h(s,o,y(s,o-17,17)),o+=4,null!=f.sRGB&&(h(s,o,1),o+=4,v(s,o,"sRGB"),o+=4,s[o]=f.sRGB,o++,h(s,o,y(s,o-5,5)),o+=4),null!=f.iCCP){const n=13+b.length;h(s,o,n);o+=4;v(s,o,"iCCP");o+=4;v(s,o,"ICC profile");o+=11;o+=2;s.set(b,o);o+=b.length;h(s,o,y(s,o-(n+4),n+4));o+=4}if(null!=f.pHYs&&(h(s,o,9),o+=4,v(s,o,"pHYs"),o+=4,h(s,o,f.pHYs[0]),o+=4,h(s,o,f.pHYs[1]),o+=4,s[o]=f.pHYs[2],o++,h(s,o,y(s,o-13,13)),o+=4),k&&(h(s,o,8),o+=4,v(s,o,"acTL"),o+=4,h(s,o,n.frames.length),o+=4,h(s,o,null!=f.loop?f.loop:0),o+=4,h(s,o,y(s,o-12,12)),o+=4),3==n.ctype){for(h(s,o,3*(l=n.plte.length)),o+=4,v(s,o,"PLTE"),o+=4,c=0;c<l;c++){const t=3*c,i=n.plte[c],r=255&i,u=i>>>8&255,f=i>>>16&255;s[o+t+0]=r;s[o+t+1]=u;s[o+t+2]=f}if(o+=3*l,h(s,o,y(s,o-3*l-4,3*l+4)),o+=4,d){for(h(s,o,l),o+=4,v(s,o,"tRNS"),o+=4,c=0;c<l;c++)s[o+c]=n.plte[c]>>>24&255;o+=l;h(s,o,y(s,o-l-4,l+4));o+=4}}let nt=0;for(a=0;a<n.frames.length;a++){w=n.frames[a];k&&(h(s,o,26),o+=4,v(s,o,"fcTL"),o+=4,h(s,o,nt++),o+=4,h(s,o,w.rect.width),o+=4,h(s,o,w.rect.height),o+=4,h(s,o,w.rect.x),o+=4,h(s,o,w.rect.y),o+=4,g(s,o,u[a]),o+=2,g(s,o,1e3),o+=2,s[o]=w.dispose,o++,s[o]=w.blend,o++,h(s,o,y(s,o-30,30)),o+=4);const t=w.cimg;h(s,o,(l=t.length)+(0==a?0:4));o+=4;const i=o;v(s,o,0==a?"IDAT":"fdAT");o+=4;0!=a&&(h(s,o,nt++),o+=4);s.set(t,o);o+=l;h(s,o,y(s,i,o-i));o+=4}return h(s,o,0),o+=4,v(s,o,"IEND"),o+=4,h(s,o,y(s,o-4,4)),o+=4,s.buffer}function v(n,t,i){for(let r=0;r<n.frames.length;r++){const u=n.frames[r];u.rect.width;const f=u.rect.height,e=new Uint8Array(f*u.bpl+f);u.cimg=it(u.img,f,u.bpp,u.bpl,e,t,i)}}function y(n,i,r,u,f){var c,g,e,y,s,h,a,o;const et=f[0],ot=f[1],st=f[2],ht=f[3],rt=f[4],ct=f[5];let tt=6,w=8,ut=255;for(c=0;c<n.length;c++){const t=new Uint8Array(n[c]);for(g=t.length,e=0;e<g;e+=4)ut&=t[e+3]}const lt=255!=ut,v=function(n,i,r,u,f,e){var o,h,a,c,l;const s=[];for(o=0;o<n.length;o++){const w=new Uint8Array(n[o]),d=new Uint32Array(w.buffer);let y=0,p=0,l=i,v=r,k=u?1:0;if(0!=o){const tt=e||u||1==o||0!=s[o-2].dispose?1:2;let g=0,nt=1e9;for(let t=0;t<tt;t++){a=new Uint8Array(n[o-1-t]);const w=new Uint32Array(n[o-1-t]);let u=i,e=r,s=-1,h=-1;for(let n=0;n<r;n++)for(let t=0;t<i;t++)d[c=n*i+t]!=w[c]&&(t<u&&(u=t),t>s&&(s=t),n<e&&(e=n),n>h&&(h=n));-1==s&&(u=e=s=h=0);f&&(1==(1&u)&&u--,1==(1&e)&&e--);const a=(s-u+1)*(h-e+1);a<nt&&(nt=a,g=t,y=u,p=e,l=s-u+1,v=h-e+1)}a=new Uint8Array(n[o-1-g]);1==g&&(s[o-1].dispose=2);h=new Uint8Array(l*v*4);t(a,i,r,h,l,v,-y,-p,0);k=t(w,i,r,h,l,v,-y,-p,3)?1:0;1==k?b(w,i,r,h,{x:y,y:p,width:l,height:v}):t(w,i,r,h,l,v,-y,-p,0)}else h=w.slice(0);s.push({rect:{x:y,y:p,width:l,height:v},img:h,blend:k,dispose:0})}if(u)for(o=0;o<s.length;o++)if(1!=(l=s[o]).blend){const t=l.rect,u=s[o-1].rect,e=Math.min(t.x,u.x),h=Math.min(t.y,u.y),c={x:e,y:h,width:Math.max(t.x+t.width,u.x+u.width)-e,height:Math.max(t.y+t.height,u.y+u.height)-h};s[o-1].dispose=1;o-1!=0&&p(n,i,r,s,o-1,c,f);p(n,i,r,s,o,c,f)}let v=0;if(1!=n.length)for(c=0;c<s.length;c++)v+=(l=s[c]).rect.width*l.rect.height;return s}(n,i,r,et,ot,st),ft={},d=[],it=[];if(0!=u){const i=[];for(e=0;e<v.length;e++)i.push(v[e].img.buffer);const r=function(n){let u=0;for(var t=0;t<n.length;t++)u+=n[t].byteLength;const i=new Uint8Array(u);let r=0;for(t=0;t<n.length;t++){const u=new Uint8Array(n[t]),f=u.length;for(let n=0;n<f;n+=4){let t=u[n],f=u[n+1],e=u[n+2];const o=u[n+3];0==o&&(t=f=e=0);i[r+n]=t;i[r+n+1]=f;i[r+n+2]=e;i[r+n+3]=o}r+=f}return i.buffer}(i),n=k(r,u);for(e=0;e<n.plte.length;e++)d.push(n.plte[e].est.rgba);let t=0;for(e=0;e<v.length;e++){const i=(s=v[e]).img.length;y=new Uint8Array(n.inds.buffer,t>>2,i>>2);it.push(y);const r=new Uint8Array(n.abuf,t,i);ct&&l(s.img,s.rect.width,s.rect.height,d,r,y);s.img.set(r);t+=i}}else for(c=0;c<v.length;c++){s=v[c];const n=new Uint32Array(s.img.buffer);for(h=s.rect.width,g=n.length,y=new Uint8Array(g),it.push(y),e=0;e<g;e++){const t=n[e];if(0!=e&&t==n[e-1])y[e]=y[e-1];else if(e>h&&t==n[e-h])y[e]=y[e-h];else{let n=ft[t];if(null==n&&(ft[t]=n=d.length,d.push(t),d.length>=300))break;y[e]=n}}}const nt=d.length;for(nt<=256&&0==rt&&(w=nt<=2?1:nt<=4?2:nt<=16?4:8,w=Math.max(w,ht)),c=0;c<v.length;c++){(s=v[c]).rect.x;s.rect.y;h=s.rect.width;const i=s.rect.height;let n=s.img;new Uint32Array(n.buffer);let t=4*h,r=4;if(nt<=256&&0==rt){t=Math.ceil(w*h/8);a=new Uint8Array(t*i);const u=it[c];for(let n=0;n<i;n++){e=n*t;const i=n*h;if(8==w)for(o=0;o<h;o++)a[e+o]=u[i+o];else if(4==w)for(o=0;o<h;o++)a[e+(o>>1)]|=u[i+o]<<4-4*(1&o);else if(2==w)for(o=0;o<h;o++)a[e+(o>>2)]|=u[i+o]<<6-2*(3&o);else if(1==w)for(o=0;o<h;o++)a[e+(o>>3)]|=u[i+o]<<7-1*(7&o)}n=a;tt=3;r=1}else if(0==lt&&1==v.length){a=new Uint8Array(h*i*3);const u=h*i;for(e=0;e<u;e++){const t=3*e,i=4*e;a[t]=n[i];a[t+1]=n[i+1];a[t+2]=n[i+2]}n=a;tt=2;r=3;t=3*h}s.img=n;s.bpl=t;s.bpp=r}return{ctype:tt,depth:w,plte:d,frames:v}}function p(n,i,r,u,f,e,o){const v=Uint8Array,p=Uint32Array,k=new v(n[f-1]),d=new p(n[f-1]),w=f+1<n.length?new v(n[f+1]):null,y=new v(n[f]),g=new p(y.buffer);let s=i,h=r,l=-1,a=-1;for(let n=0;n<e.height;n++)for(let t=0;t<e.width;t++){const r=e.x+t,o=e.y+n,c=o*i+r,v=g[c];0==v||0==u[f-1].dispose&&d[c]==v&&(null==w||0!=w[4*c+3])||(r<s&&(s=r),r>l&&(l=r),o<h&&(h=o),o>a&&(a=o))}-1==l&&(s=h=l=a=0);o&&(1==(1&s)&&s--,1==(1&h)&&h--);e={x:s,y:h,width:l-s+1,height:a-h+1};const c=u[f];c.rect=e;c.blend=1;c.img=new Uint8Array(e.width*e.height*4);0==u[f-1].dispose?(t(k,i,r,c.img,e.width,e.height,-e.x,-e.y,0),b(y,i,r,c.img,e)):t(y,i,r,c.img,e.width,e.height,-e.x,-e.y,0)}function b(n,i,r,u,f){t(n,i,r,u,f.width,f.height,-f.x,-f.y,2)}function it(n,t,i,r,u,f,e){const s=[];let c,h=[0,1,2,3,4];-1!=f?h=[f]:(t*r>5e5||1==i)&&(h=[0]);e&&(c={level:0});const v=w;for(var o=0;o<h.length;o++){for(let f=0;f<t;f++)rt(u,n,f,r,i,h[o]);s.push(v.deflate(u,c))}let l,a=1e9;for(o=0;o<s.length;o++)s[o].length<a&&(l=o,a=s[o].length);return s[l]}function rt(n,t,i,r,u,f){const s=i*r;let h=s+i;if(n[h]=f,h++,0==f)if(r<500)for(var e=0;e<r;e++)n[h+e]=t[s+e];else n.set(new Uint8Array(t.buffer,s,r),h);else if(1==f){for(e=0;e<u;e++)n[h+e]=t[s+e];for(e=u;e<r;e++)n[h+e]=t[s+e]-t[s+e-u]+256&255}else if(0==i){for(e=0;e<u;e++)n[h+e]=t[s+e];if(2==f)for(e=u;e<r;e++)n[h+e]=t[s+e];if(3==f)for(e=u;e<r;e++)n[h+e]=t[s+e]-(t[s+e-u]>>1)+256&255;if(4==f)for(e=u;e<r;e++)n[h+e]=t[s+e]-o(t[s+e-u],0,0)+256&255}else{if(2==f)for(e=0;e<r;e++)n[h+e]=t[s+e]+256-t[s+e-r]&255;if(3==f){for(e=0;e<u;e++)n[h+e]=t[s+e]+256-(t[s+e-r]>>1)&255;for(e=u;e<r;e++)n[h+e]=t[s+e]+256-(t[s+e-r]+t[s+e-u]>>1)&255}if(4==f){for(e=0;e<u;e++)n[h+e]=t[s+e]+256-o(0,t[s+e-r],0)&255;for(e=u;e<r;e++)n[h+e]=t[s+e]+256-o(t[s+e-u],t[s+e-r],t[s+e-u-r])&255}}}function k(n,t){var i;const r=new Uint8Array(n),e=r.slice(0),h=new Uint32Array(e.buffer),c=d(e,t),l=c[0],w=c[1],o=r.length,s=new Uint8Array(o>>2);let u;if(r.length<2e7)for(i=0;i<o;i+=4)u=f(l,a=r[i]*(1/255),v=r[i+1]*(1/255),y=r[i+2]*(1/255),p=r[i+3]*(1/255)),s[i>>2]=u.ind,h[i>>2]=u.est.rgba;else for(i=0;i<o;i+=4){var a=r[i]*(1/255),v=r[i+1]*(1/255),y=r[i+2]*(1/255),p=r[i+3]*(1/255);for(u=l;u.left;)u=g(u.est,a,v,y,p)<=0?u.left:u.right;s[i>>2]=u.ind;h[i>>2]=u.est.rgba}return{abuf:e.buffer,inds:s,plte:w}}function d(n,t,i){null==i&&(i=.0001);const e=new Uint32Array(n.buffer),f={i0:0,i1:n.length,bst:null,est:null,tdst:0,left:null,right:null};f.bst=nt(n,f.i0,f.i1);f.est=h(f.bst);const u=[f];for(;u.length<t;){let c=0,l=0;for(var r=0;r<u.length;r++)u[r].est.L>c&&(c=u[r].est.L,l=r);if(c<i)break;const t=u[l],s=ut(n,e,t.i0,t.i1,t.est.e,t.est.eMq255);if(t.i0>=s||t.i1<=s){t.est.L=0;continue}const f={i0:t.i0,i1:s,bst:null,est:null,tdst:0,left:null,right:null};f.bst=nt(n,f.i0,f.i1);f.est=h(f.bst);const o={i0:s,i1:t.i1,bst:null,est:null,tdst:0,left:null,right:null};for(o.bst={R:[],m:[],N:t.bst.N-f.bst.N},r=0;r<16;r++)o.bst.R[r]=t.bst.R[r]-f.bst.R[r];for(r=0;r<4;r++)o.bst.m[r]=t.bst.m[r]-f.bst.m[r];o.est=h(o.bst);t.left=f;t.right=o;u[l]=f;u.push(o)}for(u.sort((n,t)=>t.bst.N-n.bst.N),r=0;r<u.length;r++)u[r].ind=r;return[f,u]}function f(n,t,i,r,u){if(null==n.left)return n.tdst=function(n,t,i,r,u){const f=t-n[0],e=i-n[1],o=r-n[2],s=u-n[3];return f*f+e*e+o*o+s*s}(n.est.q,t,i,r,u),n;const o=g(n.est,t,i,r,u);let s=n.left,h=n.right;o>0&&(s=n.right,h=n.left);const e=f(s,t,i,r,u);if(e.tdst<=o*o)return e;const c=f(h,t,i,r,u);return c.tdst<e.tdst?c:e}function g(n,t,i,r,u){const{e:f}=n;return f[0]*t+f[1]*i+f[2]*r+f[3]*u-n.eMq}function ut(n,t,i,r,u,f){for(r-=4;i<r;){for(;s(n,i,u)<=f;)i+=4;for(;s(n,r,u)>f;)r-=4;if(i>=r)break;const e=t[i>>2];t[i>>2]=t[r>>2];t[r>>2]=e;i+=4;r-=4}for(;s(n,i,u)>f;)i-=4;return i+4}function s(n,t,i){return n[t]*i[0]+n[t+1]*i[1]+n[t+2]*i[2]+n[t+3]*i[3]}function nt(n,t,i){const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=[0,0,0,0],f=i-t>>2;for(let f=t;f<i;f+=4){const t=n[f]*(1/255),i=n[f+1]*(1/255),e=n[f+2]*(1/255),o=n[f+3]*(1/255);u[0]+=t;u[1]+=i;u[2]+=e;u[3]+=o;r[0]+=t*t;r[1]+=t*i;r[2]+=t*e;r[3]+=t*o;r[5]+=i*i;r[6]+=i*e;r[7]+=i*o;r[10]+=e*e;r[11]+=e*o;r[15]+=o*o}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:u,N:f}}function h(n){const{R:i}=n,{m:c}=n,{N:a}=n,r=c[0],u=c[1],f=c[2],e=c[3],t=0==a?0:1/a,y=[i[0]-r*r*t,i[1]-r*u*t,i[2]-r*f*t,i[3]-r*e*t,i[4]-u*r*t,i[5]-u*u*t,i[6]-u*f*t,i[7]-u*e*t,i[8]-f*r*t,i[9]-f*u*t,i[10]-f*f*t,i[11]-f*e*t,i[12]-e*r*t,i[13]-e*u*t,i[14]-e*f*t,i[15]-e*e*t],p=y,h=tt;let o=[Math.random(),Math.random(),Math.random(),Math.random()],v=0,l=0;if(0!=a)for(let n=0;n<16&&(o=h.multVec(p,o),l=Math.sqrt(h.dot(o,o)),o=h.sml(1/l,o),!(0!=n&&Math.abs(l-v)<1e-9));n++)v=l;const s=[r*t,u*t,f*t,e*t];return{Cov:y,q:s,e:o,L:v,eMq255:h.dot(h.sml(255,s),o),eMq:h.dot(o,s),rgba:(Math.round(255*s[3])<<24|Math.round(255*s[2])<<16|Math.round(255*s[1])<<8|Math.round(255*s[0])<<0)>>>0}}var r,tt;const{_copyTile:t}=i,{_bin:e}=i,o=i._paeth;r={table:function(){const n=new Uint32Array(256);for(let t=0;t<256;t++){let i=t;for(let n=0;n<8;n++)1&i?i=3988292384^i>>>1:i>>>=1;n[t]=i}return n}(),update(n,t,i,u){for(let f=0;f<u;f++)n=r.table[255&(n^t[i+f])]^n>>>8;return n},crc:(n,t,i)=>4294967295^r.update(4294967295,n,t,i)};tt={multVec:(n,t)=>[n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3],n[4]*t[0]+n[5]*t[1]+n[6]*t[2]+n[7]*t[3],n[8]*t[0]+n[9]*t[1]+n[10]*t[2]+n[11]*t[3],n[12]*t[0]+n[13]*t[1]+n[14]*t[2]+n[15]*t[3]],dot:(n,t)=>n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3],sml:(n,t)=>[n*t[0],n*t[1],n*t[2],n*t[3]]};i.encode=function(n,t,i,r,u,f,e){null==r&&(r=0);null==e&&(e=!1);const o=y(n,t,i,r,[!1,!1,!1,0,e,!1]);return v(o,-1),a(o,t,i,u,f)};i.encodeLL=function(n,t,i,r,u,f,e,o){const s={ctype:0+(1==r?0:2)+(0==u?0:4),depth:f,frames:[]},h=(r+u)*f,c=h*t;for(let r=0;r<n.length;r++)s.frames.push({rect:{x:0,y:0,width:t,height:i},img:new Uint8Array(n[r]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(c/8)});return v(s,0,!0),a(s,t,i,e,o)};i.encode.compress=y;i.encode.dither=l;i.quantize=k;i.quantize.getKDtree=d;i.quantize.getNearest=f}();const b={toArrayBuffer(n,t){function l(n){o.setUint16(r,n,!0);r+=2}function i(n){o.setUint32(r,n,!0);r+=4}function tt(n){r+=n}const u=n.width,f=n.height,it=u<<2,rt=n.getContext("2d").getImageData(0,0,u,f),a=new Uint32Array(rt.data.buffer),v=(32*u+31)/32<<2,y=v*f,p=122+y,w=new ArrayBuffer(p),o=new DataView(w),k=1048576;let e,s,d,g,h=k,c=0,r=0,nt=0;l(19778);i(p);tt(4);i(122);i(108);i(u);i(-f>>>0);l(1);l(32);i(3);i(y);i(2835);i(2835);tt(8);i(16711680);i(65280);i(255);i(4278190080);i(1466527264),function ut(){for(;c<f&&h>0;){for(g=122+c*v,e=0;e<it;)h--,s=a[nt++],d=s>>>24,o.setUint32(g+e,s<<8|d),e+=4;c++}nt<a.length?(h=k,setTimeout(ut,b._dly)):t(w)}()},toBlob(n,t){this.toArrayBuffer(n,n=>{t(new Blob([n],{type:"image/bmp"}))})},_dly:9};t={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"};k={[t.CHROME]:16384,[t.FIREFOX]:11180,[t.DESKTOP_SAFARI]:16384,[t.IE]:8192,[t.IOS]:4096,[t.ETC]:8192};const a="undefined"!=typeof window,d="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o=a&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ct=(a||d)&&(o&&o.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),g=(a||d)&&(o&&o.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);const lt="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n";let y;return n.getDataUrlFromFile=nt,n.getFilefromDataUrl=v,n.loadImage=tt,n.drawImageInCanvas=rt,n.drawFileInCanvas=c,n.canvasToFile=l,n.getExifOrientation=ut,n.handleMaxWidthOrHeight=ft,n.followExifOrientation=et,n.cleanupCanvasMemory=r,n.isAutoOrientationInBrowser=f,n.approximateBelowMaximumCanvasSizeOfBrowser=it,n.copyExifWithoutOrientation=p,n.getBrowserName=u,n.version="2.0.2",n}),{compress:function(t,i){return n(t,i)}}}();UE.dialog=function(){return{loadingPlaceholder:function(n){var t="loading_"+(+new Date).toString(36);return n.focus(),n.execCommand("inserthtml",'<img class="uep-loading" id="'+t+'" src="'+n.options.themePath+n.options.theme+'/images/spacer.gif">'),t},removeLoadingPlaceholder:function(t,i){var r=t.document.getElementById(i);r&&n.remove(r,!1)},tipError:function(n,t){n.fireEvent("showmessage",{content:t,type:"error",timeout:4e3})}}}();w=UE.filterWord=function(){function r(n){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(n)}function n(n){return n.replace(/[\d.]+\w+/g,function(n){return t.transUnitToPx(n)})}function u(r){return r.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(t){if(i.opera)return"";try{if(/Bitmap/i.test(t))return"";var r=t.match(/width:([ \d.]*p[tx])/i)[1],u=t.match(/height:([ \d.]*p[tx])/i)[1],f=t.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+n(r)+'" height="'+n(u)+'" src="'+f+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1<\/strong><\/p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(n,t,i,r){return t=="class"&&r=="MsoListParagraph"?n:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(n,t,i){return i.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(i,r,u,f){for(var h,e,c,o=[],a=f.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(n){return t.transUnitToPx(n)}).split(/;\s*/g),s=0,l;l=a[s];s++)if(c=l.split(":"),c.length==2){if(h=c[0].toLowerCase(),e=c[1].toLowerCase(),/^(background)\w*/.test(h)&&e.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(h)&&/^0\w+$/.test(e))continue;switch(h){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(r)||(o[s]=h.replace(/^mso-|-alt$/g,"")+":"+n(e));continue;case"horiz-align":o[s]="text-align:"+e;continue;case"vert-align":o[s]="vertical-align:"+e;continue;case"font-color":case"mso-foreground":o[s]="color:"+e;continue;case"mso-background":case"mso-highlight":o[s]="background:"+e;continue;case"mso-default-height":o[s]="min-height:"+n(e);continue;case"mso-default-width":o[s]="min-width:"+n(e);continue;case"mso-padding-between-alt":o[s]="border-collapse:separate;border-spacing:"+n(e);continue;case"text-line-through":(e=="single"||e=="double")&&(o[s]="text-decoration:line-through");continue;case"mso-zero-height":e=="yes"&&(o[s]="display:none");continue;case"margin":if(!/[1-9]/.test(e))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(h)||/text\-indent|padding|margin/.test(h)&&/\-[\d.]+/.test(e))continue;o[s]=h+":"+c[1]}return r+(o.length?' style="'+o.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(n){return r(n)?u(n):n}}(),function(){function i(n,t,i){return n.push(a),t+(i?1:-1)}function r(n,t){for(var i=0;i<t;i++)n.push(l)}function f(n,t,e,o){switch(n.type){case"root":for(var h=0,s;s=n.children[h++];)e&&s.type=="element"&&!u.$inlineWithA[s.tagName]&&h>1&&(i(t,o,!0),r(t,o)),f(s,t,e,o);break;case"text":v(n,t);break;case"element":y(n,t,e,o);break;case"comment":p(n,t,e)}return t}function v(n,i){n.parentNode.tagName=="pre"?i.push(n.data):i.push(c[n.parentNode.tagName]?t.html(n.data):n.data.replace(/[ ]{2}/g," &nbsp;"))}function y(n,e,o,s){var c="",a,l,y,v;if(n.attrs){c=[];a=n.attrs;for(l in a)c.push(l+(a[l]!==undefined?'="'+(h[l]?t.html(a[l]).replace(/["]/g,function(){return"&quot;"}):t.unhtml(a[l]))+'"':""));c=c.join(" ")}if(e.push("<"+n.tagName+(c?" "+c:"")+(u.$empty[n.tagName]?"/":"")+">"),o&&!u.$inlineWithA[n.tagName]&&n.tagName!="pre"&&n.children&&n.children.length&&(s=i(e,s,!0),r(e,s)),n.children&&n.children.length)for(y=0;v=n.children[y++];)o&&v.type=="element"&&!u.$inlineWithA[v.tagName]&&y>1&&(i(e,s),r(e,s)),f(v,e,o,s);u.$empty[n.tagName]||(o&&!u.$inlineWithA[n.tagName]&&n.tagName!="pre"&&n.children&&n.children.length&&(s=i(e,s),r(e,s)),e.push("<\/"+n.tagName+">"))}function p(n,t){t.push("<!--"+n.data+"-->")}function e(n,t){var i,r,u;if(n.type=="element"&&n.getAttr("id")==t)return n;if(n.children&&n.children.length)for(r=0;u=n.children[r++];)if(i=e(u,t))return i}function o(n,t,i){if(n.type=="element"&&n.tagName==t&&i.push(n),n.children&&n.children.length)for(var u=0,r;r=n.children[u++];)o(r,t,i)}function s(n,t){if(n.children&&n.children.length)for(var r=0,i;i=n.children[r];)s(i,t),i.parentNode&&(i.children&&i.children.length&&t(i),i.parentNode&&r++);else t(n)}var n=UE.uNode=function(n){this.type=n.type;this.data=n.data;this.tagName=n.tagName;this.parentNode=n.parentNode;this.attrs=n.attrs||{};this.children=n.children},h={href:1,src:1,_src:1,_href:1,cdata_data:1},c={style:1,script:1},l="    ",a="\n";n.createElement=function(t){return/[<>]/.test(t)?UE.htmlparser(t).children[0]:new n({type:"element",children:[],tagName:t})};n.createText=function(n,i){return new UE.uNode({type:"text",data:i?n:t.unhtml(n||"")})};n.prototype={toHtml:function(n){var t=[];return f(this,t,n,0),t.join("")},innerHTML:function(n){var r,i,f;if(this.type!="element"||u.$empty[this.tagName])return this;if(t.isString(n)){if(this.children)for(r=0;i=this.children[r++];)i.parentNode=null;for(this.children=[],f=UE.htmlparser(n),r=0;i=f.children[r++];)this.children.push(i),i.parentNode=this;return this}return f=new UE.uNode({type:"root",children:this.children}),f.toHtml()},innerText:function(t,i){if(this.type!="element"||u.$empty[this.tagName])return this;if(t){if(this.children)for(var f=0,r;r=this.children[f++];)r.parentNode=null;return this.children=[],this.appendChild(n.createText(t,i)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return this.type=="element"?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var t=this.parentNode,n=0,i;i=t.children[n];n++)if(i===this)return n==0?null:t.children[n-1]},nextSibling:function(){for(var n=this.parentNode,t=0,i;i=n.children[t++];)if(i===this)return n.children[t]},replaceChild:function(n,t){if(this.children){n.parentNode&&n.parentNode.removeChild(n);for(var i=0,r;r=this.children[i];i++)if(r===t)return this.children.splice(i,1,n),t.parentNode=null,n.parentNode=this,n}},appendChild:function(n){if(this.type=="root"||this.type=="element"&&!u.$empty[this.tagName]){this.children||(this.children=[]);n.parentNode&&n.parentNode.removeChild(n);for(var t=0,i;i=this.children[t];t++)if(i===n){this.children.splice(t,1);break}return this.children.push(n),n.parentNode=this,n}},insertBefore:function(n,t){if(this.children){n.parentNode&&n.parentNode.removeChild(n);for(var i=0,r;r=this.children[i];i++)if(r===t)return this.children.splice(i,0,n),n.parentNode=this,n}},insertAfter:function(n,t){if(this.children){n.parentNode&&n.parentNode.removeChild(n);for(var i=0,r;r=this.children[i];i++)if(r===t)return this.children.splice(i+1,0,n),n.parentNode=this,n}},removeChild:function(n,t){var r,i,u,f;if(this.children)for(r=0;i=this.children[r];r++)if(i===n){if(this.children.splice(r,1),i.parentNode=null,t&&i.children&&i.children.length)for(u=0;f=i.children[u];u++)this.children.splice(r+u,0,f),f.parentNode=this;return i}},getAttr:function(n){return this.attrs&&this.attrs[n.toLowerCase()]},setAttr:function(n,i){if(!n){delete this.attrs;return}if(this.attrs||(this.attrs={}),t.isObject(n))for(var r in n)n[r]?this.attrs[r.toLowerCase()]=n[r]:delete this.attrs[r];else i?this.attrs[n.toLowerCase()]=i:delete this.attrs[n]},getIndex:function(){for(var i=this.parentNode,n=0,t;t=i.children[n];n++)if(t===this)return n;return-1},getNodeById:function(n){var t,i,r;if(this.children&&this.children.length)for(i=0;r=this.children[i++];)if(t=e(r,n))return t},getNodesByTagName:function(n){n=t.trim(n).replace(/[ ]{2,}/g," ").split(" ");var r=[],i=this;return t.each(n,function(n){if(i.children&&i.children.length)for(var u=0,t;t=i.children[u++];)o(t,n,r)}),r},getStyle:function(n){var i=this.getAttr("style"),r,t;return i?(r=new RegExp("(^|;)\\s*"+n+":([^;]+)","i"),t=i.match(r),t&&t[0])?t[2]:"":""},setStyle:function(n,i){function f(n,i){var u=new RegExp("(^|;)\\s*"+n+":([^;]+;?)","gi");r=r.replace(u,"$1");i&&(r=n+":"+t.unhtml(i)+";"+r)}var r=this.getAttr("style"),u;if(r||(r=""),t.isObject(n))for(u in n)f(u,n[u]);else f(n,i);this.setAttr("style",t.trim(r))},traversal:function(n){return this.children&&this.children.length&&s(this,n),this}}}();b=UE.htmlparser=function(i,r){function h(n,t){if(a[n.tagName]){var i=o.createElement(a[n.tagName]);n.appendChild(i);i.appendChild(o.createText(t));n=i}else n.appendChild(o.createText(t))}function v(n,i,r){var e,s,l,h,c,f;if(e=d[i]){for(s=n;s.type!="root";){if(t.isArray(e)?t.indexOf(e,s.tagName)!=-1:e==s.tagName){n=s;l=!0;break}s=s.parentNode}l||(n=v(n,t.isArray(e)?e[0]:e))}if(h=new o({parentNode:n,type:"element",tagName:i.toLowerCase(),children:u.$empty[i]?null:[]}),r){for(c={};f=w.exec(r);)c[f[1].toLowerCase()]=k[f[1].toLowerCase()]?f[2]||f[3]||f[4]:t.unhtml(f[2]||f[3]||f[4]);h.attrs=c}return n.children.push(h),u.$empty[i]?n:h}function g(n,t){n.children.push(new o({type:"comment",data:t,parentNode:n}))}var l=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g,w=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,b={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1},p;i=i.replace(new RegExp(n.fillChar,"g"),"");r||(i=i.replace(new RegExp("[\\r\\t\\n"+(r?"":" ")+"]*<\/?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(r?"":" ")+"]*","g"),function(n,t){return t&&b[t.toLowerCase()]?n.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):n.replace(new RegExp("^[\\r\\n"+(r?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(r?"":" ")+"]+$"),"")}));for(var k={href:1,src:1},o=UE.uNode,d={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},a={ol:"li",ul:"li"},e,c=0,s=0,y=new o({type:"root",children:[]}),f=y;e=l.exec(i);){c=e.index;try{if(c>s&&h(f,i.slice(s,c)),e[3])u.$cdata[f.tagName]?h(f,e[0]):f=v(f,e[3].toLowerCase(),e[4]);else if(e[1]){if(f.type!="root")if(u.$cdata[f.tagName]&&!u.$cdata[e[1]])h(f,e[0]);else{for(p=f;f.type=="element"&&f.tagName!=e[1].toLowerCase();)if(f=f.parentNode,f.type=="root"){f=p;throw"break";}f=f.parentNode}}else e[2]&&g(f,e[2])}catch(nt){}s=l.lastIndex}return s<i.length&&h(f,i.slice(s)),y};k=UE.filterNode=function(){function n(i,r){var s,h,v,a,o,y,c,l,f,e;switch(i.type){case"element":if(s=r[i.tagName])if(s==="-")i.parentNode.removeChild(i);else if(t.isFunction(s))if(c=i.parentNode,l=i.getIndex(),s(i),i.parentNode){if(i.children)for(f=0;e=i.children[f];)n(e,r),e.parentNode&&f++}else for(f=l;e=c.children[f];)n(e,r),e.parentNode&&f++;else{if(h=s.$,h&&i.attrs){v={};for(o in h)a=i.getAttr(o),o=="style"&&t.isArray(h[o])&&(y=[],t.each(h[o],function(n){var t;(t=i.getStyle(n))&&y.push(n+":"+t)}),a=y.join(";")),a&&(v[o]=a);i.attrs=v}if(i.children)for(f=0;e=i.children[f];)n(e,r),e.parentNode&&f++}else if(u.$cdata[i.tagName])i.parentNode.removeChild(i);else for(c=i.parentNode,l=i.getIndex(),i.parentNode.removeChild(i,!0),f=l;e=c.children[f];)n(e,r),e.parentNode&&f++;break;case"comment":i.parentNode.removeChild(i)}}return function(i,r){var e,u,f;if(t.isEmptyObject(r))return i;for((e=r["-"])&&t.each(e.split(" "),function(n){r[n]="-"}),u=0;f=i.children[u];)n(f,r),f.parentNode&&u++;return i}}();UE.plugin=function(){var n={};return{register:function(i,r,u,f){u&&t.isFunction(u)&&(f=u,u=null);n[i]={optionName:u||i,execFn:r,afterDisabled:f}},load:function(i){t.each(n,function(n){var r=n.execFn.call(i);i.options[n.optionName]!==!1?r&&t.each(r,function(n,r){switch(r.toLowerCase()){case"shortcutkey":i.addshortcutkey(n);break;case"bindevents":t.each(n,function(n,t){i.addListener(t,n)});break;case"bindmultievents":t.each(t.isArray(n)?n:[n],function(n){var r=t.trim(n.type).split(/\s+/);t.each(r,function(t){i.addListener(t,n.handler)})});break;case"commands":t.each(n,function(n,t){i.commands[t]=n});break;case"outputrule":i.addOutputRule(n);break;case"inputrule":i.addInputRule(n);break;case"defaultoptions":i.setOpt(n)}}):n.afterDisabled&&n.afterDisabled.call(i)});t.each(UE.plugins,function(n){n.call(i)})},run:function(t,i){var r=n[t];r&&r.exeFn.call(i)}}}();l=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};o=UE.LocalStorage=function(){var n=window.localStorage;return{saveLocalData:function(t,i){return n?(n.setItem(t,i),!0):!1},getLocalData:function(t){return n?n.getItem(t)||null:null},removeItem:function(t){n&&n.removeItem(t)}}}(),function(){var n="UEditorPlusPref";UE.Editor.prototype.setPreferences=function(i,r){var f={},u;t.isString(i)?f[i]=r:f=i;u=o.getLocalData(n);u&&(u=t.str2json(u))?t.extend(u,f):u=f;u&&o.saveLocalData(n,t.json2str(u))};UE.Editor.prototype.getPreferences=function(i){var r=o.getLocalData(n);return r&&(r=t.str2json(r))?i?r[i]:r:null};UE.Editor.prototype.removePreferences=function(i){var r=o.getLocalData(n);r&&(r=t.str2json(r))&&(r[i]=undefined,delete r[i]);r&&o.saveLocalData(n,t.json2str(r))}}();UE.plugins.defaultfilter=function(){var n=this;n.setOpt({allowDivTransToP:!0,disabledTableInTable:!0,rgb2Hex:!0});n.addInputRule(function(r){function o(n){while(n&&n.type=="element"){if(n.tagName=="td")return!0;n=n.parentNode}return!1}var e=this.options.allowDivTransToP,f;r.traversal(function(r){var h,s,c,l;if(r.type=="element"){if(!u.$cdata[r.tagName]&&n.options.autoClearEmptyNode&&u.$inline[r.tagName]&&!u.$empty[r.tagName]&&(!r.attrs||t.isEmptyObject(r.attrs))){r.firstChild()?r.tagName=="span"&&(!r.attrs||t.isEmptyObject(r.attrs))&&r.parentNode.removeChild(r,!0):r.parentNode.removeChild(r);return}switch(r.tagName){case"style":case"script":r.setAttr({cdata_tag:r.tagName,cdata_data:r.innerHTML()||"",_ue_custom_node_:"true"});r.tagName="div";r.innerHTML("");break;case"a":(f=r.getAttr("href"))&&r.setAttr("_href",f);break;case"img":if((f=r.getAttr("src"))&&/^data:/.test(f)){r.parentNode.removeChild(r);break}r.setAttr("_src",r.getAttr("src"));break;case"span":i.webkit&&(f=r.getStyle("white-space"))&&/nowrap|normal/.test(f)&&(r.setStyle("white-space",""),n.options.autoClearEmptyNode&&t.isEmptyObject(r.attrs)&&r.parentNode.removeChild(r,!0));f=r.getAttr("id");f&&/^_baidu_bookmark_/i.test(f)&&r.parentNode.removeChild(r);break;case"p":(f=r.getAttr("align"))&&(r.setAttr("align"),r.setStyle("text-align",f));t.each(r.children,function(n){var t,i,u;if(n.type=="element"&&n.tagName=="p"){for(t=n.nextSibling(),r.parentNode.insertAfter(n,r),i=n;t;)u=t.nextSibling(),r.parentNode.insertAfter(t,i),i=t,t=u;return!1}});r.firstChild()||r.innerHTML(i.ie?"&nbsp;":"<br/>");break;case"div":if(r.getAttr("cdata_tag"))break;if(f=r.getAttr("class"),f&&/^line number\d+/.test(f))break;if(!e)break;for(s=UE.uNode.createElement("p");h=r.firstChild();)h.type!="text"&&UE.dom.dtd.$block[h.tagName]?s.firstChild()?(r.parentNode.insertBefore(s,r),s=UE.uNode.createElement("p")):r.parentNode.insertBefore(h,r):s.appendChild(h);s.firstChild()&&r.parentNode.insertBefore(s,r);r.parentNode.removeChild(r);break;case"dl":r.tagName="ul";break;case"dt":case"dd":r.tagName="li";break;case"li":c=r.getAttr("class");c&&/list\-/.test(c)||r.setAttr();l=r.getNodesByTagName("ol ul");UE.utils.each(l,function(n){r.parentNode.insertAfter(n,r)});break;case"td":case"th":case"caption":r.children&&r.children.length||r.appendChild(i.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":n.options.disabledTableInTable&&o(r)&&(r.parentNode.insertBefore(UE.uNode.createText(r.innerText()),r),r.parentNode.removeChild(r))}}})});n.addOutputRule(function(i){var r;i.traversal(function(i){if(i.type=="element"){if(n.options.autoClearEmptyNode&&u.$inline[i.tagName]&&!u.$empty[i.tagName]&&(!i.attrs||t.isEmptyObject(i.attrs))){i.firstChild()?i.tagName=="span"&&(!i.attrs||t.isEmptyObject(i.attrs))&&i.parentNode.removeChild(i,!0):i.parentNode.removeChild(i);return}switch(i.tagName){case"div":(r=i.getAttr("cdata_tag"))&&(i.tagName=r,i.appendChild(UE.uNode.createText(i.getAttr("cdata_data"))),i.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(r=i.getAttr("_href"))&&i.setAttr({href:t.html(r),_href:""});break;case"span":if(r=i.getAttr("id"),r&&/^_baidu_bookmark_/i.test(r)&&i.parentNode.removeChild(i),n.getOpt("rgb2Hex")){var f=i.getAttr("style");f&&i.setAttr("style",f.replace(/rgba?\(([\d,\s]+)\)/g,function(n,t){var r=t.split(","),u,i;if(r.length>3)return"";for(t="#",u=0;i=r[u++];)i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16),t+=i.length==1?"0"+i:i;return t.toUpperCase()}))}break;case"img":(r=i.getAttr("_src"))&&i.setAttr({src:i.getAttr("_src"),_src:""})}}})})};UE.commands.inserthtml={execCommand:function(r,f,e){var l=this,h,b,g,c,o,w,k,nt,y,p,d,tt,it,v,a;if(f&&l.fireEvent("beforeinserthtml",f)!==!0){if(h=l.selection.getRange(),b=h.document.createElement("div"),b.style.display="inline",e||(g=UE.htmlparser(f),l.options.filterRules&&UE.filterNode(g,l.options.filterRules),l.filterInputRule(g),f=g.toHtml()),b.innerHTML=t.trim(f),!h.collapsed&&(c=h.startContainer,n.isFillChar(c)&&h.setStartBefore(c),c=h.endContainer,n.isFillChar(c)&&h.setEndAfter(c),h.txtToElmBoundary(),h.endContainer&&h.endContainer.nodeType==1&&(c=h.endContainer.childNodes[h.endOffset],c&&n.isBr(c)&&h.setEndAfter(c)),h.startOffset==0&&(c=h.startContainer,n.isBoundaryNode(c,"firstChild")&&(c=h.endContainer,h.endOffset==(c.nodeType==3?c.nodeValue.length:c.childNodes.length)&&n.isBoundaryNode(c,"lastChild")&&(l.body.innerHTML="<p>"+(i.ie?"":"<br/>")+"<\/p>",h.setStart(l.body.firstChild,0).collapse(!0)))),h.collapsed||h.deleteContents(),h.startContainer.nodeType==1&&(o=h.startContainer.childNodes[h.startOffset],o&&n.isBlockElm(o)&&(v=o.previousSibling)&&n.isBlockElm(v)))){for(h.setEnd(v,v.childNodes.length).collapse();o.firstChild;)v.appendChild(o.firstChild);n.remove(o)}if(nt=0,h.inFillChar()&&(o=h.startContainer,n.isFillChar(o)?(h.setStartBefore(o).collapse(!0),n.remove(o)):n.isFillChar(o,!0)&&(o.nodeValue=o.nodeValue.replace(s,""),h.startOffset--,h.collapsed&&h.collapse(!0))),p=n.findParentByTagName(h.startContainer,"li",!0),p){while(o=b.firstChild){while(o&&(o.nodeType==3||!n.isBlockElm(o)||o.tagName=="HR"))a=o.nextSibling,h.insertNode(o).collapse(),d=o,o=a;if(o)if(/^(ol|ul)$/i.test(o.tagName)){while(o.firstChild)d=o.firstChild,n.insertAfter(p,o.firstChild),p=p.nextSibling;n.remove(o)}else a=o.nextSibling,tt=l.document.createElement("li"),n.insertAfter(p,tt),tt.appendChild(o),d=o,o=a,p=tt}p=n.findParentByTagName(h.startContainer,"li",!0);n.isEmptyBlock(p)&&n.remove(p);d&&h.setStartAfter(d).collapse(!0).select(!0)}else{while(o=b.firstChild){if(nt){for(it=l.document.createElement("p");o&&(o.nodeType==3||!u.$block[o.tagName]);)y=o.nextSibling,it.appendChild(o),o=y;it.firstChild&&(o=it)}if(h.insertNode(o),y=o.nextSibling,!nt&&o.nodeType==n.NODE_ELEMENT&&n.isBlockElm(o)&&(w=n.findParent(o,function(t){return n.isBlockElm(t)}),w&&w.tagName.toLowerCase()!="body"&&!(u[w.tagName][o.nodeName]&&o.parentNode===w))){if(u[w.tagName][o.nodeName])for(k=o.parentNode;k!==w;)v=k,k=k.parentNode;else v=w;n.breakParent(o,v||k);v=o.previousSibling;n.trimWhiteTextNode(v);v.childNodes.length||n.remove(v);!i.ie&&(a=o.nextSibling)&&n.isBlockElm(a)&&a.lastChild&&!n.isBr(a.lastChild)&&a.appendChild(l.document.createElement("br"));nt=1}if(a=o.nextSibling,!b.firstChild&&a&&n.isBlockElm(a)){h.setStart(a,0).collapse(!0);break}h.setEndAfter(o).collapse()}if(o=h.startContainer,y&&n.isBr(y)&&n.remove(y),n.isBlockElm(o)&&n.isEmptyNode(o))if(y=o.nextSibling)n.remove(o),y.nodeType==1&&u.$block[y.tagName]&&h.setStart(y,0).collapse(!0).shrinkBoundary();else try{o.innerHTML=i.ie?n.fillChar:"<br/>"}catch(rt){h.setStartBefore(o);n.remove(o)}try{h.select(!0)}catch(rt){}}setTimeout(function(){h=l.selection.getRange();h.scrollToView(l.autoHeightEnabled,l.autoHeightEnabled?n.getXY(l.iframe).y:0);l.fireEvent("afterinserthtml",f)},200)}}};UE.plugins.autotypeset=function(){function o(t,i){return!t||t.nodeType==3?0:n.isBr(t)?1:t&&t.parentNode&&l[t.tagName.toLowerCase()]?f&&f.contains(t)||t.getAttribute("pagebreak")?0:i?!n.isEmptyBlock(t):n.isEmptyBlock(t,new RegExp("[\\s"+n.fillChar+"]","g")):void 0}function s(t){t.style.cssText||(n.removeAttributes(t,["style"]),t.tagName.toLowerCase()=="span"&&n.hasNoAttributes(t)&&n.remove(t,!0))}function e(t,r){var b=this,w,tt,it,e,rt,d,p,l,k,y,nt,ut,g;if(r){if(!i.pasteFilter)return;w=b.document.createElement("div");w.innerHTML=r.html}else w=b.document.body;for(tt=n.getElementsByTagName(w,"*"),it=0;e=tt[it++];)if(b.fireEvent("excludeNodeinautotype",e)!==!0){if(i.clearFontSize&&e.style.fontSize&&(n.removeStyle(e,"font-size"),s(e)),i.clearFontFamily&&e.style.fontFamily&&(n.removeStyle(e,"font-family"),s(e)),o(e)){if(i.mergeEmptyline)for(y=e.nextSibling,rt=n.isBr(e);o(y);){if(l=y,y=l.nextSibling,rt&&(!y||y&&!n.isBr(y)))break;n.remove(l)}if(i.removeEmptyline&&n.inDoc(e,w)&&!c[e.parentNode.tagName.toLowerCase()]){if(n.isBr(e)&&(y=e.nextSibling,y&&!n.isBr(y)))continue;n.remove(e);continue}}if(o(e,!0)&&e.tagName!="SPAN"&&(i.indent&&(e.style.textIndent=i.indentValue),i.textAlign&&(e.style.textAlign=i.textAlign)),i.removeClass&&e.className&&!h[e.className.toLowerCase()]){if(f&&f.contains(e))continue;n.removeAttributes(e,["class"])}if(i.imageBlockLine&&e.tagName.toLowerCase()=="img"&&!e.getAttribute("emotion"))if(r){d=e;switch(i.imageBlockLine){case"left":case"right":case"none":for(p=d.parentNode;u.$inline[p.tagName]||p.tagName=="A";)p=p.parentNode;if(l=p,l.tagName=="P"&&n.getStyle(l,"text-align")=="center"&&!n.isBody(l)&&n.getChildCount(l,function(t){return!n.isBr(t)&&!n.isWhitespace(t)})==1)if(k=l.previousSibling,y=l.nextSibling,k&&y&&k.nodeType==1&&y.nodeType==1&&k.tagName==y.tagName&&n.isBlockElm(k)){for(k.appendChild(l.firstChild);y.firstChild;)k.appendChild(y.firstChild);n.remove(l);n.remove(y)}else n.setStyle(l,"text-align","");n.setStyle(d,"float",i.imageBlockLine);break;case"center":if(b.queryCommandValue("imagefloat")!="center"){for(p=d.parentNode,n.setStyle(d,"float","none"),l=d;p&&n.getChildCount(p,function(t){return!n.isBr(t)&&!n.isWhitespace(t)})==1&&(u.$inline[p.tagName]||p.tagName=="A");)l=p,p=p.parentNode;nt=b.document.createElement("p");n.setAttributes(nt,{style:"text-align:center"});l.parentNode.insertBefore(nt,l);nt.appendChild(l);n.setStyle(l,"float","")}}}else ut=b.selection.getRange(),ut.selectNode(e).select(),b.execCommand("imagefloat",i.imageBlockLine);i.removeEmptyNode&&i.removeTagNames[e.tagName.toLowerCase()]&&n.hasNoAttributes(e)&&n.isEmptyBlock(e)&&n.remove(e)}i.tobdc&&(g=UE.htmlparser(w.innerHTML),g.traversal(function(n){n.type=="text"&&(n.data=v(n.data))}),w.innerHTML=g.toHtml());i.bdc2sb&&(g=UE.htmlparser(w.innerHTML),g.traversal(function(n){n.type=="text"&&(n.data=a(n.data))}),w.innerHTML=g.toHtml());r&&(r.html=w.innerHTML)}function a(n){for(var i,r="",t=0;t<n.length;t++)i=n.charCodeAt(t),r+=i>=65281&&i<=65373?String.fromCharCode(n.charCodeAt(t)-65248):i==12288?String.fromCharCode(n.charCodeAt(t)-12256):n.charAt(t);return r}function v(n){var i,u,r;for(n=t.html(n),i="",u="",r=0;r<n.length;r++)n.charCodeAt(r)==32?i=i+String.fromCharCode(12288):n.charCodeAt(r)<127?i=i+String.fromCharCode(n.charCodeAt(r)+65248):i+=n.charAt(r);return i}function y(){var n=r.getPreferences("autotypeset");t.extend(r.options.autotypeset,n)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:t.extend({div:1},u.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var r=this,i=r.options.autotypeset,h={selectTdClass:1,pagebreak:1,anchorclass:1},c={li:1},l={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},f;i&&(y(),i.pasteFilter&&r.addListener("beforepaste",e),r.commands.autotypeset={execCommand:function(){r.removeListener("beforepaste",e);i.pasteFilter&&r.addListener("beforepaste",e);e.call(r)}})};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var t=this,i=n.findParentByTagName(t.iframe,"form",!1);if(i){if(t.fireEvent("beforesubmit")===!1)return;t.sync();i.submit()}}}}}});UE.plugin.register("background",function(){function s(n){var i={},r=n.split(";");return t.each(r,function(n){var r=n.indexOf(":"),u=t.trim(n.substr(0,r)).toLowerCase();u&&(i[u]=t.trim(n.substr(r+1)||""))}),i}function e(n){var i,f;if(n){i=[];for(f in n)n.hasOwnProperty(f)&&i.push(f+":"+n[f]+"; ");t.cssRule(u,i.length?"body{"+i.join("")+"}":"",r.document)}else t.cssRule(u,"",r.document)}var r=this,u="editor_background",f,o=new RegExp("body[\\s]*\\{(.+)\\}","i"),h=r.hasContents;return r.hasContents=function(){return r.queryCommandValue("background")?!0:h.apply(r,arguments)},{bindEvents:{getAllHtml:function(t,u){var f=this.body,e=n.getComputedStyle(f,"background-image"),c="",o,s,h;c=e.indexOf(r.options.imagePath)>0?e.substring(e.indexOf(r.options.imagePath),e.length-1).replace(/"|\(|\)/gi,""):e!="none"?e.replace(/url\("?|"?\)/gi,""):"";o='<style type="text/css">body{';s={"background-color":n.getComputedStyle(f,"background-color")||"#ffffff","background-image":c?"url("+c+")":"","background-repeat":n.getComputedStyle(f,"background-repeat")||"","background-position":i.ie?n.getComputedStyle(f,"background-position-x")+" "+n.getComputedStyle(f,"background-position-y"):n.getComputedStyle(f,"background-position"),height:n.getComputedStyle(f,"height")};for(h in s)s.hasOwnProperty(h)&&(o+=h+":"+s[h]+"; ");o+="}<\/style> ";u.push(o)},aftersetcontent:function(){f==!1&&e()}},inputRule:function(n){f=!1;t.each(n.getNodesByTagName("p"),function(n){var t=n.getAttr("data-background");t&&(f=!0,e(s(t)),n.parentNode.removeChild(n))})},outputRule:function(n){var r=this,i=(t.cssRule(u,r.document)||"").replace(/[\n\r]+/g,"").match(o);i&&n.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+t.trim(i[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/><\/p>'))},commands:{background:{execCommand:function(n,t){e(t)},queryCommandValue:function(){var i=this,n=(t.cssRule(u,i.document)||"").replace(/[\n\r]+/g,"").match(o);return n?s(n[1]):null},notNeedUndo:!0}}}});UE.commands.imagefloat={execCommand:function(t,i){var h=this,c=h.selection.getRange(),e,f,r,s,o;if(!c.collapsed&&(e=c.getClosedNode(),e&&e.tagName==="IMG"))switch(i){case"left":case"right":case"none":for(f=e.parentNode;u.$inline[f.tagName]||f.tagName=="A";)f=f.parentNode;if(r=f,r.tagName=="P"&&n.getStyle(r,"text-align")=="center"){if(!n.isBody(r)&&n.getChildCount(r,function(t){return!n.isBr(t)&&!n.isWhitespace(t)})==1)if(s=r.previousSibling,o=r.nextSibling,s&&o&&s.nodeType==1&&o.nodeType==1&&s.tagName==o.tagName&&n.isBlockElm(s)){for(s.appendChild(r.firstChild);o.firstChild;)s.appendChild(o.firstChild);n.remove(r);n.remove(o)}else n.setStyle(r,"text-align","");c.selectNode(e).select()}n.setStyle(e,"float",i=="none"?"":i);i=="none"&&n.removeAttributes(e,"align");break;case"center":if(h.queryCommandValue("imagefloat")!="center"){for(f=e.parentNode,n.setStyle(e,"float",""),n.removeAttributes(e,"align"),r=e;f&&n.getChildCount(f,function(t){return!n.isBr(t)&&!n.isWhitespace(t)})==1&&(u.$inline[f.tagName]||f.tagName=="A");)r=f,f=f.parentNode;c.setStartBefore(r).setCursor(!1);f=h.document.createElement("div");f.appendChild(r);n.setStyle(r,"float","");h.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+f.innerHTML+"<\/p>");r=h.document.getElementById("_img_parent_tmp");r.removeAttribute("id");r=r.firstChild;c.selectNode(r).select();o=r.parentNode.nextSibling;o&&n.isEmptyNode(o)&&n.remove(o)}}},queryCommandValue:function(){var r=this.selection.getRange(),t,i;return r.collapsed?"none":(t=r.getClosedNode(),t&&t.nodeType==1&&t.tagName=="IMG")?(i=n.getComputedStyle(t,"float")||t.getAttribute("align"),i=="none"&&(i=n.getComputedStyle(t.parentNode,"text-align")=="center"?"center":i),{left:1,right:1,center:1}[i]?i:"none"):"none"},queryCommandState:function(){var t=this.selection.getRange(),n;return t.collapsed?-1:(n=t.getClosedNode(),n&&n.nodeType===1&&n.tagName==="IMG")?0:-1}};UE.commands.insertimage={execCommand:function(i,r){var s,l,h,e,u,a;if(r=t.isArray(r)?r:[r],r.length){var o=this,c=o.selection.getRange(),f=c.getClosedNode();if(o.fireEvent("beforeinsertimage",r)!==!0){if(f&&/img/i.test(f.tagName)&&(f.className!="edui-faked-video"||f.className.indexOf("edui-upload-video")!=-1)&&!f.getAttribute("data-word-image"))s=r.shift(),l=s.floatStyle,delete s.floatStyle,n.setAttributes(f,s),o.execCommand("imagefloat",l),r.length>0&&(c.setStartAfter(f).setCursor(!1,!0),o.execCommand("insertimage",r));else{if(h=[],e="",u=r[0],r.length==1)e='<img src="'+u.src+'" '+(u._src?' _src="'+u._src+'" ':"")+(u.width?'width="'+u.width+'" ':"")+(u.height?' height="'+u.height+'" ':"")+(u.floatStyle=="left"||u.floatStyle=="right"?' style="float:'+u.floatStyle+';"':"")+(u.title&&u.title!=""?' title="'+u.title+'"':"")+(u.border&&u.border!="0"?' border="'+u.border+'"':"")+(u.alt&&u.alt!=""?' alt="'+u.alt+'"':"")+(u.hspace&&u.hspace!="0"?' hspace = "'+u.hspace+'"':"")+(u.vspace&&u.vspace!="0"?' vspace = "'+u.vspace+'"':"")+"/>",u.floatStyle=="center"&&(e='<p style="text-align: center">'+e+"<\/p>"),h.push(e);else for(a=0;u=r[a++];)e="<p "+(u.floatStyle=="center"?'style="text-align: center" ':"")+'><img src="'+u.src+'" '+(u.width?'width="'+u.width+'" ':"")+(u._src?' _src="'+u._src+'" ':"")+(u.height?' height="'+u.height+'" ':"")+' style="'+(u.floatStyle&&u.floatStyle!="center"?"float:"+u.floatStyle+";":"")+(u.border||"")+'" '+(u.title?' title="'+u.title+'"':"")+" /><\/p>",h.push(e);o.execCommand("insertHtml",h.join(""))}o.fireEvent("afterinsertimage",r)}}}};UE.plugins.justify=function(){var f=this,i=n.isBlockElm,r={left:1,right:1,center:1,justify:1},u=function(r,u){var v=r.createBookmark(),c=function(t){return t.nodeType==1?t.tagName.toLowerCase()!="br"&&!n.isBookmarkNode(t):!n.isWhitespace(t)},o,s,a;r.enlarge(!0);for(var h=r.createBookmark(),f=n.getNextDomNode(h.start,!1,c),e=r.cloneRange(),l;f&&!(n.getPosition(f,h.end)&n.POSITION_FOLLOWING);)if(f.nodeType!=3&&i(f))f=n.getNextDomNode(f,!0,c);else{for(e.setStartBefore(f);f&&f!==h.end&&!i(f);)l=f,f=n.getNextDomNode(f,!1,null,function(n){return!i(n)});e.setEndAfter(l);o=e.getCommonAncestor();!n.isBody(o)&&i(o)?(n.setStyles(o,t.isString(u)?{"text-align":u}:u),f=o):(s=r.document.createElement("p"),n.setStyles(s,t.isString(u)?{"text-align":u}:u),a=e.extractContents(),s.appendChild(a),e.insertNode(s),f=s);f=n.getNextDomNode(f,!1,c)}return r.moveToBookmark(h).moveToBookmark(v)};UE.commands.justify={execCommand:function(t,i){var r=this.selection.getRange(),f;return r.collapsed&&(f=this.document.createTextNode("p"),r.insertNode(f)),u(r,i),f&&(r.setStartBefore(f).collapse(!0),n.remove(f)),r.select(),!0},queryCommandValue:function(){var i=this.selection.getStart(),t=n.getComputedStyle(i,"text-align");return r[t]?t:"left"},queryCommandState:function(){var t=this.selection.getStart(),i=t&&n.findParentByTagName(t,["td","th","caption"],!0);return i?-1:0}}};UE.plugins.font=function(){function a(t){for(var i;i=t.parentNode;)if(i.tagName=="SPAN"&&n.getChildCount(i,function(t){return!n.isBookmarkNode(t)&&!n.isBr(t)})==1)i.style.cssText+=t.style.cssText,n.remove(t,!0),t=i;else break}function v(i,r,u){var f,e;c[r]&&(i.adjustmentBoundary(),i.collapsed||i.startContainer.nodeType!=1||(f=i.startContainer.childNodes[i.startOffset],f&&n.isTagNode(f,"span")&&(e=i.createBookmark(),t.each(n.getElementsByTagName(f,"span"),function(t){t.parentNode&&!n.isBookmarkNode(t)&&(r!="backcolor"||n.getComputedStyle(t,"background-color").toLowerCase()!==u)&&(n.removeStyle(t,c[r]),t.style.cssText.replace(/^\s+$/,"").length==0&&n.remove(t,!0))}),i.moveToBookmark(e))))}function e(r,f,e){var h=r.collapsed,s=r.createBookmark(),o;if(h)for(o=s.start.parentNode;u.$inline[o.tagName];)o=o.parentNode;else o=n.getCommonAncestor(s.start,s.end);t.each(n.getElementsByTagName(o,"span"),function(t){var r,u;if(t.parentNode&&!n.isBookmarkNode(t)){if(/\s*border\s*:\s*none;?\s*/i.test(t.style.cssText)){/^\s*border\s*:\s*none;?\s*$/.test(t.style.cssText)?n.remove(t,!0):n.removeStyle(t,"border");return}if(/border/i.test(t.style.cssText)&&t.parentNode.tagName=="SPAN"&&/border/i.test(t.parentNode.style.cssText)&&(t.style.cssText=t.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),!(f=="fontborder"&&e=="none"))for(r=t.nextSibling;r&&r.nodeType==1&&r.tagName=="SPAN";){if(n.isBookmarkNode(r)&&f=="fontborder"){t.appendChild(r);r=t.nextSibling;continue}if(r.style.cssText==t.style.cssText&&(n.moveChild(r,t),n.remove(r)),t.nextSibling===r)break;r=t.nextSibling}a(t);i.ie&&i.version>8&&(u=n.findParent(t,function(n){return n.tagName=="SPAN"&&/background-color/.test(n.style.cssText)}),u&&!/background-color/.test(t.style.cssText)&&(t.style.backgroundColor=u.style.backgroundColor))}});r.moveToBookmark(s);v(r,f,e)}var r=this,h={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},l=r.getLang(),f={underline:1,strikethrough:1,fontborder:1},c={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"},o;r.setOpt({fontfamily:[{name:"default",val:"default"},{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312,SimKai"},{name:"heiti",val:"黑体,SimHei"},{name:"lishu",val:"隶书,SimLi"},{name:"arial",val:"arial,helvetica,sans-serif"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});r.addInputRule(function(n){t.each(n.getNodesByTagName("u s del font strike"),function(n){var i,t,r;if(n.tagName=="font"){i=[];for(t in n.attrs)switch(t){case"size":i.push("font-size:"+({"1":"10","2":"12","3":"16","4":"18","5":"24","6":"32","7":"48"}[n.attrs[t]]||n.attrs[t])+"px");break;case"color":i.push("color:"+n.attrs[t]);break;case"face":i.push("font-family:"+n.attrs[t]);break;case"style":i.push(n.attrs[t])}n.attrs={style:i.join(";")}}else r=n.tagName=="u"?"underline":"line-through",n.attrs={style:(n.getAttr("style")||"")+"text-decoration:"+r+";"};n.tagName="span"})});for(o in h)(function(t,o){UE.commands[t]={execCommand:function(r,u){var a,h,c,l,v;if(u=u||(this.queryCommandState(r)?"none":r==="underline"?"underline":r==="fontborder"?"1px solid #000":"line-through"),a=this,h=this.selection.getRange(),u==="default")h.collapsed&&(c=a.document.createTextNode("font"),h.insertNode(c).select()),a.execCommand("removeFormat","span,a",o),c&&(h.setStartBefore(c).collapse(!0),n.remove(c)),e(h,r,u),h.select();else if(h.collapsed){if(l=n.findParentByTagName(h.startContainer,"span",!0),c=a.document.createTextNode("font"),!l||l.children.length||l[i.ie?"innerText":"textContent"].replace(s,"").length){if(h.insertNode(c),h.selectNode(c).select(),l=h.document.createElement("span"),f[t]){if(n.findParentByTagName(c,"a",!0)){h.setStartBefore(c).setCursor();n.remove(c);return}a.execCommand("removeFormat","span,a",o)}if(l.style.cssText=o+":"+u,c.parentNode.insertBefore(l,c),!i.ie||i.ie&&i.version===9)for(v=l.parentNode;!n.isBlockElm(v);)v.tagName==="SPAN"&&(l.style.cssText=v.style.cssText+";"+l.style.cssText),v=v.parentNode;y?setTimeout(function(){h.setStart(l,0).collapse(!0);e(h,r,u);h.select()}):(h.setStart(l,0).collapse(!0),e(h,r,u),h.select())}else h.insertNode(c),f[t]&&(h.selectNode(c).select(),a.execCommand("removeFormat","span,a",o,null),l=n.findParentByTagName(c,"span",!0),h.setStartBefore(c)),l&&(l.style.cssText+=";"+o+":"+u),h.collapse(!0).select();n.remove(c)}else f[t]&&a.queryCommandValue(t)&&a.execCommand("removeFormat","span,a",o),h=a.selection.getRange(),h.applyInlineStyle("span",{style:o+":"+u}),e(h,r,u),h.select();return!0},queryCommandValue:function(t){var s=this.selection.getStart(),i,e,a,f,h,v,y,c,p;if(t==="underline"||t==="strikethrough"){for(e=s;e&&!n.isBlockElm(e)&&!n.isBody(e);){if(e.nodeType===1&&(a=n.getComputedStyle(e,o),a!=="none"))return a;e=e.parentNode}return"none"}if(t==="fontborder"){for(f=s;f&&u.$inline[f.tagName];){if((h=n.getComputedStyle(f,"border"))&&/1px/.test(h)&&/solid/.test(h))return h;f=f.parentNode}return""}if(t==="FontSize")return(i=n.getComputedStyle(s,o),f=/^([\d\.]+)(\w+)$/.exec(i),f)?Math.floor(f[1])+f[2]:i;if(t==="FontFamily"){for(i=n.getComputedStyle(s,o),i=i.replace(/['"]/g,""),i=i.replace(/\s*,\s*/g,","),v=l.fontfamily.default,y=r.options.fontfamily||[],c=0;c<y.length;c++)if(p=y[c],p.val===i){v=i;break}return v}return n.getComputedStyle(s,o)},queryCommandState:function(n){if(!f[n])return 0;var t=this.queryCommandValue(n);return n==="fontborder"?/1px/.test(t)&&/solid/.test(t):n==="underline"?/underline/.test(t):/line\-through/.test(t)}}})(o,h[o])};UE.plugins.link=function(){function r(t){var i=t.startContainer,r=t.endContainer;(i=n.findParentByTagName(i,"a",!0))&&t.setStartBefore(i);(r=n.findParentByTagName(r,"a",!0))&&t.setEndAfter(r)}function u(u,f,e){var s=u.cloneRange(),l=e.queryCommandValue("link"),o,h,c;r(u=u.adjustmentBoundary());o=u.startContainer;o.nodeType==1&&l&&(o=o.childNodes[u.startOffset],o&&o.nodeType==1&&o.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(o[i.ie?"innerText":"textContent"])&&(o[i.ie?"innerText":"textContent"]=t.html(f.textValue||f.href)));(!s.collapsed||l)&&(u.removeInlineStyle("a"),s=u.cloneRange());s.collapsed?(h=u.document.createElement("a"),c="",f.textValue?(c=t.html(f.textValue),delete f.textValue):c=t.html(f.href),n.setAttributes(h,f),o=n.findParentByTagName(s.startContainer,"a",!0),o&&n.isInNodeEndBoundary(s,o)&&u.setStartAfter(o).collapse(!0),h[i.ie?"innerText":"textContent"]=c,u.insertNode(h).selectNode(h)):u.applyInlineStyle("a",f)}UE.commands.unlink={execCommand:function(){var t=this.selection.getRange(),i;(!t.collapsed||n.findParentByTagName(t.startContainer,"a",!0))&&(i=t.createBookmark(),r(t),t.removeInlineStyle("a").moveToBookmark(i).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};UE.commands.link={execCommand:function(n,i){var r;i._href&&(i._href=t.unhtml(i._href,/[<">]/g));i.href&&(i.href=t.unhtml(i.href,/[<">]/g));i.textValue&&(i.textValue=t.unhtml(i.textValue,/[<">]/g));u(r=this.selection.getRange(),i,this);r.collapse().select(!0)},queryCommandValue:function(){var t=this.selection.getRange(),i,o,f,e,s,r;if(t.collapsed){if(i=t.startContainer,i=i.nodeType==1?i:i.parentNode,i&&(i=n.findParentByTagName(i,"a",!0))&&!n.isInNodeEndBoundary(t,i))return i}else{t.shrinkBoundary();var h=t.startContainer.nodeType==3||!t.startContainer.childNodes[t.startOffset]?t.startContainer:t.startContainer.childNodes[t.startOffset],c=t.endContainer.nodeType==3||t.endOffset==0?t.endContainer:t.endContainer.childNodes[t.endOffset-1],u=t.getCommonAncestor();if(i=n.findParentByTagName(u,"a",!0),!i&&u.nodeType==1)for(o=u.getElementsByTagName("a"),s=0;r=o[s++];)if(f=n.getPosition(r,h),e=n.getPosition(r,c),(f&n.POSITION_FOLLOWING||f&n.POSITION_CONTAINS)&&(e&n.POSITION_PRECEDING||e&n.POSITION_CONTAINS)){i=r;break}return i}},queryCommandState:function(){var n=this.selection.getRange().getClosedNode(),t=n&&(n.className=="edui-faked-video"||n.className.indexOf("edui-upload-video")!=-1);return t?-1:0}}};UE.plugins.insertframe=function(){function t(){n._iframe&&delete n._iframe}var n=this;n.addListener("selectionchange",function(){t()})};UE.commands.scrawl={queryCommandState:function(){return i.ie&&i.version<=8?-1:0}};UE.plugins.removeformat=function(){var t=this;t.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});t.commands.removeformat={execCommand:function(t,r,e,o,s){function y(n){var t,r,u;if(n.nodeType==3||n.tagName.toLowerCase()!="span")return 0;if(i.ie&&(t=n.attributes,t.length)){for(r=0,u=t.length;r<u;r++)if(t[r].specified)return 0;return 1}return!n.attributes.length}function w(t){var k=t.createBookmark(),o,r,w,f,i,a,b;for(t.collapsed&&t.enlarge(!0),s||(o=n.findParentByTagName(t.startContainer,"a",!0),o&&t.setStartBefore(o),o=n.findParentByTagName(t.endContainer,"a",!0),o&&t.setEndAfter(o)),h=t.createBookmark(),i=h.start;(c=i.parentNode)&&!n.isBlockElm(c);)n.breakParent(i,c),n.clearEmptySibling(i);if(h.end){for(i=h.end;(c=i.parentNode)&&!n.isBlockElm(c);)n.breakParent(i,c),n.clearEmptySibling(i);for(r=n.getNextDomNode(h.start,!1,v);r;){if(r==h.end)break;w=n.getNextDomNode(r,!0,v);u.$empty[r.tagName.toLowerCase()]||n.isBookmarkNode(r)||(p.test(r.tagName)?e?(n.removeStyle(r,e),y(r)&&e!="text-decoration"&&n.remove(r,!0)):n.remove(r,!0):!0&&(n.removeAttributes(r,l),y(r)&&n.remove(r,!0)));r=w}}for(f=h.start.parentNode,!n.isBlockElm(f)||u.$tableContent[f.tagName]||u.$list[f.tagName]||n.removeAttributes(f,l),f=h.end.parentNode,h.end&&n.isBlockElm(f)&&!u.$tableContent[f.tagName]&&!u.$list[f.tagName]&&n.removeAttributes(f,l),t.moveToBookmark(h).moveToBookmark(k),i=t.startContainer,b=t.collapsed;i.nodeType==1&&n.isEmptyNode(i)&&u.$removeEmpty[i.tagName];)a=i.parentNode,t.setStartBefore(i),t.startContainer===t.endContainer&&t.endOffset--,n.remove(i),i=a;if(!b)for(i=t.endContainer;i.nodeType==1&&n.isEmptyNode(i)&&u.$removeEmpty[i.tagName];)a=i.parentNode,t.setEndBefore(i),n.remove(i),i=a}var p=new RegExp("^(?:"+(r||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),l=e?[]:(o||this.options.removeFormatAttributes).split(","),a=new f.Range(this.document),h,c,v=function(n){return n.nodeType==1};a=this.selection.getRange();w(a);a.select()}}};UE.plugins.blockquote=function(){function t(t){return n.filterNodeList(t.selection.getStartElementPath(),"blockquote")}var i=this;i.commands.blockquote={execCommand:function(i,r){var l=this.selection.getRange(),c=t(this),b=u.blockquote,nt=l.createBookmark(),k,a,g,v,w;if(c){var y=l.startContainer,s=n.isBlockElm(y)?y:n.findParent(y,function(t){return n.isBlockElm(t)}),p=l.endContainer,h=n.isBlockElm(p)?p:n.findParent(p,function(t){return n.isBlockElm(t)});for(s=n.findParentByTagName(s,"li",!0)||s,h=n.findParentByTagName(h,"li",!0)||h,s.tagName=="LI"||s.tagName=="TD"||s===c||n.isBody(s)?n.remove(c,!0):n.breakParent(s,c),s!==h&&(c=n.findParentByTagName(h,"blockquote"),c&&(h.tagName=="LI"||h.tagName=="TD"||n.isBody(h)?c.parentNode&&n.remove(c,!0):n.breakParent(h,c))),k=n.getElementsByTagName(this.document,"blockquote"),v=0;a=k[v++];)a.childNodes.length?n.getPosition(a,s)&n.POSITION_FOLLOWING&&n.getPosition(a,h)&n.POSITION_PRECEDING&&n.remove(a,!0):n.remove(a)}else{for(var e=l.cloneRange(),f=e.startContainer.nodeType==1?e.startContainer:e.startContainer.parentNode,o=f,d=1;;){if(n.isBody(f)){o!==f?l.collapsed?(e.selectNode(o),d=0):e.setStartBefore(o):e.setStart(f,0);break}if(!b[f.tagName]){l.collapsed?e.selectNode(o):e.setStartBefore(o);break}o=f;f=f.parentNode}if(d)for(o=f=f=e.endContainer.nodeType==1?e.endContainer:e.endContainer.parentNode;;){if(n.isBody(f)){o!==f?e.setEndAfter(o):e.setEnd(f,f.childNodes.length);break}if(!b[f.tagName]){e.setEndAfter(o);break}o=f;f=f.parentNode}for(f=l.document.createElement("blockquote"),n.setAttributes(f,r),f.appendChild(e.extractContents()),e.insertNode(f),g=n.getElementsByTagName(f,"blockquote"),v=0;w=g[v++];)w.parentNode&&n.remove(w,!0)}l.moveToBookmark(nt).select()},queryCommandState:function(){return t(this)?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(t){var o=this,r=o.selection.getRange();if(r.collapsed)return r;for(var u=r.createBookmark(),f=u.end,e=function(t){return!n.isBr(t)&&!n.isWhitespace(t)},i=n.getNextDomNode(u.start,!1,e);i&&n.getPosition(i,f)&n.POSITION_PRECEDING;)if(i.nodeType==3&&(i.nodeValue=i.nodeValue[t=="touppercase"?"toUpperCase":"toLowerCase"]()),i=n.getNextDomNode(i,!0,e),i===f)break;r.moveToBookmark(u).select()}};UE.commands.indent={execCommand:function(){var n=this,t=n.queryCommandState("indent")?"0em":n.options.indentValue||"2em";n.execCommand("Paragraph","p",{style:"text-indent:"+t})},queryCommandState:function(){var t=n.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return t&&t.style.textIndent&&parseInt(t.style.textIndent)?1:0}};UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands.preview={execCommand:function(){var t=window.open("","_blank",""),n=t.document;n.open();n.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script><\/head><body><div>"+this.getContent(null,null,!0)+"<\/div><\/body><\/html>");n.close()},notNeedUndo:1};UE.plugins.selectall=function(){var t=this;t.commands.selectall={execCommand:function(){var u=this,t=u.body,r=u.selection.getRange();r.selectNodeContents(t);n.isEmptyBlock(t)&&(i.opera&&t.firstChild&&t.firstChild.nodeType==1&&r.setStartAtFirst(t.firstChild),r.collapse(!0));r.select(!0)},notNeedUndo:1};t.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var u=this,r=n.isBlockElm,f=["TD","LI","PRE"],e=function(i,u,e,o){var p=i.createBookmark(),v=function(t){return t.nodeType==1?t.tagName.toLowerCase()!="br"&&!n.isBookmarkNode(t):!n.isWhitespace(t)},s,h;i.enlarge(!0);for(var l=i.createBookmark(),c=n.getNextDomNode(l.start,!1,v),a=i.cloneRange(),y;c&&!(n.getPosition(c,l.end)&n.POSITION_FOLLOWING);)if(c.nodeType!==3&&r(c))c=n.getNextDomNode(c,!0,v);else{for(a.setStartBefore(c);c&&c!==l.end&&!r(c);)y=c,c=n.getNextDomNode(c,!1,null,function(n){return!r(n)});a.setEndAfter(y);s=i.document.createElement(u);e&&(n.setAttributes(s,e),o&&o==="customstyle"&&e.style&&(s.style.cssText=e.style));s.appendChild(a.extractContents());n.isEmptyNode(s)&&n.fillChar(i.document,s);a.insertNode(s);h=s.parentNode;r(h)&&!n.isBody(s.parentNode)&&t.indexOf(f,h.tagName)===-1&&(o&&o==="customstyle"||(h.getAttribute("dir")&&s.setAttribute("dir",h.getAttribute("dir")),h.style.cssText&&(s.style.cssText=h.style.cssText+";"+s.style.cssText),h.style.textAlign&&!s.style.textAlign&&(s.style.textAlign=h.style.textAlign),h.style.textIndent&&!s.style.textIndent&&(s.style.textIndent=h.style.textIndent),h.style.padding&&!s.style.padding&&(s.style.padding=h.style.padding)),e&&/h\d/i.test(h.tagName)&&!/h\d/i.test(s.tagName)?(n.setAttributes(h,e),o&&o==="customstyle"&&e.style&&(h.style.cssText=e.style),n.remove(s.parentNode,!0),s=h):n.remove(s.parentNode,!0));c=t.indexOf(f,h.tagName)!==-1?h:s;c=n.getNextDomNode(c,!1,v)}return i.moveToBookmark(l).moveToBookmark(p)};u.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});u.commands.paragraph={execCommand:function(t,r,u,f){var o=this.selection.getRange(),s,h,c;return o.collapsed&&(s=this.document.createTextNode("p"),o.insertNode(s),i.ie&&(h=s.previousSibling,h&&n.isWhitespace(h)&&n.remove(h),h=s.nextSibling,h&&n.isWhitespace(h)&&n.remove(h))),o=e(o,r,u,f),s&&(o.setStartBefore(s).collapse(!0),pN=s.parentNode,n.remove(s),n.isBlockElm(pN)&&n.isEmptyNode(pN)&&n.fillNode(this.document,pN)),i.gecko&&o.collapsed&&o.startContainer.nodeType===1&&(c=o.startContainer.childNodes[o.startOffset],c&&c.nodeType===1&&c.tagName.toLowerCase()===r&&o.setStart(c,0).collapse(!0)),o.select(),!0},queryCommandValue:function(){var t=n.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return t?t.tagName.toLowerCase():""}}},function(){var t=n.isBlockElm,i=function(t){return n.filterNodeList(t.selection.getStartElementPath(),function(n){return n&&n.nodeType==1&&n.getAttribute("dir")})},r=function(r,u,f){var a,l=function(t){return t.nodeType==1?!n.isBookmarkNode(t):!n.isWhitespace(t)},v=i(u),s,h,p;if(v&&r.collapsed)return v.setAttribute("dir",f),r;a=r.createBookmark();r.enlarge(!0);for(var c=r.createBookmark(),e=n.getNextDomNode(c.start,!1,l),o=r.cloneRange(),y;e&&!(n.getPosition(e,c.end)&n.POSITION_FOLLOWING);)if(e.nodeType!=3&&t(e))e=n.getNextDomNode(e,!0,l);else{for(o.setStartBefore(e);e&&e!==c.end&&!t(e);)y=e,e=n.getNextDomNode(e,!1,null,function(n){return!t(n)});o.setEndAfter(y);s=o.getCommonAncestor();!n.isBody(s)&&t(s)?(s.setAttribute("dir",f),e=s):(h=r.document.createElement("p"),h.setAttribute("dir",f),p=o.extractContents(),h.appendChild(p),o.insertNode(h),e=h);e=n.getNextDomNode(e,!1,l)}return r.moveToBookmark(c).moveToBookmark(a)};UE.commands.directionality={execCommand:function(t,i){var u=this.selection.getRange(),f;return u.collapsed&&(f=this.document.createTextNode("d"),u.insertNode(f)),r(u,this,i),f&&(u.setStartBefore(f).collapse(!0),n.remove(f)),u.select(),!0},queryCommandValue:function(){var n=i(this);return n?n.getAttribute("dir"):"ltr"}}}();UE.plugins.horizontal=function(){var t=this;t.commands.horizontal={execCommand:function(n){var r=this,i,u,t;if(r.queryCommandState(n)!==-1)return r.execCommand("insertHtml","<hr>"),i=r.selection.getRange(),u=i.startContainer,u.nodeType!=1||u.childNodes[i.startOffset]||(t=u.childNodes[i.startOffset-1])&&t.nodeType==1&&t.tagName=="HR"&&(r.options.enterTag=="p"?(t=r.document.createElement("p"),i.insertNode(t),i.setStart(t,0).setCursor()):(t=r.document.createElement("br"),i.insertNode(t),i.setStartBefore(t).setCursor())),!0},queryCommandState:function(){return n.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};t.addListener("delkeydown",function(t,i){var r=this.selection.getRange(),f,u;return r.txtToElmBoundary(!0),n.isStartInblock(r)&&(f=r.startContainer,u=f.previousSibling,u&&n.isTagNode(u,"hr"))?(n.remove(u),r.select(),n.preventDefault(i),!0):void 0})};UE.commands.time=UE.commands.date={execCommand:function(n,t){function r(n,t){var i=("0"+n.getHours()).slice(-2),r=("0"+n.getMinutes()).slice(-2),u=("0"+n.getSeconds()).slice(-2);return t=t||"hh:ii:ss",t.replace(/hh/gi,i).replace(/ii/gi,r).replace(/ss/gi,u)}function u(n,t){var i=("000"+n.getFullYear()).slice(-4),r=i.slice(-2),u=("0"+(n.getMonth()+1)).slice(-2),f=("0"+n.getDate()).slice(-2);return t=t||"yyyy-mm-dd",t.replace(/yyyy/gi,i).replace(/yy/gi,r).replace(/mm/gi,u).replace(/dd/gi,f)}var i=new Date;this.execCommand("insertHtml",n=="time"?r(i,t):u(i,t))}};UE.plugins.rowspacing=function(){var t=this;t.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});t.commands.rowspacing={execCommand:function(n,t,i){return this.execCommand("paragraph","p",{style:"margin-"+i+":"+t+"px"}),!0},queryCommandValue:function(t,i){var u=n.filterNodeList(this.selection.getStartElementPath(),function(t){return n.isBlockElm(t)}),r;return u?(r=n.getComputedStyle(u,"margin-"+i).replace(/[^\d]/g,""),r?r:0):0}}};UE.plugins.lineheight=function(){var t=this;t.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});t.commands.lineheight={execCommand:function(n,t){return this.execCommand("paragraph","p",{style:"line-height:"+(t=="1"?"normal":t+"em")}),!0},queryCommandValue:function(){var i=n.filterNodeList(this.selection.getStartElementPath(),function(t){return n.isBlockElm(t)}),t;if(i)return t=n.getComputedStyle(i,"line-height"),t=="normal"?1:t.replace(/[^\d.]*/gi,"")}}};UE.plugins.insertcode=function(){var r=this,f;r.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css","c#":"C#",delphi:"Delphi",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",js:"Javascript",pl:"Perl",php:"PHP",plain:"Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"VB",xml:"XML",mind:"Mind"});r.commands.insertcode={execCommand:function(r,f){var s=this,h=s.selection.getRange(),o=n.findParentByTagName(h.startContainer,"pre",!0),e,a,l,c;o?o.className="brush:"+f+";toolbar:false;":(e="",h.collapsed?e=i.ie&&i.ie11below?i.version<=8?"&nbsp;":"":"<br/>":(a=h.extractContents(),l=s.document.createElement("div"),l.appendChild(a),t.each(UE.filterNode(UE.htmlparser(l.innerHTML.replace(/[\r\t]/g,"")),s.options.filterTxtRules).children,function(n){if(i.ie&&i.ie11below&&i.version>8)n.type=="element"?n.tagName=="br"?e+="\n":u.$empty[n.tagName]||(t.each(n.children,function(t){t.type=="element"?t.tagName=="br"?e+="\n":u.$empty[n.tagName]||(e+=t.innerText()):e+=t.data}),/\n$/.test(e)||(e+="\n")):e+=n.data+"\n",!n.nextSibling()&&/\n$/.test(e)&&(e=e.replace(/\n$/,""));else if(i.ie&&i.ie11below)n.type=="element"?n.tagName=="br"?e+="<br>":u.$empty[n.tagName]||(t.each(n.children,function(t){t.type=="element"?t.tagName=="br"?e+="<br>":u.$empty[n.tagName]||(e+=t.innerText()):e+=t.data}),/br>$/.test(e)||(e+="<br>")):e+=n.data+"<br>",!n.nextSibling()&&/<br>$/.test(e)&&(e=e.replace(/<br>$/,""));else if(e+=n.type=="element"?u.$empty[n.tagName]?"":n.innerText():n.data,!/br\/?\s*>$/.test(e)){if(!n.nextSibling())return;e+="<br>"}})),s.execCommand("inserthtml",'<pre id="coder"class="brush:'+f+';toolbar:false">'+e+"<\/pre>",!0),o=s.document.getElementById("coder"),n.removeAttributes(o,"id"),c=o.previousSibling,c&&(c.nodeType==3&&c.nodeValue.length==1&&i.ie&&i.version==6||n.isEmptyBlock(c))&&n.remove(c),h=s.selection.getRange(),n.isEmptyBlock(o)?h.setStart(o,0).setCursor(!1,!0):h.selectNodeContents(o).select())},queryCommandValue:function(){var i=this.selection.getStartElementPath(),n="";return t.each(i,function(t){if(t.nodeName=="PRE"){var i=t.className.match(/brush:([^;]+)/);return n=i&&i[1]?i[1]:"",!1}}),n}};r.addInputRule(function(n){t.each(n.getNodesByTagName("pre"),function(n){var r=n.getNodesByTagName("br"),u;if(r.length){i.ie&&i.ie11below&&i.version>8&&t.each(r,function(n){var t=UE.uNode.createText("\n");n.parentNode.insertBefore(t,n);n.parentNode.removeChild(n)});return}i.ie&&i.ie11below&&i.version>8||(u=n.innerText().split(/\n/),n.innerHTML(""),t.each(u,function(t){t.length&&n.appendChild(UE.uNode.createText(t));n.appendChild(UE.uNode.createElement("br"))}))})});r.addOutputRule(function(n){t.each(n.getNodesByTagName("pre"),function(n){var i="";t.each(n.children,function(n){i+=n.type=="text"?n.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):n.tagName=="br"?"\n":u.$empty[n.tagName]?n.innerText():""});n.innerText(i.replace(/(&nbsp;|\n)+$/,""))})});r.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};f=r.queryCommandState;r.queryCommandState=function(n){var t=this;return!t.notNeedCodeQuery[n.toLowerCase()]&&t.selection&&t.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)};r.addListener("beforeenterkeydown",function(){var u=r.selection.getRange(),t=n.findParentByTagName(u.startContainer,"pre",!0),a,s,c,v,h,e,l,f,o;if(t){if(r.fireEvent("saveScene"),u.collapsed||u.deleteContents(),!i.ie||i.ie9above){for(e=r.document.createElement("br"),u.insertNode(e).setStartAfter(e).collapse(!0),a=e.nextSibling,!a&&(!i.ie||i.version>10)?u.insertNode(e.cloneNode(!1)):u.setStartAfter(e),t=e.previousSibling;t;)if(l=t,t=t.previousSibling,!t||t.nodeName=="BR"){t=l;break}if(t){for(f="";t&&t.nodeName!="BR"&&new RegExp("^[\\s"+n.fillChar+"]*$").test(t.nodeValue);)f+=t.nodeValue,t=t.nextSibling;t.nodeName!="BR"&&(o=t.nodeValue.match(new RegExp("^([\\s"+n.fillChar+"]+)")),o&&o[1]&&(f+=o[1]));f&&(f=r.document.createTextNode(f),u.insertNode(f).setStartAfter(f))}u.collapse(!0).select(!0)}else if(i.version>8)s=r.document.createTextNode("\n"),c=u.startContainer,u.startOffset==0?(v=c.previousSibling,v&&(u.insertNode(s),h=r.document.createTextNode(" "),u.setStartAfter(s).insertNode(h).setStart(h,0).collapse(!0).select(!0))):(u.insertNode(s).setStartAfter(s),h=r.document.createTextNode(" "),c=u.startContainer.childNodes[u.startOffset],c&&!/^\n/.test(c.nodeValue)&&u.setStartBefore(s),u.insertNode(h).setStart(h,0).collapse(!0).select(!0));else{for(e=r.document.createElement("br"),u.insertNode(e),u.insertNode(r.document.createTextNode(n.fillChar)),u.setStartAfter(e),t=e.previousSibling;t;)if(l=t,t=t.previousSibling,!t||t.nodeName=="BR"){t=l;break}if(t){for(f="";t&&t.nodeName!="BR"&&new RegExp("^[ "+n.fillChar+"]*$").test(t.nodeValue);)f+=t.nodeValue,t=t.nextSibling;t.nodeName!="BR"&&(o=t.nodeValue.match(new RegExp("^([ "+n.fillChar+"]+)")),o&&o[1]&&(f+=o[1]));f=r.document.createTextNode(f);u.insertNode(f).setStartAfter(f)}u.collapse(!0).select()}return r.fireEvent("saveScene"),!0}});r.addListener("tabkeydown",function(t,i){var o=r.selection.getRange(),f=n.findParentByTagName(o.startContainer,"pre",!0),e,u,s,h;if(f){if(r.fireEvent("saveScene"),!i.shiftKey)if(o.collapsed)h=r.document.createTextNode("    "),o.insertNode(h).setStartAfter(h).collapse(!0).select(!0);else{for(e=o.createBookmark(),u=e.start.previousSibling;u;){if(f.firstChild===u&&!n.isBr(u)){f.insertBefore(r.document.createTextNode("    "),u);break}if(n.isBr(u)){f.insertBefore(r.document.createTextNode("    "),u.nextSibling);break}u=u.previousSibling}for(s=e.end,u=e.start.nextSibling,f.firstChild===e.start&&f.insertBefore(r.document.createTextNode("    "),u.nextSibling);u&&u!==s;){if(n.isBr(u)&&u.nextSibling){if(u.nextSibling===s)break;f.insertBefore(r.document.createTextNode("    "),u.nextSibling)}u=u.nextSibling}o.moveToBookmark(e).select()}return r.fireEvent("saveScene"),!0}});r.addListener("beforeinserthtml",function(r,f){var s=this,h=s.selection.getRange(),l=n.findParentByTagName(h.startContainer,"pre",!0),e,c,o;if(l)return h.collapsed||h.deleteContents(),e="",i.ie&&i.version>8?(t.each(UE.filterNode(UE.htmlparser(f),s.options.filterTxtRules).children,function(n){n.type=="element"?n.tagName=="br"?e+="\n":u.$empty[n.tagName]||(t.each(n.children,function(t){t.type=="element"?t.tagName=="br"?e+="\n":u.$empty[n.tagName]||(e+=t.innerText()):e+=t.data}),/\n$/.test(e)||(e+="\n")):e+=n.data+"\n";!n.nextSibling()&&/\n$/.test(e)&&(e=e.replace(/\n$/,""))}),c=s.document.createTextNode(t.html(e.replace(/&nbsp;/g," "))),h.insertNode(c).selectNode(c).select()):(o=s.document.createDocumentFragment(),t.each(UE.filterNode(UE.htmlparser(f),s.options.filterTxtRules).children,function(n){n.type=="element"?n.tagName=="br"?o.appendChild(s.document.createElement("br")):u.$empty[n.tagName]||(t.each(n.children,function(i){i.type=="element"?i.tagName=="br"?o.appendChild(s.document.createElement("br")):u.$empty[n.tagName]||o.appendChild(s.document.createTextNode(t.html(i.innerText().replace(/&nbsp;/g," ")))):o.appendChild(s.document.createTextNode(t.html(i.data.replace(/&nbsp;/g," "))))}),o.lastChild.nodeName!="BR"&&o.appendChild(s.document.createElement("br"))):o.appendChild(s.document.createTextNode(t.html(n.data.replace(/&nbsp;/g," "))));n.nextSibling()||o.lastChild.nodeName!="BR"||o.removeChild(o.lastChild)}),h.insertNode(o).select()),!0});r.addListener("keydown",function(t,i){var e=this,s=i.keyCode||i.which,r,f,o,u;if(s==40&&(r=e.selection.getRange(),o=r.startContainer,r.collapsed&&(f=n.findParentByTagName(r.startContainer,"pre",!0))&&!f.nextSibling)){for(u=f.lastChild;u&&u.nodeName=="BR";)u=u.previousSibling;(u===o||r.startContainer===f&&r.startOffset==f.childNodes.length)&&(e.execCommand("insertparagraph"),n.preventDefault(i))}});r.addListener("delkeydown",function(t,i){var u=this.selection.getRange(),f,e;return u.txtToElmBoundary(!0),f=u.startContainer,n.isTagNode(f,"pre")&&u.collapsed&&n.isStartInblock(u)?(e=r.document.createElement("p"),n.fillNode(r.document,e),f.parentNode.insertBefore(e,f),n.remove(f),u.setStart(e,0).setCursor(!1,!0),n.preventDefault(i),!0):void 0})};UE.commands.cleardoc={execCommand:function(){var n=this,i=n.options.enterTag,t=n.selection.getRange();i=="br"?(n.body.innerHTML="<br/>",t.setStart(n.body,0).setCursor()):(n.body.innerHTML="<p>"+(e?"":"<br/>")+"<\/p>",t.setStart(n.body.firstChild,0).setCursor(!1,!0));setTimeout(function(){n.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){t.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(n){t.each(n.getNodesByTagName("img"),function(n){var t;(t=n.getAttr("anchorname"))&&(n.tagName="a",n.setAttr({anchorname:"",name:t,"class":""}))})},inputRule:function(n){t.each(n.getNodesByTagName("a"),function(n){var t;if((t=n.getAttr("name"))&&!n.getAttr("href")){if(/^\_Toc\d+$/.test(t)){n.parentNode.removeChild(n);return}n.tagName="img";n.setAttr({anchorname:n.getAttr("name"),"class":"anchorclass"});n.setAttr("name")}})},commands:{anchor:{execCommand:function(t,i){var u=this.selection.getRange(),r=u.getClosedNode(),f;r&&r.getAttribute("anchorname")?i?r.setAttribute("anchorname",i):(u.setStartBefore(r).setCursor(),n.remove(r)):i&&(f=this.document.createElement("img"),u.collapse(!0),n.setAttributes(f,{anchorname:i,"class":"anchorclass"}),u.insertNode(f).setStartAfter(f).setCursor(!1,!0))}}}}});UE.plugins.wordcount=function(){var t=this,i;t.setOpt("wordCount",!0);t.addListener("contentchange",function(){t.fireEvent("wordcount")});t.addListener("ready",function(){var t=this;n.on(t.body,"keyup",function(n){var r=n.keyCode||n.which;r in{"16":1,"18":1,"20":1,"37":1,"38":1,"39":1,"40":1}||(clearTimeout(i),i=setTimeout(function(){t.fireEvent("wordcount")},200))})})};UE.plugins.pagebreak=function(){function r(t){if(n.isEmptyBlock(t)){for(var r=t.firstChild,u;r&&r.nodeType==1&&n.isEmptyBlock(r);)u=r,r=r.firstChild;u||(u=t);n.fillNode(i.document,u)}}function u(n){return n&&n.nodeType==1&&n.tagName=="HR"&&n.className=="pagebreak"}var i=this,f=["td"];i.setOpt("pageBreakTag","_ueditor_page_break_tag_");i.ready(function(){t.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",i.document)});i.addInputRule(function(n){n.traversal(function(n){if(n.type=="text"&&n.data==i.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');n.parentNode.insertBefore(t,n);n.parentNode.removeChild(n)}})});i.addOutputRule(function(n){t.each(n.getNodesByTagName("hr"),function(n){if(n.getAttr("class")=="pagebreak"){var t=UE.uNode.createText(i.options.pageBreakTag);n.parentNode.insertBefore(t,n);n.parentNode.removeChild(n)}})});i.commands.pagebreak={execCommand:function(){var o=i.selection.getRange(),t=i.document.createElement("hr"),l,a,y,h,e,s,c,v;if(n.setAttributes(t,{"class":"pagebreak",noshade:"noshade",size:"5"}),n.unSelectable(t),l=n.findParentByTagName(o.startContainer,f,!0),a=[],l)switch(l.tagName){case"TD":e=l.parentNode;e.previousSibling?(e.parentNode.insertBefore(t,e),a=n.findParents(t)):(y=n.findParentByTagName(e,"table"),y.parentNode.insertBefore(t,y),a=n.findParents(t,!0));e=a[1];t!==e&&n.breakParent(t,e);i.fireEvent("afteradjusttable",i.document)}else{if(!o.collapsed)for(o.deleteContents(),h=o.startContainer;!n.isBody(h)&&n.isBlockElm(h)&&n.isEmptyNode(h);)o.setStartBefore(h).collapse(!0),n.remove(h),h=o.startContainer;for(o.insertNode(t),e=t.parentNode;!n.isBody(e);)n.breakParent(t,e),s=t.nextSibling,s&&n.isEmptyBlock(s)&&n.remove(s),e=t.parentNode;s=t.nextSibling;c=t.previousSibling;u(c)?n.remove(c):c&&r(c);s?(u(s)?n.remove(s):r(s),o.setEndAfter(t).collapse(!1)):(v=i.document.createElement("p"),t.parentNode.appendChild(v),n.fillNode(i.document,v),o.setStart(v,0).collapse(!0));o.select(!0)}}}};UE.plugin.register("wordimage",function(){var i=this,r=[];return this.addListener("click",function(n,t){var r=t.target||t.srcElement;"IMG"==r.tagName&&r.getAttribute("data-word-image")&&i.ui._dialogs.wordimageDialog&&i.ui._dialogs.wordimageDialog.open()}),{commands:{wordimage:{execCommand:function(){for(var t,f=n.getElementsByTagName(i.body,"img"),r=[],e=0,u;u=f[e++];)t=u.getAttribute("data-word-image"),t&&r.push(t);return r},queryCommandState:function(){r=n.getElementsByTagName(i.body,"img");for(var u=0,t;t=r[u++];)if(t.getAttribute("data-word-image"))return 1;return-1},notNeedUndo:!0}},inputRule:function(n){t.each(n.getNodesByTagName("img"),function(n){var t=n.attrs,u=parseInt(t.width)<128||parseInt(t.height)<43,r=i.options,f=r.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";t.src&&/^(?:(file:\/+))/.test(t.src)&&n.setAttr({width:t.width,height:t.height,alt:t.alt,"data-word-image":t.src,src:f,style:"background:url("+(u?r.themePath+r.theme+"/images/word.gif":r.langPath+r.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}});UE.plugin.register("autosave",function(){function r(n){var r;if(!n.hasContents()){i&&t.removePreferences(i);return}(n._autoSaveTimer=null,r=t.body.innerHTML,n.fireEvent("beforeautosave",{content:r})!==!1)&&(t.setPreferences(i,r),n.fireEvent("afterautosave",{content:r}))}var t=this,i=null;return{defaultOptions:{autoSaveEnable:!0,autoSaveRestore:!1,autoSaveKey:null},bindEvents:{ready:function(){var n,r,u;i=t.getOpt("autoSaveKey");i||(n="_DraftsData",r=null,r=t.key?t.key+n:(t.container.parentNode.id||"ue-common")+n,i=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+r);t.getOpt("autoSaveRestore")&&(u=t.getPreferences(i),u&&(t.body.innerHTML=u,t.fireEvent("showmessage",{type:"info",content:t.getLang("autosave").autoRestoreTip})))},beforesubmit:function(){t.getOpt("autoSaveEnable")&&i&&t.execCommand("clear_auto_save_content")},contentchange:function(){t.isReady&&t.getOpt("autoSaveEnable")&&i&&(t._autoSaveTimer&&window.clearTimeout(t._autoSaveTimer),t._autoSaveTimer=window.setTimeout(function(){r(t)},1e3))}},commands:{clear_auto_save_content:{execCommand:function(){i&&t.getPreferences(i)&&t.removePreferences(i)},notNeedUndo:!0,ignoreContentChange:!0},set_auto_save_content:{execCommand:function(){r(t)},notNeedUndo:!0,ignoreContentChange:!0},get_auto_save_content:{execCommand:function(){return t.getPreferences(i)||""},notNeedUndo:!0,ignoreContentChange:!0},auto_save_restore:{execCommand:function(){i&&(t.body.innerHTML=t.getPreferences(i)||"<p>"+n.fillHtml+"<\/p>",t.focus(!0))},queryCommandState:function(){return i?t.getPreferences(i)===null?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}});UE.plugin.register("formula",function(){var n=this;return{commands:{formula:{execCommand:function(t,i){var e=n.selection.getRange(),u=e.getClosedNode(),f,r;i=encodeURIComponent(i);f=n.getOpt("formulaConfig");r=f.imageUrlTemplate.replace(/\{\}/,i);u?u.setAttribute("src",r):n.execCommand("insertHtml",'<img src="'+r+'" data-formula-image="'+i+'" />')}}}}});UE.plugins.dragdrop=function(){var t=this;t.ready(function(){n.on(this.body,"dragend",function(){var f=t.selection.getRange(),u=f.getClosedNode()||t.selection.getStart(),r,i;if(u&&u.tagName=="IMG"){for(r=u.previousSibling;i=u.nextSibling;)if(i.nodeType!=1||i.tagName!="SPAN"||i.firstChild)break;else n.remove(i);(!r||r.nodeType!=1||n.isEmptyBlock(r))&&r||i&&(!i||n.isEmptyBlock(i))||(r&&r.tagName=="P"&&!n.isEmptyBlock(r)?(r.appendChild(u),n.moveChild(i,r),n.remove(i)):i&&i.tagName=="P"&&!n.isEmptyBlock(i)&&i.insertBefore(u,i.firstChild),r&&r.tagName=="P"&&n.isEmptyBlock(r)&&n.remove(r),i&&i.tagName=="P"&&n.isEmptyBlock(i)&&n.remove(i),f.selectNode(u).select(),t.fireEvent("saveScene"))}})});t.addListener("keyup",function(i,r){var e=r.keyCode||r.which,f,u;e==13&&(f=t.selection.getRange(),(u=n.findParentByTagName(f.startContainer,"p",!0))&&n.getComputedStyle(u,"text-align")=="center"&&n.removeStyle(u,"text-align"))})};UE.plugins.undo=function(){function c(n,t){if(n.length!=t.length)return 0;for(var i=0,r=n.length;i<r;i++)if(n[i]!=t[i])return 0;return 1}function b(n,t){return n.collapsed!=t.collapsed?0:!c(n.startAddress,t.startAddress)||!c(n.endAddress,t.endAddress)?0:1}function k(){this.list=[];this.index=0;this.hasUndo=!1;this.hasRedo=!1;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content)if(this.index--,this.index==0)return this.restore(0);this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}};this.restore=function(){var r=this.editor,e=this.list[this.index],o=UE.htmlparser(e.content.replace(p,"")),u;r.options.autoClearEmptyNode=!1;r.filterInputRule(o);r.options.autoClearEmptyNode=h;r.document.body.innerHTML=o.toHtml();r.fireEvent("afterscencerestore");i.ie&&t.each(n.getElementsByTagName(r.document,"td th caption p"),function(t){n.isEmptyNode(t)&&n.fillNode(r.document,t)});try{u=new f.Range(r.document).moveToAddress(e.address);u.select(w[u.startContainer.nodeName.toLowerCase()])}catch(s){}this.update();this.clearKey();r.fireEvent("reset",!0)};this.getScene=function(){var n=this.editor,r=n.selection.getRange(),u=r.createAddress(!1,!0),t,i;return n.fireEvent("beforegetscene"),t=UE.htmlparser(n.body.innerHTML),n.options.autoClearEmptyNode=!1,n.filterOutputRule(t),n.options.autoClearEmptyNode=h,i=t.toHtml(),n.fireEvent("aftergetscene"),{address:u,content:i}};this.save=function(n,t){clearTimeout(o);var u=this.getScene(t),i=this.list[this.index];((!i||i&&i.content!=u.content)&&setTimeout(function(){r.trigger("contentchange")},0),i&&i.content==u.content&&(n?1:b(i.address,u.address)))||(this.list=this.list.slice(0,this.index+1),this.list.push(u),this.list.length>v&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=!1;this.hasRedo=!1;this.clearKey()};this.clearKey=function(){s=0;a=null}}var o,r=this,v=r.options.maxUndoCount||20,y=r.options.maxInputCount||20,p=new RegExp(n.fillChar+"|<\/hr>","gi"),w={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},h=r.options.autoClearEmptyNode,e;r.undoManger=new k;r.undoManger.editor=r;r.addListener("saveScene",function(){var n=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,n)});r.addListener("reset",function(n,t){t||this.undoManger.reset()});r.commands.redo=r.commands.undo={execCommand:function(n){this.undoManger[n]()},queryCommandState:function(n){return this.undoManger["has"+(n.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var l={16:1,17:1,18:1,37:1,38:1,39:1,40:1},s=0,a,u=!1;r.addListener("ready",function(){n.on(this.body,"compositionstart",function(){u=!0});n.on(this.body,"compositionend",function(){u=!1})});r.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});e=!0;r.addListener("keyup",function(n,t){var i=this,r=t.keyCode||t.which;if(!l[r]&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(u)return;if(!i.selection.getRange().collapsed){i.undoManger.save(!1,!0);e=!1;return}i.undoManger.list.length===0&&i.undoManger.save(!0);clearTimeout(o);function n(n){n.undoManger.save(!1,!0);n.fireEvent("selectionchange")}o=setTimeout(function(){if(u){var t=setInterval(function(){u||(n(i),clearInterval(t))},300);return}n(i)},200);a=r;s++;s>=y&&n(i)}});r.addListener("keyup",function(n,t){var i=t.keyCode||t.which;if(!l[i]&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(u)return;e||(this.undoManger.save(!1,!0),e=!0)}});r.stopCmdUndo=function(){r.__hasEnterExecCommand=!0};r.startCmdUndo=function(){r.__hasEnterExecCommand=!1}};UE.plugin.register("copy",function(){function u(){ZeroClipboard.config({debug:!1,swfPath:r.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var t=r.zeroclipboard=new ZeroClipboard;t.on("copy",function(n){var i=n.client,u=r.selection.getRange(),t=document.createElement("div");t.appendChild(u.cloneContents());i.setText(t.innerText||t.textContent);i.setHtml(t.innerHTML);u.select()});t.on("mouseover mouseout",function(t){var i=t.target;i&&(t.type=="mouseover"?n.addClass(i,"edui-state-hover"):t.type=="mouseout"&&n.removeClasses(i,"edui-state-hover"))});t.on("wrongflash noflash",function(){ZeroClipboard.destroy()});r.fireEvent("zeroclipboardready",t)}var r=this;return{bindEvents:{ready:function(){i.ie||(window.ZeroClipboard?u():t.loadFile(document,{src:r.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){u()}))}},commands:{copy:{execCommand:function(){r.document.execCommand("copy")||alert(r.getLang("copymsg"))}}}}});UE.plugins.paste=function(){function o(t){var u=this.document;if(!u.getElementById("baidu_pastebin")){var f=this.selection.getRange(),e=f.createBookmark(),r=u.createElement("div");r.id="baidu_pastebin";i.webkit&&r.appendChild(u.createTextNode(n.fillChar+n.fillChar));u.body.appendChild(r);e.start.style.display="";r.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+n.getXY(e.start).y+"px";f.selectNodeContents(r).select(!0);setTimeout(function(){if(i.webkit)for(var s=0,h=u.querySelectorAll("#baidu_pastebin"),o;o=h[s++];)if(n.isEmptyNode(o))n.remove(o);else{r=o;break}try{r.parentNode.removeChild(r)}catch(c){}f.moveToBookmark(e).select(!0);t(r)},0)}}function s(n){return n.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(n,i,r,u){return(r=r.toLowerCase(),{img:1}[r])?n:(u=u.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(n,t,i){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+i+" ":""}),{span:1,div:1}[r]?"":"<"+i+r+" "+t.trim(u)+">")})}function h(o){var l,d,w,g,y,nt,v,k,tt,b,it,rt,h,a,c,p;if(o.firstChild){for(d=n.getElementsByTagName(o,"span"),h=0;w=d[h++];)(w.id=="_baidu_cut_start"||w.id=="_baidu_cut_end")&&n.remove(w);if(i.webkit){for(b=o.querySelectorAll("div br"),h=0;g=b[h++];)y=g.parentNode,y.tagName=="DIV"&&y.childNodes.length==1&&(y.innerHTML="<p><br/><\/p>",n.remove(y));for(nt=o.querySelectorAll("#baidu_pastebin"),h=0;v=nt[h++];){for(k=r.document.createElement("p"),v.parentNode.insertBefore(k,v);v.firstChild;)k.appendChild(v.firstChild);n.remove(v)}for(tt=o.querySelectorAll("meta"),h=0;a=tt[h++];)n.remove(a);for(b=o.querySelectorAll("br"),h=0;a=b[h++];)/^apple-/i.test(a.className)&&n.remove(a)}if(i.gecko)for(it=o.querySelectorAll("[_moz_dirty]"),h=0;a=it[h++];)a.removeAttribute("_moz_dirty");if(!i.ie)for(rt=o.querySelectorAll("span.Apple-style-span"),h=0;a=rt[h++];)n.remove(a,!0);if(l=o.innerHTML,l=UE.filterWord(l),c=UE.htmlparser(l),r.options.filterRules&&UE.filterNode(c,r.options.filterRules),r.filterInputRule(c),i.webkit&&(p=c.lastChild(),p&&p.type=="element"&&p.tagName=="br"&&c.removeChild(p),t.each(r.body.querySelectorAll("div"),function(t){n.isEmptyBlock(t)&&n.remove(t,!0)})),l={html:c.toHtml()},r.fireEvent("beforepaste",l,c),!l.html)return;c=UE.htmlparser(l.html,!0);r.queryCommandState("pasteplain")===1?r.execCommand("insertHtml",UE.filterNode(c,r.options.filterTxtRules).toHtml(),!0):(UE.filterNode(c,r.options.filterTxtRules),f=c.toHtml(),u=l.html,e=r.selection.getRange().createAddress(!0),r.execCommand("insertHtml",r.getOpt("retainOnlyLabelPasted")===!0?s(u):u,!0));r.fireEvent("afterpaste",l)}}var r=this,f,u,e;r.setOpt({retainOnlyLabelPasted:!1});r.addListener("pasteTransfer",function(t,i){var o,c,a,l,v,y,h,p;if(e&&f&&u&&f!=u){if(o=r.selection.getRange(),o.moveToAddress(e,!0),!o.collapsed){while(!n.isBody(o.startContainer)){if(c=o.startContainer,c.nodeType==1){if(c=c.childNodes[o.startOffset],!c){o.setStartBefore(o.startContainer);continue}a=c.previousSibling;a&&a.nodeType==3&&new RegExp("^[\n\r\t "+n.fillChar+"]*$").test(a.nodeValue)&&o.setStartBefore(a)}if(o.startOffset==0)o.setStartBefore(o.startContainer);else break}while(!n.isBody(o.endContainer)){if(l=o.endContainer,l.nodeType==1){if(l=l.childNodes[o.endOffset],!l){o.setEndAfter(o.endContainer);continue}v=l.nextSibling;v&&v.nodeType==3&&new RegExp("^[\n\r\t"+n.fillChar+"]*$").test(v.nodeValue)&&o.setEndAfter(v)}if(o.endOffset==o.endContainer[o.endContainer.nodeType==3?"nodeValue":"childNodes"].length)o.setEndAfter(o.endContainer);else break}}for(o.deleteContents(),o.select(!0),r.__hasEnterExecCommand=!0,y=u,i===2?y=s(y):i&&(y=f),r.execCommand("inserthtml",y,!0),r.__hasEnterExecCommand=!1,h=r.selection.getRange();!n.isBody(h.startContainer)&&!h.startOffset&&h.startContainer[h.startContainer.nodeType==3?"nodeValue":"childNodes"].length;)h.setStartBefore(h.startContainer);p=h.createAddress(!0);e.endAddress=p.startAddress}});r.addListener("ready",function(){n.on(r.body,"cut",function(){var n=r.selection.getRange();!n.collapsed&&r.undoManger&&r.undoManger.save()});n.on(r.body,i.ie||i.opera?"keydown":"paste",function(n){(i.ie||i.opera)&&(!n.ctrlKey&&!n.metaKey||n.keyCode!="86")||o.call(r,function(n){h(n)})})});r.commands.paste={execCommand:function(){i.ie?(o.call(r,function(n){h(n)}),r.document.execCommand("paste")):alert(r.getLang("pastemsg"))}}};UE.plugins.pasteplain=function(){var t=this,n;t.setOpt({pasteplain:!1,filterTxtRules:function(){function n(n){n.tagName="p";n.setStyle()}function t(n){n.parentNode.removeChild(n,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(n){for(var i,t=UE.uNode.createElement("p");i=n.firstChild();)i.type!="text"&&UE.dom.dtd.$block[i.tagName]?t.firstChild()?(n.parentNode.insertBefore(t,n),t=UE.uNode.createElement("p")):n.parentNode.insertBefore(i,n):t.appendChild(i);t.firstChild()&&n.parentNode.insertBefore(t,n);n.parentNode.removeChild(n)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:n,th:n,tr:n,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,td:function(n){var t=!!n.innerText();t&&n.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),n);n.parentNode.removeChild(n,n.innerText())}}}()});n=t.options.pasteplain;t.commands.pasteplain={queryCommandState:function(){return n?1:0},execCommand:function(){n=!n|0},notNeedUndo:1}};UE.plugins.list=function(){function l(n){var t=[];for(var i in n)t.push(i);return t}function e(t){var i=t.className;return n.hasClass(t,/custom_/)?i.match(/custom_(\w+)/)[1]:n.getStyle(t,"list-style-type")}function a(i,r){t.each(n.getElementsByTagName(i,"ol ul"),function(u){var h,v,p,l,c,a,y;n.inDoc(u,i)&&(h=u.parentNode,h.tagName===u.tagName&&(v=e(u)||(u.tagName==="OL"?"decimal":"disc"),p=e(h)||(h.tagName==="OL"?"decimal":"disc"),v===p&&(l=t.indexOf(f[u.tagName],v),l=l+1===f[u.tagName].length?0:l+1,s(u,f[u.tagName][l]))),c=0,a=2,n.hasClass(u,/custom_/)?/[ou]l/i.test(h.tagName)&&n.hasClass(h,/custom_/)||(a=1):/[ou]l/i.test(h.tagName)&&n.hasClass(h,/custom_/)&&(a=3),y=n.getStyle(u,"list-style-type"),y&&(u.style.cssText="list-style-type:"+y),u.className=t.trim(u.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+a,t.each(n.getElementsByTagName(u,"li"),function(t){var i,r,f;if(t.style.cssText&&(t.style.cssText=""),!t.firstChild){n.remove(t);return}if(t.parentNode===u){if(c++,n.hasClass(u,/custom_/))if(i=1,r=e(u),u.tagName==="OL"){if(r)switch(r){case"cn":case"cn1":case"cn2":c>10&&(c%10==0||c>10&&c<20)?i=2:c>20&&(i=3);break;case"num2":c>9&&(i=2)}t.className="list-"+r+"-paddingleft-"+i}else t.className="list-"+r+"-paddingleft";else t.className=t.className.replace(/list-[\w\-]+/gi,"");f=t.getAttribute("class");f===null||f.replace(/\s/g,"")||n.removeAttributes(t,"class")}}),r||o(u,u.tagName.toLowerCase(),e(u)||n.getStyle(u,"list-style-type"),!0))})}function o(t,i,r,u){var f=t.nextSibling,o;f&&f.nodeType===1&&f.tagName.toLowerCase()===i&&(e(f)||n.getStyle(f,"list-style-type")||(i=="ol"?"decimal":"disc"))==r&&(n.moveChild(f,t),f.childNodes.length===0&&n.remove(f));f&&n.isFillChar(f)&&n.remove(f);o=t.previousSibling;o&&o.nodeType===1&&o.tagName.toLowerCase()==i&&(e(o)||n.getStyle(o,"list-style-type")||(i=="ol"?"decimal":"disc"))===r&&n.moveChild(t,o);o&&n.isFillChar(o)&&n.remove(o);!u&&n.isEmptyBlock(t)&&n.remove(t);e(t)&&a(t.ownerDocument,!0)}function s(t,i){try{n.setStyle(t,"list-style-type",i)}catch(r){}}function h(t){var i=t.previousSibling;i&&n.isEmptyBlock(i)&&n.remove(i);i=t.nextSibling;i&&n.isEmptyBlock(i)&&n.remove(i)}function v(t){while(t&&!n.isBody(t)){if(t.nodeName=="TABLE")return null;if(t.nodeName=="LI")return t;t=t.parentNode}}var r=this,c={TD:1,PRE:1,BLOCKQUOTE:1},f,y;r.setOpt({autoTransWordToList:!1,insertorderedlist:{decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});f={OL:l(r.options.insertorderedlist),UL:l(r.options.insertunorderedlist)};y=r.options.listiconpath;r.ready(function(){var n=[];n.push(".list-paddingleft-1{padding-left:0}");n.push(".list-paddingleft-2{padding-left:"+r.options.listDefaultPaddingLeft+"px}");n.push(".list-paddingleft-3{padding-left:"+r.options.listDefaultPaddingLeft*2+"px}");t.cssRule("list","ol,ul{margin:0;pading:0;"+(i.ie?"":"width:95%")+"}li{clear:both;}"+n.join("\n"),r.document)});r.ready(function(){n.on(r.body,"cut",function(){setTimeout(function(){var t=r.selection.getRange(),u,i,f,e;t.collapsed||(u=n.findParentByTagName(t.startContainer,"li",!0))&&!u.nextSibling&&n.isEmptyBlock(u)&&(i=u.parentNode,(f=i.previousSibling)?(n.remove(i),t.setStartAtLast(f).collapse(!0),t.select(!0)):(f=i.nextSibling)?(n.remove(i),t.setStartAtFirst(f).collapse(!0),t.select(!0)):(e=r.document.createElement("p"),n.fillNode(r.document,e),i.parentNode.insertBefore(e,i),n.remove(i),t.setStart(e,0).collapse(!0),t.select(!0)))})})});r.addListener("beforepaste",function(i,r){var c=this,l=c.selection.getRange(),s,o=UE.htmlparser(r.html,!0),u,h;(s=n.findParentByTagName(l.startContainer,"li",!0))&&(u=s.parentNode,h=u.tagName==="OL"?"ul":"ol",t.each(o.getNodesByTagName(h),function(n){var s,r,h;n.tagName=u.tagName;n.setAttr();n.parentNode===o?i=e(u)||(u.tagName=="OL"?"decimal":"disc"):(s=n.parentNode.getAttr("class"),i=s&&/custom_/.test(s)?s.match(/custom_(\w+)/)[1]:n.parentNode.getStyle("list-style-type"),i||(i=u.tagName==="OL"?"decimal":"disc"));r=t.indexOf(f[u.tagName],i);n.parentNode!==o&&(r=r+1===f[u.tagName].length?0:r+1);h=f[u.tagName][r];n.setStyle("list-style-type",h)}));r.html=o.toHtml()});r.getOpt("disablePInList")===!0&&r.addOutputRule(function(n){t.each(n.getNodesByTagName("li"),function(n){var i=[],r=0;t.each(n.children,function(t){var u,f;if(t.tagName=="p"){while(u=t.children.pop())i.splice(r,0,u),u.parentNode=n,lastNode=u;u=i[i.length-1];u&&u.type==="element"&&u.tagName==="br"||(f=UE.uNode.createElement("br"),f.parentNode=n,i.push(f));r=i.length}});i.length&&(n.children=i)})});r.addInputRule(function(n){if(t.each(n.getNodesByTagName("li"),function(n){for(var o,f,t=UE.uNode.createElement("p"),e=0,r;r=n.children[e];)r.type==="text"||u.p[r.tagName]?t.appendChild(r):t.firstChild()?(n.insertBefore(t,r),t=UE.uNode.createElement("p"),e=e+2):e++;(!t.firstChild()||t.parentNode)&&n.firstChild()||n.appendChild(t);t.firstChild()||t.innerHTML(i.ie?"&nbsp;":"<br/>");o=n.firstChild();f=o.lastChild();f&&f.type==="text"&&/^\s*$/.test(f.data)&&o.removeChild(f)}),r.options.autoTransWordToList){var f={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},e={square:"n"};function u(n,t){var r=t.firstChild(),i;if(r&&r.type==="element"&&r.tagName==="span"&&/Wingdings|Symbol/.test(r.getStyle("font-family"))){for(i in e)if(e[i]==r.data)return i;return"disc"}for(i in f)if(f[i].test(n))return i}t.each(n.getNodesByTagName("p"),function(n){function c(n,t,r){var u,e;n.tagName==="ol"?i.ie?(u=t.firstChild(),u.type==="element"&&u.tagName==="span"&&f[r].test(u.innerText())&&t.removeChild(u)):t.innerHTML(t.innerHTML().replace(f[r],"")):t.removeChild(t.firstChild());e=UE.uNode.createElement("li");e.appendChild(t);n.appendChild(e)}var o,s,h,e,t;if(n.getAttr("class")==="MsoListParagraph"){if(n.setStyle("margin",""),n.setStyle("margin-left",""),n.setAttr("class",""),o=n,h=n,n.parentNode.tagName!=="li"&&(s=u(n.innerText(),n))){for(e=UE.uNode.createElement(r.options.insertorderedlist.hasOwnProperty(s)?"ol":"ul"),e.setStyle("list-style-type",s);n&&n.parentNode.tagName!=="li"&&u(n.innerText(),n);)o=n.nextSibling(),o||n.parentNode.insertBefore(e,n),c(e,n,s),n=o;!e.parentNode&&n&&n.parentNode&&n.parentNode.insertBefore(e,n)}t=h.firstChild();t&&t.type=="element"&&t.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(t.innerText())&&t.parentNode.removeChild(t)}})}});r.addListener("contentchange",function(){a(r.document)});r.addListener("keydown",function(t,i){function d(){i.preventDefault?i.preventDefault():i.returnValue=!1;r.fireEvent("contentchange");r.undoManger&&r.undoManger.save()}function it(t,i){while(t&&!n.isBody(t)){if(i(t))return null;if(t.nodeType===1&&/[ou]l/i.test(t.tagName))return t;t=t.parentNode}return null}var g=i.keyCode||i.which,tt,y,f,l,v,k,s,c,o,p;if(g===13&&!i.shiftKey){var nt=r.selection.getRange(),w=n.findParent(nt.startContainer,function(t){return n.isBlockElm(t)},!0),f=n.findParentByTagName(nt.startContainer,"li",!0);w&&w.tagName!=="PRE"&&!f&&(tt=w.innerHTML.replace(new RegExp(n.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(tt)&&(w.innerHTML=tt.replace(/^\s*1\s*\./,""),nt.setStartAtLast(w).collapse(!0).select(),r.__hasEnterExecCommand=!0,r.execCommand("insertorderedlist"),r.__hasEnterExecCommand=!1));var e=r.selection.getRange(),a=it(e.startContainer,function(n){return n.tagName==="TABLE"}),b=e.collapsed?a:it(e.endContainer,function(n){return n.tagName==="TABLE"});if(a&&b&&a===b){if(!e.collapsed)if(a=n.findParentByTagName(e.startContainer,"li",!0),b=n.findParentByTagName(e.endContainer,"li",!0),a&&b&&a===b){if(e.deleteContents(),f=n.findParentByTagName(e.startContainer,"li",!0),f&&n.isEmptyBlock(f)){s=f.previousSibling;next=f.nextSibling;c=r.document.createElement("p");n.fillNode(r.document,c);o=f.parentNode;s&&next?(e.setStart(next,0).collapse(!0).select(!0),n.remove(f)):((s||next)&&s?f.parentNode.parentNode.insertBefore(c,o.nextSibling):o.parentNode.insertBefore(c,o),n.remove(f),o.firstChild||n.remove(o),e.setStart(c,0).setCursor());d();return}}else{y=e.cloneRange();p=y.collapse(!1).createBookmark();e.deleteContents();y.moveToBookmark(p);f=n.findParentByTagName(y.startContainer,"li",!0);h(f);y.select();d();return}if(f=n.findParentByTagName(e.startContainer,"li",!0),f){if(n.isEmptyBlock(f)){if(p=e.createBookmark(),o=f.parentNode,f!==o.lastChild?(n.breakParent(f,o),h(f)):(o.parentNode.insertBefore(f,o.nextSibling),n.isEmptyNode(o)&&n.remove(o)),!u.$list[f.parentNode.tagName])if(n.isBlockElm(f.firstChild))n.remove(f,!0);else{for(c=r.document.createElement("p"),f.parentNode.insertBefore(c,f);f.firstChild;)c.appendChild(f.firstChild);n.remove(f)}e.moveToBookmark(p).select()}else{if(l=f.firstChild,!l||!n.isBlockElm(l)){for(c=r.document.createElement("p"),f.firstChild||n.fillNode(r.document,c);f.firstChild;)c.appendChild(f.firstChild);f.appendChild(c);l=c}v=r.document.createElement("span");e.insertNode(v);n.breakParent(v,f);k=v.nextSibling;l=k.firstChild;l||(c=r.document.createElement("p"),n.fillNode(r.document,c),k.appendChild(c),l=c);n.isEmptyNode(l)&&(l.innerHTML="",n.fillNode(r.document,l));e.setStart(l,0).collapse(!0).shrinkBoundary().select();n.remove(v);s=k.previousSibling;s&&n.isEmptyBlock(s)&&(s.innerHTML="<p><\/p>",n.fillNode(r.document,s.firstChild))}d()}}}if(g===8&&(e=r.selection.getRange(),e.collapsed&&n.isStartInblock(e)&&(y=e.cloneRange().trimBoundary(),f=n.findParentByTagName(e.startContainer,"li",!0),f&&n.isStartInblock(y)))){if(a=n.findParentByTagName(e.startContainer,"p",!0),a&&a!==f.firstChild){o=n.findParentByTagName(a,["ol","ul"]);n.breakParent(a,o);h(a);r.fireEvent("contentchange");e.setStart(a,0).setCursor(!1,!0);r.fireEvent("saveScene");n.preventDefault(i);return}if(f&&(s=f.previousSibling)){if(g===46&&f.childNodes.length)return;if(u.$list[s.tagName]&&(s=s.lastChild),r.undoManger&&r.undoManger.save(),l=f.firstChild,n.isBlockElm(l))if(n.isEmptyNode(l))for(s.appendChild(l),e.setStart(l,0).setCursor(!1,!0);f.firstChild;)s.appendChild(f.firstChild);else v=r.document.createElement("span"),e.insertNode(v),n.isEmptyBlock(s)&&(s.innerHTML=""),n.moveChild(f,s),e.setStartBefore(v).collapse(!0).select(!0),n.remove(v);else if(n.isEmptyNode(f))c=r.document.createElement("p"),s.appendChild(c),e.setStart(c,0).setCursor();else for(e.setEnd(s,s.childNodes.length).collapse().select(!0);f.firstChild;)s.appendChild(f.firstChild);n.remove(f);r.fireEvent("contentchange");r.fireEvent("saveScene");n.preventDefault(i);return}if(f&&!f.previousSibling){if(o=f.parentNode,p=e.createBookmark(),n.isTagNode(o.parentNode,"ol ul"))o.parentNode.insertBefore(f,o),n.isEmptyNode(o)&&n.remove(o);else{while(f.firstChild)o.parentNode.insertBefore(f.firstChild,o);n.remove(f);n.isEmptyNode(o)&&n.remove(o)}e.moveToBookmark(p).setCursor(!1,!0);r.fireEvent("contentchange");r.fireEvent("saveScene");n.preventDefault(i);return}}});r.addListener("keyup",function(t,i){var s=i.keyCode||i.which,f,u;s==8&&(f=r.selection.getRange(),(u=n.findParentByTagName(f.startContainer,["ol","ul"],!0))&&o(u,u.tagName.toLowerCase(),e(u)||n.getComputedStyle(u,"list-style-type"),!0))});r.addListener("tabkeydown",function(){function b(n){if(r.options.maxListLevel!=-1){for(var t=n.parentNode,i=0;/[ou]l/i.test(t.tagName);)i++,t=t.parentNode;if(i>=r.options.maxListLevel)return!0}}var l=r.selection.getRange(),i=n.findParentByTagName(l.startContainer,"li",!0),a,y,k,p,d,w,h;if(i)if(l.collapsed){if(b(i))return!0;var c=i.parentNode,u=r.document.createElement(c.tagName),v=t.indexOf(f[u.tagName],e(c)||n.getComputedStyle(c,"list-style-type"));if(v=v+1==f[u.tagName].length?0:v+1,y=f[u.tagName][v],s(u,y),n.isStartInblock(l))return r.fireEvent("saveScene"),a=l.createBookmark(),c.insertBefore(u,i),u.appendChild(i),o(u,u.tagName.toLowerCase(),y),r.fireEvent("contentchange"),l.moveToBookmark(a).select(!0),!0}else{for(r.fireEvent("saveScene"),a=l.createBookmark(),k=0,d=n.findParents(i);w=d[k++];)if(n.isTagNode(w,"ol ul")){p=w;break}if(h=i,a.end)while(h&&!(n.getPosition(h,a.end)&n.POSITION_FOLLOWING)){if(b(h)){h=n.getNextDomNode(h,!1,null,function(n){return n!==p});continue}var c=h.parentNode,u=r.document.createElement(c.tagName),v=t.indexOf(f[u.tagName],e(c)||n.getComputedStyle(c,"list-style-type")),g=v+1==f[u.tagName].length?0:v+1,y=f[u.tagName][g];for(s(u,y),c.insertBefore(u,h);h&&!(n.getPosition(h,a.end)&n.POSITION_FOLLOWING);){if(i=h.nextSibling,u.appendChild(h),!i||n.isTagNode(i,"ol ul")){if(i){while(i=i.firstChild)if(i.tagName=="LI")break}else i=n.getNextDomNode(h,!1,null,function(n){return n!==p});break}h=i}o(u,u.tagName.toLowerCase(),y);h=i}return r.fireEvent("contentchange"),l.moveToBookmark(a).select(),!0}});r.commands.insertorderedlist=r.commands.insertunorderedlist={execCommand:function(t,i){var ut,pt,ht,tt,ft,et,lt,it,k,ct,g,bt;i||(i=t.toLowerCase()=="insertorderedlist"?"decimal":"disc");var l=this,y=this.selection.getRange(),rt=function(t){return t.nodeType==1?t.tagName.toLowerCase()!="br":!n.isWhitespace(t)},ot=t.toLowerCase()=="insertorderedlist"?"ol":"ul",a=l.document.createDocumentFragment();y.adjustmentBoundary().shrinkBoundary();var nt=y.createBookmark(!0),r=v(l.document.getElementById(nt.start)),vt=0,p=v(l.document.getElementById(nt.end)),yt=0,w,d,b,f;if(r||p){if(r&&(w=r.parentNode),nt.end||(p=r),p&&(d=p.parentNode),w===d){while(r!==p){if(f=r,r=r.nextSibling,!n.isBlockElm(f.firstChild)){for(ut=l.document.createElement("p");f.firstChild;)ut.appendChild(f.firstChild);f.appendChild(ut)}a.appendChild(f)}if(f=l.document.createElement("span"),w.insertBefore(f,p),!n.isBlockElm(p.firstChild)){for(ut=l.document.createElement("p");p.firstChild;)ut.appendChild(p.firstChild);p.appendChild(ut)}if(a.appendChild(p),n.breakParent(f,w),n.isEmptyNode(f.previousSibling)&&n.remove(f.previousSibling),n.isEmptyNode(f.nextSibling)&&n.remove(f.nextSibling),pt=e(w)||n.getComputedStyle(w,"list-style-type")||(t.toLowerCase()=="insertorderedlist"?"decimal":"disc"),w.tagName.toLowerCase()==ot&&pt==i){for(ct=0,ht=l.document.createDocumentFragment();g=a.firstChild;)if(n.isTagNode(g,"ol ul"))ht.appendChild(g);else while(g.firstChild)ht.appendChild(g.firstChild),n.remove(g);f.parentNode.insertBefore(ht,f)}else b=l.document.createElement(ot),s(b,i),b.appendChild(a),f.parentNode.insertBefore(b,f);n.remove(f);b&&o(b,ot,i);y.moveToBookmark(nt).select();return}if(r){while(r){if(f=r.nextSibling,n.isTagNode(r,"ol ul"))a.appendChild(r);else{for(tt=l.document.createDocumentFragment(),ft=0;r.firstChild;)n.isBlockElm(r.firstChild)&&(ft=1),tt.appendChild(r.firstChild);ft?a.appendChild(tt):(et=l.document.createElement("p"),et.appendChild(tt),a.appendChild(et));n.remove(r)}r=f}w.parentNode.insertBefore(a,w.nextSibling);n.isEmptyNode(w)?(y.setStartBefore(w),n.remove(w)):y.setStartAfter(w);vt=1}if(p&&n.inDoc(d,l.document)){for(r=d.firstChild;r&&r!==p;){if(f=r.nextSibling,n.isTagNode(r,"ol ul"))a.appendChild(r);else{for(tt=l.document.createDocumentFragment(),ft=0;r.firstChild;)n.isBlockElm(r.firstChild)&&(ft=1),tt.appendChild(r.firstChild);ft?a.appendChild(tt):(et=l.document.createElement("p"),et.appendChild(tt),a.appendChild(et));n.remove(r)}r=f}lt=n.createElement(l.document,"div",{tmpDiv:1});n.moveChild(p,lt);a.appendChild(lt);n.remove(p);d.parentNode.insertBefore(a,d);y.setEndBefore(d);n.isEmptyNode(d)&&n.remove(d);yt=1}}vt||y.setStartBefore(l.document.getElementById(nt.start));nt.end&&!yt&&y.setEndAfter(l.document.getElementById(nt.end));y.enlarge(!0,function(n){return c[n.tagName]});a=l.document.createDocumentFragment();for(var st=y.createBookmark(),h=n.getNextDomNode(st.start,!1,rt),at=y.cloneRange(),k,wt=n.isBlockElm;h&&h!==st.end&&n.getPosition(h,st.end)&n.POSITION_PRECEDING;)if(h.nodeType==3||u.li[h.tagName]){if(h.nodeType==1&&u.$list[h.tagName]){while(h.firstChild)a.appendChild(h.firstChild);k=n.getNextDomNode(h,!1,rt);n.remove(h);h=k;continue}for(k=h,at.setStartBefore(h);h&&h!==st.end&&(!wt(h)||n.isBookmarkNode(h));)k=h,h=n.getNextDomNode(h,!1,null,function(n){return!c[n.tagName]});if(h&&wt(h)&&(f=n.getNextDomNode(k,!1,rt),f&&n.isBookmarkNode(f)&&(h=n.getNextDomNode(f,!1,rt),k=f)),at.setEndAfter(k),h=n.getNextDomNode(k,!1,rt),it=y.document.createElement("li"),it.appendChild(at.extractContents()),n.isEmptyNode(it)){for(k=y.document.createElement("p");it.firstChild;)k.appendChild(it.firstChild);it.appendChild(k)}a.appendChild(it)}else h=n.getNextDomNode(h,!0,rt);for(y.moveToBookmark(st).collapse(!0),b=l.document.createElement(ot),s(b,i),b.appendChild(a),y.insertNode(b),o(b,ot,i),ct=0,bt=n.getElementsByTagName(b,"div");g=bt[ct++];)g.getAttribute("tmpDiv")&&n.remove(g,!0);y.moveToBookmark(nt).select()},queryCommandState:function(n){for(var i=n.toLowerCase()=="insertorderedlist"?"ol":"ul",r=this.selection.getStartElementPath(),u=0,t;t=r[u++];){if(t.nodeName=="TABLE")return 0;if(i==t.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(t){for(var u=t.toLowerCase()=="insertorderedlist"?"ol":"ul",f=this.selection.getStartElementPath(),i,o=0,r;r=f[o++];){if(r.nodeName=="TABLE"){i=null;break}if(u==r.nodeName.toLowerCase()){i=r;break}}return i?e(i)||n.getComputedStyle(i,"list-style-type"):null}}},function(){var r={textarea:function(n,t){var r=t.ownerDocument.createElement("textarea");return r.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",i.ie&&i.version<8&&(r.style.width=t.offsetWidth+"px",r.style.height=t.offsetHeight+"px",t.onresize=function(){r.style.width=t.offsetWidth+"px";r.style.height=t.offsetHeight+"px"}),t.appendChild(r),{setContent:function(n){r.value=n},getContent:function(){return r.value},select:function(){var n;i.ie?(n=r.createTextRange(),n.collapse(!0),n.select()):(r.setSelectionRange(0,0),r.focus())},dispose:function(){t.removeChild(r);t.onresize=null;r=null;t=null},focus:function(){r.focus()},blur:function(){r.blur()}}},codemirror:function(n,t){var i=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0,onChange:function(){n.sync();n.fireEvent("contentchange")}}),r=i.getWrapperElement();return r.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',i.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",i.refresh(),{getCodeMirror:function(){return i},setContent:function(n){i.setValue(n)},getContent:function(){return i.getValue()},select:function(){i.focus()},dispose:function(){t.removeChild(r);r=null;i=null},focus:function(){i.focus()},blur:function(){i.setOption("readOnly",!0);i.setOption("readOnly",!1)}}}};UE.plugins.source=function(){function w(n){return r[o.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](f,n)}var f=this,o=this.options,s=!1,e,l,a,h,v,y,c,p;o.sourceEditor=i.ie?"textarea":o.sourceEditor||"codemirror";f.setOpt({sourceEditorFirst:!1});f.commands.source={execCommand:function(){var r,b,o,p,t;if(s=!s,s)c=f.selection.getRange().createAddress(!1,!0),f.undoManger&&f.undoManger.save(!0),i.gecko&&(f.body.contentEditable=!1),v=f.iframe.style.cssText,f.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",f.fireEvent("beforegetcontent"),r=UE.htmlparser(f.body.innerHTML),f.filterOutputRule(r),r.traversal(function(n){if(n.type=="element")switch(n.tagName){case"td":case"th":case"caption":n.children&&n.children.length==1&&n.firstChild().tagName=="br"&&n.removeChild(n.firstChild());break;case"pre":n.innerText(n.innerText().replace(/&nbsp;/g," "))}}),f.fireEvent("aftergetcontent"),b=r.toHtml(!0),e=w(f.iframe.parentNode),e.setContent(b),l=f.setContent,f.setContent=function(n){var t=UE.htmlparser(n);f.filterInputRule(t);n=t.toHtml();e.setContent(n)},setTimeout(function(){e.select();f.addListener("fullscreenchanged",function(){try{e.getCodeMirror().refresh()}catch(n){}})}),y=f.getContent,f.getContent=function(){return e.getContent()||"<p>"+(i.ie?"":"<br/>")+"<\/p>"},a=f.focus,h=f.blur,f.focus=function(){e.focus()},f.blur=function(){h.call(f);e.blur()};else if(f.iframe.style.cssText=v,o=e.getContent()||"<p>"+(i.ie?"":"<br/>")+"<\/p>",o=o.replace(new RegExp("[\\r\\t\\n ]*<\/?(\\w+)\\s*(?:[^>]*)>","g"),function(n,t){return t&&!u.$inlineWithA[t.toLowerCase()]?n.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):n.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),f.setContent=l,f.setContent(o),e.dispose(),e=null,f.getContent=y,f.focus=a,f.blur=h,p=f.body.firstChild,p||(f.body.innerHTML="<p>"+(i.ie?"":"<br/>")+"<\/p>",p=f.body.firstChild),f.undoManger&&f.undoManger.save(!0),i.gecko)t=document.createElement("input"),t.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(t),f.body.contentEditable=!1,setTimeout(function(){n.setViewportOffset(t,{left:-32768,top:0});t.focus();setTimeout(function(){f.body.contentEditable=!0;f.selection.getRange().moveToAddress(c).select(!0);n.remove(t)})});else try{f.selection.getRange().moveToAddress(c).select(!0)}catch(k){}this.fireEvent("sourcemodechanged",s)},queryCommandState:function(){return s|0},notNeedUndo:1};p=f.queryCommandState;f.queryCommandState=function(n){return(n=n.toLowerCase(),s)?n in{source:1,fullscreen:1}?1:-1:p.apply(this,arguments)};o.sourceEditor=="codemirror"&&f.addListener("ready",function(){t.loadFile(document,{src:o.codeMirrorJsUrl||o.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){o.sourceEditorFirst&&setTimeout(function(){f.execCommand("source")},0)});t.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:o.codeMirrorCssUrl||o.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css?221123"})})}}();UE.plugins.enterkey=function(){var r,t=this,f=t.options.enterTag;t.addListener("keyup",function(u,f){var v=f.keyCode||f.which,o,h,c,a,s,e,l;if(v==13)if(o=t.selection.getRange(),h=o.startContainer,i.ie)t.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(r)){if(i.gecko)a=n.findParentByTagName(h,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0),a||(t.document.execCommand("formatBlock",!1,"<p>"),c=1);else if(h.nodeType==1){if(s=t.document.createTextNode(""),o.insertNode(s),e=n.findParentByTagName(s,"div",!0),e){for(l=t.document.createElement("p");e.firstChild;)l.appendChild(e.firstChild);e.parentNode.insertBefore(l,e);n.remove(e);o.setStartBefore(s).setCursor();c=1}n.remove(s)}t.undoManger&&c&&t.undoManger.save()}i.opera&&o.select()}});t.addListener("keydown",function(e,o){var y=o.keyCode||o.which,s,c,v;if(y==13){if(t.fireEvent("beforeenterkeydown")){n.preventDefault(o);return}if(t.fireEvent("saveScene",!0,!0),r="",s=t.selection.getRange(),!s.collapsed){var h=s.startContainer,p=s.endContainer,l=n.findParentByTagName(h,"td",!0),a=n.findParentByTagName(p,"td",!0);if(l&&a&&l!==a||!l&&a||l&&!a){o.preventDefault?o.preventDefault():o.returnValue=!1;return}}if(f=="p")i.ie||(h=n.findParentByTagName(s.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0),h||i.opera?(r=h.tagName,h.tagName.toLowerCase()=="p"&&i.gecko&&n.removeDirtyAttr(h)):(t.document.execCommand("formatBlock",!1,"<p>"),i.gecko&&(s=t.selection.getRange(),h=n.findParentByTagName(s.startContainer,"p",!0),h&&n.removeDirtyAttr(h))));else if(o.preventDefault?o.preventDefault():o.returnValue=!1,s.collapsed)c=s.document.createElement("br"),s.insertNode(c),v=c.parentNode,v.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),s.setStartBefore(c)):s.setStartAfter(c),s.setCursor();else if(s.deleteContents(),h=s.startContainer,h.nodeType==1&&(h=h.childNodes[s.startOffset])){while(h.nodeType==1){if(u.$empty[h.tagName])return s.setStartBefore(h).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!h.firstChild)return c=s.document.createElement("br"),h.appendChild(c),s.setStart(h,0).setCursor(),t.undoManger&&t.undoManger.save(),!1;h=h.firstChild}h===s.startContainer.childNodes[s.startOffset]?(c=s.document.createElement("br"),s.insertNode(c).setCursor()):s.setStart(h,0).setCursor()}else c=s.document.createElement("br"),s.insertNode(c).setStartAfter(c).setCursor()}})};UE.plugins.keystrokes=function(){var t=this,r=!0;t.addListener("keydown",function(u,f){var c=f.keyCode||f.which,e=t.selection.getRange(),s,o,a,k,h,p,w,nt,b,v,y;if(!e.collapsed&&!(f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)&&(c>=65&&c<=90||c>=48&&c<=57||c>=96&&c<=111||{13:1,8:1,46:1}[c])&&(s=e.startContainer,n.isFillChar(s)&&e.setStartBefore(s),s=e.endContainer,n.isFillChar(s)&&e.setEndAfter(s),e.txtToElmBoundary(),e.endContainer&&e.endContainer.nodeType==1&&(s=e.endContainer.childNodes[e.endOffset],s&&n.isBr(s)&&e.setEndAfter(s)),e.startOffset==0&&(s=e.startContainer,n.isBoundaryNode(s,"firstChild")&&(s=e.endContainer,e.endOffset==(s.nodeType==3?s.nodeValue.length:s.childNodes.length)&&n.isBoundaryNode(s,"lastChild"))))){t.fireEvent("saveScene");t.body.innerHTML="<p>"+(i.ie?"":"<br/>")+"<\/p>";e.setStart(t.body.firstChild,0).setCursor(!1,!0);t._selectionChange();return}if(c==l.Backspace){if(e=t.selection.getRange(),r=e.collapsed,t.fireEvent("delkeydown",f))return;if(e.collapsed&&e.inFillChar()&&(o=e.startContainer,n.isFillChar(o)?(e.setStartBefore(o).shrinkBoundary(!0).collapse(!0),n.remove(o)):(o.nodeValue=o.nodeValue.replace(new RegExp("^"+n.fillChar),""),e.startOffset--,e.collapse(!0).select(!0))),o=e.getClosedNode()){t.fireEvent("saveScene");e.setStartBefore(o);n.remove(o);e.setCursor();t.fireEvent("saveScene");n.preventDefault(f);return}if(!i.ie&&(o=n.findParentByTagName(e.startContainer,"table",!0),a=n.findParentByTagName(e.endContainer,"table",!0),o&&!a||!o&&a||o!==a)){f.preventDefault();return}}if(c==l.Tab){if(k={ol:1,ul:1,table:1},t.fireEvent("tabkeydown",f)){n.preventDefault(f);return}h=t.selection.getRange();t.fireEvent("saveScene");for(var d=0,g="",tt=t.options.tabSize||4,it=t.options.tabNode||"&nbsp;";d<tt;d++)g+=it;if(p=t.document.createElement("span"),p.innerHTML=g+n.fillChar,h.collapsed)h.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else if(w=function(t){return n.isBlockElm(t)&&!k[t.tagName.toLowerCase()]},o=n.findParent(h.startContainer,w,!0),a=n.findParent(h.endContainer,w,!0),o&&a&&o===a)h.deleteContents(),h.insertNode(p.cloneNode(!0).firstChild).setCursor(!0);else{for(nt=h.createBookmark(),h.enlarge(!0),b=h.createBookmark(),v=n.getNextDomNode(b.start,!1,w);v&&!(n.getPosition(v,b.end)&n.POSITION_FOLLOWING);)v.insertBefore(p.cloneNode(!0).firstChild,v.firstChild),v=n.getNextDomNode(v,!1,w);h.moveToBookmark(b).moveToBookmark(nt).select()}n.preventDefault(f)}if(i.gecko&&c==46&&(h=t.selection.getRange(),h.collapsed&&(o=h.startContainer,n.isEmptyBlock(o)))){for(y=o.parentNode;n.getChildCount(y)==1&&!n.isBody(y);)o=y,y=y.parentNode;o===y.lastChild&&f.preventDefault();return}i.chrome&&t.on("keydown",function(n,t){var i=t.keyCode||t.which;if((t.metaKey&&t.altKey||t.ctrlKey&&t.shiftKey)&&i==73)return!0})});t.addListener("keyup",function(t,u){var v=u.keyCode||u.which,f,c=this,a,o,s,e,h;if(v==l.Backspace){if(c.fireEvent("delkeyup"))return;if(f=c.selection.getRange(),f.collapsed){if(a=["h1","h2","h3","h4","h5","h6"],(e=n.findParentByTagName(f.startContainer,a,!0))&&n.isEmptyBlock(e)){if(o=e.previousSibling,o&&o.nodeName!="TABLE"){n.remove(e);f.setStartAtLast(o).setCursor(!1,!0);return}if(s=e.nextSibling,s&&s.nodeName!="TABLE"){n.remove(e);f.setStartAtFirst(s).setCursor(!1,!0);return}}n.isBody(f.startContainer)&&(e=n.createElement(c.document,"p",{innerHTML:i.ie?n.fillChar:"<br/>"}),f.insertNode(e).setStart(e,0).setCursor(!1,!0))}!r&&(f.startContainer.nodeType==3||f.startContainer.nodeType==1&&n.isEmptyBlock(f.startContainer))&&(i.ie?(h=f.document.createElement("span"),f.insertNode(h).setStartBefore(h).collapse(!0),f.select(),n.remove(h)):f.select())}})};UE.plugins.fiximgclick=function(){function u(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}var r=!1;return function(){var i=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];u.prototype={init:function(t){var i=this,f;i.editor=t;i.startPos=this.prePos={x:0,y:0};i.dragId=-1;var e=[],u=i.cover=document.createElement("div"),r=i.resizer=document.createElement("div");u.id=i.editor.ui.id+"_imagescale_cover";u.style.cssText="position:absolute;display:none;z-index:"+i.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;";n.on(u,"mousedown",function(){i.hide()});for(f=0;f<8;f++)e.push('<span class="edui-editor-imagescale-hand'+f+'"><\/span>');r.id=i.editor.ui.id+"_imagescale";r.className="edui-editor-imagescale";r.innerHTML=e.join("");r.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+i.editor.options.zIndex+";";i.editor.ui.getDom().appendChild(u);i.editor.ui.getDom().appendChild(r);i.initStyle();i.initEvents()},initStyle:function(){t.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var n=this;n.startPos.x=n.startPos.y=0;n.isDraging=!1},_eventHandler:function(t){var i=this,u;switch(t.type){case"mousedown":if(u=t.target||t.srcElement,u.className.indexOf("edui-editor-imagescale-hand")!==-1&&i.dragId===-1){i.dragId=u.className.slice(-1);i.startPos.x=i.prePos.x=t.clientX;i.startPos.y=i.prePos.y=t.clientY;n.on(i.doc,"mousemove",i.proxy(i._eventHandler,i))}break;case"mousemove":i.dragId!==-1&&(i.updateContainerStyle(i.dragId,{x:t.clientX-i.prePos.x,y:t.clientY-i.prePos.y}),i.prePos.x=t.clientX,i.prePos.y=t.clientY,r=!0,i.updateTargetElement());break;case"mouseup":i.dragId!==-1&&(i.updateContainerStyle(i.dragId,{x:t.clientX-i.prePos.x,y:t.clientY-i.prePos.y}),i.updateTargetElement(),i.target.parentNode&&i.attachTo(i.target),i.dragId=-1);n.un(i.doc,"mousemove",i.proxy(i._eventHandler,i));r&&(r=!1,i.editor.fireEvent("contentchange"))}},updateTargetElement:function(){var t=this;n.setStyles(t.target,{width:t.resizer.style.width,height:t.resizer.style.height});t.target.width=parseInt(t.resizer.style.width);t.target.height=parseInt(t.resizer.style.height);t.attachTo(t.target)},updateContainerStyle:function(n,t){var f=this,r=f.resizer,u;i[n][0]!=0&&(u=parseInt(r.style.left)+t.x,r.style.left=f._validScaledProp("left",u)+"px");i[n][1]!=0&&(u=parseInt(r.style.top)+t.y,r.style.top=f._validScaledProp("top",u)+"px");i[n][2]!=0&&(u=r.clientWidth+i[n][2]*t.x,r.style.width=f._validScaledProp("width",u)+"px");i[n][3]!=0&&(u=r.clientHeight+i[n][3]*t.y,r.style.height=f._validScaledProp("height",u)+"px")},_validScaledProp:function(n,t){var i=this.resizer,r=document;t=isNaN(t)?0:t;switch(n){case"left":return t<0?0:t+i.clientWidth>r.clientWidth?r.clientWidth-i.clientWidth:t;case"top":return t<0?0:t+i.clientHeight>r.clientHeight?r.clientHeight-i.clientHeight:t;case"width":return t<=0?1:t+i.offsetLeft>r.clientWidth?r.clientWidth-i.offsetLeft:t;case"height":return t<=0?1:t+i.offsetTop>r.clientHeight?r.clientHeight-i.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var t=this,i=n.getXY(t.editor.ui.getDom()),r=n.getXY(t.editor.iframe);n.setStyles(t.cover,{width:t.editor.iframe.offsetWidth+"px",height:t.editor.iframe.offsetHeight+"px",top:r.y-i.y+"px",left:r.x-i.x+"px",position:"absolute",display:""})},show:function(t){var i=this;i.resizer.style.display="block";t&&i.attachTo(t);n.on(this.resizer,"mousedown",i.proxy(i._eventHandler,i));n.on(i.doc,"mouseup",i.proxy(i._eventHandler,i));i.showCover();i.editor.fireEvent("afterscaleshow",i);i.editor.fireEvent("saveScene")},hide:function(){var t=this;t.hideCover();t.resizer.style.display="none";n.un(t.resizer,"mousedown",t.proxy(t._eventHandler,t));n.un(t.doc,"mouseup",t.proxy(t._eventHandler,t));t.editor.fireEvent("afterscalehide",t)},proxy:function(n,t){return function(){return n.apply(t||this,arguments)}},attachTo:function(t){var i=this,u=i.target=t,r=this.resizer,f=n.getXY(u),e=n.getXY(i.editor.iframe),o=n.getXY(r.parentNode);n.setStyles(r,{width:u.width+"px",height:u.height+"px",left:e.x+f.x-i.editor.getScrollLeft()-o.x-parseInt(r.style.borderLeftWidth)+"px",top:e.y+f.y-i.editor.getScrollTop()-o.y-parseInt(r.style.borderTopWidth)+"px"})}}}(),function(){var t=this,r;t.setOpt("imageScaleEnabled",!0);!i.ie&&t.options.imageScaleEnabled&&t.addListener("click",function(i,f){var c=t.selection.getRange(),e=c.getClosedNode(),o,s,h;if(e&&e.tagName==="IMG"&&t.body.contentEditable!=="false"&&e===f.target){if(e.getAttribute("anchorname")||n.hasClass(e,"uep-loading")||n.hasClass(e,"uep-loading-error"))return;if(!r){r=new u;r.init(t);t.ui.getDom().appendChild(r.resizer);o=function(){r.hide();r.target&&t.selection.getRange().selectNode(r.target).select()};s=function(n){var t=n.target||n.srcElement;t&&(t.className===undefined||t.className.indexOf("edui-editor-imagescale")===-1)&&o(n)};t.addListener("afterscaleshow",function(){t.addListener("beforekeydown",o);t.addListener("beforemousedown",s);n.on(document,"keydown",o);n.on(document,"mousedown",s);t.selection.getNative().removeAllRanges()});t.addListener("afterscalehide",function(){t.removeListener("beforekeydown",o);t.removeListener("beforemousedown",s);n.un(document,"keydown",o);n.un(document,"mousedown",s);var i=r.target;i.parentNode&&t.selection.getRange().selectNode(i).select()});n.on(r.resizer,"mousedown",function(n){t.selection.getNative().removeAllRanges();var i=n.target||n.srcElement;i&&i.className.indexOf("edui-editor-imagescale-hand")===-1&&(h=setTimeout(function(){r.hide();r.target&&t.selection.getRange().selectNode(i).select()},200))});n.on(r.resizer,"mouseup",function(n){var t=n.target||n.srcElement;t&&t.className.indexOf("edui-editor-imagescale-hand")===-1&&clearTimeout(h)})}r.show(e)}else r&&r.resizer.style.display!=="none"&&r.hide()});i.webkit&&t.addListener("click",function(n,i){if(i.target.tagName==="IMG"&&t.body.contentEditable!=="false"){var r=new f.Range(t.document);r.selectNode(i.target).select()}})}}();UE.plugin.register("autolink",function(){var r=0;return i.ie?{}:{bindEvents:{reset:function(){r=0},keydown:function(i,r){var o=this,v=r.keyCode||r.which,f,e,a,s;if(v==32||v==13){for(var h=o.selection.getNative(),u=h.getRangeAt(0).cloneRange(),c,l,f=u.startContainer;f.nodeType==1&&u.startOffset>0;){if(f=u.startContainer.childNodes[u.startOffset-1],!f)break;u.setStart(f,f.nodeType==1?f.childNodes.length:f.nodeValue.length);u.collapse(!0);f=u.startContainer}do{if(u.startOffset==0){for(f=u.startContainer.previousSibling;f&&f.nodeType==1;)f=f.lastChild;if(!f||n.isFillChar(f))break;c=f.nodeValue.length}else f=u.startContainer,c=u.startOffset;u.setStart(f,c-1);l=u.toString().charCodeAt(0)}while(l!=160&&l!=32);if(u.toString().replace(new RegExp(n.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(u.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(u.toString()))break;try{u.setStart(u.startContainer,u.startOffset+1)}catch(y){for(f=u.startContainer;!(next=f.nextSibling);){if(n.isBody(f))return;f=f.parentNode}u.setStart(next,0)}}if(n.findParentByTagName(u.startContainer,"a",!0))return;e=o.document.createElement("a");a=o.document.createTextNode(" ");o.undoManger&&o.undoManger.save();e.appendChild(u.extractContents());e.href=e.innerHTML=e.innerHTML.replace(/<[^>]+>/g,"");s=e.getAttribute("href").replace(new RegExp(n.fillChar,"g"),"");s=/^(?:https?:\/\/)/gi.test(s)?s:"http://"+s;e.setAttribute("_src",t.html(s));e.href=t.html(s);u.insertNode(e);e.parentNode.insertBefore(a,e.nextSibling);u.setStart(a,0);u.collapse(!0);h.removeAllRanges();h.addRange(u);o.undoManger&&o.undoManger.save()}}}}}},function(){function r(t){if(t.nodeType==3)return null;if(t.nodeName=="A")return t;for(var i=t.lastChild;i;){if(i.nodeName=="A")return i;if(i.nodeType==3){if(n.isWhitespace(i)){i=i.previousSibling;continue}return null}i=i.lastChild}}var t={37:1,38:1,39:1,40:1,13:1,32:1};i.ie&&this.addListener("keyup",function(i,u){var c=this,s=u.keyCode,o,f,e,h;if(t[s])if(o=c.selection.getRange(),f=o.startContainer,s==13){while(f&&!n.isBody(f)&&!n.isBlockElm(f))f=f.parentNode;f&&!n.isBody(f)&&f.nodeName=="P"&&(e=f.previousSibling,e&&e.nodeType==1&&(e=r(e),e&&!e.getAttribute("_href")&&n.remove(e,!0)))}else s==32?f.nodeType==3&&/^\s$/.test(f.nodeValue)&&(f=f.previousSibling,f&&f.nodeName=="A"&&!f.getAttribute("_href")&&n.remove(f,!0)):(f=n.findParentByTagName(f,"a",!0),f&&!f.getAttribute("_href")&&(h=o.createBookmark(),n.remove(f,!0),o.moveToBookmark(h).select(!0)))})});UE.plugins.autoheight=function(){function r(){var t=this;(clearTimeout(h),c)||(!t.queryCommandState||t.queryCommandState&&t.queryCommandState("source")!=1)&&(h=setTimeout(function(){for(var i=t.body.lastChild;i&&i.nodeType!=1;)i=i.previousSibling;i&&i.nodeType==1&&(i.style.clear="both",u=Math.max(n.getXY(i).y+i.offsetHeight+25,Math.max(o.minFrameHeight,o.initialFrameHeight)),u!==e&&(t.iframe.parentNode.style.transition="width 0.3s, height 0.3s, easy-in-out",u!==parseInt(t.iframe.parentNode.style.height)&&(t.iframe.parentNode.style.height=u+"px"),t.body.style.height=u+"px",e=u),n.removeStyle(i,"clear"))},50))}function l(){t.window&&(f===null?f=t.window.scrollY:t.window.scrollY==0&&f!=0&&(t.window.scrollTo(0,0),f=null))}var t=this,s,e,o,u,h,c,f;if(t.autoHeightEnabled=t.options.autoHeightEnabled!==!1,t.autoHeightEnabled){e=0;o=t.options;t.addListener("fullscreenchanged",function(n,t){c=t});t.addListener("destroy",function(){n.un(t.window,"scroll",l);t.removeListener("contentchange afterinserthtml keyup mouseup",r)});t.enableAutoHeight=function(){var n=this,t;n.autoHeightEnabled&&(t=n.document,n.autoHeightEnabled=!0,s=t.body.style.overflowY,t.body.style.overflowY="hidden",n.addListener("contentchange afterinserthtml keyup mouseup",r),setTimeout(function(){r.call(n)},i.gecko?100:0),n.fireEvent("autoheightchanged",n.autoHeightEnabled))};t.disableAutoHeight=function(){t.body.style.overflowY=s||"";t.removeListener("contentchange",r);t.removeListener("keyup",r);t.removeListener("mouseup",r);t.autoHeightEnabled=!1;t.fireEvent("autoheightchanged",t.autoHeightEnabled)};t.on("setHeight",function(){t.disableAutoHeight()});t.addListener("ready",function(){t.enableAutoHeight();var u;n.on(i.ie?t.body:t.document,i.webkit?"dragover":"drop",function(){clearTimeout(u);u=setTimeout(function(){r.call(t)},100)});n.on(t.window,"scroll",l)})}};UE.plugins.autofloat=function(){function d(){return UE.ui?1:(alert(w.autofloatMsg),0)}function g(){var n=document.body.style;n.backgroundImage='url("about:blank")';n.backgroundAttachment="fixed"}function nt(){var e=n.getXY(r),t=n.getComputedStyle(r,"position"),h=n.getComputedStyle(r,"left");r.style.width=r.offsetWidth+"px";r.style.zIndex=u.options.zIndex*1+1;r.parentNode.insertBefore(f,r);v||k&&i.ie?(r.style.position!="absolute"&&(r.style.position="absolute"),r.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-p+s+"px"):(i.ie7Compat&&o&&(o=!1,r.style.left=n.getXY(r).x-document.documentElement.getBoundingClientRect().left+2+"px"),r.style.position!="fixed"&&(r.style.position="fixed",r.style.top=s+"px",(t=="absolute"||t=="relative")&&parseFloat(h)&&(r.style.left=e.x+"px")))}function c(){o=!0;f.parentNode&&f.parentNode.removeChild(f);r.style.cssText=y}function e(){var n=h(u.container),t=u.options.toolbarTopOffset||0;n.top<0&&n.bottom-r.offsetHeight>t?nt():c()}var u=this,w=u.getLang(),a,s,y,f,r,p,h,o,l;if(u.setOpt({topOffset:0}),a=u.options.autoFloatEnabled!==!1,s=u.options.topOffset,a){var b=UE.ui.uiUtils,v=i.ie&&i.version<=6,k=i.quirks;f=document.createElement("div");o=!0;u.unsetFloating=c;l=t.defer(function(){e()},i.ie?200:100,!0);u.addListener("destroy",function(){n.un(window,["scroll","resize"],e);u.removeListener("keydown",l)});u.addListener("ready",function(){if(d(u)){if(!u.ui)return;h=b.getClientRect;r=u.ui.getDom("toolbarbox");p=h(r).top;y=r.style.cssText;f.style.height=r.offsetHeight+"px";v&&g();n.on(window,["scroll","resize"],e);u.addListener("keydown",l);u.addListener("beforefullscreenchange",function(n,t){t&&c()});u.addListener("fullscreenchanged",function(n,t){t||e()});u.addListener("sourcemodechanged",function(){setTimeout(function(){e()},0)});u.addListener("clearDoc",function(){setTimeout(function(){e()},0)})}})}};UE.plugins.video=function(){function i(i,r,u,f,e,o,s){var h,c;switch(s){case"iframe":h='<iframe class="'+o+'"  src="'+t.html(i)+'" width="'+r+'" height="'+u+'" frameborder=0 allowfullscreen>';break;case"image":h="<img "+(f?'id="'+f+'"':"")+' width="'+r+'" height="'+u+'" _url="'+i+'" class="" src="'+n.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+n.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(e?"float:"+e+";":"")+'" />';break;case"embed":h='<embed type="application/x-shockwave-flash" class="'+o+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+t.html(i)+'" width="'+r+'" height="'+u+'"'+(e?' style="float:'+e+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":c=i.substr(i.lastIndexOf(".")+1);c=="ogv"&&(c="ogg");h="<video"+(f?' id="'+f+'"':"")+' class="'+o+'" '+(e?' style="float:'+e+'"':"")+' controls preload="none" width="'+r+'" height="'+u+'" src="'+i+'" data-setup="{}"><source src="'+i+'" type="video/'+c+'" /><\/video>'}return h}function r(n,r){t.each(n.getNodesByTagName(r?"img":"embed video"),function(n){var t=n.getAttr("class"),u;t&&t.indexOf("edui-faked-video")!=-1&&(u=i(r?n.getAttr("_url"):n.getAttr("src"),n.getAttr("width"),n.getAttr("height"),null,n.getStyle("float")||"",t,r?"embed":"image"),n.parentNode.replaceChild(UE.uNode.createElement(u),n));t&&t.indexOf("edui-upload-video")!=-1&&(u=i(r?n.getAttr("_url"):n.getAttr("src"),n.getAttr("width"),n.getAttr("height"),null,n.getStyle("float")||"",t,r?"video":"image"),n.parentNode.replaceChild(UE.uNode.createElement(u),n))})}var n=this;n.addOutputRule(function(n){r(n,!0)});n.addInputRule(function(n){r(n)});n.commands.insertvideo={execCommand:function(r,u){var s,h,c,f,e,l,o,a;if(u=t.isArray(u)?u:[u],n.fireEvent("beforeinsertvideo",u)!==!0){for(s=[],h="tmpVideo",f=0,l=u.length;f<l;f++)e=u[f],o="iframe",e.url.match(/.mp4$/)&&(o="video"),c=o=="iframe"?"edui-video-iframe":"edui-video-video",s.push(i(e.url,e.width||420,e.height||280,h+f,null,c,o));n.execCommand("inserthtml",s.join(""),!0);a=this.selection.getRange();n.fireEvent("afterinsertvideo",u)}},queryCommandState:function(){var t=n.selection.getRange().getClosedNode(),i=t&&(t.className=="edui-video-iframe"||t.className.indexOf("edui-video-iframe")!=-1||t.className=="edui-video-video"||t.className.indexOf("edui-video-video")!=-1);return i?1:0}}};UE.plugins.audio=function(){function r(n,t){t=t||{};var i=["<audio",t.id?' id="'+t.id+'"':"",t.cls?' class="'+t.cls+'"':""," controls >",'<source src="'+n+'" type="audio/mpeg" />',"<\/audio>",];return i.join("")}function i(){}var n=this;n.addOutputRule(function(n){i(n,!0)});n.addInputRule(function(n){i(n)});n.commands.insertaudio={execCommand:function(i,u){var e,f,o,s,h;if(u=t.isArray(u)?u:[u],n.fireEvent("beforeinsertaudio",u)!==!0){for(e=[],f=0,s=u.length;f<s;f++)o=u[f],e.push(r(o.url,{cls:"edui-audio-audio"}));n.execCommand("inserthtml",e.join(""),!0);h=this.selection.getRange();n.fireEvent("afterinsertaudio",u)}},queryCommandState:function(){var t=n.selection.getRange().getClosedNode(),i=t&&(t.className=="edui-audio-audio"||t.className.indexOf("edui-audio-audio")!=-1);return i?1:0}}},function(){function f(){}var r=UE.UETable=function(n){this.table=n;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(n)};r.removeSelectedClass=function(i){t.each(i,function(t){n.removeClasses(t,"selectTdClass")})};r.addSelectedClass=function(i){t.each(i,function(t){n.addClass(t,"selectTdClass")})};r.isEmptyBlock=function(t){var f=new RegExp(n.fillChar,"g"),r;if(t[i.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(f,"").length>0)return 0;for(r in u.$isNotEmpty)if(u.$isNotEmpty.hasOwnProperty(r)&&t.getElementsByTagName(r).length)return 0;return 1};r.getWidth=function(t){return t?parseInt(n.getComputedStyle(t,"width"),10):0};r.getTableCellAlignState=function(n){t.isArray(n)||(n=[n]);var i={},f=["align","valign"],r=null,u=!0;return t.each(n,function(n){return t.each(f,function(t){if(r=n.getAttribute(t),!i[t]&&r)i[t]=r;else if(!i[t]||r!==i[t])return u=!1,!1}),u}),u?i:null};r.getTableItemsByRange=function(t){var i=t.selection.getStart();i&&i.id&&i.id.indexOf("_baidu_bookmark_start_")===0&&i.nextSibling&&(i=i.nextSibling);var r=i&&n.findParentByTagName(i,["td","th"],!0),u=r&&r.parentNode,f=u&&n.findParentByTagName(u,["table"]),e=f&&f.getElementsByTagName("caption")[0];return{cell:r,tr:u,table:f,caption:e}};r.getUETableBySelected=function(n){var t=r.getTableItemsByRange(n).table;return t&&t.ueTable&&t.ueTable.selectedTds.length?t.ueTable:null};r.getDefaultValue=function(t,i){var u={thin:"0px",medium:"1px",thick:"2px"},e,o,s,r,f;return i?(f=i.getElementsByTagName("td")[0],r=n.getComputedStyle(i,"border-left-width"),e=parseInt(u[r]||r,10),r=n.getComputedStyle(f,"padding-left"),o=parseInt(u[r]||r,10),r=n.getComputedStyle(f,"border-left-width"),s=parseInt(u[r]||r,10),{tableBorder:e,tdPadding:o,tdBorder:s}):(i=t.document.createElement("table"),i.insertRow(0).insertCell(0).innerHTML="xxx",t.body.appendChild(i),f=i.getElementsByTagName("td")[0],r=n.getComputedStyle(i,"border-left-width"),e=parseInt(u[r]||r,10),r=n.getComputedStyle(f,"padding-left"),o=parseInt(u[r]||r,10),r=n.getComputedStyle(f,"border-left-width"),s=parseInt(u[r]||r,10),n.remove(i),{tableBorder:e,tdPadding:o,tdBorder:s})};r.getUETable=function(t){var i=t.tagName.toLowerCase();return t=i=="td"||i=="th"||i=="caption"?n.findParentByTagName(t,"table",!0):t,t.ueTable||(t.ueTable=new r(t)),t.ueTable};r.cloneCell=function(i,r,u){var e,f;return!i||t.isString(i)?this.table.ownerDocument.createElement(i||"td"):(e=n.hasClass(i,"selectTdClass"),e&&n.removeClasses(i,"selectTdClass"),f=i.cloneNode(!0),r&&(f.rowSpan=f.colSpan=1),u||n.removeAttributes(f,"width height"),u||n.removeAttributes(f,"style"),f.style.borderLeftStyle="",f.style.borderTopStyle="",f.style.borderLeftColor=i.style.borderRightColor,f.style.borderLeftWidth=i.style.borderRightWidth,f.style.borderTopColor=i.style.borderBottomColor,f.style.borderTopWidth=i.style.borderBottomWidth,e&&n.addClass(i,"selectTdClass"),f)};r.prototype={getMaxRows:function(){for(var n,u,f,e=this.table.rows,t=1,i=0,r;r=e[i];i++){for(n=1,u=0;f=r.cells[u++];)n=Math.max(f.rowSpan||1,n);t=Math.max(n+i,t)}return t},getMaxCols:function(){for(var u,o,t,i,s=this.table.rows,f=0,r={},n=0,e;e=s[n];n++){for(u=0,o=0;t=e.cells[o++];)if(u+=t.colSpan||1,t.rowSpan&&t.rowSpan>1)for(i=1;i<t.rowSpan;i++)r["row_"+(n+i)]?r["row_"+(n+i)]++:r["row_"+(n+i)]=t.colSpan||1;u+=r["row_"+n]||0;f=Math.max(u,f)}return f},getCellColIndex:function(){},getHSideCell:function(n,t){try{var i=this.getCellInfo(n),e,o,r=this.selectedTds.length,u=this.cellsRange;return!t&&(r?!u.beginColIndex:!i.colIndex)||t&&(r?u.endColIndex==this.colsNum-1:i.colIndex==this.colsNum-1)?null:(e=r?u.beginRowIndex:i.rowIndex,o=t?r?u.endColIndex+1:i.colIndex+1:r?u.beginColIndex-1:i.colIndex<1?0:i.colIndex-1,this.getCell(this.indexTable[e][o].rowIndex,this.indexTable[e][o].cellIndex))}catch(s){f(s)}},getTabNextCell:function(n,t){var u=this.getCellInfo(n),i=t||u.rowIndex,r=u.colIndex+1+(u.colSpan-1),f;try{f=this.getCell(this.indexTable[i][r].rowIndex,this.indexTable[i][r].cellIndex)}catch(e){try{i=i*1+1;r=0;f=this.getCell(this.indexTable[i][r].rowIndex,this.indexTable[i][r].cellIndex)}catch(e){}}return f},getVSideCell:function(n,t,i){try{var r=this.getCellInfo(n),o,s,u=this.selectedTds.length&&!i,e=this.cellsRange;return!t&&r.rowIndex==0||t&&(u?e.endRowIndex==this.rowsNum-1:r.rowIndex+r.rowSpan>this.rowsNum-1)?null:(o=t?u?e.endRowIndex+1:r.rowIndex+r.rowSpan:u?e.beginRowIndex-1:r.rowIndex-1,s=u?e.beginColIndex:r.colIndex,this.getCell(this.indexTable[o][s].rowIndex,this.indexTable[o][s].cellIndex))}catch(h){f(h)}},getSameEndPosCells:function(t,i){var e,l,u,o;try{var r=i.toLowerCase()==="x",s=n.getXY(t)[r?"x":"y"]+t["offset"+(r?"Width":"Height")],a=this.table.rows,h=null,c=[];for(e=0;e<this.rowsNum;e++)for(h=a[e].cells,l=0;u=h[l++];){if(o=n.getXY(u)[r?"x":"y"]+u["offset"+(r?"Width":"Height")],o>s&&r)break;if((t==u||s==o)&&(u[r?"colSpan":"rowSpan"]==1&&c.push(u),r))break}return c}catch(v){f(v)}},setCellContent:function(t,r){t.innerHTML=r||(i.ie?n.fillChar:"<br />")},cloneCell:r.cloneCell,getSameStartPosXCells:function(t){var i,h,r,u;try{var e=n.getXY(t).x+t.offsetWidth,c=this.table.rows,o,s=[];for(i=0;i<this.rowsNum;i++)for(o=c[i].cells,h=0;r=o[h++];){if(u=n.getXY(r).x,u>e)break;if(u==e&&r.colSpan==1){s.push(r);break}}return s}catch(l){f(l)}},update:function(i){var w,s,h,a,r,b,u,f,g,o,e;this.table=i||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];for(var c=this.table.rows,l=this.getMaxRows(),tt=l-c.length,p=this.getMaxCols();tt--;)this.table.insertRow(c.length);for(this.rowsNum=l,this.colsNum=p,e=0,w=c.length;e<w;e++)this.indexTable[e]=new Array(p);for(s=0;h=c[s];s++)for(a=0,b=h.cells;r=b[a];a++){r.rowSpan>l&&(r.rowSpan=l);for(var v=a,k=r.rowSpan||1,d=r.colSpan||1;this.indexTable[s][v];)v++;for(u=0;u<k;u++)for(f=0;f<d;f++)this.indexTable[s+u][v+f]={rowIndex:s,cellIndex:a,colIndex:v,rowSpan:k,colSpan:d}}for(u=0;u<l;u++)for(f=0;f<p;f++)this.indexTable[u][f]===undefined&&(h=c[u],r=h.cells[h.cells.length-1],r=r?r.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(r),r.colSpan!==1&&(r.colSpan=1),r.rowSpan!==1&&(r.rowSpan=1),h.appendChild(r),this.indexTable[u][f]={rowIndex:u,cellIndex:r.cellIndex,colIndex:f,rowSpan:1,colSpan:1});if(g=n.getElementsByTagName(this.table,"td"),o=[],t.each(g,function(t){n.hasClass(t,"selectTdClass")&&o.push(t)}),o.length){var it=o[0],rt=o[o.length-1],nt=this.getCellInfo(it),y=this.getCellInfo(rt);this.selectedTds=o;this.cellsRange={beginRowIndex:nt.rowIndex,beginColIndex:nt.colIndex,endRowIndex:y.rowIndex+y.rowSpan-1,endColIndex:y.colIndex+y.colSpan-1}}if(!n.hasClass(this.table.rows[0],"firstRow"))for(n.addClass(this.table.rows[0],"firstRow"),e=1;e<this.table.rows.length;e++)n.removeClasses(this.table.rows[e],"firstRow")},getCellInfo:function(n){var t,i;if(n){var r=n.cellIndex,u=n.parentNode.rowIndex,f=this.indexTable[u],e=this.colsNum;for(t=r;t<e;t++)if(i=f[t],i.rowIndex===u&&i.cellIndex===r)return i}},getCell:function(n,t){return n<this.rowsNum&&this.table.rows[n].cells[t]||null},deleteCell:function(n,t){t=typeof t=="number"?t:n.parentNode.rowIndex;var i=this.table.rows[t];i.deleteCell(n.cellIndex)},getCellsRange:function(n,t){function f(n,t,i,u){var h=n,c=t,l=i,a=u,s,o,e;if(n>0)for(o=t;o<u;o++)s=r.indexTable[n][o],e=s.rowIndex,e<n&&(h=Math.min(e,h));if(u<r.colsNum)for(e=n;e<i;e++)s=r.indexTable[e][u],o=s.colIndex+s.colSpan-1,o>u&&(a=Math.max(o,a));if(i<r.rowsNum)for(o=t;o<u;o++)s=r.indexTable[i][o],e=s.rowIndex+s.rowSpan-1,e>i&&(l=Math.max(e,l));if(t>0)for(e=n;e<i;e++)s=r.indexTable[e][t],o=s.colIndex,o<t&&(c=Math.min(s.colIndex,c));return h!=n||c!=t||l!=i||a!=u?f(h,c,l,a):{beginRowIndex:n,beginColIndex:t,endRowIndex:i,endColIndex:u}}var r,i;try{if(r=this,i=r.getCellInfo(n),n===t)return{beginRowIndex:i.rowIndex,beginColIndex:i.colIndex,endRowIndex:i.rowIndex+i.rowSpan-1,endColIndex:i.colIndex+i.colSpan-1};var u=r.getCellInfo(t),e=Math.min(i.rowIndex,u.rowIndex),o=Math.min(i.colIndex,u.colIndex),s=Math.max(i.rowIndex+i.rowSpan-1,u.rowIndex+u.rowSpan-1),h=Math.max(i.colIndex+i.colSpan-1,u.colIndex+u.colSpan-1);return f(e,o,s,h)}catch(c){}},getCells:function(n){var r,u,e;this.clearSelected();var l=n.beginRowIndex,a=n.beginColIndex,o=n.endRowIndex,s=n.endColIndex,t,i,f,h={},c=[];for(r=l;r<=o;r++)for(u=a;u<=s;u++)if(t=this.indexTable[r][u],i=t.rowIndex,f=t.colIndex,e=i+"|"+f,!h[e]){if(h[e]=1,i<r||f<u||i+t.rowSpan-1>o||f+t.colSpan-1>s)return null;c.push(this.getCell(i,t.cellIndex))}return c},clearSelected:function(){r.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(n){var t=this.getCells(n);r.addSelectedClass(t);this.selectedTds=t;this.cellsRange=n},isFullRow:function(){var n=this.cellsRange;return n.endColIndex-n.beginColIndex+1==this.colsNum},isFullCol:function(){var t=this.cellsRange,i=this.table,r=i.getElementsByTagName("th"),n=t.endRowIndex-t.beginRowIndex+1;return r.length?n==this.rowsNum||n==this.rowsNum-1:n==this.rowsNum},getNextCell:function(n,t,i){try{var r=this.getCellInfo(n),o,s,u=this.selectedTds.length&&!i,e=this.cellsRange;return!t&&r.rowIndex==0||t&&(u?e.endRowIndex==this.rowsNum-1:r.rowIndex+r.rowSpan>this.rowsNum-1)?null:(o=t?u?e.endRowIndex+1:r.rowIndex+r.rowSpan:u?e.beginRowIndex-1:r.rowIndex-1,s=u?e.beginColIndex:r.colIndex,this.getCell(this.indexTable[o][s].rowIndex,this.indexTable[o][s].cellIndex))}catch(h){f(h)}},getPreviewCell:function(n,t){try{var i=this.getCellInfo(n),e,o,r=this.selectedTds.length,u=this.cellsRange;return!t&&(r?!u.beginColIndex:!i.colIndex)||t&&(r?u.endColIndex==this.colsNum-1:i.rowIndex>this.colsNum-1)?null:(e=t?r?u.beginRowIndex:i.rowIndex<1?0:i.rowIndex-1:r?u.beginRowIndex:i.rowIndex,o=t?r?u.endColIndex+1:i.colIndex:r?u.beginColIndex-1:i.colIndex<1?0:i.colIndex-1,this.getCell(this.indexTable[e][o].rowIndex,this.indexTable[e][o].cellIndex))}catch(s){f(s)}},moveContent:function(n,t){if(!r.isEmptyBlock(t)){if(r.isEmptyBlock(n)){n.innerHTML=t.innerHTML;return}var i=n.lastChild;for(i.nodeType!=3&&u.$block[i.tagName]||n.appendChild(n.ownerDocument.createElement("br"));i=t.firstChild;)n.appendChild(i)}},mergeRight:function(n){var t=this.getCellInfo(n),u=t.colIndex+t.colSpan,i=this.indexTable[t.rowIndex][u],r=this.getCell(i.rowIndex,i.cellIndex);n.colSpan=t.colSpan+i.colSpan;n.removeAttribute("width");this.moveContent(n,r);this.deleteCell(r,i.rowIndex);this.update()},mergeDown:function(n){var t=this.getCellInfo(n),u=t.rowIndex+t.rowSpan,i=this.indexTable[u][t.colIndex],r=this.getCell(i.rowIndex,i.cellIndex);n.rowSpan=t.rowSpan+i.rowSpan;n.removeAttribute("height");this.moveContent(n,r);this.deleteCell(r,i.rowIndex);this.update()},mergeRange:function(){for(var u,f,e,t=this.cellsRange,n=this.getCell(t.beginRowIndex,this.indexTable[t.beginRowIndex][t.beginColIndex].cellIndex),o=this.getCells(t),i=0,r;r=o[i++];)r!==n&&(this.moveContent(n,r),this.deleteCell(r));if(n.rowSpan=t.endRowIndex-t.beginRowIndex+1,n.rowSpan>1&&n.removeAttribute("height"),n.colSpan=t.endColIndex-t.beginColIndex+1,n.colSpan>1&&n.removeAttribute("width"),n.rowSpan==this.rowsNum&&n.colSpan!=1&&(n.colSpan=1),n.colSpan==this.colsNum&&n.rowSpan!=1){if(u=n.parentNode.rowIndex,this.table.deleteRow)for(var i=u+1,s=u+1,f=n.rowSpan;i<f;i++)this.table.deleteRow(s);else for(i=0,f=n.rowSpan-1;i<f;i++)e=this.table.rows[u+1],e.parentNode.removeChild(e);n.rowSpan=1}this.update()},insertRow:function(t,i){function l(t,i,r){var e,u,f;t==0?(e=r.nextSibling||r.previousSibling,u=e.cells[t],u.tagName=="TH"&&(u=i.ownerDocument.createElement("th"),u.appendChild(i.firstChild),r.insertBefore(u,i),n.remove(i))):i.tagName=="TH"&&(f=i.ownerDocument.createElement("td"),f.appendChild(i.firstChild),r.insertBefore(f,i),n.remove(i))}var h=this.colsNum,c=this.table,f=c.insertRow(t),r,o=null,s=typeof i=="string"&&i.toUpperCase()=="TH",u,a,v,e;if(t==0||t==this.rowsNum){for(u=0;u<h;u++)r=this.cloneCell(i,!0),this.setCellContent(r),r.getAttribute("vAlign")&&r.setAttribute("vAlign",r.getAttribute("vAlign")),f.appendChild(r),s||l(u,r,f);s&&(o=c.createTHead(),o.insertBefore(f,o.firstChild))}else for(a=this.indexTable[t],v=0,u=0;u<h;u++)e=a[u],e.rowIndex<t?(r=this.getCell(e.rowIndex,e.cellIndex),r.rowSpan=e.rowSpan+1):(r=this.cloneCell(i,!0),this.setCellContent(r),f.appendChild(r)),s||l(u,r,f);return this.update(),f},deleteRow:function(i){for(var e,u,f,h,c,l,a=this.table.rows[i],s=this.indexTable[i],v=this.colsNum,y=0,r=0;r<v;){if(e=s[r],u=this.getCell(e.rowIndex,e.cellIndex),u.rowSpan>1&&e.rowIndex==i){f=u.cloneNode(!0);f.rowSpan=u.rowSpan-1;f.innerHTML="";u.rowSpan=1;var p=i+1,o=this.table.rows[p],w,b=this.getPreviewMergedCellsNum(p,r)-y;b<r?(w=r-b-1,n.insertAfter(o.cells[w],f)):o.cells.length&&o.insertBefore(f,o.cells[0]);y+=1}r+=u.colSpan||1}for(h=[],c={},r=0;r<v;r++){var k=s[r].rowIndex,d=s[r].cellIndex,g=k+"_"+d;c[g]||(c[g]=1,u=this.getCell(k,d),h.push(u))}l=[];t.each(h,function(n){n.rowSpan==1?n.parentNode.removeChild(n):l.push(n)});t.each(l,function(n){n.rowSpan--});a.parentNode.removeChild(a);this.update()},insertCol:function(t,i,r){function l(t,i,r){var u,f;t==0?(u=i.nextSibling||i.previousSibling,u.tagName=="TH"&&(u=i.ownerDocument.createElement("th"),u.appendChild(i.firstChild),r.insertBefore(u,i),n.remove(i))):i.tagName=="TH"&&(f=i.ownerDocument.createElement("td"),f.appendChild(i.firstChild),r.insertBefore(f,i),n.remove(i))}var h=this.rowsNum,e=0,f,u,a=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),c=typeof i=="string"&&i.toUpperCase()=="TH",o,s;if(t==0||t==this.colsNum)for(;e<h;e++)f=this.table.rows[e],o=f.cells[t==0?t:f.cells.length],u=this.cloneCell(i,!0),this.setCellContent(u),u.setAttribute("vAlign",u.getAttribute("vAlign")),o&&u.setAttribute("width",o.getAttribute("width")),t?n.insertAfter(f.cells[f.cells.length-1],u):f.insertBefore(u,f.cells[0]),c||l(e,u,f);else for(;e<h;e++)s=this.indexTable[e][t],s.colIndex<t?(u=this.getCell(s.rowIndex,s.cellIndex),u.colSpan=s.colSpan+1):(f=this.table.rows[e],o=f.cells[s.cellIndex],u=this.cloneCell(i,!0),this.setCellContent(u),u.setAttribute("vAlign",u.getAttribute("vAlign")),o&&u.setAttribute("width",o.getAttribute("width")),o?f.insertBefore(u,o):f.appendChild(u)),c||l(e,u,f);this.update();this.updateWidth(a,r||{tdPadding:10,tdBorder:1})},updateWidth:function(i,u){var f=this.table,e=r.getWidth(f)-u.tdPadding*2-u.tdBorder+i,o;if(e<f.ownerDocument.body.offsetWidth){f.setAttribute("width",e);return}o=n.getElementsByTagName(this.table,"td th");t.each(o,function(n){n.setAttribute("width",i)})},deleteCol:function(n){for(var i,o=this.indexTable,s=this.table.rows,h=this.table.getAttribute("width"),u=0,c=this.rowsNum,f={},r=0;r<c;){var l=o[r],t=l[n],e=t.rowIndex+"_"+t.colIndex;f[e]||(f[e]=1,i=this.getCell(t.rowIndex,t.cellIndex),u||(u=i&&parseInt(i.offsetWidth/i.colSpan,10).toFixed(0)),i.colSpan>1?i.colSpan--:s[r].deleteCell(t.cellIndex),r+=t.rowSpan||1)}this.table.setAttribute("width",h-u);this.update()},splitToCells:function(n){var i=this,r=this.splitToRows(n);t.each(r,function(n){i.splitToCols(n)})},splitToRows:function(n){var r=this.getCellInfo(n),u=r.rowIndex,e=r.colIndex,f=[],i,o,s,t;for(n.rowSpan=1,f.push(n),i=u,o=u+r.rowSpan;i<o;i++)i!=u&&(s=this.table.rows[i],t=s.insertCell(e-this.getPreviewMergedCellsNum(i,e)),t.colSpan=r.colSpan,this.setCellContent(t),t.setAttribute("vAlign",n.getAttribute("vAlign")),t.setAttribute("align",n.getAttribute("align")),n.style.cssText&&(t.style.cssText=n.style.cssText),f.push(t));return this.update(),f},getPreviewMergedCellsNum:function(n,t){for(var r,e,u=this.indexTable[n],f=0,i=0;i<t;)r=u[i].colSpan,e=u[i].rowIndex,f+=r-(e==n?1:0),i+=r;return f},splitToCols:function(t){var h=(t.offsetWidth/t.colSpan-22).toFixed(0),f=this.getCellInfo(t),c=f.rowIndex,e=f.colIndex,o=[],r,l,s,i,u;for(t.colSpan=1,t.setAttribute("width",h),o.push(t),r=e,l=e+f.colSpan;r<l;r++)r!=e&&(s=this.table.rows[c],i=s.insertCell(this.indexTable[c][r].cellIndex+1),i.rowSpan=f.rowSpan,this.setCellContent(i),i.setAttribute("vAlign",t.getAttribute("vAlign")),i.setAttribute("align",t.getAttribute("align")),i.setAttribute("width",h),t.style.cssText&&(i.style.cssText=t.style.cssText),t.tagName=="TH"&&(u=t.ownerDocument.createElement("th"),u.appendChild(i.firstChild),u.setAttribute("vAlign",t.getAttribute("vAlign")),u.rowSpan=i.rowSpan,s.insertBefore(u,i),n.remove(i)),o.push(i));return this.update(),o},isLastCell:function(n,t,i){t=t||this.rowsNum;i=i||this.colsNum;var r=this.getCellInfo(n);return r.rowIndex+r.rowSpan==t&&r.colIndex+r.colSpan==i},getLastCell:function(n){n=n||this.table.getElementsByTagName("td");var s=this.getCellInfo(n[0]),e=this,i=n[0],o=i.parentNode,u=0,r=0,f;return t.each(n,function(n){n.parentNode==o&&(r+=n.colSpan||1);u+=n.rowSpan*n.colSpan||1}),f=u/r,t.each(n,function(n){if(e.isLastCell(n,f,r))return i=n,!1}),i},selectRow:function(n){var t=this.indexTable[n],i=this.getCell(t[0].rowIndex,t[0].cellIndex),r=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),u=this.getCellsRange(i,r);this.setSelected(u)},selectTable:function(){var n=this.table.getElementsByTagName("td"),t=this.getCellsRange(n[0],n[n.length-1]);this.setSelected(t)},setBackground:function(n,i){var f,u,e;if(typeof i=="string")t.each(n,function(n){n.style.backgroundColor=i});else if(typeof i=="object"){i=t.extend({repeat:!0,colorList:["#ddd","#fff"]},i);var o=this.getCellInfo(n[0]).rowIndex,r=0,s=i.colorList,h=function(n,t,i){return n[t]?n[t]:i?n[t%n.length]:""};for(f=0;u=n[f++];)e=this.getCellInfo(u),u.style.backgroundColor=h(s,o+r==e.rowIndex?r:++r,i.repeat)}},removeBackground:function(n){t.each(n,function(n){n.style.backgroundColor=""})}}}(),function(){function h(i,r){var u=n.getElementsByTagName(i,"td th"),f;t.each(u,function(n){n.removeAttribute("width")});i.setAttribute("width",c(r,!0,s(r,i)));f=[];setTimeout(function(){t.each(u,function(n){n.colSpan==1&&f.push(n.offsetWidth)});t.each(u,function(n,t){n.colSpan==1&&n.setAttribute("width",f[t]+"")})},0)}function c(t,i,r){var u=t.body;return u.offsetWidth-(i?parseInt(n.getComputedStyle(u,"margin-left"),10)*2:0)-r.tableBorder*2-(t.options.offsetWidth||0)}function f(n){var t=r(n).cell,i;return t?(i=u(t),i.selectedTds.length?i.selectedTds:[t]):[]}var o=UE.UETable,r=function(n){return o.getTableItemsByRange(n)},e=function(n){return o.getUETableBySelected(n)},s=function(n,t){return o.getDefaultValue(n,t)},u=function(n){return o.getUETable(n)};UE.commands.inserttable={queryCommandState:function(){return r(this).table?-1:0},execCommand:function(r,u){function o(t,r){for(var e,u=[],o=t.numRows,s=t.numCols,f=0;f<o;f++){for(u.push("<tr"+(f==0?' class="firstRow"':"")+">"),e=0;e<s;e++)u.push('<td width="'+r+'"  vAlign="'+t.tdvalign+'" >'+(i.ie&&i.version<11?n.fillChar:"<br/>")+"<\/td>");u.push("<\/tr>")}return"<table><tbody>"+u.join("")+"<\/tbody><\/table>"}u||(u=t.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var f=this,h=this.selection.getRange(),c=h.startContainer,l=n.findParent(c,function(t){return n.isBlockElm(t)},!0)||f.body,e=s(f),a=l.offsetWidth,v=Math.floor(a/u.numCols-e.tdPadding*2-e.tdBorder);u.tdvalign||(u.tdvalign=f.options.tdvalign);f.execCommand("inserthtml",o(u,v))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return r(this).cell?0:-1},execCommand:function(){var t=r(this).table,n;t&&(n=this.document.createElement("p"),n.innerHTML=i.ie?"&nbsp;":"<br />",t.parentNode.insertBefore(n,t),this.selection.getRange().setStart(n,0).setCursor())}};UE.commands.deletetable={queryCommandState:function(){var t=this.selection.getRange();return n.findParentByTagName(t.startContainer,"table",!0)?0:-1},execCommand:function(t,r){var f=this.selection.getRange(),u;r=r||n.findParentByTagName(f.startContainer,"table",!0);r&&(u=r.nextSibling,u||(u=n.createElement(this.document,"p",{innerHTML:i.ie?n.fillChar:"<br/>"}),r.parentNode.insertBefore(u,r)),n.remove(r),f=this.selection.getRange(),u.nodeType==3?f.setStartBefore(u):f.setStart(u,0),f.setCursor(!1,!0),this.fireEvent("tablehasdeleted"))}};UE.commands.cellalign={queryCommandState:function(){return f(this).length?0:-1},execCommand:function(n,t){var i=f(this),r,u;if(i.length)for(r=0;u=i[r++];)u.setAttribute("align",t)}};UE.commands.cellvalign={queryCommandState:function(){return f(this).length?0:-1},execCommand:function(n,t){var i=f(this),r,u;if(i.length)for(r=0;u=i[r++];)u.setAttribute("vAlign",t)}};UE.commands.insertcaption={queryCommandState:function(){var n=r(this).table;return n?n.getElementsByTagName("caption").length==0?1:-1:-1},execCommand:function(){var u=r(this).table,t,f;u&&(t=this.document.createElement("caption"),t.innerHTML=i.ie?n.fillChar:"<br/>",u.insertBefore(t,u.firstChild),f=this.selection.getRange(),f.setStart(t,0).setCursor())}};UE.commands.deletecaption={queryCommandState:function(){var i=this.selection.getRange(),t=n.findParentByTagName(i.startContainer,"table");return t?t.getElementsByTagName("caption").length==0?-1:1:-1},execCommand:function(){var r=this.selection.getRange(),t=n.findParentByTagName(r.startContainer,"table"),i;t&&(n.remove(t.getElementsByTagName("caption")[0]),i=this.selection.getRange(),i.setStart(t.rows[0].cells[0],0).setCursor())}};UE.commands.inserttitle={queryCommandState:function(){var t=r(this).table,n;return t?(n=t.rows[0],n.cells[n.cells.length-1].tagName.toLowerCase()!="th"?0:-1):-1},execCommand:function(){var n=r(this).table,t;n&&u(n).insertRow(0,"th");t=n.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}};UE.commands.deletetitle={queryCommandState:function(){var t=r(this).table,n;return t?(n=t.rows[0],n.cells[n.cells.length-1].tagName.toLowerCase()=="th"?0:-1):-1},execCommand:function(){var t=r(this).table,i;t&&n.remove(t.rows[0]);i=t.getElementsByTagName("td")[0];this.selection.getRange().setStart(i,0).setCursor(!1,!0)}};UE.commands.inserttitlecol={queryCommandState:function(){var n=r(this).table,t;return n?(t=n.rows[n.rows.length-1],t.getElementsByTagName("th").length?-1:0):-1},execCommand:function(){var n=r(this).table,t;n&&u(n).insertCol(0,"th");h(n,this);t=n.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}};UE.commands.deletetitlecol={queryCommandState:function(){var n=r(this).table,t;return n?(t=n.rows[n.rows.length-1],t.getElementsByTagName("th").length?0:-1):-1},execCommand:function(){var t=r(this).table,i,u;if(t)for(i=0;i<t.rows.length;i++)n.remove(t.rows[i].children[0]);h(t,this);u=t.getElementsByTagName("td")[0];this.selection.getRange().setStart(u,0).setCursor(!1,!0)}};UE.commands.mergeright={queryCommandState:function(){var h=r(this),f=h.table,e=h.cell,t,n,o,i,s;return!f||!e?-1:(t=u(f),t.selectedTds.length)?-1:(n=t.getCellInfo(e),o=n.colIndex+n.colSpan,o>=t.colsNum)?-1:(i=t.indexTable[n.rowIndex][o],s=f.rows[i.rowIndex].cells[i.cellIndex],!s||e.tagName!=s.tagName)?-1:i.rowIndex==n.rowIndex&&i.rowSpan==n.rowSpan?0:-1},execCommand:function(){var n=this.selection.getRange(),i=n.createBookmark(!0),t=r(this).cell,f=u(t);f.mergeRight(t);n.moveToBookmark(i).select()}};UE.commands.mergedown={queryCommandState:function(){var h=r(this),f=h.table,e=h.cell,t,n,o,i,s;return!f||!e?-1:(t=u(f),t.selectedTds.length)?-1:(n=t.getCellInfo(e),o=n.rowIndex+n.rowSpan,o>=t.rowsNum)?-1:(i=t.indexTable[o][n.colIndex],s=f.rows[i.rowIndex].cells[i.cellIndex],!s||e.tagName!=s.tagName)?-1:i.colIndex==n.colIndex&&i.colSpan==n.colSpan?0:-1},execCommand:function(){var n=this.selection.getRange(),i=n.createBookmark(!0),t=r(this).cell,f=u(t);f.mergeDown(t);n.moveToBookmark(i).select()}};UE.commands.mergecells={queryCommandState:function(){return e(this)?0:-1},execCommand:function(){var t=e(this),i,r;t&&t.selectedTds.length&&(i=t.selectedTds[0],t.mergeRange(),r=this.selection.getRange(),n.isEmptyBlock(i)?r.setStart(i,0).collapse(!0):r.selectNodeContents(i),r.select())}};UE.commands.insertrow={queryCommandState:function(){var n=r(this),t=n.cell;return t&&(t.tagName=="TD"||t.tagName=="TH"&&n.tr!==n.table.rows[0])&&u(n.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var o=this.selection.getRange(),c=o.createBookmark(!0),s=r(this),i=s.cell,f=s.table,n=u(f),l=n.getCellInfo(i),t,e,h;if(n.selectedTds.length)for(t=n.cellsRange,e=0,h=t.endRowIndex-t.beginRowIndex+1;e<h;e++)n.insertRow(t.beginRowIndex,i);else n.insertRow(l.rowIndex,i);o.moveToBookmark(c).select();f.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",f)}};UE.commands.insertrownext={queryCommandState:function(){var n=r(this),t=n.cell;return t&&t.tagName=="TD"&&u(n.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var o=this.selection.getRange(),l=o.createBookmark(!0),s=r(this),i=s.cell,f=s.table,n=u(f),h=n.getCellInfo(i),t,e,c;if(n.selectedTds.length)for(t=n.cellsRange,e=0,c=t.endRowIndex-t.beginRowIndex+1;e<c;e++)n.insertRow(t.endRowIndex+1,i);else n.insertRow(h.rowIndex+h.rowSpan,i);o.moveToBookmark(l).select();f.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",f)}};UE.commands.deleterow={queryCommandState:function(){var n=r(this);return n.cell?0:-1},execCommand:function(){var s=r(this).cell,i=u(s),f=i.cellsRange,e=i.getCellInfo(s),v=i.getVSideCell(s),y=i.getVSideCell(s,!0),h=this.selection.getRange(),c,o,l,a;if(t.isEmptyObject(f))i.deleteRow(e.rowIndex);else for(c=f.beginRowIndex;c<f.endRowIndex+1;c++)i.deleteRow(f.beginRowIndex);o=i.table;o.getElementsByTagName("td").length?e.rowSpan==1||e.rowSpan==f.endRowIndex-f.beginRowIndex+1?(y||v)&&h.selectNodeContents(y||v).setCursor(!1,!0):(a=i.getCell(e.rowIndex,i.indexTable[e.rowIndex][e.colIndex].cellIndex),a&&h.selectNodeContents(a).setCursor(!1,!0)):(l=o.nextSibling,n.remove(o),l&&h.setStart(l,0).setCursor(!1,!0));o.getAttribute("interlaced")==="enabled"&&this.fireEvent("interlacetable",o)}};UE.commands.insertcol={queryCommandState:function(){var t=r(this),n=t.cell;return n&&(n.tagName=="TD"||n.tagName=="TH"&&n!==t.tr.cells[0])&&u(t.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(n){var o=this.selection.getRange(),h=o.createBookmark(!0),f,e,s;if(this.queryCommandState(n)!=-1){var i=r(this).cell,t=u(i),c=t.getCellInfo(i);if(t.selectedTds.length)for(f=t.cellsRange,e=0,s=f.endColIndex-f.beginColIndex+1;e<s;e++)t.insertCol(f.beginColIndex,i);else t.insertCol(c.colIndex,i);o.moveToBookmark(h).select(!0)}}};UE.commands.insertcolnext={queryCommandState:function(){var n=r(this),t=n.cell;return t&&u(n.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),h=e.createBookmark(!0),t=r(this).cell,n=u(t),o=n.getCellInfo(t),i,f,s;if(n.selectedTds.length)for(i=n.cellsRange,f=0,s=i.endColIndex-i.beginColIndex+1;f<s;f++)n.insertCol(i.endColIndex+1,t);else n.insertCol(o.colIndex+o.colSpan,t);e.moveToBookmark(h).select()}};UE.commands.deletecol={queryCommandState:function(){var n=r(this);return n.cell?0:-1},execCommand:function(){var f=r(this).cell,i=u(f),o=i.cellsRange,v=i.getCellInfo(f),h=i.getHSideCell(f),c=i.getHSideCell(f,!0),l,s,e,a;if(t.isEmptyObject(o))i.deleteCol(v.colIndex);else for(l=o.beginColIndex;l<o.endColIndex+1;l++)i.deleteCol(o.beginColIndex);s=i.table;e=this.selection.getRange();s.getElementsByTagName("td").length?n.inDoc(f,this.document)?e.setStart(f,0).setCursor(!1,!0):c&&n.inDoc(c,this.document)?e.selectNodeContents(c).setCursor(!1,!0):h&&n.inDoc(h,this.document)&&e.selectNodeContents(h).setCursor(!0,!0):(a=s.nextSibling,n.remove(s),a&&e.setStart(a,0).setCursor(!1,!0))}};UE.commands.splittocells={queryCommandState:function(){var t=r(this),n=t.cell,i;return n?(i=u(t.table),i.selectedTds.length>0)?-1:n&&(n.colSpan>1||n.rowSpan>1)?0:-1:-1},execCommand:function(){var n=this.selection.getRange(),i=n.createBookmark(!0),t=r(this).cell,f=u(t);f.splitToCells(t);n.moveToBookmark(i).select()}};UE.commands.splittorows={queryCommandState:function(){var t=r(this),n=t.cell,i;return n?(i=u(t.table),i.selectedTds.length>0)?-1:n&&n.rowSpan>1?0:-1:-1},execCommand:function(){var n=this.selection.getRange(),i=n.createBookmark(!0),t=r(this).cell,f=u(t);f.splitToRows(t);n.moveToBookmark(i).select()}};UE.commands.splittocols={queryCommandState:function(){var t=r(this),n=t.cell,i;return n?(i=u(t.table),i.selectedTds.length>0)?-1:n&&n.colSpan>1?0:-1:-1},execCommand:function(){var n=this.selection.getRange(),i=n.createBookmark(!0),t=r(this).cell,f=u(t);f.splitToCols(t);n.moveToBookmark(i).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return r(this).table?0:-1},execCommand:function(i){var e=r(this),u=e.table,f;u&&(i=="adaptbywindow"?h(u,this):(f=n.getElementsByTagName(u,"td th"),t.each(f,function(n){n.removeAttribute("width")}),u.removeAttribute("width")))}};UE.commands.averagedistributecol={queryCommandState:function(){var n=e(this);return n?n.isFullRow()||n.isFullCol()?0:-1:-1},execCommand:function(){function u(){var e=i.table,t=0,u=0,o=s(r,e),h,c,f,n;if(i.isFullRow())t=e.offsetWidth,u=i.colsNum;else for(h=i.cellsRange.beginColIndex,c=i.cellsRange.endColIndex,n=h;n<=c;)f=i.selectedTds[n],t+=f.offsetWidth,n+=f.colSpan,u+=1;return Math.ceil(t/u)-o.tdBorder*2-o.tdPadding*2}function f(r){t.each(n.getElementsByTagName(i.table,"th"),function(n){n.setAttribute("width","")});var u=i.isFullRow()?n.getElementsByTagName(i.table,"td"):i.selectedTds;t.each(u,function(n){n.colSpan==1&&n.setAttribute("width",r)})}var r=this,i=e(r);i&&i.selectedTds.length&&f(u())}};UE.commands.averagedistributerow={queryCommandState:function(){var n=e(this);return n?n.selectedTds&&/th/gi.test(n.selectedTds[0].tagName)?-1:n.isFullRow()||n.isFullCol()?0:-1:-1},execCommand:function(){function f(){var f,e=0,t=r.table,y=s(u,t),p=parseInt(n.getComputedStyle(t.getElementsByTagName("td")[0],"padding-top")),c,o,l,a,h;if(r.isFullCol())c=n.getElementsByTagName(t,"caption"),o=n.getElementsByTagName(t,"th"),c.length>0&&(l=c[0].offsetHeight),o.length>0&&(a=o[0].offsetHeight),e=t.offsetHeight-(l||0)-(a||0),f=o.length==0?r.rowsNum:r.rowsNum-1;else{var w=r.cellsRange.beginRowIndex,b=r.cellsRange.endRowIndex,v=0,k=n.getElementsByTagName(t,"tr");for(h=w;h<=b;h++)e+=k[h].offsetHeight,v+=1;f=v}return i.ie&&i.version<9?Math.ceil(e/f):Math.ceil(e/f)-y.tdBorder*2-p*2}function o(i){var u=r.isFullCol()?n.getElementsByTagName(r.table,"td"):r.selectedTds;t.each(u,function(n){n.rowSpan==1&&n.setAttribute("height",i)})}var u=this,r=e(u);r&&r.selectedTds.length&&o(f())}};UE.commands.cellalignment={queryCommandState:function(){return r(this).table?0:-1},execCommand:function(i,r){var f=this,s=e(f),o,u;s?t.each(s.selectedTds,function(t){n.setAttributes(t,r)}):(o=f.selection.getStart(),u=o&&n.findParentByTagName(o,["td","th","caption"],!0),/caption/gi.test(u.tagName)?(u.style.textAlign=r.align,u.style.verticalAlign=r.vAlign):n.setAttributes(u,r),f.selection.getRange().setCursor(!0))},queryCommandValue:function(){var n=r(this).cell,t;return n||(n=f(this)[0]),n?(t=UE.UETable.getUETable(n).selectedTds,t.length||(t=n),UE.UETable.getTableCellAlignState(t)):null}};UE.commands.tablealignment={queryCommandState:function(){return i.ie&&i.version<8?-1:r(this).table?0:-1},execCommand:function(t,i){var f=this,r=f.selection.getStart(),u=r&&n.findParentByTagName(r,["table"],!0);u&&u.setAttribute("align",i)}};UE.commands.edittable={queryCommandState:function(){return r(this).table?0:-1},execCommand:function(i,r){var e=this.selection.getRange(),u=n.findParentByTagName(e.startContainer,"table"),f;u&&(f=n.getElementsByTagName(u,"td").concat(n.getElementsByTagName(u,"th"),n.getElementsByTagName(u,"caption")),t.each(f,function(n){n.style.borderColor=r}))}};UE.commands.edittd={queryCommandState:function(){return r(this).table?0:-1},execCommand:function(i,r){var o=this,s=e(o),u,f;s?t.each(s.selectedTds,function(n){n.style.backgroundColor=r}):(u=o.selection.getStart(),f=u&&n.findParentByTagName(u,["td","th","caption"],!0),f&&(f.style.backgroundColor=r))}};UE.commands.settablebackground={queryCommandState:function(){return f(this).length>1?0:-1},execCommand:function(n,t){var i,r;i=f(this);r=u(i[0]);r.setBackground(i,t)}};UE.commands.cleartablebackground={queryCommandState:function(){var n=f(this),t,i;if(!n.length)return-1;for(t=0;i=n[t++];)if(i.style.backgroundColor!=="")return 0;return-1},execCommand:function(){var n=f(this),t=u(n[0]);t.removeBackground(n)}};UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(n){var i=r(this).table,t;return i?(t=i.getAttribute("interlaced"),n=="interlacetable"?t==="enabled"?-1:0:!t||t==="disabled"?-1:0):-1},execCommand:function(n,t){var i=r(this).table;n=="interlacetable"?(i.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",i,t)):(i.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",i))}};UE.commands.setbordervisible={queryCommandState:function(){var n=r(this).table;return n?0:-1},execCommand:function(){var i=r(this).table;t.each(n.getElementsByTagName(i,"td"),function(n){n.style.borderWidth="1px";n.style.borderStyle="solid"})}}}();UE.plugins.table=function(){function yt(){}function ri(n){ui(n,"width",!0);ui(n,"height",!0)}function ui(n,t,i){n.style[t]&&(i&&n.setAttribute(t,parseInt(n.style[t],10)),n.style[t]="")}function bt(t){if(t.tagName=="TD"||t.tagName=="TH")return t;var i;return(i=n.findParentByTagName(t,"td",!0)||n.findParentByTagName(t,"th",!0))?i:null}function st(t){var f=new RegExp(n.fillChar,"g"),r;if(t[i.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(f,"").length>0)return 0;for(r in u.$isNotEmpty)if(t.getElementsByTagName(r).length)return 0;return 1}function w(n){return n.pageX||n.pageY?{x:n.pageX,y:n.pageY}:{x:n.clientX+r.document.body.scrollLeft-r.document.body.clientLeft,y:n.clientY+r.document.body.scrollTop-r.document.body.clientTop}}function yi(t){var u,o,f,e,s;if(!ht())try{if(u=bt(t.target||t.srcElement),nt&&(r.body.style.webkitUserSelect="none",(Math.abs(ft.x-t.clientX)>ni||Math.abs(ft.y-t.clientY)>ni)&&(kt(),nt=!1,c=0,ei(t))),p&&v){c=0;r.body.style.webkitUserSelect="none";r.selection.getNative()[i.ie9below?"empty":"removeAllRanges"]();o=w(t);b(r,!0,p,o,u);p=="h"?a.style.left=bi(v,t)+"px":p=="v"&&(a.style.top=ki(v,t)+"px");return}if(u){if(r.fireEvent("excludetable",u)===!0)return;if(o=w(t),f=it(u,o),e=n.findParentByTagName(u,"table",!0),tt(e,u,t,!0)){if(r.fireEvent("excludetable",e)===!0)return;r.body.style.cursor="url("+r.options.cursorpath+"h.png),pointer"}else if(tt(e,u,t)){if(r.fireEvent("excludetable",e)===!0)return;r.body.style.cursor="url("+r.options.cursorpath+"v.png),pointer"}else r.body.style.cursor="text",s=u,/\d/.test(f)&&(f=f.replace(/\d/,""),u=h(u).getPreviewCell(u,f=="v")),b(r,u?!!f:!1,u?f:"",o,u)}else fi(!1,e,r)}catch(l){yt(l)}}function fi(n,t,i){if(n)wi(t,i);else{if(ot)return;pi=setTimeout(function(){!ot&&o&&o.parentNode&&o.parentNode.removeChild(o)},2e3)}}function wi(t,i){function e(n,u){clearTimeout(r);r=setTimeout(function(){i.fireEvent("tableClicked",t,u)},300)}function s(){clearTimeout(r);var n=h(t),u=t.rows[0].cells[0],f=n.getLastCell(),e=n.getCellsRange(u,f);i.selection.getRange().setStart(u,0).setCursor(!1,!0);n.setSelected(e)}var u=n.getXY(t),f=t.ownerDocument,r;if(o&&o.parentNode)return o;o=f.createElement("div");o.contentEditable=!1;o.innerHTML="";o.style.cssText="width:15px;height:15px;background-image:url("+i.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(u.y-15)+"px;left:"+u.x+"px;";n.unSelectable(o);o.onmouseover=function(){ot=!0};o.onmouseout=function(){ot=!1};n.on(o,"click",function(n,t){e(t,this)});n.on(o,"dblclick",function(n,t){s(t)});n.on(o,"dragstart",function(t,i){n.preventDefault(i)});f.body.appendChild(o)}function tt(t,i,r,u){var f=w(r),o=it(i,f),e,s;return u?(e=t.getElementsByTagName("caption")[0],s=e?e.offsetHeight:0,o=="v1"&&f.y-n.getXY(t).y-s<8):o=="h1"&&f.x-n.getXY(t).x<8}function bi(t,i){var u=h(t);if(u){var c=u.getSameEndPosCells(t,"x")[0],f=u.getSameStartPosXCells(t)[0],e=w(i).x,o=(c?n.getXY(c).x:n.getXY(u.table).x)+20,s=f?n.getXY(f).x+f.offsetWidth-20:r.body.offsetWidth+5||parseInt(n.getComputedStyle(r.body,"width"),10);return o+=at,s-=at,e<o?o:e>s?s:e}}function ki(t,i){try{var r=n.getXY(t).y,u=w(i).y;return u<r?r:u}catch(f){yt(f)}}function b(n,t,r,u,f){try{n.body.style.cursor=r=="h"?"col-resize":r=="v"?"row-resize":"text";i.ie&&(!r||d||l(n)?g(n):(ci(n,n.document),li(r,f)));pt=t}catch(e){yt(e)}}function it(t,i){var r=n.getXY(t);return r?r.x+t.offsetWidth-i.x<k?"h":i.x-r.x<k?"h1":r.y+t.offsetHeight-i.y<k?"v":i.y-r.y<k?"v1":"":""}function nr(i,u){var f,o,e;ht()||(ft={x:u.clientX,y:u.clientY},u.button==2?(f=l(r),o=!1,f&&(e=ai(r,u),t.each(f.selectedTds,function(n){n===e&&(o=!0)}),o?(e=f.selectedTds[0],setTimeout(function(){r.selection.getRange().setStart(e,0).setCursor(!1,!0)},0)):(et(n.getElementsByTagName(r.body,"th td")),f.clearSelected()))):ir(u))}function tr(i){var u,e,a,o,l;if(c=0,i=i||r.window.event,u=bt(i.target||i.srcElement),u&&(e=it(u,w(i)))&&(g(r),e=="h1"&&(e="h",tt(n.findParentByTagName(u,"table"),u,i)?r.execCommand("adaptbywindow"):(u=h(u).getPreviewCell(u),u&&(a=r.selection.getRange(),a.selectNodeContents(u).setCursor(!0,!0)))),e=="h")){var s=h(u),v=s.table,f=hi(u,v,!0);f=ur(f,"left");s.width=s.offsetWidth;o=[];l=[];t.each(f,function(n){o.push(n.offsetWidth)});t.each(f,function(n){n.removeAttribute("width")});window.setTimeout(function(){var n=!0,i;t.each(f,function(t,i){var r=t.offsetWidth;if(r>o[i])return n=!1,!1;l.push(r)});i=n?l:o;t.each(f,function(n,t){n.width=i[t]-ct()})},0)}}function ir(i){if(et(n.getElementsByTagName(r.body,"td th")),t.each(r.document.getElementsByTagName("table"),function(n){n.ueTable=null}),e=ai(r,i),e){var u=n.findParentByTagName(e,"table",!0);ut=h(u);ut&&ut.clearSelected();pt?rr(i):(r.document.body.style.webkitUserSelect="",d=!0,r.addListener("mouseover",si))}}function rr(n){i.ie&&(n=fr(n));kt();nt=!0;rt=setTimeout(function(){ei(n)},ti)}function ur(n,t){for(var u=[],i=null,r=0,f=n.length;r<f;r++)i=n[r][t],i&&u.push(i);return u}function kt(){rt&&clearTimeout(rt);rt=null}function fr(n){var f=["pageX","pageY","clientX","clientY","srcElement","target"],u={},t,i,r;if(n)for(t=0;i=f[t];t++)r=n[i],r&&(u[i]=r);return u}function ei(n){if(nt=!1,e=n.target||n.srcElement,e){var t=it(e,w(n));/\d/.test(t)&&(t=t.replace(/\d/,""),e=h(e).getPreviewCell(e,t=="v"));g(r);ci(r,r.document);r.fireEvent("saveScene");li(t,e);d=!0;p=t;v=e}}function oi(t,r){var b,k,y,tt,w,s,l;if(!ht()){if(kt(),nt=!1,pt&&(c=++c%3,ft={x:r.clientX,y:r.clientY},vi=setTimeout(function(){c>0&&c--},ti),c===2)){c=0;tr(r);return}if(r.button!=2){var u=this,o=u.selection.getRange(),s=n.findParentByTagName(o.startContainer,"table",!0),l=n.findParentByTagName(o.endContainer,"table",!0);if((s||l)&&(s===l?(s=n.findParentByTagName(o.startContainer,["td","th","caption"],!0),l=n.findParentByTagName(o.endContainer,["td","th","caption"],!0),s!==l&&u.selection.clearRange()):u.selection.clearRange()),d=!1,u.document.body.style.webkitUserSelect="",p&&v&&(u.selection.getNative()[i.ie9below?"empty":"removeAllRanges"](),c=0,a=u.document.getElementById("ue_tableDragLine"),a)){b=n.getXY(v);k=n.getXY(a);switch(p){case"h":or(v,k.x-b.x);break;case"v":sr(v,k.y-b.y-v.offsetHeight)}p="";v=null;g(u);u.fireEvent("saveScene");return}if(e)tt=h(e),w=tt?tt.selectedTds[0]:null,w?(o=new f.Range(u.document),n.isEmptyBlock(w)?o.setStart(w,0).setCursor(!1,!0):o.selectNodeContents(w).shrinkBoundary().setCursor(!1,!0)):(o=u.selection.getRange().shrinkBoundary(),o.collapsed||(s=n.findParentByTagName(o.startContainer,["td","th"],!0),l=n.findParentByTagName(o.endContainer,["td","th"],!0),(s&&!l||!s&&l||s&&l&&s!==l)&&o.setCursor(!1,!0))),e=null,u.removeListener("mouseover",si);else if(y=n.findParentByTagName(r.target||r.srcElement,"td",!0),y||(y=n.findParentByTagName(r.target||r.srcElement,"th",!0)),y&&(y.tagName=="TD"||y.tagName=="TH")){if(u.fireEvent("excludetable",y)===!0)return;o=new f.Range(u.document);o.setStart(y,0).setCursor(!1,!0)}u._selectionChange(250,r)}}}function si(t,r){var u,o,f,s;ht()||(u=this,o=r.target||r.srcElement,y=n.findParentByTagName(o,"td",!0)||n.findParentByTagName(o,"th",!0),e&&y&&(e.tagName=="TD"&&y.tagName=="TD"||e.tagName=="TH"&&y.tagName=="TH")&&n.findParentByTagName(e,"table")==n.findParentByTagName(y,"table")&&(f=h(y),e!=y?(u.document.body.style.webkitUserSelect="none",u.selection.getNative()[i.ie9below?"empty":"removeAllRanges"](),s=f.getCellsRange(e,y),f.setSelected(s)):(u.document.body.style.webkitUserSelect="",f.clearSelected())),r.preventDefault?r.preventDefault():r.returnValue=!1)}function er(t,i,r){var u=parseInt(n.getComputedStyle(t,"line-height"),10),f=r+i;i=f<u?u:f;t.style.height&&(t.style.height="");t.rowSpan==1?t.setAttribute("height",i):t.removeAttribute&&t.removeAttribute("height")}function or(n,i){var f=h(n),r,u,e;f&&(r=f.table,u=hi(n,r),r.style.width="",r.removeAttribute("width"),i=hr(i,n,u),n.nextSibling?(e=0,t.each(u,function(n){n.left.width=+n.left.width+i;n.right&&(n.right.width=+n.right.width-i)})):t.each(u,function(n){n.left.width-=-i}))}function ht(){return r.body.contentEditable==="false"}function sr(n,t){var r,i,u,f,e;if(!(Math.abs(t)<10)&&(r=h(n),r))for(i=r.getSameEndPosCells(n,"y"),u=i[0]?i[0].offsetHeight:0,f=0;e=i[f++];)er(e,t,u)}function hi(i,r,u){var e;if(r||(r=n.findParentByTagName(i,"table")),!r)return null;for(var h=n.getNodeIndex(i),f=i,s=r.rows,o=0;f;)f.nodeType===1&&(o+=f.colSpan||1),f=f.previousSibling;return f=null,e=[],t.each(s,function(n){var r=n.cells,i=0;t.each(r,function(n){return(i+=n.colSpan||1,i===o)?(e.push({left:n,right:n.nextSibling||null}),!1):i>o?(u&&e.push({left:n}),!1):void 0})}),e}function hr(n,i,r){if(n-=ct(),n<0)return 0;n-=dt(i);var u=n<0?"left":"right";return n=Math.abs(n),t.each(r,function(t){var i=t[u];i&&(n=Math.min(n,dt(i)-at))}),n=n<0?0:n,u==="left"?-n:n}function dt(n){var t=0,t=n.offsetWidth-ct();n.nextSibling||(t-=cr(n));t=t<0?0:t;try{n.width=t}catch(i){}return t}function cr(t){if(tab=n.findParentByTagName(t,"table",!1),tab.offsetVal===undefined){var i=t.previousSibling;tab.offsetVal=i?t.offsetWidth-i.offsetWidth===s.borderWidth?s.borderWidth:0:0}return tab.offsetVal}function ct(){var e;if(s.tabcellSpace===undefined){var n=r.document.createElement("table"),u=r.document.createElement("tbody"),i=r.document.createElement("tr"),t=r.document.createElement("td"),f=null;t.style.cssText="border: 0;";t.width=1;i.appendChild(t);i.appendChild(f=t.cloneNode(!1));u.appendChild(i);n.appendChild(u);n.style.cssText="visibility: hidden;";r.body.appendChild(n);s.paddingSpace=t.offsetWidth-1;e=n.offsetWidth;t.style.cssText="";f.style.cssText="";s.borderWidth=(n.offsetWidth-e)/3;s.tabcellSpace=s.paddingSpace+s.borderWidth;r.body.removeChild(n)}return ct=function(){return s.tabcellSpace},s.tabcellSpace}function ci(t){d||(a=t.document.createElement("div"),n.setAttributes(a,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),t.body.appendChild(a))}function g(t){if(!d)for(var i;i=t.document.getElementById("ue_tableDragLine");)n.remove(i)}function li(t,i){if(i){var r=n.findParentByTagName(i,"table"),u=r.getElementsByTagName("caption"),s=r.offsetWidth,h=r.offsetHeight-(u.length>0?u[0].offsetHeight:0),e=n.getXY(r),o=n.getXY(i),f;switch(t){case"h":f="height:"+h+"px;top:"+(e.y+(u.length>0?u[0].offsetHeight:0))+"px;left:"+(o.x+i.offsetWidth);a.style.cssText=f+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":f="width:"+s+"px;left:"+e.x+"px;top:"+(o.y+i.offsetHeight);a.style.cssText=f+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function gt(t,i){for(var u,e=n.getElementsByTagName(t.body,"table"),f,o=0,r;r=e[o++];)u=n.getElementsByTagName(r,"td"),u[0]&&(i?(f=u[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(f)&&n.addClass(r,"noBorderTable")):n.removeClasses(r,"noBorderTable"))}function lr(t,i,r){var u=t.body;return u.offsetWidth-(i?parseInt(n.getComputedStyle(u,"margin-left"),10)*2:0)-r.tableBorder*2-(t.options.offsetWidth||0)}function ai(t,i){var r=n.findParentByTagName(i.target||i.srcElement,["td","th"],!0),f=null,e,u,o;return r?(f=it(r,w(i)),!r)?null:(f==="h1"&&r.previousSibling?(u=n.getXY(r),e=r.offsetWidth,Math.abs(u.x+e-i.clientX)>e/3&&(r=r.previousSibling)):f==="v1"&&r.parentNode.previousSibling&&(u=n.getXY(r),o=r.offsetHeight,Math.abs(u.y+o-i.clientY)>o/3&&(r=r.parentNode.previousSibling.firstChild)),r&&!(t.fireEvent("excludetable",r)===!0)?r:null):null}var r=this,lt=null,rt=null,vi=null,at=5,nt=!1,k=5,ni=10,c=0,ft=null,ti=200,s=UE.UETable,h=function(n){return s.getUETable(n)},l=function(n){return s.getUETableBySelected(n)},vt=function(n,t){return s.getDefaultValue(n,t)},et=function(n){return s.removeSelectedClass(n)},ii,pi;r.ready(function(){var n=this,r=n.selection.getText;n.selection.getText=function(){var f=l(n),u;return f?(u="",t.each(f.selectedTds,function(n){u+=n[i.ie?"innerText":"textContent"]}),u):r.call(n.selection)}});var e=null,y=null,p="",pt=!1,o=null,ot=!1,a=null,v=null,d=!1,wt=!0;r.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:r.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});r.getUETable=h;ii={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};r.ready(function(){var u,c,a,y,e,v;t.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",r.document);r.addListener("keydown",function(t,i){var r=this,w=i.keyCode||i.which,b,s,e,o,y,f,p,h,v;if(w==8&&(f=l(r),f&&f.selectedTds.length&&(f.isFullCol()?r.execCommand("deletecol"):f.isFullRow()?r.execCommand("deleterow"):r.fireEvent("delcells"),n.preventDefault(i)),e=n.findParentByTagName(r.selection.getStart(),"caption",!0),b=r.selection.getRange(),b.collapsed&&e&&st(e)&&(r.fireEvent("saveScene"),o=e.parentNode,n.remove(e),o&&b.setStart(o.rows[0].cells[0],0).setCursor(!1,!0),r.fireEvent("saveScene"))),w==46&&(f=l(r),f)){for(r.fireEvent("saveScene"),h=0;v=f.selectedTds[h++];)n.fillNode(r.document,v);r.fireEvent("saveScene");n.preventDefault(i)}if(w==13){if(s=r.selection.getRange(),e=n.findParentByTagName(s.startContainer,"caption",!0),e){o=n.findParentByTagName(e,"table");s.collapsed?e&&s.setStart(o.rows[0].cells[0],0).setCursor(!1,!0):(s.deleteContents(),r.fireEvent("saveScene"));n.preventDefault(i);return}if(s.collapsed&&(o=n.findParentByTagName(s.startContainer,"table"),o)){var g=o.rows[0].cells[0],d=n.findParentByTagName(r.selection.getStart(),["td","th"],!0),k=o.previousSibling;g===d&&(!k||k.nodeType==1&&k.tagName=="TABLE")&&n.isStartInblock(s)&&(y=n.findParent(r.selection.getStart(),function(t){return n.isBlockElm(t)},!0),y&&(/t(h|d)/i.test(y.tagName)||y===d.firstChild)&&(r.execCommand("insertparagraphbeforetable"),n.preventDefault(i)))}}if((i.ctrlKey||i.metaKey)&&i.keyCode=="67"&&(u=null,f=l(r),f))for(p=f.selectedTds,c=f.isFullCol(),a=f.isFullRow(),u=[[f.cloneCell(p[0],null,!0)]],h=1;v=p[h];h++)v.parentNode!==p[h-1].parentNode?u.push([f.cloneCell(v,null,!0)]):u[u.length-1].push(f.cloneCell(v,null,!0))});r.addListener("tablehasdeleted",function(){b(this,!1,"",null);o&&n.remove(o)});r.addListener("beforepaste",function(r,f){var y=this,ut=y.selection.getRange(),tt,v,it,ht,w,ft,d,et,g,rt,b,p,nt,o,e,ct,lt,k,ot;if(n.findParentByTagName(ut.startContainer,"caption",!0)){k=y.document.createElement("div");k.innerHTML=f.html;f.html=k[i.ie9below?"innerText":"textContent"];return}if(tt=l(y),u){if(y.fireEvent("saveScene"),ut=y.selection.getRange(),v=n.findParentByTagName(ut.startContainer,["td","th"],!0),v){if(w=h(v),a)for(ft=w.getCellInfo(v).rowIndex,v.tagName=="TH"&&ft++,b=0;p=u[b++];){for(nt=w.insertRow(ft++,"td"),o=0;e=p[o];o++)d=nt.cells[o],d||(d=nt.insertCell(o)),d.innerHTML=e.innerHTML,e.getAttribute("width")&&d.setAttribute("width",e.getAttribute("width")),e.getAttribute("vAlign")&&d.setAttribute("vAlign",e.getAttribute("vAlign")),e.getAttribute("align")&&d.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(d.style.cssText=e.style.cssText);for(o=0;e=nt.cells[o];o++){if(!p[o])break;e.innerHTML=p[o].innerHTML;p[o].getAttribute("width")&&e.setAttribute("width",p[o].getAttribute("width"));p[o].getAttribute("vAlign")&&e.setAttribute("vAlign",p[o].getAttribute("vAlign"));p[o].getAttribute("align")&&e.setAttribute("align",p[o].getAttribute("align"));p[o].style.cssText&&(e.style.cssText=p[o].style.cssText)}}else{if(c){for(rt=w.getCellInfo(v),et=0,o=0,p=u[0];e=p[o++];)et+=e.colSpan||1;for(y.__hasEnterExecCommand=!0,b=0;b<et;b++)y.execCommand("insertcol");y.__hasEnterExecCommand=!1;v=w.table.rows[0].cells[rt.cellIndex];v.tagName=="TH"&&(v=w.table.rows[1].cells[rt.cellIndex])}for(b=0;p=u[b++];){for(it=v,o=0;e=p[o++];)v?(v.innerHTML=e.innerHTML,e.getAttribute("width")&&v.setAttribute("width",e.getAttribute("width")),e.getAttribute("vAlign")&&v.setAttribute("vAlign",e.getAttribute("vAlign")),e.getAttribute("align")&&v.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(v.style.cssText=e.style.cssText),ht=v,v=v.nextSibling):(g=e.cloneNode(!0),n.removeAttributes(g,["class","rowSpan","colSpan"]),ht.parentNode.appendChild(g));if(v=w.getNextCell(it,!0,!0),!u[b])break;v||(rt=w.getCellInfo(it),w.table.insertRow(w.table.rows.length),w.update(),v=w.getVSideCell(it,!0))}}w.update()}else{for(tt=y.document.createElement("table"),b=0;p=u[b++];){for(nt=tt.insertRow(tt.rows.length),o=0;e=p[o++];)g=s.cloneCell(e,null,!0),n.removeAttributes(g,["class"]),nt.appendChild(g);o==2&&g.rowSpan>1&&(g.rowSpan=1)}ct=vt(y);lt=y.body.offsetWidth-(wt?parseInt(n.getComputedStyle(y.body,"margin-left"),10)*2:0)-ct.tableBorder*2-(y.options.offsetWidth||0);y.execCommand("insertHTML","<table  "+(c&&a?'width="'+lt+'"':"")+">"+tt.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"<\/table>")}return y.fireEvent("contentchange"),y.fireEvent("saveScene"),f.html="",!0}k=y.document.createElement("div");k.innerHTML=f.html;ot=k.getElementsByTagName("table");n.findParentByTagName(y.selection.getStart(),"table")?(t.each(ot,function(t){n.remove(t)}),n.findParentByTagName(y.selection.getStart(),"caption",!0)&&(k.innerHTML=k[i.ie?"innerText":"textContent"])):t.each(ot,function(i){ri(i,!0);n.removeAttributes(i,["style","border"]);t.each(n.getElementsByTagName(i,"td"),function(t){st(t)&&n.fillNode(y.document,t);ri(t,!0)})});f.html=k.innerHTML});r.addListener("afterpaste",function(){t.each(n.getElementsByTagName(r.body,"table"),function(t){if(t.offsetWidth>r.body.offsetWidth){var i=vt(r,t);t.style.width=r.body.offsetWidth-(wt?parseInt(n.getComputedStyle(r.body,"margin-left"),10)*2:0)-i.tableBorder*2-(r.options.offsetWidth||0)+"px"}})});r.addListener("blur",function(){u=null});r.addListener("keydown",function(){clearTimeout(y);y=setTimeout(function(){var u=r.selection.getRange(),t=n.findParentByTagName(u.startContainer,["th","td"],!0),i;t&&(i=t.parentNode.parentNode.parentNode,i.offsetWidth>i.getAttribute("width")&&(t.style.wordBreak="break-all"))},100)});r.addListener("selectionchange",function(){b(r,!1,"",null)});r.addListener("contentchange",function(){var i=this,u,r;(g(i),l(i))||(u=i.selection.getRange(),r=u.startContainer,r=n.findParentByTagName(r,["td","th"],!0),t.each(n.getElementsByTagName(i.document,"table"),function(n){i.fireEvent("excludetable",n)!==!0&&(n.ueTable=new s(n),n.onmouseover=function(){i.fireEvent("tablemouseover",n)},n.onmousemove=function(){i.fireEvent("tablemousemove",n);i.options.tableDragable&&fi(!0,this,i);t.defer(function(){i.fireEvent("contentchange",50)},!0)},n.onmouseout=function(){i.fireEvent("tablemouseout",n);b(i,!1,"",null);g(i)},n.onclick=function(n){var r,e,o;if(n=i.window.event||n,r=bt(n.target||n.srcElement),r){var t=h(r),c=t.table,s=t.getCellInfo(r),u,f=i.selection.getRange();if(tt(c,r,n,!0)){e=t.getCell(t.indexTable[t.rowsNum-1][s.colIndex].rowIndex,t.indexTable[t.rowsNum-1][s.colIndex].cellIndex);n.shiftKey&&t.selectedTds.length?t.selectedTds[0]!==e?(u=t.getCellsRange(t.selectedTds[0],e),t.setSelected(u)):f&&f.selectNodeContents(e).select():r!==e?(u=t.getCellsRange(r,e),t.setSelected(u)):f&&f.selectNodeContents(e).select();return}tt(c,r,n)&&(o=t.getCell(t.indexTable[s.rowIndex][t.colsNum-1].rowIndex,t.indexTable[s.rowIndex][t.colsNum-1].cellIndex),n.shiftKey&&t.selectedTds.length?t.selectedTds[0]!==o?(u=t.getCellsRange(t.selectedTds[0],o),t.setSelected(u)):f&&f.selectNodeContents(o).select():r!==o?(u=t.getCellsRange(r,o),t.setSelected(u)):f&&f.selectNodeContents(o).select())}})}),gt(i,!0))});n.on(r.document,"mousemove",yi);n.on(r.document,"mouseout",function(n){var t=n.target||n.srcElement;t.tagName=="TABLE"&&b(r,!1,"",null)});r.addListener("interlacetable",function(n,t,i){var r;if(t){var f=this,u=t.rows,e=u.length,o=function(n,t,i){return n[t]?n[t]:i?n[t%n.length]:""};for(r=0;r<e;r++)u[r].className=o(i||f.options.classList,r,!0)}});r.addListener("uninterlacetable",function(t,i){var r;if(i){var f=this,u=i.rows,e=f.options.classList,o=u.length;for(r=0;r<o;r++)n.removeClasses(u[r],e)}});r.addListener("mousedown",nr);r.addListener("mouseup",oi);n.on(r.body,"dragstart",function(n){oi.call(r,"dragstart",n)});r.addOutputRule(function(n){t.each(n.getNodesByTagName("div"),function(n){n.getAttr("id")=="ue_tableDragLine"&&n.parentNode.removeChild(n)})});e=0;r.addListener("mousedown",function(){e=0});r.addListener("tabkeydown",function(){var i=this.selection.getRange(),o=i.getCommonAncestor(!0,!0),f=n.findParentByTagName(o,"table"),t,s,u;if(f)return n.findParentByTagName(o,"caption",!0)?(t=n.getElementsByTagName(f,"th td"),t&&t.length&&i.setStart(t[0],0).setCursor(!1,!0)):(t=n.findParentByTagName(o,["td","th"],!0),s=h(t),e=t.rowSpan>1?e:s.getCellInfo(t).rowIndex,u=s.getTabNextCell(t,e),u?st(u)?i.setStart(u,0).setCursor(!1,!0):i.selectNodeContents(u).select():(r.fireEvent("saveScene"),r.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),r.__hasEnterExecCommand=!1,i=this.selection.getRange(),i.setStart(f.rows[f.rows.length-1].cells[0],0).setCursor(),r.fireEvent("saveScene"))),!0});i.ie&&r.addListener("selectionchange",function(){b(this,!1,"",null)});r.addListener("keydown",function(t,i){var f=this,e=i.keyCode||i.which,r,u;e!=8&&e!=46&&(r=!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey,r&&et(n.getElementsByTagName(f.body,"td")),u=l(f),u)&&r&&u.clearSelected()});r.addListener("beforegetcontent",function(){gt(this,!1);i.ie&&t.each(this.document.getElementsByTagName("caption"),function(t){n.isEmptyNode(t)&&(t.innerHTML="&nbsp;")})});r.addListener("aftergetcontent",function(){gt(this,!0)});r.addListener("getAllHtml",function(){et(r.document.getElementsByTagName("td"))});r.addListener("fullscreenchanged",function(i,u){if(!u){var f=this.body.offsetWidth/document.body.offsetWidth,e=n.getElementsByTagName(this.body,"table");t.each(e,function(i){var e,o,u,s;if(i.offsetWidth<r.body.offsetWidth)return!1;for(e=n.getElementsByTagName(i,"td"),o=[],t.each(e,function(n){o.push(n.offsetWidth)}),u=0;s=e[u];u++)s.setAttribute("width",Math.floor(o[u]*f));i.setAttribute("width",Math.floor(lr(r,wt,vt(r))))})}});v=r.execCommand;r.execCommand=function(t){var i=this,b=arguments,s,h,w,c,a,r;t=t.toLowerCase();var y=l(i),u,e=new f.Range(i.document),p=i.commands[t]||UE.commands[t],o;if(p){if(!y||ii[t]||p.notNeedUndo||i.__hasEnterExecCommand)o=v.apply(i,arguments);else{for(i.__hasEnterExecCommand=!0,i.fireEvent("beforeexeccommand",t),u=y.selectedTds,s=-2,h=-2,a=0;r=u[a];a++)st(r)?e.setStart(r,0).setCursor(!1,!0):e.selectNode(r).select(!0),c=i.queryCommandState(t),w=i.queryCommandValue(t),c!=-1&&((s!==c||h!==w)&&(i._ignoreContentChange=!0,o=v.apply(i,arguments),i._ignoreContentChange=!1),s=i.queryCommandState(t),h=i.queryCommandValue(t),n.isEmptyBlock(r)&&n.fillNode(i.document,r));e.setStart(u[0],0).shrinkBoundary(!0).setCursor(!1,!0);i.fireEvent("contentchange");i.fireEvent("afterexeccommand",t);i.__hasEnterExecCommand=!1;i._selectionChange()}return o}}})};UE.UETable.prototype.sortTable=function(n,r){var c=this.table,s=c.rows,f=[],p=s[0].cells[0].tagName==="TH",v=0,e,u,h,l,a,o,y;if(this.selectedTds.length){for(e=this.cellsRange,o=e.endRowIndex+1,u=e.beginRowIndex;u<o;u++)f[u]=s[u];f.splice(0,e.beginRowIndex);v=e.endRowIndex+1===this.rowsNum?0:e.endRowIndex+1}else for(u=0,o=s.length;u<o;u++)f[u]=s[u];for(h={reversecurrent:function(){return 1},orderbyasc:function(n,t){var i=n.innerText||n.textContent,r=t.innerText||t.textContent;return i.localeCompare(r)},reversebyasc:function(n,t){var i=n.innerHTML,r=t.innerHTML;return r.localeCompare(i)},orderbynum:function(n,t){var r=n[i.ie?"innerText":"textContent"].match(/\d+/),u=t[i.ie?"innerText":"textContent"].match(/\d+/);return r&&(r=+r[0]),u&&(u=+u[0]),(r||0)-(u||0)},reversebynum:function(n,t){var r=n[i.ie?"innerText":"textContent"].match(/\d+/),u=t[i.ie?"innerText":"textContent"].match(/\d+/);return r&&(r=+r[0]),u&&(u=+u[0]),(u||0)-(r||0)}},c.setAttribute("data-sort-type",r&&typeof r=="string"&&h[r]?r:""),p&&f.splice(0,1),f=t.sort(f,function(t,i){return r&&typeof r=="function"?r.call(this,t.cells[n],i.cells[n]):r&&typeof r=="number"?1:r&&typeof r=="string"&&h[r]?h[r].call(this,t.cells[n],i.cells[n]):h.orderbyasc.call(this,t.cells[n],i.cells[n])}),l=c.ownerDocument.createDocumentFragment(),a=0,o=f.length;a<o;a++)l.appendChild(f[a]);y=c.getElementsByTagName("tbody")[0];v?y.insertBefore(l,s[v-e.endRowIndex+e.beginRowIndex-1]):y.appendChild(l)};UE.plugins.tablesort=function(){var i=this,u=UE.UETable,f=function(n){return u.getUETable(n)},r=function(n){return u.getTableItemsByRange(n)};i.ready(function(){t.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+i.options.themePath+i.options.theme+"/images/sortable.png);}",i.document);i.addListener("afterexeccommand",function(n,t){(t=="mergeright"||t=="mergedown"||t=="mergecells")&&this.execCommand("disablesort")})});UE.commands.sorttable={queryCommandState:function(){var e=this,t=r(e),i,u,f,n;if(!t.cell)return-1;for(i=t.table,u=i.getElementsByTagName("td"),f=0;n=u[f++];)if(n.rowSpan!=1||n.colSpan!=1)return-1;return 0},execCommand:function(n,t){var u=this,i=u.selection.getRange(),s=i.createBookmark(!0),e=r(u),h=e.cell,o=f(e.table),c=o.getCellInfo(h);o.sortTable(c.cellIndex,t);i.moveToBookmark(s);try{i.select()}catch(l){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(t){var u=r(this).table,f,i;if(u&&t=="enablesort")for(f=n.getElementsByTagName(u,"th td"),i=0;i<f.length;i++)if(f[i].getAttribute("colspan")>1||f[i].getAttribute("rowspan")>1)return-1;return u?t=="enablesort"^u.getAttribute("data-sort")!="sortEnabled"?-1:0:-1},execCommand:function(t){var i=r(this).table;i.setAttribute("data-sort",t=="enablesort"?"sortEnabled":"sortDisabled");t=="enablesort"?n.addClass(i,"sortEnabled"):n.removeClasses(i,"sortEnabled")}}};UE.plugins.contextmenu=function(){var r=this,t,u,e,o;(r.setOpt("enableContextMenu",r.getOpt("enableContextMenu")||!0),r.getOpt("enableContextMenu")!==!1)&&(t=r.getLang("contextMenu"),e=r.options.contextMenu||[{label:t.selectall,cmdName:"selectall"},{label:t.cleardoc,cmdName:"cleardoc",exec:function(){confirm(t.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:t.unlink,cmdName:"unlink"},"-",{group:t.paragraph,icon:"justifyjustify",subMenu:[{label:t.justifyleft,cmdName:"justify",value:"left"},{label:t.justifyright,cmdName:"justify",value:"right"},{label:t.justifycenter,cmdName:"justify",value:"center"},{label:t.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:t.table,icon:"table",subMenu:[{label:t.inserttable,cmdName:"inserttable"},{label:t.deletetable,cmdName:"deletetable"},"-",{label:t.deleterow,cmdName:"deleterow"},{label:t.deletecol,cmdName:"deletecol"},{label:t.insertcol,cmdName:"insertcol"},{label:t.insertcolnext,cmdName:"insertcolnext"},{label:t.insertrow,cmdName:"insertrow"},{label:t.insertrownext,cmdName:"insertrownext"},"-",{label:t.insertcaption,cmdName:"insertcaption"},{label:t.deletecaption,cmdName:"deletecaption"},{label:t.inserttitle,cmdName:"inserttitle"},{label:t.deletetitle,cmdName:"deletetitle"},{label:t.inserttitlecol,cmdName:"inserttitlecol"},{label:t.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:t.mergecells,cmdName:"mergecells"},{label:t.mergeright,cmdName:"mergeright"},{label:t.mergedown,cmdName:"mergedown"},"-",{label:t.splittorows,cmdName:"splittorows"},{label:t.splittocols,cmdName:"splittocols"},{label:t.splittocells,cmdName:"splittocells"},"-",{label:t.averageDiseRow,cmdName:"averagedistributerow"},{label:t.averageDisCol,cmdName:"averagedistributecol"},"-",{label:t.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this);this.getDialog("edittd").open()}},{label:t.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this);this.getDialog("edittable").open()}},{label:t.setbordervisible,cmdName:"setbordervisible"}]},{group:t.tablesort,icon:"tablesort",subMenu:[{label:t.enablesort,cmdName:"enablesort"},{label:t.disablesort,cmdName:"disablesort"},"-",{label:t.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:t.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:t.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:t.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:t.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:t.borderbk,icon:"borderBack",subMenu:[{label:t.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:t.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:t.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:t.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:t.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:t.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:t.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:t.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:t.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:t.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:t.tableright,value:"right"}]},"-",{label:t.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:t.insertparagraphafter,cmdName:"insertparagraph"},{label:t.copy,cmdName:"copy"},{label:t.paste,cmdName:"paste"}],e.length)&&(o=UE.ui.uiUtils,r.addListener("contextmenu",function(s,h){var w=o.getViewportOffsetByEvent(h),a,y,c,l,v,p;for(r.fireEvent("beforeselectionchange"),u&&u.destroy(),a=0,c=[];y=e[a];a++)(function(n){if(n=="-")(l=c[c.length-1])&&l!=="-"&&c.push("-");else if(n.hasOwnProperty("group")){for(var u=0,f,i=[];f=n.subMenu[u];u++)(function(n){n=="-"?(l=i[i.length-1])&&l!=="-"?i.push("-"):i.splice(i.length-1):(r.commands[n.cmdName]||UE.commands[n.cmdName]||n.query)&&(n.query?n.query():r.queryCommandState(n.cmdName))>-1&&i.push({label:n.label||r.getLang("contextMenu."+n.cmdName+(n.value||""))||"",className:"edui-for-"+n.cmdName+(n.className?" edui-for-"+n.cmdName+"-"+n.className:""),onclick:n.exec?function(){n.exec.call(r)}:function(){r.execCommand(n.cmdName,n.value)}})})(f);if(i.length){function u(){switch(n.icon){case"table":return r.getLang("contextMenu.table");case"justifyjustify":return r.getLang("contextMenu.paragraph");case"aligntd":return r.getLang("contextMenu.aligntd");case"aligntable":return r.getLang("contextMenu.aligntable");case"tablesort":return t.tablesort;case"borderBack":return t.borderbk;default:return""}}c.push({label:u(),className:"edui-for-"+n.icon,subMenu:{items:i,editor:r}})}}else(r.commands[n.cmdName]||UE.commands[n.cmdName]||n.query)&&(n.query?n.query.call(r):r.queryCommandState(n.cmdName))>-1&&c.push({label:n.label||r.getLang("contextMenu."+n.cmdName),className:"edui-for-"+(n.icon?n.icon:n.cmdName+(n.value||"")),onclick:n.exec?function(){n.exec.call(r)}:function(){r.execCommand(n.cmdName,n.value)}})})(y);if(c[c.length-1]=="-"&&c.pop(),u=new UE.ui.Menu({items:c,className:"edui-contextmenu",editor:r}),u.render(),u.showAt(w),r.fireEvent("aftershowcontextmenu",u),n.preventDefault(h),i.ie){try{v=r.selection.getNative().createRange()}catch(b){return}v.item&&(p=new f.Range(r.document),p.selectNode(v.item(0)).select(!0,!0))}}),r.addListener("aftershowcontextmenu",function(n,t){var i,u;if(r.zeroclipboard){i=t.items;for(u in i)i[u].className=="edui-for-copy"&&r.zeroclipboard.clip(i[u].getDom())}}))};UE.plugins.shortcutmenu=function(){var u=this,t,e=u.options.shortcutMenu||[];e.length&&(u.addListener("mouseup",function(u,o){var s=this,l={type:u,target:o.target||o.srcElement,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY},h,c;if(setTimeout(function(){t||(t=new r.editor.ui.ShortCutMenu({editor:s,items:e.concat([]),theme:s.options.theme,className:"edui-shortcutmenu"}),t.render(),s.fireEvent("afterrendershortcutmenu",t));t.show(l,!!UE.plugins.contextmenu)}),u==="contextmenu"&&(n.preventDefault(o),i.ie9below)){try{h=s.selection.getNative().createRange()}catch(o){return}h.item&&(c=new f.Range(s.document),c.selectNode(h.item(0)).select(!0,!0))}}),u.addListener("keydown",function(n){n==="keydown"&&t&&!t.isHidden&&t.hide()}))};UE.plugins.basestyle=function(){var u={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},f=function(t,i){return n.filterNodeList(t.selection.getStartElementPath(),i)},i=this,r;i.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"});i.addInputRule(function(n){t.each(n.getNodesByTagName("b i"),function(n){switch(n.tagName){case"b":n.tagName="strong";break;case"i":n.tagName="em"}})});for(r in u)(function(t,r){i.commands[t]={execCommand:function(t){var u=i.selection.getRange(),o=f(this,r),e,s;u.collapsed?(o?(e=i.document.createTextNode(""),u.insertNode(e).removeInlineStyle(r),u.setStartBefore(e),n.remove(e)):(s=u.document.createElement(r[0]),(t=="superscript"||t=="subscript")&&(e=i.document.createTextNode(""),u.insertNode(e).removeInlineStyle(["sub","sup"]).setStartBefore(e).collapse(!0)),u.insertNode(s).setStart(s,0)),u.collapse(!0)):((t=="superscript"||t=="subscript")&&(o&&o.tagName.toLowerCase()==t||u.removeInlineStyle(["sub","sup"])),o?u.removeInlineStyle(r):u.applyInlineStyle(r[0]));u.select()},queryCommandState:function(){return f(this,r)?1:0}}})(r,u[r])};UE.plugins.elementpath=function(){var t,i,n=this;(n.setOpt("elementPathEnabled",!0),n.options.elementPathEnabled)&&(n.commands.elementpath={execCommand:function(r,u){var f=i[u],e=n.selection.getRange();t=u*1;e.selectNode(f).select()},queryCommandValue:function(){var f=[].concat(this.selection.getStartElementPath()).reverse(),e=[],n,r,u;for(i=f,n=0;r=f[n];n++)if(r.nodeType!=3&&(u=r.tagName.toLowerCase(),u=="img"&&r.getAttribute("anchorname")&&(u="anchor"),e[n]=u,t==n)){t=-1;break}return e}})};UE.plugins.formatmatch=function(){function e(o,s){function p(n){return c&&n.selectNode(c),n.applyInlineStyle(r[r.length-1].tagName,null,r)}var a,h,l,v,c,y;i.webkit&&(a=s.target.tagName=="IMG"?s.target:null);t.undoManger&&t.undoManger.save();h=t.selection.getRange();l=a||h.getClosedNode();u&&l&&l.tagName=="IMG"?(l.style.cssText+=";float:"+(u.style.cssFloat||u.style.styleFloat||"none")+";display:"+(u.style.display||"inline"),u=null):u||(v=h.collapsed,v&&(c=t.document.createTextNode("match"),h.insertNode(c).select()),t.__hasEnterExecCommand=!0,y=t.options.removeFormatAttributes,t.options.removeFormatAttributes="",t.execCommand("removeformat"),t.options.removeFormatAttributes=y,t.__hasEnterExecCommand=!1,h=t.selection.getRange(),r.length&&p(h),c&&h.setStartBefore(c).collapse(!0),h.select(),c&&n.remove(c));t.undoManger&&t.undoManger.save();t.removeListener("mouseup",e);f=0}var t=this,r=[],u,f=0;t.addListener("reset",function(){r=[];f=0});t.commands.formatmatch={execCommand:function(){var i,s,o,h;if(f){f=0;r=[];t.removeListener("mouseup",e);return}if(i=t.selection.getRange(),u=i.getClosedNode(),!u||u.tagName!="IMG")for(i.collapse(!0).shrinkBoundary(),s=i.startContainer,r=n.findParents(s,!0,function(t){return!n.isBlockElm(t)&&t.nodeType==1}),o=0;h=r[o];o++)if(h.tagName=="A"){r.splice(o,1);break}t.addListener("mouseup",e);f=1},queryCommandState:function(){return f},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){function e(t){var r=t.nodeType==3?t.nodeValue:t[i.ie?"innerText":"textContent"];return r.replace(n.fillChar,"")}function l(n,t,i){var u=t.searchStr,f=new RegExp(u,"g"+(t.casesensitive?"":"i")),r;if(t.dir==-1){if(n=n.substr(0,i),n=n.split("").reverse().join(""),u=u.split("").reverse().join(""),r=f.exec(n),r)return i-r.index-u.length}else if(n=n.substr(i),r=f.exec(n),r)return r.index+i;return-1}function a(t,i,r){var f,u,o=r.all||r.dir==1?"getNextDomNode":"getPreDomNode",s;for(n.isBody(t)&&(t=t.firstChild),s=1;t;){if(f=e(t),u=l(f,r,i),s=0,u!=-1)return{node:t,index:u};for(t=n[o](t);t&&c[t.nodeName.toLowerCase()];)t=n[o](t,!0);t&&(i=r.dir==-1?e(t).length:0)}}function o(t,i,r){for(var s=0,f=t.firstChild,h=0,c;f;){if(f.nodeType==3){if(h=e(f).replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,s+=h,s>=i)return{node:f,index:h-(s-i)}}else if(!u.$empty[f.tagName]&&(h=e(f).replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,s+=h,s>=i&&(c=o(f,h-(s-i),r),c)))return c;f=n.getNextDomNode(f)}}function s(t,i){var r=f||t.selection.getRange(),c,l=i.searchStr,s=t.document.createElement("span"),p,w,u,v,y;if(s.innerHTML="$$ueditor_searchreplace_key$$",r.shrinkBoundary(!0),!r.collapsed&&(r.select(),p=t.selection.getText(),new RegExp("^"+i.searchStr+"$",i.casesensitive?"":"i").test(p))){if(i.replaceStr!=undefined)return h(r,i.replaceStr),r.select(),!0;r.collapse(i.dir==-1)}if(r.insertNode(s),r.enlargeToBlockElm(!0),c=r.startContainer,w=e(c).indexOf("$$ueditor_searchreplace_key$$"),r.setStartBefore(s),n.remove(s),u=a(c,w,i),u)return v=o(u.node,u.index,l),y=o(u.node,u.index+l.length,l),r.setStart(v.node,v.index).setEnd(y.node,y.index),i.replaceStr!==undefined&&h(r,i.replaceStr),r.select(),!0;r.setCursor()}function h(n,t){t=r.document.createTextNode(t);n.deleteContents().insertNode(t)}var r=this,c={table:1,tbody:1,tr:1,ol:1,ul:1},f=null;return{commands:{searchreplace:{execCommand:function(n,i){var u,o,e;if(t.extend(i,{all:!1,casesensitive:!1,dir:1},!0),u=0,i.all){for(f=null,o=r.selection.getRange(),e=r.body.firstChild,e&&e.nodeType==1?(o.setStart(e,0),o.shrinkBoundary(!0)):e.nodeType==3&&o.setStartBefore(e),o.collapse(!0).select(!0),i.replaceStr!==undefined&&r.fireEvent("saveScene");s(this,i);)u++,f=r.selection.getRange(),f.collapse(i.dir==-1);u&&r.fireEvent("saveScene")}else i.replaceStr!==undefined&&r.fireEvent("saveScene"),s(this,i)&&(u++,f=r.selection.getRange(),f.collapse(i.dir==-1)),u&&r.fireEvent("saveScene");return u},notNeedUndo:1}},bindEvents:{clearlastSearchResult:function(){f=null}}}});UE.plugins.customstyle=function(){var t=this;t.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;line-height:40px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;"},{tag:"h1",name:"tl",style:"font-size:32px;line-height:40px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});t.commands.customstyle={execCommand:function(t,i){var e=this,h=i.tag,r=n.findParent(e.selection.getStart(),function(n){return n.getAttribute("label")},!0),f,o,l={},v,a,p,k,s,w,b,c,y;for(v in i)i[v]!==undefined&&(l[v]=i[v]);if(delete l.tag,r&&r.getAttribute("label")==i.label){if(f=this.selection.getRange(),o=f.createBookmark(),f.collapsed)u.$block[r.tagName]?(c=e.document.createElement("p"),n.moveChild(r,c),r.parentNode.insertBefore(c,r),n.remove(r)):n.remove(r,!0);else{for(a=n.getCommonAncestor(o.start,o.end),p=n.getElementsByTagName(a,h),new RegExp(h,"i").test(a.tagName)&&p.push(a),k=0;s=p[k++];)s.getAttribute("label")==i.label&&(w=n.getPosition(s,o.start),b=n.getPosition(s,o.end),(w&n.POSITION_FOLLOWING||w&n.POSITION_CONTAINS)&&(b&n.POSITION_PRECEDING||b&n.POSITION_CONTAINS)&&u.$block[h]&&(c=e.document.createElement("p"),n.moveChild(s,c),s.parentNode.insertBefore(c,s)),n.remove(s,!0));r=n.findParent(a,function(n){return n.getAttribute("label")==i.label},!0);r&&n.remove(r,!0)}f.moveToBookmark(o).select()}else if(u.$block[h])this.execCommand("paragraph",h,l,"customstyle"),f=e.selection.getRange(),f.collapsed||(f.collapse(),r=n.findParent(e.selection.getStart(),function(n){return n.getAttribute("label")==i.label},!0),y=e.document.createElement("p"),n.insertAfter(r,y),n.fillNode(e.document,y),f.setStart(y,0).setCursor());else{if(f=e.selection.getRange(),f.collapsed){r=e.document.createElement(h);n.setAttributes(r,l);f.insertNode(r).setStart(r,0).setCursor();return}o=f.createBookmark();f.applyInlineStyle(h,l).moveToBookmark(o).select()}},queryCommandValue:function(){var t=n.filterNodeList(this.selection.getStartElementPath(),function(n){return n.getAttribute("label")});return t?t.getAttribute("label"):""}};t.addListener("keyup",function(i,r){var s=r.keyCode||r.which,o,f,e;(s==32||s==13)&&(o=t.selection.getRange(),o.collapsed&&(f=n.findParent(t.selection.getStart(),function(n){return n.getAttribute("label")},!0),f&&u.$block[f.tagName]&&n.isEmptyNode(f)&&(e=t.document.createElement("p"),n.insertAfter(f,e),n.fillNode(t.document,e),n.remove(f),o.setStart(e,0).setCursor())))})};UE.plugins.catchremoteimage=function(){function c(n,r){var s=t.serializeParam(i.queryCommandValue("serverparam"))||"",u=t.formatUrl(f+(f.indexOf("?")===-1?"?":"&")+s),c=t.isCrossDomainUrl(u),e={method:"POST",dataType:c?"jsonp":"",timeout:6e4,headers:i.options.serverHeaders||{},onsuccess:r.success,onerror:r.error};e[o]=n;h.request(u,e)}function s(t,u,f){c([f],{success:function(f){var a;try{a=f.state!==undefined?f:eval("("+f.responseText+")")}catch(k){return}var p,s,w,v,b=a.list,h=[],c=[],l=i.options.themePath+i.options.theme+"/images/img-cracked.png",y=i.options.themePath+i.options.theme+"/images/spacer.gif",o=b[0];switch(t){case"image":p=u.getAttribute("_src")||u.src||"";o.state==="SUCCESS"?(s=e+o.url,n.removeClasses(u,"uep-loading"),n.setAttributes(u,{src:s,_src:s,"data-catch-result":"success"}),c.push(u)):(n.removeClasses(u,"uep-loading"),n.setAttributes(u,{src:l,_src:l,"data-catch-result":"fail"}),h.push(u));break;case"background":w=u.getAttribute("data-background")||"";o.state==="SUCCESS"?(v=e+o.url,u.style.cssText=u.style.cssText.replace(y,v),n.removeAttributes(u,"data-background"),n.setAttributes(u,{"data-catch-result":"success"}),c.push(u)):(u.style.cssText=u.style.cssText.replace(y,l),n.removeAttributes(u,"data-background"),n.setAttributes(u,{"data-catch-result":"fail"}),h.push(u))}i.fireEvent("catchremotesuccess",c,h);r=!1;setTimeout(function(){i.fireEvent("catchremoteimage")},0)},error:function(){i.fireEvent("catchremoteerror");r=!1;setTimeout(function(){i.fireEvent("catchremoteimage")},0)}})}function l(){var c,t,e,f;if(!r){r=!0;var o=i.options.themePath+i.options.theme+"/images/spacer.gif",l=i.document.querySelectorAll('[style*="url"],img'),h=function(n,t){if(n.indexOf(location.host)!==-1||/(^\.)|(^\/)/.test(n))return!0;if(t)for(var r=0,i;i=t[r++];)if(n.indexOf(i)!==-1)return!0;return!1};for(c=0;t=l[c++];)if(!t.getAttribute("data-word-image")&&!t.getAttribute("data-catch-result"))if(t.nodeName==="IMG"){if(e=t.getAttribute("_src")||t.src||"",/^(https?|ftp):/i.test(e)&&!h(e,u)){s("image",t,e);n.setAttributes(t,{"class":"loadingclass",_src:e,src:o});return}}else if(f=t.style.cssText.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,""),/^(https?|ftp):/i.test(f)&&!h(f,u)){s("background",t,f);t.style.cssText=t.style.cssText.replace(f,o);n.setAttributes(t,{"data-background":f});return}}}var i=this,h=UE.ajax,r;if(i.options.catchRemoteImageEnable!==!1){i.setOpt({catchRemoteImageEnable:!1});var u=i.getOpt("catcherLocalDomain"),f=i.getActionUrl(i.getOpt("catcherActionName")),e=i.getOpt("catcherUrlPrefix"),o=i.getOpt("catcherFieldName");i.addListener("serverConfigLoaded",function(){u=i.getOpt("catcherLocalDomain");f=i.getActionUrl(i.getOpt("catcherActionName"));e=i.getOpt("catcherUrlPrefix");o=i.getOpt("catcherFieldName")});i.addListener("afterpaste",function(){i.fireEvent("catchremoteimage")});r=!1;i.addListener("catchremoteimage",function(){l()})}};UE.commands.insertparagraph={execCommand:function(t,i){for(var e=this,o=e.selection.getRange(),u=o.startContainer,r,f;u;){if(n.isBody(u))break;r=u;u=u.parentNode}r&&(f=e.document.createElement("p"),i?r.parentNode.insertBefore(f,r):r.parentNode.insertBefore(f,r.nextSibling),n.fillNode(e.document,f),o.setStart(f,0).setCursor(!1,!0))}};UE.plugins.template=function(){UE.commands.template={execCommand:function(n,t){t.html&&this.execCommand("inserthtml",t.html)}};this.addListener("click",function(t,i){var u=i.target||i.srcElement,f=this.selection.getRange(),r=n.findParent(u,function(t){if(t.className&&n.hasClass(t,"ue_t"))return t},!0);r&&f.selectNode(r).shrinkBoundary().select()});this.addListener("keydown",function(t,i){var u=this.selection.getRange(),r;u.collapsed||i.ctrlKey||i.metaKey||i.shiftKey||i.altKey||(r=n.findParent(u.startContainer,function(t){if(t.className&&n.hasClass(t,"ue_t"))return t},!0),r&&n.removeClasses(r,["ue_t"]))})};UE.plugin.register("autoupload",function(){function u(t,i){var r=i,v,o,y,s,p,h,e,c,u=/image\/\w+/i.test(t.type)?"image":"file",f="loading_"+(+new Date).toString(36),l;if(v=r.getOpt(u+"FieldName"),o=r.getOpt(u+"UrlPrefix"),y=r.getOpt(u+"MaxSize"),s=r.getOpt(u+"AllowFiles"),p=r.getActionUrl(r.getOpt(u+"ActionName")),e=function(t){var i=r.document.getElementById(f);i&&n.remove(i);r.fireEvent("showmessage",{id:f,content:t,type:"error",timeout:4e3})},u==="image"?(h='<img class="uep-loading" id="'+f+'" src="'+r.options.themePath+r.options.theme+'/images/spacer.gif">',c=function(t){var u=o+t.url,i=r.document.getElementById(f);i&&(n.removeClasses(i,"uep-loading"),i.setAttribute("src",u),i.setAttribute("_src",u),i.setAttribute("alt",t.original||""),i.removeAttribute("id"),r.trigger("contentchange",i))}):(h='<p><img class="uep-loading" id="'+f+'" src="'+r.options.themePath+r.options.theme+'/images/spacer.gif"><\/p>',c=function(n){var i=o+n.url,u=r.document.getElementById(f),t=r.selection.getRange(),e=t.createBookmark();t.selectNode(u).select();r.execCommand("insertfile",{url:i});t.moveToBookmark(e).select()}),r.execCommand("inserthtml",h),!r.getOpt(u+"ActionName")){e(r.getLang("autoupload.errorLoadConfig"));return}if(t.size>y){e(r.getLang("autoupload.exceedSizeError"));return}if(l=t.name?t.name.substr(t.name.lastIndexOf(".")):"",l&&u!="image"||s&&(s.join("")+".").indexOf(l.toLowerCase()+".")==-1){e(r.getLang("autoupload.exceedTypeError"));return}var a=function(n){const t=new FormData;t.append(v,n,n.name);UE.api.requestAction(r,r.getOpt(u+"ActionName"),{data:t}).then(function(n){c(n.data)}).catch(function(){e(r.getLang("autoupload.loadError"))})},w=r.getOpt("imageCompressEnable"),b=r.getOpt("imageMaxSize"),k=r.getOpt("imageCompressBorder");"image"===u&&w?UE.image.compress(t,{maxSizeMB:b/1048576,maxWidthOrHeight:k}).then(function(n){r.options.debug&&console.log("AutoUpload.CompressImage",(n.size/t.size*100).toFixed(2)+"%");a(n)}).catch(function(n){console.error("AutoUpload.CompressImage.error",n);a(t)}):a(t)}function f(n){return n.clipboardData&&n.clipboardData.items&&n.clipboardData.items.length==1&&/^image\//.test(n.clipboardData.items[0].type)?n.clipboardData.items:null}function r(n){return n.dataTransfer&&n.dataTransfer.files?n.dataTransfer.files:null}return{outputRule:function(n){t.each(n.getNodesByTagName("img"),function(n){/\b(uep\-loading\-error)|(bloaderrorclass)\b/.test(n.getAttr("class"))&&n.parentNode.removeChild(n)});t.each(n.getNodesByTagName("p"),function(n){/\bloadpara\b/.test(n.getAttr("class"))&&n.parentNode.removeChild(n)})},bindEvents:{defaultOptions:{enableDragUpload:!0,enablePasteUpload:!0},ready:function(){var e=this,o;if(window.FormData&&window.FileReader){if(o=function(n){var s=!1,i,o,t;if(i=n.type=="paste"?f(n):r(n),i){for(o=i.length;o--;)t=i[o],t.getAsFile&&(t=t.getAsFile()),t&&t.size>0&&(u(t,e),s=!0);s&&n.preventDefault()}},e.getOpt("enablePasteUpload")!==!1)n.on(e.body,"paste ",o);if(e.getOpt("enableDragUpload")!==!1){n.on(e.body,"drop",o);n.on(e.body,"dragover",function(n){n.dataTransfer.types[0]=="Files"&&n.preventDefault()})}else if(i.gecko)n.on(e.body,"drop",function(n){r(n)&&n.preventDefault()});t.cssRule("loading",".uep-loading{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border-radius:3px;outline:1px solid #EEE;margin-left:1px;height:22px;width:22px;}\n.uep-loading-error{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border-radius:3px;outline:1px solid #EEE;margin-right:1px;height:22px;width:22px;}",this.document)}}}}});UE.plugin.register("section",function(){function f(){this.tag="";this.level=-1;this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function u(n){var i=new f;return t.extend(i,n)}function r(n,t){for(var i=t,r=0;r<n.length;r++){if(!i.childNodes)return null;i=i.childNodes[n[r]]}return i}var i=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){i.fireEvent("updateSections")}},bindEvents:{ready:function(){i.fireEvent("updateSections");n.on(i.body,"drop paste",function(){i.fireEvent("updateSections")})},afterexeccommand:function(n,t){t=="paragraph"&&i.fireEvent("updateSections")},keyup:function(n,t){var r=this,u=r.selection.getRange(),i;u.collapsed!=!0?r.fireEvent("updateSections"):(i=t.keyCode||t.which,(i==13||i==8||i==46)&&r.fireEvent("updateSections"))}},commands:{getsections:{execCommand:function(n,i){function c(n){for(var t=0;t<r.length;t++)if(r[t](n))return t;return-1}function h(n,i){for(var y,o,l,a=null,f,r,p=n.childNodes,v=0,w=p.length;v<w;v++)if(r=p[v],l=c(r),l>=0){for(y=s.selection.getRange().selectNode(r).createAddress(!0).startAddress,o=u({tag:r.tagName,title:r.innerText||r.textContent||"",level:l,dom:r,startAddress:t.clone(y,[]),endAddress:t.clone(y,[]),children:[]}),e.nextSection=o,o.previousSection=e,f=e;l<=f.level;)f=f.parentSection;o.parentSection=f;f.children.push(o);a=e=o}else r.nodeType===1&&h(r,i),a&&a.endAddress[a.endAddress.length-1]++}for(var r=i||["h1","h2","h3","h4","h5","h6"],f=0;f<r.length;f++)typeof r[f]=="string"?r[f]=function(n){return function(t){return t.tagName==n.toUpperCase()}}(r[f]):typeof r[f]!="function"&&(r[f]=function(){return null});var s=this,o=u({level:-1,title:"root"}),e=o;return h(s.body,o),o},notNeedUndo:!0},movesection:{execCommand:function(t,i,u,f){function v(n,t,i){for(var u=!1,f=!1,r=0;r<n.length;r++){if(r>=i.length)break;if(i[r]>n[r]){u=!0;break}else if(i[r]<n[r])break}for(r=0;r<t.length;r++){if(r>=i.length)break;if(i[r]<n[r]){f=!0;break}else if(i[r]>n[r])break}return u&&f}var s=this,h,o,c,l,e,a;if(i&&u&&u.level!=-1&&(h=f?u.endAddress:u.startAddress,o=r(h,s.body),h&&o&&!v(i.startAddress,i.endAddress,h))){if(c=r(i.startAddress,s.body),l=r(i.endAddress,s.body),f)for(e=l;e&&!(n.getPosition(c,e)&n.POSITION_FOLLOWING);){if(a=e.previousSibling,n.insertAfter(o,e),e==c)break;e=a}else for(e=c;e&&!(n.getPosition(e,l)&n.POSITION_FOLLOWING);){if(a=e.nextSibling,o.parentNode.insertBefore(e,o),e==l)break;e=a}s.fireEvent("updateSections")}}},deletesection:{execCommand:function(t,i,r){function e(n){for(var t=f.body,i=0;i<n.length;i++){if(!t.childNodes)return null;t=t.childNodes[n[i]]}return t}var f=this;if(i){var h=e(i.startAddress),o=e(i.endAddress),u=h,s;if(r)n.remove(u);else while(u&&n.inDoc(o,f.document)&&!(n.getPosition(u,o)&n.POSITION_FOLLOWING))s=u.nextSibling,n.remove(u),u=s;f.fireEvent("updateSections")}}},selectsection:{execCommand:function(n,i){if(!i&&!i.dom)return!1;var u=this,f=u.selection.getRange(),r={startAddress:t.clone(i.startAddress,[]),endAddress:t.clone(i.endAddress,[])};return r.endAddress[r.endAddress.length-1]++,f.moveToAddress(r).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(n,t){if(!t&&!t.dom)return!1;var r=this,u=r.selection.getRange(),i={startAddress:t.startAddress,endAddress:t.endAddress};return i.endAddress[i.endAddress.length-1]++,u.moveToAddress(i).scrollToView(),!0},notNeedUndo:!0}}}});UE.plugin.register("simpleupload",function(){function f(){var t=document.createElement("input"),f;t.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;font-size:0;opacity:0;";t.type="file";u.appendChild(t);n.on(t,"click",function(n){var t=i.getOpt("toolbarCallback");t&&!0===t("simpleupload",i)&&(n.stopPropagation(),n.preventDefault())});n.on(t,"change",function(){var h=i.queryCommandState("simpleupload"),r;if(h!==-1&&t.value){if(r=UE.dialog.loadingPlaceholder(i),!i.getOpt("imageActionName")){UE.dialog.removeLoadingPlaceholder(i,r);UE.dialog.tipError(i,i.getLang("autoupload.errorLoadConfig"));return}var o=i.getOpt("imageAllowFiles"),f=t.value,s=f?f.substr(f.lastIndexOf(".")):"";if(!s||o&&(o.join("")+".").indexOf(s.toLowerCase()+".")===-1){UE.dialog.removeLoadingPlaceholder(i,r);UE.dialog.tipError(i,i.getLang("autoupload.exceedTypeError"));return}var e=function(t){const u=new FormData;u.append(i.getOpt("imageFieldName"),t,t.name);UE.api.requestAction(i,i.getOpt("imageActionName"),{data:u}).then(function(t){if("SUCCESS"===t.data.state&&t.data.url){const u=i.document.getElementById(r);n.removeClasses(u,"uep-loading");const f=i.options.imageUrlPrefix+t.data.url;u.setAttribute("src",f);u.setAttribute("_src",f);u.setAttribute("alt",t.data.original||"");u.removeAttribute("id");i.fireEvent("contentchange");i.fireEvent("uploadsuccess",{res:t.data,type:"image"})}else UE.dialog.removeLoadingPlaceholder(i,r),UE.dialog.tipError(i,t.data.state)}).catch(function(n){UE.dialog.removeLoadingPlaceholder(i,r);UE.dialog.tipError(i,n)})},u=t.files[0],c=i.getOpt("imageCompressEnable"),l=i.getOpt("imageMaxSize"),a=i.getOpt("imageCompressBorder");c?UE.image.compress(u,{maxSizeMB:l/1048576,maxWidthOrHeight:a}).then(function(n){i.options.debug&&console.log("SimpleUpload.CompressImage",(n.size/u.size*100).toFixed(2)+"%");e(n)}).catch(function(n){console.error("SimpleUpload.CompressImage.error",n);e(u)}):e(u)}});i.addListener("selectionchange",function(){clearTimeout(f);f=setTimeout(function(){var n=i.queryCommandState("simpleupload");t.disabled=n===-1?"disabled":!1},400)});r=!0}var i=this,r=!1,u;return{bindEvents:{ready:function(){t.cssRule("loading",".uep-loading{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border-radius:3px;outline:1px solid #EEE;margin-right:1px;height:22px;width:22px;}\n.uep-loading-error{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border-radius:3px;outline:1px solid #EEE;margin-right:1px;height:22px;width:22px;}",this.document)},simpleuploadbtnready:function(n,t){u=t;i.afterConfigReady(f)}},outputRule:function(n){t.each(n.getNodesByTagName("img"),function(n){/\b(uep\-loading\-error)|(bloaderrorclass)\b/.test(n.getAttr("class"))&&n.parentNode.removeChild(n)})},commands:{simpleupload:{queryCommandState:function(){return r?0:-1}}}}});UE.plugin.register("serverparam",function(){var i=this,n={};return{commands:{serverparam:{execCommand:function(i,r,u){r===undefined||r===null?n={}:t.isString(r)?u===undefined||u===null?delete n[r]:n[r]=u:t.isObject(r)?t.extend(n,r,!1):t.isFunction(r)&&t.extend(n,r(),!1)},queryCommandValue:function(){return n||{}}}}}});UE.plugin.register("insertfile",function(){function i(n){var i=n.substr(n.lastIndexOf(".")+1).toLowerCase(),t={ai:"ai.svg",apk:"apk.svg",chm:"chm.svg",css:"css.svg",doc:"doc.svg",docx:"docx.svg",dwg:"dwg.svg",gif:"gif.svg",html:"html.svg",jpeg:"jpeg.svg",jpg:"jpg.svg",log:"log.svg",mp3:"mp3.svg",mp4:"mp4.svg",pdf:"pdf.svg",png:"png.svg",ppt:"ppt.svg",pptx:"pptx.svg",psd:"psd.svg",rar:"rar.svg",svg:"svg.svg",torrent:"torrent.svg",txt:"txt.svg",unknown:"unknown.svg",xls:"xls.svg",xlsx:"xlsx.svg",zip:"zip.svg"};return t[i]?t[i]:t.unknown}var n=this;return{commands:{insertfile:{execCommand:function(r,u){if(u=t.isArray(u)?u:[u],n.fireEvent("beforeinsertfile",u)!==!0){for(var f,o,s,h="",l=n.getOpt("UEDITOR_HOME_URL"),c=n.options.themePath+n.options.theme+"/exts/",e=0;e<u.length;e++)f=u[e],o=c+i(f.url),s=f.title||f.url.substr(f.url.lastIndexOf("/")+1),h+='<p><a style="background:#EEE;padding:10px;border-radius:5px;line-height:1.5em;display:inline-flex;align-items:center;" href="'+f.url+'" title="'+s+'" target="_blank"><img style="vertical-align:middle;margin-right:0.5em;height:1.5em;" src="'+o+'" _src="'+o+'" /><span style="color:#111111;line-height:1.5em;flex-grow:1;">'+s+"<\/span><\/a><\/p>";n.execCommand("insertHtml",h);n.fireEvent("afterinsertfile",u)}}}}}});UE.plugins["markdown-shortcut"]=function(){if(UE.browser.chrome){const t=this,i=function(n){let t=n.innerHTML;return t.replace(/[\u200b]*/g,"")};let r=[];for(let u=1;u<=6;u++){const f=new RegExp("^\\t?"+Array(u+1).join("#")+"(\\s|&nbsp;)");(function(e){r.push({name:"Head"+u,tagName:["P"],key:[" "],offset:[u+1,u+2],match:[f],callback:function(){t.__hasEnterExecCommand=!0;t.execCommand("paragraph",e);let o=t.selection.getRange(),u=o.startContainer,r=i(u);r=r.replace(f,"");r||(r=n.fillChar);u.innerHTML=r;t.__hasEnterExecCommand=!1}})})("h"+u)}t.on("ready",function(){n.on(t.body,"keyup",function(n){let u=t.selection.getRange();if(u.endOffset===u.startOffset){let e=n.key,o=u.startOffset;const f=u.startContainer.parentNode;let s=i(f),h=f.tagName;for(let n of r)if(n.tagName.includes(h)&&n.key.includes(e)&&n.offset.includes(o))for(let t of n.match){let i=s.match(t);if(i){n.callback({node:f});break}}}})})}};UE.plugins["quick-operate"]=function(){if(UE.browser.chrome){return;let t;const i=UE.ui.uiUtils}};r=r||{};r.editor=r.editor||{};UE.ui=r.editor.ui={},function(){function f(){var n=document.getElementById("edui_fixedlayer");t.setViewportOffset(n,{left:0,top:0})}function h(){i.on(window,"scroll",f);i.on(window,"resize",r.editor.utils.defer(f,0,!0))}var n=r.editor.browser,i=r.editor.dom.domUtils,u="$EDITORUI",e=window[u]={},o="ID"+u,s=0,t=r.editor.ui.uiUtils={uid:function(n){return n?n[o]||(n[o]=++s):++s},hook:function(n,t){var i;return n&&n._callbacks?i=n:(i=function(){var t,r,u,f;for(n&&(t=n.apply(this,arguments)),r=i._callbacks,u=r.length;u--;)f=r[u].apply(this,arguments),t===undefined&&(t=f);return t},i._callbacks=[]),i._callbacks.push(t),i},createElementByHtml:function(n){var t=document.createElement("div");return t.innerHTML=n,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return n.ie&&n.quirks?document.body:document.documentElement},getClientRect:function(n){var t,r,u;try{t=n.getBoundingClientRect()}catch(f){t={left:0,top:0,height:0,width:0}}for(r={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(u=n.ownerDocument)!==document&&(n=i.getWindow(u).frameElement);)t=n.getBoundingClientRect(),r.left+=t.left,r.top+=t.top;return r.bottom=r.top+r.height,r.right=r.left+r.width,r},getViewportRect:function(){var n=t.getViewportElement(),i=(window.innerWidth||n.clientWidth)|0,r=(window.innerHeight||n.clientHeight)|0;return{left:0,top:0,height:r,width:i,bottom:r,right:i}},setViewportOffset:function(n,r){var u=t.getFixedLayer();n.parentNode===u?(n.style.left=r.left+"px",n.style.top=r.top+"px"):i.setViewportOffset(n,r)},getEventOffset:function(n){var u=n.target||n.srcElement,i=t.getClientRect(u),r=t.getViewportOffsetByEvent(n);return{left:r.left-i.left,top:r.top-i.top}},getViewportOffsetByEvent:function(n){var f=n.target||n.srcElement,e=i.getWindow(f).frameElement,r={left:n.clientX,top:n.clientY},u;return e&&f.ownerDocument!==document&&(u=t.getClientRect(e),r.left+=u.left,r.top+=u.top),r},setGlobal:function(n,t){return e[n]=t,u+'["'+n+'"]'},unsetGlobal:function(n){delete e[n]},copyAttributes:function(t,r){for(var f=r.attributes,e=f.length,u;e--;)u=f[e],u.nodeName!="style"&&u.nodeName!="class"&&(!n.ie||u.specified)&&t.setAttribute(u.nodeName,u.nodeValue);r.className&&i.addClass(t,r.className);r.style.cssText&&(t.style.cssText+=";"+r.style.cssText)},removeStyle:function(n,t){if(n.style.removeProperty)n.style.removeProperty(t);else if(n.style.removeAttribute)n.style.removeAttribute(t);else throw"";},contains:function(n,t){return n&&t&&(n===t?!1:n.contains?n.contains(t):n.compareDocumentPosition(t)&16)},startDrag:function(n,t,i){function u(n){var i=n.clientX-f,r=n.clientY-e;t.ondragmove(i,r,n);n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}var i=i||document,f=n.clientX,e=n.clientY,r;if(i.addEventListener){function r(){i.removeEventListener("mousemove",u,!0);i.removeEventListener("mouseup",r,!0);window.removeEventListener("mouseup",r,!0);t.ondragstop()}i.addEventListener("mousemove",u,!0);i.addEventListener("mouseup",r,!0);window.addEventListener("mouseup",r,!0);n.preventDefault()}else{r=n.srcElement;r.setCapture();function i(){r.releaseCapture();r.detachEvent("onmousemove",u);r.detachEvent("onmouseup",i);r.detachEvent("onlosecaptrue",i);t.ondragstop()}r.attachEvent("onmousemove",u);r.attachEvent("onmouseup",i);r.attachEvent("onlosecaptrue",i);n.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var t=document.getElementById("edui_fixedlayer");return t==null&&(t=document.createElement("div"),t.id="edui_fixedlayer",document.body.appendChild(t),n.ie&&n.version<=8?(t.style.position="absolute",h(),setTimeout(f)):t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="0",t.style.height="0",t.style.margin="0"),t},makeUnselectable:function(i){if(n.opera||n.ie&&n.version<9){if(i.unselectable="on",i.hasChildNodes())for(var r=0;r<i.childNodes.length;r++)i.childNodes[r].nodeType===1&&t.makeUnselectable(i.childNodes[r])}else i.style.MozUserSelect!==undefined?i.style.MozUserSelect="none":i.style.WebkitUserSelect!==undefined?i.style.WebkitUserSelect="none":i.style.KhtmlUserSelect!==undefined&&(i.style.KhtmlUserSelect="none")}}}(),function(){var i=r.editor.utils,t=r.editor.ui.uiUtils,f=r.editor.EventBase,u=r.editor.ui.UIBase=function(){};u.prototype={el:null,className:"",uiName:"",initOptions:function(n){var r=this;for(var i in n)r[i]=n[i];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=i.unhtml(t.setGlobal(this.id,this))},render:function(i){for(var u,s=this.renderHtml(),r=t.createElementByHtml(s),h=n.getElementsByTagName(r,"*"),f="edui-"+(this.theme||this.editor.options.theme),e=document.getElementById("edui_fixedlayer"),c=0,o;o=h[c++];)n.addClass(o,f);n.addClass(r,f);e&&(e.className="",n.addClass(e,f));u=this.getDom();u!=null?(u.parentNode.replaceChild(r,u),t.copyAttributes(r,u)):(typeof i=="string"&&(i=document.getElementById(i)),i=i||t.getFixedLayer(),n.addClass(i,f),i.appendChild(r));this.el=r;this.postRender()},getDom:function(n){return n?document.getElementById(this.id+"_"+n):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(n){var t="edui-"+this.uiName;return n.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var n=this.getDom();n&&r.editor.dom.domUtils.remove(n);t.unsetGlobal(this.id)},uiIsShow:!0,uiShowStyleBackupValue:null,uiShow:function(n){if(n){if(this.uiIsShow)return;this.getDom().style.display=this.uiShowStyleBackupValue;this.uiIsShow=!0}else{if(!this.uiIsShow)return;this.uiShowStyleBackupValue=this.getDom().style.display;this.getDom().style.display="none";this.uiIsShow=!1}}};i.inherits(u,f)}(),function(){var t=r.editor.utils,i=r.editor.ui.UIBase,n=r.editor.ui.Separator=function(n){this.initOptions(n);this.initSeparator()};n.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><\/div>'}};t.inherits(n,i)}(),function(){var t=r.editor.utils,i=r.editor.dom.domUtils,u=r.editor.ui.UIBase,f=r.editor.ui.uiUtils,n=r.editor.ui.Mask=function(n){this.initOptions(n);this.initUIBase()};n.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"><\/div>'},postRender:function(){var n=this;i.on(window,"resize",function(){setTimeout(function(){n.isHidden()||n._fill()})})},show:function(n){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=n},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return!1},_onClick:function(n,t){this.fireEvent("click",n,t)},_fill:function(){var n=this.getDom(),t=f.getViewportRect();n.style.width=t.width+"px";n.style.height=t.height+"px"}};t.inherits(n,u)}(),function(){function e(n,t){for(var r,u=0;u<i.length;u++)if(r=i[u],!r.isHidden()&&r.queryAutoHide(t)!==!1){if(n&&/scroll/gi.test(n.type)&&r.className==="edui-wordpastepop")return;r.hide()}i.length&&r.editor.fireEvent("afterhidepop")}var s=r.editor.utils,n=r.editor.ui.uiUtils,t=r.editor.dom.domUtils,u=r.editor.ui.UIBase,f=r.editor.ui.Popup=function(n){this.initOptions(n);this.initPopup()},i=[],o;f.postHide=e;o=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];f.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase();i.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"><\/iframe> <div class="edui-shadow"><\/div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  <\/div> <\/div><\/div>"},getContentHtmlTpl:function(){return this.content?typeof this.content=="string"?this.content:this.content.renderHtml():""},_UIBase_postRender:u.prototype.postRender,postRender:function(){if(this.content instanceof u&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,r=this.getDom().offsetHeight,o=n.getClientRect(this.combox.getDom()).top,f=this.getDom("content"),i=this.getDom("body").getElementsByTagName("iframe"),s=this;for(i.length&&(i=i[0]);o+r>e;)r-=30;f.style.height=r+"px";i&&(i.style.height=r+"px");t.on(f,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(n){n.preventDefault?n.preventDefault():n.returnValue=!1;f.scrollTop-=n.wheelDelta?n.wheelDelta/2:n.detail*-20})}this.fireEvent("postRenderAfter");this.hide(!0);this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var t=this.getDom("content");return n.getClientRect(t)},fitSize:function(){var t,n,i;return this.captureWheel&&this.sized?this.__size:(this.sized=!0,t=this.getDom("body"),t.style.width="",t.style.height="",n=this.mesureSize(),this.captureWheel?(t.style.width=-(-20-n.width)+"px",i=parseInt(this.getDom("content").style.height,10),window.isNaN(i)||(n.height=i)):t.style.width=n.width+"px",t.style.height=n.height+"px",this.__size=n,this.captureWheel&&(this.getDom("content").style.overflow="auto"),n)},showAnchor:function(t,i){this.showAnchorRect(n.getClientRect(t),i)},showAnchorRect:function(i,u){var e,f,c,s,a,l,h;this._doAutoRender();e=n.getViewportRect();this.getDom().style.visibility="hidden";this._show();f=this.fitSize();u?(c=this.canSideLeft&&i.right+f.width>e.right&&i.left>f.width,s=this.canSideUp&&i.top+f.height>e.bottom&&i.bottom>f.height,a=c?i.left-f.width:i.right,l=s?i.bottom-f.height:i.top):(c=this.canSideLeft&&i.right+f.width>e.right&&i.left>f.width,s=this.canSideUp&&i.top+f.height>e.bottom&&i.bottom>f.height,a=c?i.right-f.width:i.left,l=s?i.top-f.height:i.bottom);s||l+f.height>e.bottom&&(l=e.bottom-f.height);h=this.getDom();n.setViewportOffset(h,{left:a,top:l});t.removeClasses(h,o);h.className+=" "+o[(s?1:0)*2+(c?1:0)];this.editor&&(h.style.zIndex=this.editor.container.style.zIndex*1+10,r.editor.ui.uiUtils.getFixedLayer().style.zIndex=h.style.zIndex-1);this.getDom().style.visibility="visible"},showAt:function(n){var t=n.left,i=n.top,r={left:t,top:i,right:t,bottom:i,height:0,width:0};this.showAnchorRect(r,!1,!0)},_show:function(){if(this._hidden){var n=this.getDom();n.style.display="";this._hidden=!1;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(n){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,n||this.fireEvent("hide"))},queryAutoHide:function(t){return!t||!n.contains(this.getDom(),t)}};s.inherits(f,u);t.on(document,"mousedown",function(n){var t=n.target||n.srcElement;e(n,t)});t.on(window,"scroll",function(n,t){e(n,t)})}(),function(){function f(t,i){for(var u='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div id="##_preview" class="edui-colorpicker-preview"><input type="color" id="##_input" onchange="$$._onColorSelect(event,this);" /><\/div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+t+'<\/div><\/div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+i.getLang("themeColor")+'<\/td> <\/tr><tr class="edui-colorpicker-tablefirstrow" >',r=0;r<n.length;r++)r&&r%10==0&&(u+="<\/tr>"+(r==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+i.getLang("standardColor")+"<\/td><\/tr>":"")+"<tr"+(r==60?' class="edui-colorpicker-tablefirstrow"':"")+">"),u+=r<70?'<td style="padding:2px 2px;"><a hidefocus title="'+n[r]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+n[r]+'" style="background-color:#'+n[r]+';border:solid #ccc 1px;"><\/a><\/td>':"";return u+="<\/tr>",u+"<\/table><\/div>"}var i=r.editor.utils,u=r.editor.ui.UIBase,t=r.editor.ui.ColorPicker=function(n){this.initOptions(n);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()},n;t.prototype={getHtmlTpl:function(){return f(this.noColorText,this.editor)},_onTableClick:function(n){var i=n.target||n.srcElement,t=i.getAttribute("data-color");t&&this.fireEvent("pickcolor",t)},_onTableOver:function(n){var i=n.target||n.srcElement,t=i.getAttribute("data-color");t&&(this.getDom("preview").style.backgroundColor=t)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")},_onColorSelect:function(n){var i=n.target||n.srcElement,t=i.value;t&&this.fireEvent("pickcolor",t)}};i.inherits(t,u);n="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),function(){var u=r.editor.utils,n=r.editor.ui.uiUtils,t=r.editor.ui.UIBase,i=r.editor.ui.TablePicker=function(n){this.initOptions(n);this.initTablePicker()};i.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var n=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"><\/span><\/div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"><\/div><\/div><\/div><\/div>'},_UIBase_render:t.prototype.render,render:function(n){this._UIBase_render(n);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(n,t){var i=this.getDom("overlay").style,r=this.lengthOfCellSide,u;i.width=n*r+"px";i.height=t*r+"px";u=this.getDom("label");u.innerHTML=n+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row");this.numCols=n;this.numRows=t},_onMouseOver:function(t,i){var r=t.relatedTarget||t.fromElement;n.contains(i,r)||i===r||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(t,i){var r=t.relatedTarget||t.toElement;n.contains(i,r)||i===r||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(t){var e=this.getDom("overlay").style,i=n.getEventOffset(t),r=this.lengthOfCellSide,u=Math.ceil(i.left/r),f=Math.ceil(i.top/r);this._track(u,f)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};u.inherits(i,t)}(),function(){var i=r.editor.browser,n=r.editor.dom.domUtils,t=r.editor.ui.uiUtils,u='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(i.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');r.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var n=this._Stateful_dGetHtmlTpl();return n.replace(/stateful/g,function(){return u})},Stateful_onMouseEnter:function(n,t){this.target=t;(!this.isDisabled()||this.alwalysHoverable)&&(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(){(!this.isDisabled()||this.alwalysHoverable)&&(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(n,i){var r=n.relatedTarget;t.contains(i,r)||i===r||this.Stateful_onMouseEnter(n,i)},Stateful_onMouseOut:function(n,i){var r=n.relatedTarget;t.contains(i,r)||i===r||this.Stateful_onMouseLeave(n,i)},Stateful_onMouseDown:function(){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(t){return n.hasClass(this.getStateDom(),"edui-state-"+t)},addState:function(n){this.hasState(n)||(this.getStateDom().className+=" edui-state-"+n)},removeState:function(t){this.hasState(t)&&n.removeClasses(this.getStateDom(),["edui-state-"+t])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(n){!this.isDisabled()&&n?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(n){n?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var n=r.editor.utils,i=r.editor.ui.UIBase,u=r.editor.ui.Stateful,t=r.editor.ui.Button=function(n){if(n.name){var t=n.name,i=n.cssRules;n.className||(n.className="edui-for-"+t);n.cssRules=".edui-"+(n.theme||"default")+" .edui-toolbar .edui-button.edui-for-"+t+" .edui-icon {"+i+"}"}this.initOptions(n);this.initButton()};t.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();this.cssRules&&n.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"><\/div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"<\/div>":"")+"<\/div><\/div><\/div><\/div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(n){var t=n.target||n.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if(i=="input"||i=="object"||i=="object")return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(n){var t=this.getDom("label");t.innerHTML=n}};n.inherits(t,i);n.extend(t.prototype,u)}(),function(){var n=r.editor.utils,t=r.editor.ui.uiUtils,e=r.editor.dom.domUtils,u=r.editor.ui.UIBase,f=r.editor.ui.Stateful,i=r.editor.ui.SplitButton=function(n){this.initOptions(n);this.initSplitButton()};i.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){var t,n;this.initUIBase();this.Stateful_init();t=this;this.popup!=null&&(n=this.popup,this.popup=null,this.setPopup(n))},_UIBase_postRender:u.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(i){this.popup!==i&&(this.popup!=null&&this.popup.dispose(),i.addListener("show",n.bind(this._onPopupShow,this)),i.addListener("hide",n.bind(this._onPopupHide,this)),i.addListener("postrender",n.bind(function(){i.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"><\/div>'));i.getDom().className+=" "+this.className},this)),this.popup=i)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"><\/div><\/div><div class="edui-box edui-splitborder"><\/div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"><\/div><\/div><\/div><\/div>'},showPopup:function(){var n=t.getClientRect(this.getDom());n.top-=this.popup.SHADOW_RADIUS;n.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(n)},_onArrowClick:function(){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}};n.inherits(i,u);n.extend(i.prototype,f,!0)}(),function(){var i=r.editor.utils,u=r.editor.ui.uiUtils,f=r.editor.ui.ColorPicker,e=r.editor.ui.Popup,n=r.editor.ui.SplitButton,t=r.editor.ui.ColorButton=function(n){this.initOptions(n);this.initColorButton()};t.prototype={initColorButton:function(){var n=this;this.popup=new e({content:new f({noColorText:n.editor.getLang("clearColor"),editor:n.editor,onpickcolor:function(t,i){n._onPickColor(i)},onpicknocolor:function(t,i){n._onPickNoColor(i)}}),editor:n.editor});this.initSplitButton()},_SplitButton_postRender:n.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(u.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"><\/div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(n){this.getDom("colorlump").style.backgroundColor=n;this.color=n},_onPickColor:function(n){this.fireEvent("pickcolor",n)!==!1&&(this.setColor(n),this.popup.hide())},_onPickNoColor:function(){this.fireEvent("picknocolor")!==!1&&this.popup.hide()}};i.inherits(t,n)}(),function(){var t=r.editor.utils,i=r.editor.ui.Popup,u=r.editor.ui.TablePicker,f=r.editor.ui.SplitButton,n=r.editor.ui.TableButton=function(n){this.initOptions(n);this.initTableButton()};n.prototype={initTableButton:function(){var n=this;this.popup=new i({content:new u({editor:n.editor,onpicktable:function(t,i,r){n._onPickTable(i,r)}}),editor:n.editor});this.initSplitButton()},_onPickTable:function(n,t){this.fireEvent("picktable",n,t)!==!1&&this.popup.hide()}};t.inherits(n,f)}(),function(){var i=r.editor.utils,n=r.editor.ui.UIBase,t=r.editor.ui.AutoTypeSetPicker=function(n){this.initOptions(n);this.initAutoTypeSetPicker()};t.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var i=this.editor,n=i.options.autotypeset,t=i.getLang("autoTypeSet"),u="textAlignValue"+i.uid,r="imageBlockLineValue"+i.uid,f="symbolConverValue"+i.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(n.mergeEmptyline?"checked":"")+">"+t.mergeLine+'<\/td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(n.removeEmptyline?"checked":"")+">"+t.delLine+'<\/td><\/tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(n.removeClass?"checked":"")+">"+t.removeFormat+'<\/td><td colspan="2"><input type="checkbox" name="indent" '+(n.indent?"checked":"")+">"+t.indent+'<\/td><\/tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(n.textAlign?"checked":"")+">"+t.alignment+'<\/td><td colspan="2" id="'+u+'"><input type="radio" name="'+u+'" value="left" '+(n.textAlign&&n.textAlign=="left"?"checked":"")+">"+i.getLang("justifyleft")+'<input type="radio" name="'+u+'" value="center" '+(n.textAlign&&n.textAlign=="center"?"checked":"")+">"+i.getLang("justifycenter")+'<input type="radio" name="'+u+'" value="right" '+(n.textAlign&&n.textAlign=="right"?"checked":"")+">"+i.getLang("justifyright")+'<\/td><\/tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(n.imageBlockLine?"checked":"")+">"+t.imageFloat+'<\/td><td nowrap id="'+r+'"><input type="radio" name="'+r+'" value="none" '+(n.imageBlockLine&&n.imageBlockLine=="none"?"checked":"")+">"+i.getLang("default")+'<input type="radio" name="'+r+'" value="left" '+(n.imageBlockLine&&n.imageBlockLine=="left"?"checked":"")+">"+i.getLang("justifyleft")+'<input type="radio" name="'+r+'" value="center" '+(n.imageBlockLine&&n.imageBlockLine=="center"?"checked":"")+">"+i.getLang("justifycenter")+'<input type="radio" name="'+r+'" value="right" '+(n.imageBlockLine&&n.imageBlockLine=="right"?"checked":"")+">"+i.getLang("justifyright")+'<\/td><\/tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(n.clearFontSize?"checked":"")+">"+t.removeFontsize+'<\/td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(n.clearFontFamily?"checked":"")+">"+t.removeFontFamily+'<\/td><\/tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(n.removeEmptyNode?"checked":"")+">"+t.removeHtml+'<\/td><\/tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(n.pasteFilter?"checked":"")+">"+t.pasteFilter+'<\/td><\/tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(n.bdc2sb||n.tobdc?"checked":"")+">"+t.symbol+'<\/td><td id="'+f+'"><input type="radio" name="bdc" value="bdc2sb" '+(n.bdc2sb?"checked":"")+">"+t.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(n.tobdc?"checked":"")+">"+t.tobdc+'<\/td><td nowrap align="right"><button >'+t.run+"<\/button><\/td><\/tr><\/table><\/div><\/div>"},_UIBase_render:n.prototype.render};i.inherits(t,n)}(),function(){function t(t){for(var e,s,p,h,w,c,l,r={},a=t.getDom(),b=t.editor.uid,v=null,u=null,y=n.getElementsByTagName(a,"input"),o=y.length-1,f;f=y[o--];)if(v=f.getAttribute("type"),v=="checkbox")if(u=f.getAttribute("name"),r[u]&&delete r[u],f.checked)if(e=document.getElementById(u+"Value"+b),e){if(/input/gi.test(e.tagName))r[u]=e.value;else for(s=e.getElementsByTagName("input"),p=s.length-1;h=s[p--];)if(h.checked){r[u]=h.value;break}}else r[u]=!0;else r[u]=!1;else r[f.getAttribute("value")]=f.checked;for(w=n.getElementsByTagName(a,"select"),o=0;c=w[o++];)l=c.getAttribute("name"),r[l]=r[l]?c.value:"";i.extend(t.editor.options.autotypeset,r);t.editor.setPreferences("autotypeset",r)}var i=r.editor.utils,f=r.editor.ui.Popup,e=r.editor.ui.AutoTypeSetPicker,o=r.editor.ui.SplitButton,u=r.editor.ui.AutoTypeSetButton=function(n){this.initOptions(n);this.initAutoTypeSetButton()};u.prototype={initAutoTypeSetButton:function(){var i=this,r;this.popup=new f({content:new e({editor:i.editor}),editor:i.editor,hide:function(){!this._hidden&&this.getDom()&&(t(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});r=0;this.popup.addListener("postRenderAfter",function(){var u=this,f,e;if(!r){f=this.getDom();e=f.getElementsByTagName("button")[0];e.onclick=function(){t(u);i.editor.execCommand("autotypeset");u.hide()};n.on(f,"click",function(n){var r=n.target||n.srcElement,o=i.editor.uid,f,s;if(r&&r.tagName=="INPUT"){if(r.name=="imageBlockLine"||r.name=="textAlign"||r.name=="symbolConver"){var h=r.checked,c=document.getElementById(r.name+"Value"+o),e=c.getElementsByTagName("input"),l={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"};for(f=0;f<e.length;f++)h?e[f].value==l[r.name]&&(e[f].checked="checked"):e[f].checked=!1}(r.name=="imageBlockLineValue"+o||r.name=="textAlignValue"+o||r.name=="bdc")&&(s=r.parentNode.previousSibling.getElementsByTagName("input"),s&&(s[0].checked=!0));t(u)}});r=1}});this.initSplitButton()}};i.inherits(u,o)}(),function(){var t=r.editor.utils,u=r.editor.ui.Popup,f=r.editor.ui.Stateful,i=r.editor.ui.UIBase,n=r.editor.ui.CellAlignPicker=function(n){this.initOptions(n);this.initSelected();this.initCellAlignPicker()};n.prototype={initSelected:function(){var n={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3};this.selected&&(this.selectedIndex=n.valign[this.selected.valign]*n.count+n.align[this.selected.align])},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){for(var u=["left","center","right"],r=null,t=-1,i=[],n=0;n<9;n++)r=this.selectedIndex===n?' class="edui-cellalign-selected" ':"",t=n%3,t===0&&i.push("<tr>"),i.push('<td index="'+n+'" '+r+' stateful><div class="edui-icon edui-'+u[t]+'"><\/div><\/td>'),t===2&&i.push("<\/tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+i.join("")+"<\/table><\/div><\/div>"},getStateDom:function(){return this.target},_onClick:function(n){var t=n.target||n.srcElement;/icon/.test(t.className)&&(this.items[t.parentNode.getAttribute("index")].onclick(),u.postHide(n))},_UIBase_render:i.prototype.render};t.inherits(n,i);t.extend(n.prototype,f,!0)}(),function(){var i=r.editor.utils,e=r.editor.ui.Stateful,u=r.editor.ui.uiUtils,f=r.editor.ui.UIBase,t=r.editor.ui.PastePicker=function(n){this.initOptions(n);this.initPastePicker()};t.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"><\/div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'<\/div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"><\/div><\/div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"><\/div><\/div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"><\/div><\/div><\/div><\/div><\/div>'},getStateDom:function(){return this.target},format:function(n){this.editor.ui._isTransfer=!0;this.editor.fireEvent("pasteTransfer",n)},_onClick:function(t){var i=n.getNextDomNode(t),f=u.getViewportRect().height,r=u.getClientRect(i);i.style.top=r.top+r.height>f?-r.height-t.offsetHeight+"px":"";/hidden/gi.test(n.getComputedStyle(i,"visibility"))?(i.style.visibility="visible",n.addClass(t,"edui-state-opened")):(i.style.visibility="hidden",n.removeClasses(t,"edui-state-opened"))},_UIBase_render:f.prototype.render};i.inherits(t,f);i.extend(t.prototype,e,!0)}(),function(){var t=r.editor.utils,i=r.editor.ui.uiUtils,u=r.editor.ui.UIBase,n=r.editor.ui.Toolbar=function(n){this.initOptions(n);this.initToolbar()};n.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(n,t){t===undefined?this.items.push(n):this.items.splice(t,0,n)},getHtmlTpl:function(){for(var t=[],n=0;n<this.items.length;n++)t[n]=this.items[n].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+t.join("")+"<\/div>"},postRender:function(){for(var t=this.getDom(),n=0;n<this.items.length;n++)this.items[n].postRender();i.makeUnselectable(t)},_onMouseDown:function(n){var t=n.target||n.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if(i=="input"||i=="object"||i=="object")return!1}};t.inherits(n,u)}(),function(){var i=r.editor.utils,u=r.editor.dom.domUtils,f=r.editor.ui.uiUtils,e=r.editor.ui.UIBase,n=r.editor.ui.Popup,o=r.editor.ui.Stateful,s=r.editor.ui.CellAlignPicker,t=r.editor.ui.QuickOperate=function(n){this.initOptions(n)};t.prototype={uiName:"quick-operate",_Popup_getContentHtmlTpl:n.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){return['<div class="edui-quick-operate">',' <div class="edui-quick-operate-status">','   <div class="edui-quick-operate-icon"><i class="icon icon-image"><\/i><\/div>','   <div class="edui-quick-operate-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-icon="DragOutlined"><path d="M8.25 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm0 7.25a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Zm1.75 5.5a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM14.753 6.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5ZM16.5 12a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0Zm-1.747 9a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z" fill="currentColor"><\/path><\/svg><\/div>'," <\/div>",' <div class="edui-quick-operate-menu">','   <div class="item"><i class="icon icon-image"><\/i> 删除<\/div>','   <div class="item"><i class="icon icon-image"><\/i> 左对齐<\/div>','   <div class="item"><i class="icon icon-image"><\/i> 右对齐<\/div>'," <\/div>","<\/div>",].join("")},destroy:function(){this.getDom()&&u.remove(this.getDom())},dispose:function(){this.destroy()}};i.inherits(t,n)}(),function(){var e=r.editor.utils,u=r.editor.dom.domUtils,t=r.editor.ui.uiUtils,o=r.editor.ui.UIBase,i=r.editor.ui.Popup,s=r.editor.ui.Stateful,h=r.editor.ui.CellAlignPicker,f=r.editor.ui.Menu=function(n){this.initOptions(n);this.initMenu()},c={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"><\/div><\/div>'},postRender:function(){},queryAutoHide:function(){return!0}},n;f.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var i,t=0;t<this.items.length;t++)i=this.items[t],i=="-"?this.items[t]=this.getSeparator():i instanceof n||(i.editor=this.editor,i.theme=this.editor.options.theme,this.items[t]=this.createItem(i))},getSeparator:function(){return c},createItem:function(t){return t.menu=this,new n(t)},_Popup_getContentHtmlTpl:i.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){var t,n,i;if(this.items.length==0)return this._Popup_getContentHtmlTpl();for(t=[],n=0;n<this.items.length;n++)i=this.items[n],t[n]=i.renderHtml();return'<div class="%%-body">'+t.join("")+"<\/div>"},_Popup_postRender:i.prototype.postRender,postRender:function(){for(var i,r=this,n=0;n<this.items.length;n++)i=this.items[n],i.ownerMenu=this,i.postRender();u.on(this.getDom(),"mouseover",function(n){n=n||event;var i=n.relatedTarget||n.fromElement,u=r.getDom();t.contains(u,i)||u===i||r.fireEvent("over")});this._Popup_postRender()},queryAutoHide:function(n){var i,r;if(n){if(t.contains(this.getDom(),n))return!1;for(i=0;i<this.items.length;i++)if(r=this.items[i],r.queryAutoHide(n)===!1)return!1}},clearItems:function(){for(var n,t=0;t<this.items.length;t++)n=this.items[t],clearTimeout(n._showingTimer),clearTimeout(n._closingTimer),n.subMenu&&n.subMenu.destroy();this.items=[]},destroy:function(){this.getDom()&&u.remove(this.getDom());this.clearItems()},dispose:function(){this.destroy()}};e.inherits(f,i);n=r.editor.ui.MenuItem=function(n){if(this.initOptions(n),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof f))if(n.className&&n.className.indexOf("aligntd")!=-1){var t=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new i({content:new h(this.subMenu),parentMenu:t,editor:t.editor,destroy:function(){this.getDom()&&u.remove(this.getDom())}});this.subMenu.addListener("postRenderAfter",function(){u.on(this.getDom(),"mouseover",function(){t.addState("opened")})})}else this.subMenu=new f(this.subMenu)};n.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"<\/div><\/div>"},postRender:function(){var n=this;this.addListener("over",function(){n.ownerMenu.fireEvent("submenuover",n);n.subMenu&&n.delayShowSubMenu()});this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){n.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(n._closingTimer);n._closingTimer=null;n.addState("opened")}),this.ownerMenu.addListener("hide",function(){n.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,i){i!==n&&n.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(i){return i&&t.contains(n.getDom(),i)?!1:this._bakQueryAutoHide(i)});this.getDom().style.tabIndex="-1";t.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var n=this;n.isDisabled()||(n.addState("opened"),clearTimeout(n._showingTimer),clearTimeout(n._closingTimer),n._closingTimer=null,n._showingTimer=setTimeout(function(){n.showSubMenu()},250))},delayHideSubMenu:function(){var n=this;n.isDisabled()||(n.removeState("opened"),clearTimeout(n._showingTimer),n._closingTimer||(n._closingTimer=setTimeout(function(){n.hasState("opened")||n.hideSubMenu();n._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"><\/div><div class="edui-box edui-icon"><\/div><div class="edui-box edui-label %%-label">'+(this.label||"")+"<\/div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(n){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(n)},_onClick:function(n,t){this.hasState("disabled")||this.fireEvent("click",n,t)!==!1&&(this.subMenu?this.showSubMenu():i.postHide(n))},showSubMenu:function(){var n=t.getClientRect(this.getDom());n.right-=5;n.left+=2;n.width-=7;n.top-=4;n.bottom+=4;n.height+=8;this.subMenu.showAnchorRect(n,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}};e.inherits(n,o);e.extend(n.prototype,s,!0)}(),function(){var i=r.editor.utils,u=r.editor.ui.uiUtils,f=r.editor.ui.Menu,n=r.editor.ui.SplitButton,t=r.editor.ui.Combox=function(n){this.initOptions(n);this.initCombox()};t.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var i=this,n,t;for(this.items=this.items||[],n=0;n<this.items.length;n++)t=this.items[n],t.uiName="listitem",t.index=n,t.onclick=function(){i.selectByIndex(this.index)};this.popup=new f({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this});this.initSplitButton()},_SplitButton_postRender:n.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var n=u.getClientRect(this.getDom());n.top+=1;n.bottom-=1;n.height-=2;this.popup.showAnchorRect(n)},getValue:function(){return this.value},setValue:function(n){var t=this.indexByValue(n);t!=-1?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(n)),this.value=n)},setLabel:function(n){this.getDom("button_body").innerHTML=n;this.label=n},getLabelForUnknowValue:function(n){return n},indexByValue:function(n){for(var t=0;t<this.items.length;t++)if(n==this.items[t].value)return t;return-1},getItem:function(n){return this.items[n]},selectByIndex:function(n){n<this.items.length&&this.fireEvent("select",n)!==!1&&(this.selectedIndex=n,this.value=this.items[n].value,this.setLabel(this.items[n].label))}};i.inherits(t,n)}(),function(){var i=r.editor.utils,t=r.editor.dom.domUtils,n=r.editor.ui.uiUtils,e=r.editor.ui.Mask,c=r.editor.ui.UIBase,u=r.editor.ui.Button,o=r.editor.ui.Dialog=function(n){if(n.name){var t=n.name,r=n.cssRules;n.className||(n.className="edui-for-"+t);r&&(n.cssRules=".edui-for-"+t+" .edui-dialog-content  {"+r+"}")}this.initOptions(i.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(n,t){return t?this.onok():this.oncancel()},holdScroll:!1},n));this.initDialog()},s,h,f;o.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var r=this,t=this.editor.options.theme,n;if(this.cssRules&&(this.cssRules=".edui-"+t+" "+this.cssRules,i.cssRule("edui-customize-"+this.name+"-style",this.cssRules)),this.initUIBase(),this.modalMask=s||(s=new e({className:"edui-dialog-modalmask",theme:t,onclick:function(){f&&f.close(!1)}})),this.dragMask=h||(h=new e({className:"edui-dialog-dragmask",theme:t})),this.closeButton=new u({className:"edui-dialog-closebutton",title:r.closeDialog,theme:t,onclick:function(){r.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(n=0;n<this.buttons.length;n++)this.buttons[n]instanceof u||(this.buttons[n]=new u(i.extend(this.buttons[n],{editor:this.editor},!0)))},initResizeEvent:function(){var i=this;t.on(window,"resize",function(){i._hidden||i._hidden===undefined||(i.__resizeTimer&&window.clearTimeout(i.__resizeTimer),i.__resizeTimer=window.setTimeout(function(){i.__resizeTimer=null;var r=i.getDom(),u=i.getDom("content"),f=UE.ui.uiUtils.getClientRect(r),e=UE.ui.uiUtils.getClientRect(u),t=n.getViewportRect();u.style.width=t.width-f.width+e.width+"px";u.style.height=t.height-f.height+e.height+"px";r.style.width=t.width+"px";r.style.height=t.height+"px";i.fireEvent("resize")},100))})},fitSize:function(){var u=this.getDom("body"),a=u.querySelector(".edui-dialog-foot"),f=70,l,e,o;a||(f=30);var t=this.mesureSize(),c=n.getViewportRect(),i=t.width,r=t.height-f,s=c.width-2,h=c.height-f-2;return i>s&&(r=r*s/i,i=s),r>h&&(i=i*h/r,r=h),l=i/t.width,e=u.querySelector(".edui-dialog-content"),e.dataset.dialogScaled||(e.dataset.dialogScaled=!0,e.style.width=i+"px",e.style.height=r+"px",o=u.querySelector(".edui-dialog-content iframe"),o.style.width=t.width+"px",o.style.height=t.height-f+"px",o.style.transformOrigin="0 0",o.style.transform="scale("+l+")",t.width=i,t.height=r+f),u.style.width=t.width+"px",u.style.height=t.height+"px",t},safeSetOffset:function(t){var o=this,f=o.getDom(),i=n.getViewportRect(),r=n.getClientRect(f),e=t.left,u;e+r.width>i.right&&(e=i.right-r.width);u=t.top;u+r.height>i.bottom&&(u=i.bottom-r.height);f.style.left=Math.max(e,0)+"px";f.style.top=Math.max(u,0)+"px"},showAtCenter:function(){var r=n.getViewportRect(),i,u,f,e;if(this.fullscreen)i=this.getDom(),u=this.getDom("content"),i.style.display="block",f=UE.ui.uiUtils.getClientRect(i),e=UE.ui.uiUtils.getClientRect(u),i.style.left="-100000px",u.style.width=r.width-f.width+e.width+"px",u.style.height=r.height-f.height+e.height+"px",i.style.width=r.width+"px",i.style.height=r.height+"px",i.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden";else{this.getDom().style.display="";var o=this.fitSize(),s=this.getDom("titlebar").offsetHeight|0,c=r.width/2-o.width/2,l=r.height/2-(o.height-s)/2-s,h=this.getDom();this.safeSetOffset({left:Math.max(c|0,0),top:Math.max(l|0,0)});t.hasClass(h,"edui-state-centered")||(h.className+=" edui-state-centered")}this._show()},getContentHtml:function(){var n="";return typeof this.content=="string"?n=this.content:this.iframeUrl&&(n='<span id="'+this.id+'_contmask" class="dialogcontmask"><\/span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"><\/iframe>'),n},getHtmlTpl:function(){var i="",t,n;if(this.buttons){for(t=[],n=0;n<this.buttons.length;n++)t[n]=this.buttons[n].renderHtml();i='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"<\/div><\/div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"><\/div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"<\/span><\/div>"+this.closeButton.renderHtml()+'<\/div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"<\/div>"+i+"<\/div><\/div><\/div>"},postRender:function(){var i,r;if(this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide()),i=this,this.addListener("show",function(){i.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){i.modalMask.hide()}),this.buttons)for(r=0;r<this.buttons.length;r++)this.buttons[r].postRender();t.on(window,"resize",function(){setTimeout(function(){i.isHidden()||i.safeSetOffset(n.getClientRect(i.getDom()))})});this._hide()},mesureSize:function(){var t=this.getDom("body"),i=n.getClientRect(this.getDom("content")).width,r=t.style;return r.width=i,n.getClientRect(t)},_onTitlebarMouseDown:function(i){if(this.draggable){var u,f=n.getViewportRect(),r=this;n.startDrag(i,{ondragstart:function(){u=n.getClientRect(r.getDom());r.getDom("contmask").style.visibility="visible";r.dragMask.show(r.getDom().style.zIndex-1)},ondragmove:function(n,t){var i=u.left+n,f=u.top+t;r.safeSetOffset({left:i,top:f})},ondragstop:function(){r.getDom("contmask").style.visibility="hidden";t.removeClasses(r.getDom(),["edui-state-centered"]);r.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10),this._hidden=!1,this.fireEvent("show"),r.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var n=this.getDom();n.style.display="none";n.style.zIndex="";n.style.width="";n.style.height="";this._hidden=!0;this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(n){this.render();this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(t){}f=this},_onCloseButtonClick:function(){this.close(!1)},close:function(n){var r,i,u;this.fireEvent("close",n)!==!1&&(this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide(),r=this.getDom("content"),i=this.getDom("iframe"),r&&i&&(u=i.contentDocument||i.contentWindow.document,u&&(u.body.innerHTML=""),t.remove(r)))}};i.inherits(o,c)}(),function(){var t=r.editor.utils,i=r.editor.ui.Menu,u=r.editor.ui.SplitButton,n=r.editor.ui.MenuButton=function(n){this.initOptions(n);this.initMenuButton()};n.prototype={initMenuButton:function(){var n=this;this.uiName="menubutton";this.popup=new i({items:n.items,className:n.className,editor:n.editor});this.popup.addListener("show",function(){for(var i=this,t=0;t<i.items.length;t++)i.items[t].removeState("checked"),i.items[t].value==n._value&&(i.items[t].addState("checked"),this.value=n._value)});this.initSplitButton()},setValue:function(n){this._value=n}};t.inherits(n,u)}(),function(){var t=r.editor.utils,i=r.editor.ui.Popup,u=r.editor.ui.SplitButton,n=r.editor.ui.MultiMenuPop=function(n){this.initOptions(n);this.initMultiMenu()};n.prototype={initMultiMenu:function(){var n=this;this.popup=new i({content:"",editor:n.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+n.id+'_iframe" src="'+n.iframeUrl+'" frameborder="0"><\/iframe>',n.editor.container.style.zIndex&&(this.getDom().style.zIndex=n.editor.container.style.zIndex*1+1))}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};t.inherits(n,u)}(),function(){function s(t){var u=t.target||t.srcElement,f=n.findParent(u,function(t){return n.hasClass(t,"edui-shortcutmenu")||n.hasClass(t,"edui-popup")},!0),i,r;if(!f)for(i=0;r=h[i++];)r.hide()}var t=r.editor.ui,c=t.UIBase,e=t.uiUtils,u=r.editor.utils,n=r.editor.dom.domUtils,h=[],f=!1,o=t.ShortCutMenu=function(n){this.initOptions(n);this.initShortCutMenu()};o.postHide=s;o.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();h.push(this)},initEvent:function(){var n=this,t=n.editor.document;n.editor.addListener("afterhidepop",function(){n.isHidden||(f=!0)})},initItems:function(){var n,r,i;if(u.isArray(this.items))for(n=0,r=this.items.length;n<r;n++)"string"==typeof this.items[n]&&(i=this.items[n].toLowerCase(),t[i]&&(this.items[n]=new t[i](this.editor),this.items[n].className+=" edui-short-cut-sub-menu "))},setOpacity:function(n,t){i.ie&&i.version<9?n.style.filter="alpha(opacity = "+parseFloat(t)*100+");":n.style.opacity=t},getSubMenuMark:function(){var t,i,r,u;for(f=!1,t=e.getFixedLayer(),i=n.getElementsByTagName(t,"div",function(t){return n.hasClass(t,"edui-short-cut-sub-menu edui-popup")}),r=0;u=i[r++];)u.style.display!=="none"&&(f=!0);return f},show:function(n){function u(n){n.left<0&&(n.left=0);n.top<0&&(n.top=0);i.style.cssText="position:absolute;left:"+n.left+"px;top:"+n.top+"px;"}var t=this,r={},i=this.getDom(),f=e.getFixedLayer();for(let n of this.items)"shouldUiShow"in n&&n.uiShow(n.shouldUiShow());t.eventType=n.type;i.style.cssText="display:block;left:-9999px";r=e.getViewportOffsetByEvent(n);r.top-=i.offsetHeight+t.SPACE;r.left+=t.SPACE+20;u(r);t.setOpacity(i,1);t.isHidden=!1;t.left=n.screenX+i.offsetWidth/2-t.SPACE;t.top=n.screenY-i.offsetHeight/2-t.SPACE;t.editor&&(i.style.zIndex=t.editor.container.style.zIndex*1+10,f.style.zIndex=i.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none");this.isHidden=!0},postRender:function(){if(u.isArray(this.items))for(var t=0,n;n=this.items[t++];)n.postRender()},getHtmlTpl:function(){var n,t;if(u.isArray(this.items)){for(n=[],t=0;t<this.items.length;t++)n[t]=this.items[t].renderHtml();n=n.join("")}else n=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+n+"<\/div>"}};u.inherits(o,c);n.on(document,"mousedown",function(n){s(n)});n.on(window,"scroll",function(n){s(n)})}(),function(){var t=r.editor.utils,i=r.editor.ui.UIBase,n=r.editor.ui.Breakline=function(n){this.initOptions(n);this.initSeparator()};n.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};t.inherits(n,i)}(),function(){var t=r.editor.utils,i=r.editor.dom.domUtils,u=r.editor.ui.UIBase,n=r.editor.ui.Message=function(n){this.initOptions(n);this.initMessage()};n.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×<\/div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"><\/iframe> <div class="edui-shadow"><\/div> <div id="##_content" class="edui-message-content">  <\/div> <\/div><\/div>'},reset:function(n){var t=this;n.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},n.timeout||4e3));n.content!==undefined&&t.setContent(n.content);n.type!==undefined&&t.setType(n.type);t.show()},postRender:function(){var t=this,n=this.getDom("closer");n&&i.on(n,"click",function(){t.hide()})},setContent:function(n){this.getDom("content").innerHTML=n},setType:function(n){n=n||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+n)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var n=this.getDom("body").match(/edui-message-type-([\w-]+)/);return n?n[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var n=this.getDom();n&&(n.style.display="none",n.parentNode&&n.parentNode.removeChild(n))}};t.inherits(n,u)}(),function(){var e=r.editor.utils,t=r.editor.ui,d=t.Dialog,l,a,s,o,u,h,c,f,v,y,p,w,b,k;for(t.buttons={},t.Dialog=function(n){var t=new d(n);return t.addListener("hide",function(){var n,r,u;if(t.editor){n=t.editor;try{i.gecko?(r=n.window.scrollY,u=n.window.scrollX,n.body.focus(),n.window.scrollTo(u,r)):n.focus()}catch(f){}}}),t},l=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable",],o=0;u=l[o++];)u=u.toLowerCase(),t[u]=function(n){return function(i){var r=new t.Button({className:"edui-for-"+n,title:i.options.labelMap[n]||i.getLang("labelMap."+n)||"",onclick:function(){i.execCommand(n)},theme:i.options.theme,showText:!1});switch(n){case"bold":case"italic":case"underline":case"strikethrough":case"fontborder":r.shouldUiShow=function(n){return function(){return i.selection.getText()?i.queryCommandState(n)!==UE.constants.STATEFUL.DISABLED:!1}}(n)}return t.buttons[n]=r,i.addListener("selectionchange",function(t,u,f){var e=i.queryCommandState(n);e===-1?(r.setDisabled(!0),r.setChecked(!1)):f||(r.setDisabled(!1),r.setChecked(e))}),r}}(u);t.cleardoc=function(n){var i=new t.Button({className:"edui-for-cleardoc",title:n.options.labelMap.cleardoc||n.getLang("labelMap.cleardoc")||"",theme:n.options.theme,onclick:function(){confirm(n.getLang("confirmClear"))&&n.execCommand("cleardoc")}});return t.buttons.cleardoc=i,n.addListener("selectionchange",function(){i.setDisabled(n.queryCommandState("cleardoc")==-1)}),i};a=["none","left","center","right"];for(let i of a)(function(i){t["image"+i]=function(r){var u=new t.Button({className:"edui-for-image"+i,title:r.options.labelMap["image"+i]||r.getLang("labelMap.image"+i)||"",theme:r.options.theme,onclick:function(){r.execCommand("imagefloat",i)},shouldUiShow:function(){let t=r.selection.getRange().getClosedNode();return!t||t.tagName!=="IMG"?!1:n.hasClass(t,"uep-loading")||n.hasClass(t,"uep-loading-error")?!1:r.queryCommandState("imagefloat")!==UE.constants.STATEFUL.DISABLED}});return t.buttons["image"+i]=u,r.addListener("selectionchange",function(n,t,f){u.setDisabled(r.queryCommandState("imagefloat")===UE.constants.STATEFUL.DISABLED);u.setChecked(r.queryCommandValue("imagefloat")===i&&!f)}),u}})(i);s={justify:["left","right","center","justify"],directionality:["ltr","rtl"]};for(f in s)(function(n,i){for(var u=0,r;r=i[u++];)(function(i){t[n.replace("float","")+i]=function(r){var u=new t.Button({className:"edui-for-"+n.replace("float","")+i,title:r.options.labelMap[n.replace("float","")+i]||r.getLang("labelMap."+n.replace("float","")+i)||"",theme:r.options.theme,onclick:function(){r.execCommand(n,i)}});return t.buttons[n]=u,r.addListener("selectionchange",function(t,f,e){u.setDisabled(r.queryCommandState(n)==-1);u.setChecked(r.queryCommandValue(n)==i&&!e)}),u}})(r)})(f,s[f]);for(o=0;u=["backcolor","forecolor"][o++];)t[u]=function(n){return function(i){var r=new t.ColorButton({className:"edui-for-"+n,color:"default",title:i.options.labelMap[n]||i.getLang("labelMap."+n)||"",editor:i,onpickcolor:function(t,r){i.execCommand(n,r)},onpicknocolor:function(){i.execCommand(n,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){i.execCommand(n,this.color)},shouldUiShow:function(){return i.selection.getText()?i.queryCommandState(n)!==UE.constants.STATEFUL.DISABLED:!1}});return t.buttons[n]=r,i.addListener("selectionchange",function(){r.setDisabled(i.queryCommandState(n)==-1)}),r}}(u);h={anchor:"~/dialogs/anchor/anchor.html?2f10d082",insertimage:"~/dialogs/image/image.html?922fb017",link:"~/dialogs/link/link.html?ccbfcf18",spechars:"~/dialogs/spechars/spechars.html?3bbeb696",searchreplace:"~/dialogs/searchreplace/searchreplace.html?2cb782d2",insertvideo:"~/dialogs/video/video.html?80179379",insertaudio:"~/dialogs/audio/audio.html?186ee4c9",help:"~/dialogs/help/help.html?05c0c8bf",preview:"~/dialogs/preview/preview.html?5d9a0847",emotion:"~/dialogs/emotion/emotion.html?a7bc0989",wordimage:"~/dialogs/wordimage/wordimage.html?2570dd00",formula:"~/dialogs/formula/formula.html?9a5a1511",attachment:"~/dialogs/attachment/attachment.html?8a7d83e2",insertframe:"~/dialogs/insertframe/insertframe.html?807119a5",edittip:"~/dialogs/table/edittip.html?fa0ea189",edittable:"~/dialogs/table/edittable.html?134e2f06",edittd:"~/dialogs/table/edittd.html?9fe1a06e",scrawl:"~/dialogs/scrawl/scrawl.html?81bccab9",template:"~/dialogs/template/template.html?3c8090b7",background:"~/dialogs/background/background.html?c2bb8b05",contentimport:"~/dialogs/contentimport/contentimport.html?3a4dab40"};c={noOk:["searchreplace","help","spechars","preview"],ok:["attachment","anchor","link","insertimage","insertframe","wordimage","insertvideo","insertaudio","edittip","edittable","edittd","scrawl","template","formula","background","contentimport",]};for(f in c)(function(n,r){for(var f=0,u;u=r[f++];)i.opera&&u==="searchreplace"||function(i){t[i]=function(r,u,f){var o,s;u=u||(r.options.dialogIframeUrlMap||{})[i]||h[i];f=r.options.labelMap[i]||r.getLang("labelMap."+i)||"";u&&(o=new t.Dialog(e.extend({iframeUrl:r.ui.mapUrl(u),editor:r,className:"edui-for-"+i,title:f,holdScroll:i==="insertimage",fullscreen:/preview/.test(i),closeDialog:r.getLang("closeDialog")},n==="ok"?{buttons:[{className:"edui-okbutton",label:r.getLang("ok"),editor:r,onclick:function(){o.close(!0)}},{className:"edui-cancelbutton",label:r.getLang("cancel"),editor:r,onclick:function(){o.close(!1)}}]}:{})),r.ui._dialogs[i+"Dialog"]=o);s=new t.Button({className:"edui-for-"+i,title:f,onclick:function(){if((!r.options.toolbarCallback||!0!==r.options.toolbarCallback(i,r))&&o)switch(i){case"wordimage":var n=r.execCommand("wordimage");n&&n.length&&(o.render(),o.open());break;case"scrawl":r.queryCommandState("scrawl")!==-1&&(o.render(),o.open());break;default:o.render();o.open()}},theme:r.options.theme,disabled:i==="scrawl"&&r.queryCommandState("scrawl")===-1});switch(i){case"insertimage":case"formula":s.shouldUiShow=function(n){return function(){let t=r.selection.getRange().getClosedNode();return!t||t.tagName!=="IMG"?!1:"formula"===n&&t.getAttribute("data-formula-image")!==null?!0:"insertimage"===n?!0:!1}}(i)}return t.buttons[i]=s,r.addListener("selectionchange",function(){var n;i in{edittable:1}||(n=r.queryCommandState(i),s.getDom()&&(s.setDisabled(n===-1),s.setChecked(n)))}),s}}(u.toLowerCase())})(f,c[f]);for(t.insertcode=function(n,i,r){var f,u;return i=n.options.insertcode||[],r=n.options.labelMap.insertcode||n.getLang("labelMap.insertcode")||"",f=[],e.each(i,function(t,i){f.push({label:t,value:i,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"<\/div>"}})}),u=new t.Combox({editor:n,items:f,onselect:function(t,i){n.execCommand("insertcode",this.items[i].value)},onbuttonclick:function(){this.showPopup()},title:r,initValue:r,className:"edui-for-insertcode",indexByValue:function(n){if(n)for(var t=0,i;i=this.items[t];t++)if(i.value.indexOf(n)!=-1)return t;return-1}}),t.buttons.insertcode=u,n.addListener("selectionchange",function(t,i,f){var o,e;if(!f)if(o=n.queryCommandState("insertcode"),o==-1)u.setDisabled(!0);else{if(u.setDisabled(!1),e=n.queryCommandValue("insertcode"),!e){u.setValue(r);return}e&&(e=e.replace(/['"]/g,"").split(",")[0]);u.setValue(e)}}),u},t.fontfamily=function(n,i,r){var o,f,s,h,u;if(i=n.options.fontfamily||[],r=n.options.labelMap.fontfamily||n.getLang("labelMap.fontfamily")||"",i.length){for(o=0,s=[];f=i[o];o++)h=n.getLang("fontfamily")[f.name]||"",function(t,i){s.push({label:t,value:i,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"<\/div>"}})}(f.label||h,f.val);return u=new t.Combox({editor:n,items:s,onselect:function(t,i){n.execCommand("FontFamily",this.items[i].value)},onbuttonclick:function(){this.showPopup()},title:r,initValue:r,className:"edui-for-fontfamily",indexByValue:function(n){if(n)for(var t=0,i;i=this.items[t];t++)if(i.value.indexOf(n)!=-1)return t;return-1}}),t.buttons.fontfamily=u,n.addListener("selectionchange",function(t,i,r){var e,f;r||(e=n.queryCommandState("FontFamily"),e==-1?u.setDisabled(!0):(u.setDisabled(!1),f=n.queryCommandValue("FontFamily"),f&&(f=f.replace(/['"]/g,"").split(",")[0]),u.setValue(f)))}),u}},t.fontsize=function(n,i,r){var e,f,o,u;if(r=n.options.labelMap.fontsize||n.getLang("labelMap.fontsize")||"",i=i||n.options.fontsize||[],i.length){for(e=[],f=0;f<i.length;f++)o=i[f]+"px",e.push({label:o,value:o,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"<\/div>"}});return u=new t.Combox({editor:n,items:e,title:r,initValue:r,onselect:function(t,i){n.execCommand("FontSize",this.items[i].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"}),t.buttons.fontsize=u,n.addListener("selectionchange",function(t,i,r){if(!r){var f=n.queryCommandState("FontSize");f==-1?u.setDisabled(!0):(u.setDisabled(!1),u.setValue(n.queryCommandValue("FontSize")))}}),u}},t.paragraph=function(n,i,r){var o,f,u;if(r=n.options.labelMap.paragraph||n.getLang("labelMap.paragraph")||"",i=n.options.paragraph||[],!e.isEmptyObject(i)){o=[];for(f in i)o.push({value:f,label:i[f]||n.getLang("paragraph")[f],theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"<\/span><\/div>"}});return u=new t.Combox({editor:n,items:o,title:r,initValue:r,className:"edui-for-paragraph",onselect:function(t,i){n.execCommand("Paragraph",this.items[i].value)},onbuttonclick:function(){this.showPopup()}}),t.buttons.paragraph=u,n.addListener("selectionchange",function(t,i,r){var e,f,o;r||(e=n.queryCommandState("Paragraph"),e==-1?u.setDisabled(!0):(u.setDisabled(!1),f=n.queryCommandValue("Paragraph"),o=u.indexByValue(f),o!=-1?u.setValue(f):u.setValue(u.initValue)))}),u}},t.customstyle=function(n){var u=n.options.customstyle||[],f=n.options.labelMap.customstyle||n.getLang("labelMap.customstyle")||"",e,o,r,s,i;if(u.length){for(e=n.getLang("customstyle"),o=0,r=[];s=u[o++];)(function(t){var i={};i.label=t.label?t.label:e[t.name];i.style=t.style;i.className=t.className;i.tag=t.tag;r.push({label:i.label,value:i,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+i.tag+" "+(i.className?' class="'+i.className+'"':"")+(i.style?' style="'+i.style+'"':"")+">"+i.label+"<\/"+i.tag+"><\/div>"}})})(s);return i=new t.Combox({editor:n,items:r,title:f,initValue:f,className:"edui-for-customstyle",onselect:function(t,i){n.execCommand("customstyle",this.items[i].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(n){for(var t=0,i;i=this.items[t++];)if(i.label==n)return t-1;return-1}}),t.buttons.customstyle=i,n.addListener("selectionchange",function(t,r,u){var e,f,o;u||(e=n.queryCommandState("customstyle"),e==-1?i.setDisabled(!0):(i.setDisabled(!1),f=n.queryCommandValue("customstyle"),o=i.indexByValue(f),o!=-1?i.setValue(f):i.setValue(i.initValue)))}),i}},t.inserttable=function(n,i,r){r=n.options.labelMap.inserttable||n.getLang("labelMap.inserttable")||"";var u=new t.TableButton({editor:n,title:r,className:"edui-for-inserttable",onpicktable:function(t,i,r){n.execCommand("InsertTable",{numRows:r,numCols:i,border:1})},onbuttonclick:function(){this.showPopup()}});return t.buttons.inserttable=u,n.addListener("selectionchange",function(){u.setDisabled(n.queryCommandState("inserttable")==-1)}),u},t.lineheight=function(n){var f=n.options.lineheight||[],e,r,u,i;if(f.length){for(e=0,u=[];r=f[e++];)u.push({label:r,value:r,theme:n.options.theme,onclick:function(){n.execCommand("lineheight",this.value)}});return i=new t.MenuButton({editor:n,className:"edui-for-lineheight",title:n.options.labelMap.lineheight||n.getLang("labelMap.lineheight")||"",items:u,onbuttonclick:function(){var t=n.queryCommandValue("LineHeight")||this.value;n.execCommand("LineHeight",t)}}),t.buttons.lineheight=i,n.addListener("selectionchange",function(){var r=n.queryCommandState("LineHeight"),t;r==-1?i.setDisabled(!0):(i.setDisabled(!1),t=n.queryCommandValue("LineHeight"),t&&i.setValue((t+"").replace(/cm/,"")),i.setChecked(r))}),i}},v=["top","bottom"],y=0;p=v[y++];)(function(n){t["rowspacing"+n]=function(i){var e=i.options["rowspacing"+n]||[],o,u,f,r;if(!e.length)return null;for(o=0,f=[];u=e[o++];)f.push({label:u,value:u,theme:i.options.theme,onclick:function(){i.execCommand("rowspacing",this.value,n)}});return r=new t.MenuButton({editor:i,className:"edui-for-rowspacing"+n,title:i.options.labelMap["rowspacing"+n]||i.getLang("labelMap.rowspacing"+n)||"",items:f,onbuttonclick:function(){var t=i.queryCommandValue("rowspacing",n)||this.value;i.execCommand("rowspacing",t,n)}}),t.buttons[n]=r,i.addListener("selectionchange",function(){var u=i.queryCommandState("rowspacing",n),t;u==-1?r.setDisabled(!0):(r.setDisabled(!1),t=i.queryCommandValue("rowspacing",n),t&&r.setValue((t+"").replace(/%/,"")),r.setChecked(u))}),r}})(p);for(w=["insertorderedlist","insertunorderedlist"],b=0;k=w[b++];)(function(n){t[n]=function(i){var f=i.options[n],o=function(){i.execCommand(n,this.value)},e=[],u,r;for(u in f)e.push({label:f[u]||i.getLang()[n][u]||"",value:u,theme:i.options.theme,onclick:o});return r=new t.MenuButton({editor:i,className:"edui-for-"+n,title:i.getLang("labelMap."+n)||"",items:e,onbuttonclick:function(){var t=i.queryCommandValue(n)||this.value;i.execCommand(n,t)}}),t.buttons[n]=r,i.addListener("selectionchange",function(){var t=i.queryCommandState(n),u;t==-1?r.setDisabled(!0):(r.setDisabled(!1),u=i.queryCommandValue(n),r.setValue(u),r.setChecked(t))}),r}})(k);t.fullscreen=function(n,i){i=n.options.labelMap.fullscreen||n.getLang("labelMap.fullscreen")||"";var r=new t.Button({className:"edui-for-fullscreen",title:i,theme:n.options.theme,onclick:function(){n.ui&&n.ui.setFullScreen(!n.ui.isFullScreen());this.setChecked(n.ui.isFullScreen())}});return t.buttons.fullscreen=r,n.addListener("selectionchange",function(){var t=n.queryCommandState("fullscreen");r.setDisabled(t==-1);r.setChecked(n.ui.isFullScreen())}),r};t.emotion=function(n,i){var r="emotion",u=new t.MultiMenuPop({title:n.options.labelMap[r]||n.getLang("labelMap."+r+"")||"",editor:n,className:"edui-for-"+r,iframeUrl:n.ui.mapUrl(i||(n.options.dialogIframeUrlMap||{})[r]||h[r])});return t.buttons[r]=u,n.addListener("selectionchange",function(){u.setDisabled(n.queryCommandState(r)==-1)}),u};t.autotypeset=function(n){var i=new t.AutoTypeSetButton({editor:n,title:n.options.labelMap.autotypeset||n.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){n.execCommand("autotypeset")}});return t.buttons.autotypeset=i,n.addListener("selectionchange",function(){i.setDisabled(n.queryCommandState("autotypeset")==-1)}),i};t.simpleupload=function(n){var r="simpleupload",i=new t.Button({className:"edui-for-"+r,title:n.options.labelMap[r]||n.getLang("labelMap."+r)||"",onclick:function(){},theme:n.options.theme,showText:!1});return t.buttons[r]=i,n.addListener("ready",function(){var t=i.getDom("body"),r=t.children[0];n.fireEvent("simpleuploadbtnready",r)}),n.addListener("selectionchange",function(t,u,f){var e=n.queryCommandState(r);e==-1?(i.setDisabled(!0),i.setChecked(!1)):f||(i.setDisabled(!1),i.setChecked(e))}),i}}(),function(){function f(n){this.initOptions(n);this.initEditorUI()}var t=r.editor.utils,e=r.editor.ui.uiUtils,s=r.editor.ui.UIBase,n=r.editor.dom.domUtils,o=[],u;f.prototype={uiName:"editor",initEditorUI:function(){function s(n,t){var r;n.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:n.options.wordCountMsg||n.getLang("wordCountMsg"),wordOverFlowMsg:n.options.wordOverFlowMsg||n.getLang("wordOverFlowMsg")});var i=n.options,u=i.maximumWords,e=i.wordCountMsg,o=i.wordOverFlowMsg,f=t.getDom("wordcount");i.wordCount&&(r=n.getContentLength(!0),r>u?(f.innerHTML=o,n.fireEvent("wordcountoverflow")):f.innerHTML=e.replace("{#leave}",u-r).replace("{#count}",r))}var t,f,u,e,o,i;this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();t=this.editor;f=this;t.addListener("ready",function(){t.getDialog=function(n){return t.ui._dialogs[n+"Dialog"]};n.on(t.window,"scroll",function(n){r.editor.ui.Popup.postHide(n)});if(t.ui._actualFrameWidth=t.options.initialFrameWidth,UE.browser.ie&&UE.browser.version===6&&t.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),t.options.elementPathEnabled&&(t.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+t.getLang("elementPathTip")+":<\/div>"),t.options.wordCount){function i(){s(t,f);n.un(t.document,"click",arguments.callee)}n.on(t.document,"click",i);t.ui.getDom("wordcount").innerHTML=t.getLang("wordCountTip")}(t.ui._scale(),t.options.scaleEnabled?(t.autoHeightEnabled&&t.disableAutoHeight(),f.enableScale()):f.disableScale(),t.options.elementPathEnabled||t.options.wordCount||t.options.scaleEnabled||(t.ui.getDom("elementpath").style.display="none",t.ui.getDom("wordcount").style.display="none",t.ui.getDom("scale").style.display="none"),t.selection.isFocus())&&t.fireEvent("selectionchange",!1,!0)});t.addListener("mousedown",function(n,t){var i=t.target||t.srcElement;r.editor.ui.Popup.postHide(t,i);r.editor.ui.ShortCutMenu.postHide(t)});t.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(t);t.getDialog("edittip").open()});e=!1;t.addListener("afterpaste",function(){t.queryCommandState("pasteplain")||(r.editor.ui.PastePicker&&(u=new r.editor.ui.Popup({content:new r.editor.ui.PastePicker({editor:t}),editor:t,className:"edui-wordpastepop"}),u.render()),e=!0)});t.addListener("afterinserthtml",function(){clearTimeout(o);o=setTimeout(function(){var r,f,i;u&&(e||t.ui._isTransfer)&&(u.isHidden()?(r=n.createElement(t.document,"span",{style:"line-height:0px;",innerHTML:"﻿"}),f=t.selection.getRange(),f.insertNode(r),i=c(r,"firstChild","previousSibling"),i&&u.showAnchor(i.nodeType==3?i.parentNode:i),n.remove(r)):u.show(),delete t.ui._isTransfer,e=!1)},200)});t.addListener("contextmenu",function(n,t){r.editor.ui.Popup.postHide(t)});t.addListener("keydown",function(n,t){u&&u.dispose(t);var i=t.keyCode||t.which;t.altKey&&i==90&&UE.ui.buttons.fullscreen.onclick()});t.addListener("wordcount",function(){s(this,f)});t.addListener("selectionchange",function(){t.options.elementPathEnabled&&f[(t.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]();t.options.scaleEnabled&&f[(t.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()});i=new r.editor.ui.Popup({editor:t,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();t.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(n){this.hide();t.ui._dialogs[n]&&t.ui._dialogs[n].open()},_onImgSetFloat:function(n){this.hide();t.execCommand("imagefloat",n)},_setIframeAlign:function(t){var u=i.anchorEl,r=u.cloneNode(!0);switch(t){case-2:r.setAttribute("align","");break;case-1:r.setAttribute("align","left");break;case 1:r.setAttribute("align","right")}u.parentNode.insertBefore(r,u);n.remove(u);i.anchorEl=r;i.showAnchor(i.anchorEl)},_updateIframe:function(){var r=t._iframe=i.anchorEl;n.hasClass(r,"ueditor_baidumap")?(t.selection.getRange().selectNode(r).select(),t.ui._dialogs.mapDialog.open(),i.hide()):(t.ui._dialogs.insertframeDialog.open(),i.hide())},_onRemoveButtonClick:function(n){t.execCommand(n);this.hide()},queryAutoHide:function(u){return u&&u.ownerDocument==t.document&&(u.tagName.toLowerCase()=="img"||n.findParentByTagName(u,"a",!0))?u!==i.anchorEl:r.editor.ui.Popup.prototype.queryAutoHide.call(this,u)}});i.render();t.options.imagePopup&&(t.addListener("mouseover",function(n,r){var u,f;r=r||window.event;u=r.target||r.srcElement;t.ui._dialogs.insertframeDialog&&/iframe/gi.test(u.tagName)&&(f=i.formatHtml('<nobr><span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+t.getLang("default")+'<\/span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+t.getLang("justifyleft")+'<\/span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+t.getLang("justifyright")+'<\/span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+t.getLang("modify")+"<\/span><\/nobr>"),f?(i.getDom("content").innerHTML=f,i.anchorEl=u,i.showAnchor(i.anchorEl)):i.hide())}),t.addListener("selectionchange",function(r,u){var o,s,h,c,l;if(u){var e="",f=t.selection.getRange().getClosedNode(),a=t.ui._dialogs;if(f&&f.tagName==="IMG"){if(o="insertimageDialog",(f.className.indexOf("edui-faked-video")!==-1||f.className.indexOf("edui-upload-video")!==-1)&&(o="insertvideoDialog"),(f.className.indexOf("edui-faked-audio")!==-1||f.className.indexOf("edui-upload-audio")!==-1)&&(o="insertaudioDialog"),f.getAttribute("anchorname")&&(o="anchorDialog",e=i.formatHtml('<nobr><span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+t.getLang("modify")+"<\/span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+t.getLang("delete")+"<\/span><\/nobr>")),(n.hasClass(f,"uep-loading")||n.hasClass(f,"uep-loading-error"))&&(o=""),!a[o])return;s=[];f.getAttribute("data-word-image")&&s.push("<span onclick=\"$$._onImgEditButtonClick('wordimageDialog');\" class='edui-clickable edui-popup-action-item'>"+t.getLang("save")+"<\/span>");s.length>0&&(s.unshift("<nobr>"),s.push("<\/nobr>"));e||(e=i.formatHtml(s.join("")))}t.ui._dialogs.linkDialog&&(h=t.queryCommandValue("link"),h&&(c=h.getAttribute("_href")||h.getAttribute("href",2))&&(l=c,c.length>30&&(l=c.substring(0,20)+"..."),e&&(e+='<div style="height:5px;"><\/div>'),e+=i.formatHtml("<nobr>"+t.getLang("anchorMsg")+': <a target="_blank" href="'+c+'" title="'+c+'" >'+l+'<\/a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+t.getLang("modify")+'<\/span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+t.getLang("clear")+"<\/span><\/nobr>"),i.showAnchor(h)));e?(i.getDom("content").innerHTML=e,i.anchorEl=f||h,i.showAnchor(i.anchorEl)):i.hide()}}))},_initToolbars:function(){var o=this.editor,h=this.toolbars||[],f,a,s,v,e,c,n,i,u,l;for(h[0]&&h[0].unshift("message"),f=[],a=[],s=0;s<h.length;s++){for(v=h[s],e=new r.editor.ui.Toolbar({theme:o.options.theme}),c=0;c<v.length;c++){if(n=v[c],i=null,typeof n=="string"){if(n=n.toLowerCase(),n==="|"&&(n="Separator"),n==="||"&&(n="Breakline"),u=r.editor.ui[n],u)if(t.isFunction(u))i=new r.editor.ui[n](o);else{if(u.id&&u.id!==o.key)continue;if(l=u.execFn.call(o,o,n),l)if(u.index===undefined){e.add(l);continue}else a.push({index:u.index,itemUI:l})}if(n==="fullscreen"){f&&f[0]?f[0].items.splice(0,0,i):i&&e.items.splice(0,0,i);continue}}else i=n;i&&i.id&&e.add(i)}f[s]=e}t.each(a,function(n){e.add(n.itemUI,n.index)});this.toolbars=f},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"<\/div><\/div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'<\/div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x<\/div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"><\/div><div style="height:0;overflow:hidden;clear:both;"><\/div><\/div><div id="##_message_holder" class="%%-messageholder"><\/div><\/div><div id="##_iframeholder" class="%%-iframeholder"><\/div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"><\/td><td id="##_wordcount" class="%%-wordcount"><\/td><td id="##_scale" class="%%-scale"><div class="%%-icon"><\/div><\/td><\/tr><\/table><\/div><div id="##_scalelayer"><\/div><\/div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var t=[],n=0;n<this.toolbars.length;n++)t.push(this.toolbars[n].renderHtml());return t.join("")},setFullScreen:function(n){var t=this.editor,u=t.container.parentNode.parentNode,e,s,f;if(this._fullscreen!=n){if(this._fullscreen=n,this.editor.fireEvent("beforefullscreenchange",n),r.editor.browser.gecko&&(e=t.selection.getRange().createBookmark()),n){for(this._bakEditorContaninerWidth=t.iframe.parentNode.style.width;u.tagName!=="BODY";)s=r.editor.dom.domUtils.getComputedStyle(u,"position"),o.push(s),u.style.position="static",u=u.parentNode;this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight());document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;t.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(u.tagName!=="BODY")u.style.position=o.shift(),u=u.parentNode;this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight());document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;t.iframe.parentNode.style.width=this._bakEditorContaninerWidth;window.scrollTo(0,this._bakScrollTop)}i.gecko&&t.body.contentEditable==="true"&&(f=document.createElement("input"),document.body.appendChild(f),t.body.contentEditable=!1,setTimeout(function(){f.focus();setTimeout(function(){t.body.contentEditable=!0;t.fireEvent("fullscreenchanged",n);t.selection.getRange().moveToBookmark(e).select(!0);r.editor.dom.domUtils.remove(f);n&&window.scroll(0,0)},0)},0));t.body.contentEditable==="true"&&(this.editor.fireEvent("fullscreenchanged",n),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var n=e.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:var(--ueditor-top-offset,"+(this.editor.options.topOffset||0)+"px);width:"+n.width+"px;height:"+n.height+"px;z-index:"+(this.getDom().style.zIndex*1+100),e.setViewportOffset(this.getDom(),{left:0}),this.editor.setHeight(n.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),i.gecko)try{window.onresize()}catch(t){}}},_updateElementPath:function(){var i=this.getDom("elementpath"),r,t,n,u;if(this.elementPathEnabled&&(r=this.editor.queryCommandValue("elementpath"))){for(t=[],n=0;u=r[n];n++)t[n]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+n+'&quot;);">'+u+"<\/span>");i.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+t.join(" &gt; ")+"<\/div>"}else i.style.display="none"},disableElementPath:function(){var n=this.getDom("elementpath");n.innerHTML="";n.style.display="none";this.elementPathEnabled=!1},enableElementPath:function(){var n=this.getDom("elementpath");n.style.display="";this.elementPathEnabled=!0;this._updateElementPath()},_scale:function(){function d(){c=n.getXY(e);l||(l=t.options.minFrameHeight+p.offsetHeight+w.offsetHeight);u.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+e.offsetWidth+"px;height:"+e.offsetHeight+"px;z-index:"+(t.options.zIndex+1);n.on(r,"mousemove",g);n.on(y,"mouseup",h);n.on(r,"mouseup",h)}function g(n){nt();var t=n||window.event;b=t.pageX||r.documentElement.scrollLeft+t.clientX;k=t.pageY||r.documentElement.scrollTop+t.clientY;a=b-c.x;v=k-c.y;a>=tt&&(s=!0,u.style.width=a+"px");v>=l&&(s=!0,u.style.height=v+"px")}function h(){s&&(s=!1,t.ui._actualFrameWidth=u.offsetWidth-2,e.style.width=t.ui._actualFrameWidth+"px",t.setHeight(u.offsetHeight-w.offsetHeight-p.offsetHeight-2,!0));u&&(u.style.display="none");nt();n.un(r,"mousemove",g);n.un(y,"mouseup",h);n.un(r,"mouseup",h)}function nt(){i.ie?r.selection.clear():window.getSelection().removeAllRanges()}var r=document,t=this.editor,e=t.container,y=t.document,p=this.getDom("toolbarbox"),w=this.getDom("bottombar"),o=this.getDom("scale"),u=this.getDom("scalelayer"),s=!1,c=null,l=0,tt=t.options.minFrameWidth,b=0,k=0,a=0,v=0,f=this;this.editor.addListener("fullscreenchanged",function(t,i){if(i)f.disableScale();else if(f.editor.options.scaleEnabled){f.enableScale();var r=f.editor.document.createElement("span");f.editor.body.appendChild(r);f.editor.body.style.height=Math.max(n.getXY(r).y,f.editor.iframe.offsetHeight-20)+"px";n.remove(r)}});this.enableScale=function(){if(t.queryCommandState("source")!=1){o.style.display="";this.scaleEnabled=!0;n.on(o,"mousedown",d)}};this.disableScale=function(){o.style.display="none";this.scaleEnabled=!1;n.un(o,"mousedown",d)}},isFullScreen:function(){return this._fullscreen},postRender:function(){var n;for(s.prototype.postRender.call(this),n=0;n<this.toolbars.length;n++)this.toolbars[n].postRender();var i=this,t,u=r.editor.dom.domUtils,f=function(){clearTimeout(t);t=setTimeout(function(){i._updateFullScreen()})};u.on(window,"resize",f);i.addListener("destroy",function(){u.un(window,"resize",f);clearTimeout(t)})},showToolbarMsg:function(n,t){if(this.getDom("toolbarmsg_label").innerHTML=n,this.getDom("toolbarmsg").style.display="",!t){var i=this.getDom("upload_dialog");i.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(n){return n?n.replace("~/",this.editor.options.UEDITOR_CORS_URL||""):""},triggerLayout:function(){var n=this.getDom();n.style.zoom=n.style.zoom=="1"?"100%":"1"}};t.inherits(f,r.editor.ui.UIBase);u={};UE.ui.Editor=function(i){var r=new UE.Editor(i),e;return r.options.editor=r,t.loadFile(document,{href:r.options.themePath+r.options.theme+"/css/ueditor.css?98125a73",tag:"link",type:"text/css",rel:"stylesheet"}),e=r.render,r.render=function(i){i.constructor===String&&(r.key=i,u[i]=r);t.domReady(function(){function t(){var o,h,t,c,l,a,u,s;for(r.setOpt({labelMap:r.options.labelMap||r.getLang("labelMap")}),new f(r.options),i&&(i.constructor===String&&(i=document.getElementById(i)),i&&i.getAttribute("name")&&(r.options.textarea=i.getAttribute("name")),i&&/script|textarea/gi.test(i.tagName)&&(o=document.createElement("div"),i.parentNode.insertBefore(o,i),h=i.value||i.innerHTML,r.options.initialContent=/^[\t\r\n ]*$/.test(h)?r.options.initialContent:h.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),i.className&&(o.className=i.className),i.style.cssText&&(o.style.cssText=i.style.cssText),/textarea/i.test(i.tagName)?(r.textarea=i,r.textarea.style.display="none"):i.parentNode.removeChild(i),i.id&&(o.id=i.id,n.removeAttributes(i,"id")),i=o,i.innerHTML="")),n.addClass(i,"edui-"+r.options.theme),r.ui.render(i),t=r.options,r.container=r.ui.getDom(),c=n.findParents(i,!0),l=[],u=0;s=c[u];u++)l[u]=s.style.display,s.style.display="block";for(t.initialFrameWidth?t.minFrameWidth=t.initialFrameWidth:(t.minFrameWidth=t.initialFrameWidth=i.offsetWidth,a=i.style.width,/%$/.test(a)&&(t.initialFrameWidth=a)),t.initialFrameHeight?t.minFrameHeight=t.initialFrameHeight:t.initialFrameHeight=t.minFrameHeight=i.offsetHeight,u=0;s=c[u];u++)s.style.display=l[u];i.style.height&&(i.style.height="");r.container.style.width=t.initialFrameWidth+(/%$/.test(t.initialFrameWidth)?"":"px");r.container.style.zIndex=t.zIndex;e.call(r,r.ui.getDom("iframeholder"));r.fireEvent("afteruiready")}r.langIsReady?t():r.addListener("langReady",t)})},r};UE.getEditor=function(n,t){var i=u[n];return i||(i=u[n]=new UE.ui.Editor(t),i.render(n)),i};UE.delEditor=function(n){var t;(t=u[n])&&(t.key&&t.destroy(),delete u[n])};UE.registerUI=function(n,i,u,f){t.each(n.split(/\s+/),function(n){r.editor.ui[n]={id:f,execFn:i,index:u}})}}();UE.registerUI("message",function(n){function e(){if(u&&i.ui){var n=i.ui.getDom("toolbarbox");n&&(u.style.top=n.offsetHeight+3+"px");u.style.zIndex=Math.max(i.options.zIndex,i.iframe.style.zIndex)+1}}var o=r.editor.ui,s=o.Message,u,f=[],i=n;(i.setOpt("enableMessageShow",!0),i.getOpt("enableMessageShow")!==!1)&&(i.addListener("ready",function(){u=document.getElementById(i.ui.id+"_message_holder");e();setTimeout(function(){e()},500)}),i.addListener("showmessage",function(n,r){r=t.isString(r)?{content:r}:r;var o=new s({timeout:r.timeout,type:r.type,content:r.content,keepshow:r.keepshow,editor:i}),h=r.id||"msg_"+(+new Date).toString(36);return o.render(u),f[h]=o,o.reset(r),e(),h}),i.addListener("updatemessage",function(n,i,r){r=t.isString(r)?{content:r}:r;var e=f[i];e.render(u);e&&e.reset(r)}),i.addListener("hidemessage",function(n,t){var i=f[t];i&&i.hide()}))})})();